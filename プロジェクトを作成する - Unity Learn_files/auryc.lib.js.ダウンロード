/**
 * Auryc JavaScript Client-Side Library v4.7.5, 1699301054576
 * (c) Copyright 2023, Auryc Inc. https://www.auryc.com
 */

try{try{Symbol.for("test")}catch(e){delete Symbol,"undefined"!=typeof window&&window&&window.localStorage&&"true"===window.localStorage.getItem("ardebug")&&console.log("Symbol exception",e)}!function(){var win,win="undefined"==typeof window?{navigator:{},console:{},location:{},document:{}}:window,windowNavigator=win.navigator,windowConsole=win.console,windowLocation=win.location,windowDocument=win.document,debugMsgHeader="Auryc Debug Message";function log(e,t){}function warn(e){}function error(e){}function critical(e){}function isLiveDebug(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all";return 0<window.location.href.indexOf("#ardebug")||window.localStorage&&window.localStorage.getItem("ardebug")&&("true"===window.localStorage.getItem("ardebug")||-1<window.localStorage.getItem("ardebug").indexOf(e))}function liveDebug(){if(isLiveDebug()){console.group&&console.group(debugMsgHeader);for(var e=0;e<arguments.length;e++)console.log(arguments[e]);console.groupEnd&&console.groupEnd()}}var logger={log:log,warn:warn,error:error,critical:critical,isLiveDebug:isLiveDebug,liveDebug:liveDebug},time={FULL_DAY:864e5,MAX_DOMLOAD_TIME:6e4,MIN_DOMLOAD_TIME:10},symbols={CANCELED:"ic",UNREGISTERED:"iug",SESSION:"SESS",DATA:"DATA",PERMANENT:"PERMANENT",EXPIRED:"expired",SESSIONID:"sessid",APITOKEN:"at",DEFINEDEVENTS:"DEFINEDEVENTS",FBTHANKYOU:"FBTHANKYOU",FEEDBACKCONTENT:"FEEDBACKCONTENT",FEEDBACKCONTENT_DESKTOP:"FEEDBACKCONTENT_DESKTOP",GLOBALSESSIONID:"gsid",UNDEFINED:"undefined",DEVICE:"auryc20160418",OVERRIDEFLAG:"aurycoverrideflag",SPLITFLAG:"_auryc_split_",FEEDBACKINVITE:"FEEDBACKINVITE",FEEDBACKINVITE_DESKTOP:"FEEDBACKINVITE_DESKTOP",IDENTITY_IN_SESSION:"identity_in_session",IDENTITY_INIT:"identity_init",INTEGRATION_FLAG:"auryc_integration"},event_marker_keys={AurycHashKey:"_aurychash",AurycTimeZone:"_aurycTimeZone",TimeTraveling:"timeTraveling",AurycMode:"_aurycMode",OriginalHash:"_originalHash",LAUNCH_EVENT_MARER:"launch_event_marker",EM_EDITOR_MODE:"em_edit_mode",EM_BROWSE_MODE:"em_browse_mode",OAuthToken:"_auryc_oauth_token"},css={PX:"px",H1:"h1",TOP:"top",LEFT:"left",AUTO:"auto",FB_QB_CHOOSE:"auryc-feedback-question-select-choose",FB_TEXTAREA:"auryc-feedback-fbtarea",SELECT:"select",DEFAULT_HEIGHT:35,TEXT_LIMIT:1e3,FB_TOPIC:"auryc-feedback-fbquestiongroup-shown",FB_QUESTION:"auryc-feedback-fbquestion",FBMODAL_CONTAINER:"auryc-fbmodal-container",FB_QID:"questionid",FB_QTYPE:"data-question-type",CHECKBOX:"CHECKBOX",RADIO:"RADIO",HIDDEN:"HIDDEN",REQUIRED:"REQUIRED",INVALID:"data-ar-invalid",HEADING_H1:"auryc-feedback-fbform-headtag auryc-feedback-fbform-headtag-h1",FB_SUBMIT:"post-fb-resp-button",FB_TOPIC_SEL:"auryc-feedback-fbquestion .auryc-fb-questiongroup-selector"},keyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},record={cssSerializationSamplingRate:10,mutatationConfig:{ignoreNodeContentsList:["hr","script","title","br","meta","svg"],ignoreAttrList:["script","meta","title","data-ae_domuel","data-ae_domsib","_au_pathid","data-content","data-original-title","data-json","data-tarifa"]},tags:{SVG:"svg",SELECT:"select",IH:"innerHTML"},cache:{minLength:100,maxItems:500,maxSize:5e6},throttler:{RESIZE:700,ORIENTATION_CHANGE:200,CURSOR_INFO_INTERVAL:500,SERIALIZE_INPUT_DELAY:100,WIN_EVENT_THROTTLE:200,CLICK_THROTTLE:200,DOM_MUT_DELAY:500,DOM_MUT_MAX_NUM:1e3,DOM_MUT_MAX_SIZE:1e7,IMG_SRC_LENGTH:25e4,AUTOCAPTURE_CUSTOM_EVENT_INTERVAL:1e3},timeOffset:{WIN_SIZE:-350},upload:{fragLength:1e5,delim:"__D__",defaultTransmitInterval:10,defaultMobileTransmitInterval:5,defaultMaxTransmitInterval:20,defaultMobileMaxTransmitInterval:10,initTimeOffset:15e3,wait:2e3,shortWait:200,pingWaitInterval:2e3,maxRetryTime:108e5},form:{inputTypes:"input, select, textarea"},attr:{FEC:"firstElementChild",virtualStyleId:"_arblb_"},inspect:JSON.parse('{"timingMeasure":["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],"navigationMeasure":["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","type","redirectCount","decodedBodySize","encodedBodySize","transferSize"],"resourceMeasure":["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","decodedBodySize","encodedBodySize","transferSize"],"memoryMeasure":["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],"userTimingMeasure":["name","startTime","duration"],"ajaxType":["xmlhttprequest","fetch"],"resHeaderAllowed":["accept-patch","accept-ranges","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-allow-origin","access-control-expose-headers","access-control-max-age","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","p3p","permanent","permanent","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","tk","trailer","transfer-encoding","upgrade","vary","via","warning","www-authenticate","x-frame-options"],"reqHeaderAllowed":["accept","accept-charset","accept-datetime","accept-encoding","accept-language","access-control-request-headers","access-control-request-method","cache-control","connection","content-length","content-md5","content-type","date","expect","forwarded","from","host","if-match","if-modified-since","if-none-match","if-range","if-unmodified-since","max-forwards","origin","pragma","range","referrer","te","upgrade","user-agent","via","warning"]}')},events={PAGEVIEWTRIGGER:"pageViewTrigger",URLCHANGETRIGGER:"urlChangeTrigger",IDENTIFYTRIGGER:"identifyTrigger",PAGEVIEWTRACKER:"pageview",FEEDBACKTRIGGER:"feedbackTrigger",FEEDBACKTRACKER:"feedback",CLICKTRACKER:"click",CLICKTRIGGER:"clickTrigger",PINGTRACKER:"ping",IDENTIFYTRACKER:"identify",PINGTRIGGER:"pingTrigger",USERIDENTIFY:"userIdentify",USERPROP:"up",TRACKCUSTOMEVENT:"trackCustomEvent",SESSIONPROP:"_ar_sp_",INTERNALSESSIONPROP:"_isp_",SESSIONTIME:"st",SESSIONDURATION:"session_duration",USERID:"userId",UBTINIT:"ubt_init",IDENTITYVALUE:"iv",UBT_INDEPENDENT:"ubt_independent",PV_START_TS:"pst",TRANSMITTING:"ut",WRITABLE:"ut",TRANSMIT_ENABLED:"ut",CANCELED:"uc",NEW_SESSION:"new_session",VISIT_DURATION:18e5,SESSION_EXP:"se",WIN_SIZE:"ws",CUSTOM_EVENT:"CUSTOM",READY:"ready",ENDSESSION:"endsession",IDGEN:{behavior:50,sessions:64,interactions:0}},uba_event_type={CUSTOM_EVENT:"CUSTOM"},storage={FEEDBACK_STYLE:"_ar_:feedback:auryc_style",AUTOCAPTURE_CUSTOM_EVENT_THROTTLE_LIMIT:1e5,EVENT_CACHE_MAX_LENGTH:1e7,WINNAME_MAX_LENGTH:1e7,MAX_PROPERTIES:100,MAX_DEV_CONSOLE_EVENT:20,CONSOLE_MSG_LENGTH:1e3,CONSOLE_MSG_STACKTRACE_LENGTH:1e4,DEFAULT_LIMIT:8e5,MAX_PACKET_SIZE:2e6,AJAX_URL_LIMIT:256,AJAX_RESPONSE_LIMIT:32,MAX_LATENCY:3e4,LATENCY_BUCKET_WIDTH:3e3,RETRY_LIMIT:10,SESSIONID:"sid",VIEWID:"vid",LASTVIEWID:"last_vid",USERID:"uid",HOST:"host",ACTIVE_VIEWID:"active_viewid",SESSION_METADATA:"session_md",TRANSMIT_ENABLED:"te",SESSION_STATE:"ss",PV:"pv",PVCT:"pv_count",IS_NEW:"isNew",DEFAULT_DATALAYER_PREFIX:"auryc.s",DEFAULT_COOKIE_DURATION:730,SCOPE:{SESSION:{TAB:"TAB",BROWSER:"BROWSER"}},ID_LENGTH:32,IDENTITY_KEY:"au_identity",DOM_MUT_DELAY:500,DOM_MUT_MAX_NUM:1e3,DOM_MUT_MAX_SIZE:1e7,SESSION_INIT_SIZE:"session_init_size",SESSION_CORS_IFRMAE:"session_cros_iframe",LAST_PV_VIEWID:"lpv"},features={PACKET_SPLIT:!1,AJAX:!1},ajax_proxy={limits:{size:1048576},type:{xhr:"xhr",fetch:"fetch"},readOnlyAttr:["readyState","responseURL","status","statusText","response","responseText","responseURL","responseXML","upload","timeout"],domainFilters:"www.google-analytics.com|dc.services.visualstudio.com|in.hotjar.com|monitor.clickcease.com|sentry.io|api.amplitude.com|api.segment.io|cdn.uplift-platform.com|bttrack.com|mt.auryc.com|mt-mir.auryc.com|socket.io|fullstory.com|api-iam.intercom.io"},pii={maskingAttributes:["value","src","data","alt"],maskingClassName:"_ar_hide_",maskingProperty:"_ar_hide_p_",redactingAttributes:["alt","title","value","placeholder","aria-label","label","href"],redactingClassName:"_ar_redact_",whitelistClassName:"_ar_wl_",creditCardAtt:["cc","creditcard","ccnum","ccname","ccnumber","ccexpiry","ccexp","ccexpmonth","ccexpyear","cccvc","cccvv","cctype","cvc","cvv","cccid","expiration","ssn","paymentnumberinput","securitycodeinput"],ignoreAttributes:[],geoContinent:"continent",geoCountry:"country",geoIP:"_ar_ip_address"},linkid={aurycMode:"_aurychash",editorHash:"_editorhash"},cookies={encoding:{BASE64:"base64",URI:"uri",NONE:"none"}},excluded={urls:[]},exit_popup={scrollPercent:20,scrollInterval:400},api={enable_console:"enable_console",disable_console:"disable_console",enable_network:"enable_network",disable_network:"disable_network"},constants={time:time,symbols:symbols,events:events,uba_event_type:uba_event_type,storage:storage,features:features,ajax_proxy:ajax_proxy,css:css,record:record,keyCodes:keyCodes,pii:pii,cookies:cookies,linkid:linkid,excluded:excluded,exit_popup:exit_popup,api:api,event_marker_keys:event_marker_keys};function identity(e){return e}var identity_1=identity;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply,nativeMax=Math.max;function overRest(a,o,s){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,r=nativeMax(e.length-o,0),n=Array(r);++t<r;)n[t]=e[o+t];t=-1;for(var i=Array(o+1);++t<o;)i[t]=e[t];return i[o]=s(n),_apply(a,this,i)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{var n=!(e[symToStringTag]=void 0)}catch(e){}var i=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=r:delete e[symToStringTag]),i}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol&&"symbol"==typeof _Symbol.toStringTag?_Symbol.toStringTag:void 0;function baseGetTag(e){try{return null==e?void 0===e?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag:_objectToString)(e)}catch(e){return undefinedTag}}var _baseGetTag=baseGetTag;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=(la=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""),la?"Symbol(src)_1."+la:""),la;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(r){var n=0,i=0;return function(){var e=nativeNow(),t=HOT_SPAN-(e-i);if(i=e,0<t){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest,WeakMap$1=_getNative(_root,"WeakMap"),_WeakMap=WeakMap$1,metaMap=_WeakMap&&new _WeakMap,_metaMap=metaMap,baseSetData=_metaMap?function(e,t){return _metaMap.set(e,t),e}:identity_1,_baseSetData=baseSetData,objectCreate=Object.create,baseCreate=function(e){if(!isObject_1(e))return{};if(objectCreate)return objectCreate(e);La.prototype=e;var t=new La;return La.prototype=void 0,t};function La(){}var _baseCreate=baseCreate;function createCtor(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=_baseCreate(n.prototype),r=n.apply(t,e);return isObject_1(r)?r:t}}var _createCtor=createCtor,WRAP_BIND_FLAG=1;function createBind(t,e,r){var n=e&WRAP_BIND_FLAG,i=_createCtor(t);return function e(){return(this&&this!==_root&&this instanceof e?i:t).apply(n?r:this,arguments)}}var _createBind=createBind,nativeMax$1=Math.max;function composeArgs(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,c=t.length,l=nativeMax$1(a-o,0),g=Array(c+l),u=!n;++s<c;)g[s]=t[s];for(;++i<o;)(u||i<a)&&(g[r[i]]=e[i]);for(;l--;)g[s++]=e[i++];return g}var _composeArgs=composeArgs,nativeMax$2=Math.max;function composeArgsRight(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,c=-1,l=t.length,g=nativeMax$2(a-s,0),u=Array(g+l),d=!n;++i<g;)u[i]=e[i];for(var h=i;++c<l;)u[h+c]=t[c];for(;++o<s;)(d||i<a)&&(u[h+r[o]]=e[i++]);return u}var _composeArgsRight=composeArgsRight;function countHolders(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var _countHolders=countHolders;function baseLodash(){}var _baseLodash=baseLodash,MAX_ARRAY_LENGTH=4294967295;function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}LazyWrapper.prototype=_baseCreate(_baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;var _LazyWrapper=LazyWrapper;function noop(){}var noop_1=noop,getData=_metaMap?function(e){return _metaMap.get(e)}:noop_1,_getData=getData,realNames={},_realNames=realNames,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function getFuncName(e){for(var t=e.name+"",r=_realNames[t],n=hasOwnProperty$2.call(_realNames,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}var _getFuncName=getFuncName;function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}LodashWrapper.prototype=_baseCreate(_baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var _LodashWrapper=LodashWrapper,isArray=Array.isArray,isArray_1=isArray;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike;function copyArray(e,t){var r=-1,n=e.length;for(t=t||Array(n);++r<n;)t[r]=e[r];return t}var _copyArray=copyArray;function wrapperClone(e){if(e instanceof _LazyWrapper)return e.clone();var t=new _LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=_copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var _wrapperClone=wrapperClone,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function lodash(e){if(isObjectLike_1(e)&&!isArray_1(e)&&!(e instanceof _LazyWrapper)){if(e instanceof _LodashWrapper)return e;if(hasOwnProperty$3.call(e,"__wrapped__"))return _wrapperClone(e)}return new _LodashWrapper(e)}lodash.prototype=_baseLodash.prototype,lodash.prototype.constructor=lodash;var wrapperLodash=lodash;function isLaziable(e){var t=_getFuncName(e),r=wrapperLodash[t];if("function"!=typeof r||!(t in _LazyWrapper.prototype))return!1;if(e===r)return!0;var n=_getData(r);return!!n&&e===n[0]}var _isLaziable=isLaziable,setData=_shortOut(_baseSetData),_setData=setData,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;function getWrapDetails(e){var t=e.match(reWrapDetails);return t?t[1].split(reSplitDetails):[]}var _getWrapDetails=getWrapDetails,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function insertWrapDetails(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(1<r?"& ":"")+t[n],t=t.join(2<r?", ":" "),e.replace(reWrapComment,"{\n/* [wrapped with "+t+"] */\n")}var _insertWrapDetails=insertWrapDetails;function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var _arrayEach=arrayEach;function baseFindIndex(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var _baseFindIndex=baseFindIndex;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,r){return t==t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}var _baseIndexOf=baseIndexOf;function arrayIncludes(e,t){return!!(null==e?0:e.length)&&-1<_baseIndexOf(e,t,0)}var _arrayIncludes=arrayIncludes,WRAP_BIND_FLAG$1=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG$1],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];function updateWrapDetails(r,n){return _arrayEach(wrapFlags,function(e){var t="_."+e[0];n&e[1]&&!_arrayIncludes(r,t)&&r.push(t)}),r.sort()}var _updateWrapDetails=updateWrapDetails;function setWrapToString(e,t,r){var n=t+"";return _setToString(e,_insertWrapDetails(n,_updateWrapDetails(_getWrapDetails(n),r)))}var _setWrapToString=setWrapToString,WRAP_BIND_FLAG$2=1,WRAP_BIND_KEY_FLAG$1=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG$1=8,WRAP_PARTIAL_FLAG$1=32,WRAP_PARTIAL_RIGHT_FLAG$1=64;function createRecurry(e,t,r,n,i,a,o,s,c,l){var g=t&WRAP_CURRY_FLAG$1;t|=g?WRAP_PARTIAL_FLAG$1:WRAP_PARTIAL_RIGHT_FLAG$1,(t&=~(g?WRAP_PARTIAL_RIGHT_FLAG$1:WRAP_PARTIAL_FLAG$1))&WRAP_CURRY_BOUND_FLAG||(t&=~(WRAP_BIND_FLAG$2|WRAP_BIND_KEY_FLAG$1));var u=[e,t,i,g?a:void 0,g?o:void 0,g?void 0:a,g?void 0:o,s,c,l],d=r.apply(void 0,u);return _isLaziable(e)&&_setData(d,u),d.placeholder=n,_setWrapToString(d,e,t)}var _createRecurry=createRecurry;function getHolder(e){return e.placeholder}var _getHolder=getHolder,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&-1<e&&e%1==0&&e<t}var _isIndex=isIndex,nativeMin=Math.min;function reorder(e,t){for(var r=e.length,n=nativeMin(t.length,r),i=_copyArray(e);n--;){var a=t[n];e[n]=_isIndex(a,r)?i[a]:void 0}return e}var _reorder=reorder,PLACEHOLDER="__lodash_placeholder__";function replaceHolders(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==PLACEHOLDER||(e[r]=PLACEHOLDER,a[i++]=r)}return a}var _replaceHolders=replaceHolders,WRAP_BIND_FLAG$3=1,WRAP_BIND_KEY_FLAG$2=2,WRAP_CURRY_FLAG$2=8,WRAP_CURRY_RIGHT_FLAG$1=16,WRAP_ARY_FLAG$1=128,WRAP_FLIP_FLAG$1=512;function createHybrid(l,g,u,d,h,p,f,I,m,b){var C=g&WRAP_ARY_FLAG$1,y=g&WRAP_BIND_FLAG$3,A=g&WRAP_BIND_KEY_FLAG$2,v=g&(WRAP_CURRY_FLAG$2|WRAP_CURRY_RIGHT_FLAG$1),w=g&WRAP_FLIP_FLAG$1,S=A?void 0:_createCtor(l);return function e(){for(var t,r,n=arguments.length,i=Array(n),a=n;a--;)i[a]=arguments[a];if(v&&(t=_getHolder(e),r=_countHolders(i,t)),d&&(i=_composeArgs(i,d,h,v)),p&&(i=_composeArgsRight(i,p,f,v)),n-=r,v&&n<b){var o=_replaceHolders(i,t);return _createRecurry(l,g,createHybrid,e.placeholder,u,i,o,I,m,b-n)}var s=y?u:this,c=A?s[l]:l,n=i.length;return I?i=_reorder(i,I):w&&1<n&&i.reverse(),C&&m<n&&(i.length=m),this&&this!==_root&&this instanceof e&&(c=S||_createCtor(c)),c.apply(s,i)}}var _createHybrid=createHybrid;function createCurry(o,s,c){var l=_createCtor(o);return function e(){for(var t=arguments.length,r=Array(t),n=t,i=_getHolder(e);n--;)r[n]=arguments[n];var a=t<3&&r[0]!==i&&r[t-1]!==i?[]:_replaceHolders(r,i);return(t-=a.length)<c?_createRecurry(o,s,_createHybrid,e.placeholder,void 0,r,a,void 0,void 0,c-t):_apply(this&&this!==_root&&this instanceof e?l:o,this,r)}}var _createCurry=createCurry,WRAP_BIND_FLAG$4=1;function createPartial(s,e,c,l){var g=e&WRAP_BIND_FLAG$4,u=_createCtor(s);return function e(){for(var t=-1,r=arguments.length,n=-1,i=l.length,a=Array(i+r),o=this&&this!==_root&&this instanceof e?u:s;++n<i;)a[n]=l[n];for(;r--;)a[n++]=arguments[++t];return _apply(o,g?c:this,a)}}var _createPartial=createPartial,PLACEHOLDER$1="__lodash_placeholder__",WRAP_BIND_FLAG$5=1,WRAP_BIND_KEY_FLAG$3=2,WRAP_CURRY_BOUND_FLAG$1=4,WRAP_CURRY_FLAG$3=8,WRAP_ARY_FLAG$2=128,WRAP_REARG_FLAG$1=256,nativeMin$1=Math.min;function mergeData(e,t){var r=e[1],n=t[1],i=r|n,a=i<(WRAP_BIND_FLAG$5|WRAP_BIND_KEY_FLAG$3|WRAP_ARY_FLAG$2),o=n==WRAP_ARY_FLAG$2&&r==WRAP_CURRY_FLAG$3||n==WRAP_ARY_FLAG$2&&r==WRAP_REARG_FLAG$1&&e[7].length<=t[8]||n==(WRAP_ARY_FLAG$2|WRAP_REARG_FLAG$1)&&t[7].length<=t[8]&&r==WRAP_CURRY_FLAG$3;if(!a&&!o)return e;n&WRAP_BIND_FLAG$5&&(e[2]=t[2],i|=r&WRAP_BIND_FLAG$5?0:WRAP_CURRY_BOUND_FLAG$1);var s,c=t[3];return c&&(s=e[3],e[3]=s?_composeArgs(s,c,t[4]):c,e[4]=s?_replaceHolders(e[3],PLACEHOLDER$1):t[4]),(c=t[5])&&(s=e[5],e[5]=s?_composeArgsRight(s,c,t[6]):c,e[6]=s?_replaceHolders(e[5],PLACEHOLDER$1):t[6]),(c=t[7])&&(e[7]=c),n&WRAP_ARY_FLAG$2&&(e[8]=null==e[8]?t[8]:nativeMin$1(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}var _mergeData=mergeData,symbolTag="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN;var t;if(isObject_1(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=isObject_1(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){return e?(e=toNumber_1(e))!==INFINITY&&e!==-INFINITY?e==e?e:0:(e<0?-1:1)*MAX_INTEGER:0===e?e:0}var toFinite_1=toFinite;function toInteger(e){var t=toFinite_1(e),r=t%1;return t==t?r?t-r:t:0}var toInteger_1=toInteger,FUNC_ERROR_TEXT="Expected a function",WRAP_BIND_FLAG$6=1,WRAP_BIND_KEY_FLAG$4=2,WRAP_CURRY_FLAG$4=8,WRAP_CURRY_RIGHT_FLAG$2=16,WRAP_PARTIAL_FLAG$2=32,WRAP_PARTIAL_RIGHT_FLAG$2=64,nativeMax$3=Math.max;function createWrap(e,t,r,n,i,a,o,s){var c=t&WRAP_BIND_KEY_FLAG$4;if(!c&&"function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);var l,g,u=n?n.length:0;u||(t&=~(WRAP_PARTIAL_FLAG$2|WRAP_PARTIAL_RIGHT_FLAG$2),n=i=void 0),o=void 0===o?o:nativeMax$3(toInteger_1(o),0),s=void 0===s?s:toInteger_1(s),u-=i?i.length:0,t&WRAP_PARTIAL_RIGHT_FLAG$2&&(l=n,g=i,n=i=void 0);var d,h=c?void 0:_getData(e),p=[e,t,r,n,i,l,g,a,o,s];return h&&_mergeData(p,h),e=p[0],t=p[1],r=p[2],n=p[3],i=p[4],!(s=p[9]=void 0===p[9]?c?0:e.length:nativeMax$3(p[9]-u,0))&&t&(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)&&(t&=~(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)),d=t&&t!=WRAP_BIND_FLAG$6?t==WRAP_CURRY_FLAG$4||t==WRAP_CURRY_RIGHT_FLAG$2?_createCurry(e,t,s):t!=WRAP_PARTIAL_FLAG$2&&t!=(WRAP_BIND_FLAG$6|WRAP_PARTIAL_FLAG$2)||i.length?_createHybrid.apply(void 0,p):_createPartial(e,t,r,n):_createBind(e,t,r),_setWrapToString((h?_baseSetData:_setData)(d,p),e,t)}var _createWrap=createWrap,WRAP_BIND_FLAG$7=1,WRAP_PARTIAL_FLAG$3=32,bind=_baseRest(function(e,t,r){var n,i=WRAP_BIND_FLAG$7;return r.length&&(n=_replaceHolders(r,_getHolder(bind)),i|=WRAP_PARTIAL_FLAG$3),_createWrap(e,i,t,r,n)});bind.placeholder={};var bind_1=bind;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return-1<_assocIndexOf(this.__data__,e)}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,Map$1=_getNative(_root,"Map"),_Map=Map$1,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$4.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$5.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue;function assignMergeValue(e,t,r){(void 0===r||eq_1(e[t],r))&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignMergeValue=assignMergeValue;function createBaseFor(c){return function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[c?o:++n];if(!1===t(i[s],s,i))break}return e}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor,_cloneBuffer=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}),Uint8Array$1=_root.Uint8Array,_Uint8Array=Uint8Array$1;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer;function cloneTypedArray(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray;function overArg(t,r){return function(e){return t(r(e))}}var _overArg=overArg,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,objectProto$7=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$7)}var _isPrototype=isPrototype;function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}var _initCloneObject=initCloneObject,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,propertyIsEnumerable=objectProto$8.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$6.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength;function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike;function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,a=(i?i.isBuffer:void 0)||stubFalse_1;e.exports=a}),objectTag="[object Object]",funcProto$2=Function.prototype,objectProto$9=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$7.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(t){return function(e){return t(e)}}var _baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&_freeGlobal.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e?e:i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray;function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _safeGet=safeGet,objectProto$10=Object.prototype,hasOwnProperty$8=objectProto$10.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$8.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue;function copyObject(e,t,r,n){var i=!r;r=r||{};for(var a=-1,o=t.length;++a<o;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),(i?_baseAssignValue:_assignValue)(r,s,c)}return r}var _copyObject=copyObject;function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes,objectProto$11=Object.prototype,hasOwnProperty$9=objectProto$11.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),i=!r&&!n&&isBuffer_1(e),a=!r&&!n&&!i&&isTypedArray_1(e),o=r||n||i||a,s=o?_baseTimes(e.length,String):[],c=s.length;for(var l in e)!t&&!hasOwnProperty$9.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||_isIndex(l,c))||s.push(l);return s}var _arrayLikeKeys=arrayLikeKeys;function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn,objectProto$12=Object.prototype,hasOwnProperty$10=objectProto$12.hasOwnProperty;function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$10.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn;function keysIn$1(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn$1;function toPlainObject(e){return _copyObject(e,keysIn_1(e))}var toPlainObject_1=toPlainObject;function baseMergeDeep(e,t,r,n,i,a,o){var s,c,l,g,u,d=_safeGet(e,r),h=_safeGet(t,r),p=o.get(h);p?_assignMergeValue(e,r,p):((s=void 0===(u=a?a(d,h,r+"",e,t,o):void 0))&&(l=!(c=isArray_1(h))&&isBuffer_1(h),g=!c&&!l&&isTypedArray_1(h),u=h,c||l||g?u=isArray_1(d)?d:isArrayLikeObject_1(d)?_copyArray(d):l?_cloneBuffer(h,!(s=!1)):g?_cloneTypedArray(h,!(s=!1)):[]:isPlainObject_1(h)||isArguments_1(h)?isArguments_1(u=d)?u=toPlainObject_1(d):isObject_1(d)&&!isFunction_1(d)||(u=_initCloneObject(h)):s=!1),s&&(o.set(h,u),i(u,h,n,a,o),o.delete(h)),_assignMergeValue(e,r,u))}var _baseMergeDeep=baseMergeDeep;function baseMerge(n,i,a,o,s){n!==i&&_baseFor(i,function(e,t){var r;s=s||new _Stack,isObject_1(e)?_baseMergeDeep(n,i,t,a,baseMerge,o,s):(void 0===(r=o?o(_safeGet(n,t),e,t+"",n,i,s):void 0)&&(r=e),_assignMergeValue(n,t,r))},keysIn_1)}var _baseMerge=baseMerge;function isIterateeCall(e,t,r){if(!isObject_1(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}var _isIterateeCall=isIterateeCall;function createAssigner(s){return _baseRest(function(e,t){var r=-1,n=t.length,i=1<n?t[n-1]:void 0,a=2<n?t[2]:void 0,i=3<s.length&&"function"==typeof i?(n--,i):void 0;for(a&&_isIterateeCall(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&s(e,o,r,i)}return e})}var _createAssigner=createAssigner,merge=_createAssigner(function(e,t,r){_baseMerge(e,t,r)}),merge_1=merge;function baseExtremum(e,t,r){for(var n=-1,i=e.length;++n<i;){var a,o,s=e[n],c=t(s);null!=c&&(void 0===a?c==c&&!isSymbol_1(c):r(c,a))&&(a=c,o=s)}return o}var _baseExtremum=baseExtremum;function baseGt(e,t){return t<e}var _baseGt=baseGt;function max(e){return e&&e.length?_baseExtremum(e,identity_1,_baseGt):void 0}var max_1=max,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,FUNC_ERROR_TEXT$1="Expected a function";function memoize(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new TypeError(FUNC_ERROR_TEXT$1);var o=function(){var e=arguments,t=a?a.apply(this,e):e[0],r=o.cache;if(r.has(t))return r.get(t);var n=i.apply(this,e);return o.cache=r.set(t,n)||r,n};return o.cache=new(memoize.Cache||_MapCache),o}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(rePropName,function(e,t,r,n){i.push(r?n.replace(reEscapeChar,"$1"):t||e)}),i}),_stringToPath=stringToPath;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var _arrayMap=arrayMap,INFINITY$1=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$2=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get,now=function(){return _root.Date.now()},now_1=now,FUNC_ERROR_TEXT$2="Expected a function",nativeMax$4=Math.max,nativeMin$2=Math.min;function debounce(n,i,e){var a,o,s,c,l,g,u=0,d=!1,h=!1,t=!0;if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT$2);function p(e){var t=a,r=o;return a=o=void 0,u=e,c=n.apply(r,t)}function f(e){var t=e-g;return void 0===g||i<=t||t<0||h&&s<=e-u}function I(){var e,t,r=now_1();if(f(r))return m(r);l=setTimeout(I,(t=i-((e=r)-g),h?nativeMin$2(t,s-(e-u)):t))}function m(e){return l=void 0,t&&a?p(e):(a=o=void 0,c)}function r(){var e,t=now_1(),r=f(t);if(a=arguments,o=this,g=t,r){if(void 0===l)return u=e=g,l=setTimeout(I,i),d?p(e):c;if(h)return clearTimeout(l),l=setTimeout(I,i),p(g)}return void 0===l&&(l=setTimeout(I,i)),c}return i=toNumber_1(i)||0,isObject_1(e)&&(d=!!e.leading,h="maxWait"in e,s=h?nativeMax$4(toNumber_1(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),r.cancel=function(){void 0!==l&&clearTimeout(l),a=g=o=l=void(u=0)},r.flush=function(){return void 0===l?c:m(now_1())},r}var debounce_1=debounce,FUNC_ERROR_TEXT$3="Expected a function";function throttle(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$3);return isObject_1(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),debounce_1(e,t,{leading:n,maxWait:t,trailing:i})}var throttle_1=throttle;function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(r=i<r?i:r)<0&&(r+=i),i=r<t?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}var _baseSlice=baseSlice;function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&n<=r?e:_baseSlice(e,t,r)}var _castSlice=castSlice;function charsEndIndex(e,t){for(var r=e.length;r--&&-1<_baseIndexOf(t,e[r],0););return r}var _charsEndIndex=charsEndIndex;function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&-1<_baseIndexOf(t,e[r],0););return r}var _charsStartIndex=charsStartIndex;function asciiToArray(e){return e.split("")}var _asciiToArray=asciiToArray,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");function hasUnicode(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo="["+rsComboRange$1+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange$1+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange$1+"]?",rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray;function stringToArray(e){return(_hasUnicode(e)?_unicodeToArray:_asciiToArray)(e)}var _stringToArray=stringToArray,reTrim$1=/^\s+|\s+$/g;function trim(e,t,r){if((e=toString_1(e))&&(r||void 0===t))return e.replace(reTrim$1,"");if(!e||!(t=_baseToString(t)))return e;var n=_stringToArray(e),i=_stringToArray(t),a=_charsStartIndex(n,i),o=_charsEndIndex(n,i)+1;return _castSlice(n,a,o).join("")}var trim_1=trim,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$13=Object.prototype,hasOwnProperty$11=objectProto$13.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$11.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function keys(e){return(isArrayLike_1(e)?_arrayLikeKeys:_baseKeys)(e)}var keys_1=keys;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function createBaseEach(a,o){return function(e,t){if(null==e)return e;if(!isArrayLike_1(e))return a(e,t);for(var r=e.length,n=o?r:-1,i=Object(e);(o?n--:++n<r)&&!1!==t(i[n],n,i););return e}}var _createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach;function castFunction(e){return"function"==typeof e?e:identity_1}var _castFunction=castFunction;function forEach(e,t){return(isArray_1(e)?_arrayEach:_baseEach)(e,_castFunction(t))}var forEach_1=forEach,assignIn=_createAssigner(function(e,t){_copyObject(t,keysIn_1(t),e)}),assignIn_1=assignIn,extend=assignIn_1,DataView$1=_getNative(_root,"DataView"),_DataView=DataView$1,Promise$1=_getNative(_root,"Promise"),_Promise=Promise$1,Set=_getNative(_root,"Set"),_Set=Set,mapTag$1="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$1||_Map&&getTag(new _Map)!=mapTag$1||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$1||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$2?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,stringTag$1="[object String]";function isString(e){return"string"==typeof e||!isArray_1(e)&&isObjectLike_1(e)&&_baseGetTag(e)==stringTag$1}var isString_1=isString;function iteratorToArray(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}var _iteratorToArray=iteratorToArray;function mapToArray(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n}var _mapToArray=mapToArray;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var _setToArray=setToArray;function baseValues(t,e){return _arrayMap(e,function(e){return t[e]})}var _baseValues=baseValues;function values(e){return null==e?[]:_baseValues(e,keys_1(e))}var values_1=values,mapTag$2="[object Map]",setTag$2="[object Set]",symIterator=_Symbol?_Symbol.iterator:void 0;function toArray(e){if(!e)return[];if(isArrayLike_1(e))return(isString_1(e)?_stringToArray:_copyArray)(e);if(symIterator&&e[symIterator])return _iteratorToArray(e[symIterator]());var t=_getTag(e);return(t==mapTag$2?_mapToArray:t==setTag$2?_setToArray:values_1)(e)}var toArray_1=toArray,mapTag$3="[object Map]",setTag$3="[object Set]",objectProto$14=Object.prototype,hasOwnProperty$12=objectProto$14.hasOwnProperty;function isEmpty(e){if(null==e)return!0;if(isArrayLike_1(e)&&(isArray_1(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer_1(e)||isTypedArray_1(e)||isArguments_1(e)))return!e.length;var t=_getTag(e);if(t==mapTag$3||t==setTag$3)return!e.size;if(_isPrototype(e))return!_baseKeys(e).length;for(var r in e)if(hasOwnProperty$12.call(e,r))return!1;return!0}var isEmpty_1=isEmpty,dateTag$1="[object Date]";function baseIsDate(e){return isObjectLike_1(e)&&_baseGetTag(e)==dateTag$1}var _baseIsDate=baseIsDate,nodeIsDate=_nodeUtil&&_nodeUtil.isDate,isDate=nodeIsDate?_baseUnary(nodeIsDate):_baseIsDate,isDate_1=isDate,numberTag$1="[object Number]";function isNumber(e){return"number"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==numberTag$1}var isNumber_1=isNumber;function isNil(e){return null==e}var isNil_1=isNil;function isElement(e){return isObjectLike_1(e)&&1===e.nodeType&&!isPlainObject_1(e)}var isElement_1=isElement,objectProto$15=Object.prototype,hasOwnProperty$13=objectProto$15.hasOwnProperty;function baseHas(e,t){return null!=e&&hasOwnProperty$13.call(e,t)}var _baseHas=baseHas;function hasPath(e,t,r){for(var n=-1,i=(t=_castPath(t,e)).length,a=!1;++n<i;){var o=_toKey(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&isLength_1(i)&&_isIndex(o,i)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function has(e,t){return null!=e&&_hasPath(e,t,_baseHas)}var has_1=has;function baseClamp(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=t<=e?e:t)),e}var _baseClamp=baseClamp;function startsWith(e,t,r){return e=toString_1(e),r=null==r?0:_baseClamp(toInteger_1(r),0,e.length),t=_baseToString(t),e.slice(r,r+t.length)==t}var startsWith_1=startsWith,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function arrayIncludesWith(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,nativeMin$3=Math.min;function baseIntersection(e,t,r){for(var n=r?_arrayIncludesWith:_arrayIncludes,i=e[0].length,a=e.length,o=a,s=Array(a),c=1/0,l=[];o--;){var g=e[o];o&&t&&(g=_arrayMap(g,_baseUnary(t))),c=nativeMin$3(g.length,c),s[o]=!r&&(t||120<=i&&120<=g.length)?new _SetCache(o&&g):void 0}g=e[0];var u=-1,d=s[0];e:for(;++u<i&&l.length<c;){var h=g[u],p=t?t(h):h,h=r||0!==h?h:0;if(!(d?_cacheHas(d,p):n(l,p,r))){for(o=a;--o;){var f=s[o];if(!(f?_cacheHas(f,p):n(e[o],p,r)))continue e}d&&d.push(p),l.push(h)}}return l}var _baseIntersection=baseIntersection;function castArrayLikeObject(e){return isArrayLikeObject_1(e)?e:[]}var _castArrayLikeObject=castArrayLikeObject,intersection=_baseRest(function(e){var t=_arrayMap(e,_castArrayLikeObject);return t.length&&t[0]===e[0]?_baseIntersection(t):[]}),intersection_1=intersection;function baseAssign(e,t){return e&&_copyObject(t,keys_1(t),e)}var _baseAssign=baseAssign;function baseAssignIn(e,t){return e&&_copyObject(t,keysIn_1(t),e)}var _baseAssignIn=baseAssignIn;function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}var _arrayFilter=arrayFilter;function stubArray(){return[]}var stubArray_1=stubArray,objectProto$16=Object.prototype,propertyIsEnumerable$1=objectProto$16.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(t){return null==t?[]:(t=Object(t),_arrayFilter(nativeGetSymbols(t),function(e){return propertyIsEnumerable$1.call(t,e)}))}:stubArray_1,_getSymbols=getSymbols;function copySymbols(e,t){return _copyObject(e,_getSymbols(e),t)}var _copySymbols=copySymbols;function arrayPush(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var _arrayPush=arrayPush,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(e){for(var t=[];e;)_arrayPush(t,_getSymbols(e)),e=_getPrototype(e);return t}:stubArray_1,_getSymbolsIn=getSymbolsIn;function copySymbolsIn(e,t){return _copyObject(e,_getSymbolsIn(e),t)}var _copySymbolsIn=copySymbolsIn;function baseGetAllKeys(e,t,r){var n=t(e);return isArray_1(e)?n:_arrayPush(n,r(e))}var _baseGetAllKeys=baseGetAllKeys;function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}var _getAllKeys=getAllKeys;function getAllKeysIn(e){return _baseGetAllKeys(e,keysIn_1,_getSymbolsIn)}var _getAllKeysIn=getAllKeysIn,objectProto$17=Object.prototype,hasOwnProperty$14=objectProto$17.hasOwnProperty;function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$14.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var _initCloneArray=initCloneArray;function cloneDataView(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _cloneDataView=cloneDataView,reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var _cloneRegExp=cloneRegExp,symbolProto$1=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(e){return symbolValueOf?Object(symbolValueOf.call(e)):{}}var _cloneSymbol=cloneSymbol,boolTag$1="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$1="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,r){var n=e.constructor;switch(t){case arrayBufferTag$1:return _cloneArrayBuffer(e);case boolTag$1:case dateTag$2:return new n(+e);case dataViewTag$2:return _cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return _cloneTypedArray(e,r);case mapTag$4:return new n;case numberTag$2:case stringTag$2:return new n(e);case regexpTag$1:return _cloneRegExp(e);case setTag$4:return new n;case symbolTag$1:return _cloneSymbol(e)}}var _initCloneByTag=initCloneByTag,mapTag$5="[object Map]";function baseIsMap(e){return isObjectLike_1(e)&&_getTag(e)==mapTag$5}var _baseIsMap=baseIsMap,nodeIsMap=_nodeUtil&&_nodeUtil.isMap,isMap=nodeIsMap?_baseUnary(nodeIsMap):_baseIsMap,isMap_1=isMap,setTag$5="[object Set]";function baseIsSet(e){return isObjectLike_1(e)&&_getTag(e)==setTag$5}var _baseIsSet=baseIsSet,nodeIsSet=_nodeUtil&&_nodeUtil.isSet,isSet=nodeIsSet?_baseUnary(nodeIsSet):_baseIsSet,isSet_1=isSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$3="[object Date]",errorTag$1="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(r,n,i,e,t,a){var o,s=n&CLONE_DEEP_FLAG,c=n&CLONE_FLAT_FLAG,l=n&CLONE_SYMBOLS_FLAG;if(i&&(o=t?i(r,e,t,a):i(r)),void 0!==o)return o;if(!isObject_1(r))return r;var g=isArray_1(r);if(g){if(o=_initCloneArray(r),!s)return _copyArray(r,o)}else{var u=_getTag(r),d=u==funcTag$2||u==genTag$1;if(isBuffer_1(r))return _cloneBuffer(r,s);if(u==objectTag$3||u==argsTag$2||d&&!t){if(o=c||d?{}:_initCloneObject(r),!s)return c?_copySymbolsIn(r,_baseAssignIn(o,r)):_copySymbols(r,_baseAssign(o,r))}else{if(!cloneableTags[u])return t?r:{};o=_initCloneByTag(r,u,s)}}var h=(a=a||new _Stack).get(r);if(h)return h;a.set(r,o),isSet_1(r)?r.forEach(function(e){o.add(baseClone(e,n,i,e,r,a))}):isMap_1(r)&&r.forEach(function(e,t){o.set(t,baseClone(e,n,i,t,r,a))});var p=l?c?_getAllKeysIn:_getAllKeys:c?keysIn:keys_1,f=g?void 0:p(r);return _arrayEach(f||r,function(e,t){f&&(e=r[t=e]),_assignValue(o,t,baseClone(e,n,i,t,r,a))}),o}cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$3]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$6]=cloneableTags[numberTag$3]=cloneableTags[objectTag$3]=cloneableTags[regexpTag$2]=cloneableTags[setTag$6]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var _baseClone=baseClone,CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(e){return _baseClone(e,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var cloneDeep_1=cloneDeep,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(e,t,r){return t&&go(e.prototype,t),r&&go(e,r),e};function go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var defineProperty$2=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},objectWithoutProperties=function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},_={max:max_1,merge:merge_1,get:get_1,throttle:throttle_1,trim:trim_1,bind:bind_1,each:forEach_1,ext:merge_1,extend:extend,isArray:isArray_1,isFunction:isFunction_1,isObject:isObject_1,isArguments:isArguments_1,toArray:toArray_1,values:values_1,identity:identity_1,isEmpty:isEmpty_1,isEmptyObject:isEmpty_1,isString:isString_1,isDate:isDate_1,isNumber:isNumber_1,isElement:isElement_1,isNil:isNil_1,debounce:debounce_1,has:has_1,startsWith:startsWith_1,intersection:intersection_1,cloneDeep:cloneDeep_1},ArrayProto=Array.prototype,nativeIndexOf=ArrayProto.indexOf,breaker={};function Ro(){for(var e=+new Date,t=0;e==+new Date;)t++;return e.toString(16)+t.toString(16)}function buildQuery(e,t,r){var i=[];return _.each(t,function(e,t){var r=encodeURIComponent(e.toString()),n=encodeURIComponent(t);i.push(n+"="+r)}),(e||"")+i.join(r||"&")}function asyncReq(e){var t=new window.XMLHttpRequest,r=e.type||e.method,n=e.url,i=e.data,a=e.contentType,o=e.referer,s=e.onSuccess,c=e.onFailure,l=e.timeout,g=e.headers;t.onload=function(){200<=t.status&&t.status<300?s&&s(this.responseText):0!==t.status&&c&&c(this.responseText)},t.onerror=function(){c&&c(this.responseText)};try{t.open(r,n),a&&t.setRequestHeader("Content-Type",a),g&&[].forEach.call(Object.keys(g),function(e){t.setRequestHeader(e,g[e])}),l&&(t.timeout=l),o&&t.setRequestHeader("X-Referer",o),i?t.send(i):t.send()}catch(e){c&&c("Exception in network")}}function asyncTimeoutReq(e){var t=new window.XMLHttpRequest,r=e.type||e.method,n=e.url,i=e.data,a=e.contentType,o=e.referer,s=e.onSuccess,c=e.onFailure,l=e.headers,g=e.timeout,u=setTimeout(function(){t.abort(),c&&c("request timeout!",(new Date).getTime())},g);t.onerror=function(){c&&c(this.responseText)},t.onreadystatechange=function(){4===t.readyState&&(clearTimeout(u),200<=t.status&&t.status<300?s&&s(this.responseText):0!==t.status&&c&&c(this.responseText))};try{t.open(r,n),a&&t.setRequestHeader("Content-Type",a),o&&t.setRequestHeader("X-Referer",o),l&&[].forEach.call(Object.keys(l),function(e){t.setRequestHeader(e,l[e])}),i?t.send(i):t.send()}catch(e){c&&c("Exception in network")}}_.isDefined=function(e){return!_.isUndefined(e)},_.isUndefined=function(e){return null===e||(void 0===e?"undefined":_typeof(e))===constants.symbols.UNDEFINED},_.include=function(e,t){var r=!1;return null===e?r:nativeIndexOf&&e.indexOf===nativeIndexOf?-1!=e.indexOf(t):(_.each(e,function(e){if(r=r||e===t)return breaker}),r)},_.includes=function(e,t){return-1!==e.indexOf(t)},_.timestamp=function(){return Date.now&&Date.now.toString&&-1<Date.now.toString().indexOf("native code")?Date.now():+new Date},_.now=_.timestamp,_.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},_.strip_empty_properties=function(e){var r={};return _.each(e,function(e,t){_.isString(e)&&0<e.length&&(r[t]=e)}),r},_.UUID=function(){var e=(screen.height*screen.width).toString(16);return Ro()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,r=windowNavigator.userAgent,i=[],n=0;function a(e,t){for(var r=0,n=0;n<t.length;n++)r|=i[n]<<8*n;return e^r}for(e=0;e<r.length;e++)t=r.charCodeAt(e),i.unshift(255&t),4<=i.length&&(n=a(n,i),i=[]);return 0<i.length&&(n=a(n,i)),n.toString(16)}()+"-"+e+"-"+Ro()},_.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)&&(logger.warn("Blocked UA Agent:"+e),!0)},_.escapeRegExp=function(e){return e?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e},_.isBlockedUAComplex=function(e,t){if(!(e=e||windowNavigator.userAgent))return!0;var r="(googlebot|Google favicon|Mediapartners-Google|AdsBot-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis|PhantomJS|Uptimebot|AmazonProductDiscovery|Chrome-Lighthouse";return t&&_.isArray(t)&&0<t.length&&(r+="|"+(t=t.map(function(e){return _.escapeRegExp(e)})).join("|")),r+=")",!!new RegExp(r,"i").test(e)},_.aurycOverride=function(e){var t=(""+window.location.hash).toLowerCase();return t&&8<t.length&&-1<t.indexOf("aurycoverride")&&-1<t.indexOf(e)},_.disableEvent=function(e){return!1},_.Diff=function(e,t){for(var r=_.max([e.length,t.length]),n=0,i=0,a=0;15<r-n;)a=r-Math.round((r-n)/2),e.substr(0,a)!==t.substr(0,a)?r=a:n=a;for(var o=t.substr(n),r=o.length;15<r-i;)a=r-Math.round((r-i)/2),o.substr(o.length-a)!==e.substr(e.length-a)?r=a:i=a;return{s:n,e:i,v:t.substring(n,t.length-i)}},_.addEventListener=function(e,t,r,n){"propertychange"!==t&&e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on"+t,r)},_.removeEventListener=function(e,t,r,n){e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent&&e.detachEvent("on"+t,r)},_.inArray=function(e,t){var r=-1;for(var n in t)t[n]===e&&(r=n);return-1!=r},_.isValidColor=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},_.isEmail=function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},_.isLongNumber=function(e){return!!/^([0-9]){10,}$/.test(e)},_.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},_.addCssCls=function(e,t){e.classList?e.classList.add(t):_.hasClass(e,t)||(e.className+=" "+t)},_.removeClass=function(e,t){var r;e.classList?e.classList.remove(t):_.hasClass(e,t)&&(r=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(r," "))},_.getObjectPropertyDescriptor=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,n=r.Object.getOwnPropertyDescriptor(e,t);if(n)return n;var i=r.Object.getPrototypeOf(e);return i?_.getObjectPropertyDescriptor(i,t,r):null},_.wrapObjectPropertyValue=function(e,t,r){var n,i=e[t];!i||(n=_.getObjectPropertyDescriptor(e,t))&&!0===n.writable&&n.value&&Object.defineProperty(e,t,{value:function(){try{r.apply(this,arguments)}catch(e){}i.apply(this,arguments)},configurable:n.configurable,writable:n.writable,enumerable:n.enumerable})};var uaParser=createCommonjsModule(function(A,v){!function(i,u){var d="function",e="model",t="name",r="type",n="vendor",a="version",o="architecture",s="console",c="mobile",l="tablet",g="smarttv",h="wearable",p={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:u},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={rgx:function(e,t){for(var r,n,i,a,o,s=0;s<t.length&&!a;){for(var c=t[s],l=t[s+1],g=r=0;g<c.length&&!a;)if(a=c[g++].exec(e))for(n=0;n<l.length;n++)o=a[++r],"object"==typeof(i=l[n])&&0<i.length?2==i.length?typeof i[1]==d?this[i[0]]=i[1].call(this,o):this[i[0]]=i[1]:3==i.length?typeof i[1]!=d||i[1].exec&&i[1].test?this[i[0]]=o?o.replace(i[1],i[2]):u:this[i[0]]=o?i[1].call(this,o,i[2]):u:4==i.length&&(this[i[0]]=o?i[3].call(this,o.replace(i[1],i[2])):u):this[i]=o||u;s+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&0<t[r].length){for(var n=0;n<t[r].length;n++)if(p.has(t[r][n],e))return"?"===r?u:r}else if(p.has(t[r],e))return"?"===r?u:r;return e}},I={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,a],[/(opios)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],a],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[t,a],[/(konqueror)\/([\w\.]+)/i],[[t,"Konqueror"],a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],a],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[t,"Edge"],a],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],a],[/(Avast)\/([\w\.]+)/i],[[t,"Avast Secure Browser"],a],[/(AVG)\/([\w\.]+)/i],[[t,"AVG Secure Browser"],a],[/(puffin)\/([\w\.]+)/i],[[t,"Puffin"],a],[/(focus)\/([\w\.]+)/i],[[t,"Firefox Focus"],a],[/(opt)\/([\w\.]+)/i],[[t,"Opera Touch"],a],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],a],[/(windowswechat qbcore)\/([\w\.]+)/i],[[t,"WeChat(Win) Desktop"],a],[/(micromessenger)\/([\w\.]+)/i],[[t,"WeChat"],a],[/(brave)\/([\w\.]+)/i],[[t,"Brave"],a],[/(qqbrowserlite)\/([\w\.]+)/i],[t,a],[/(QQ)\/([\d\.]+)/i],[t,a],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[t,a],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[t,a],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[t,a],[/(MetaSr)[\/\s]?([\w\.]+)/i],[t],[/(LBBROWSER)/i],[t],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[a,[t,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[a,[t,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[t,a],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[a,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,/(.+)/,"$1 WebView"],a],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[t,/(.+(?:g|us))(.+)/,"$1 $2"],a],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[a,[t,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[t,"Sailfish Browser"],a],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,a],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],a],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[t,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[t,"Chrome"],a],[/(coast)\/([\w\.]+)/i],[[t,"Opera Coast"],a],[/fxios\/([\w\.-]+)/i],[a,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,t],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[t,"GSA"],a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[a,f.str,I.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[t,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,a]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[o,"amd64"]],[/(ia32(?=;))/i],[[o,p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[o,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[o,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[o,/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[[o,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[o,p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[e,n,[r,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[n,"Apple"],[r,l]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[n,"Apple"],[r,g]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[n,e,[r,l]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[e,[n,"Amazon"],[r,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[e,f.str,I.device.amazon.model],[n,"Amazon"],[r,c]],[/android.+aft([bms])\sbuild/i],[e,[n,"Amazon"],[r,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,n,[r,c]],[/\((ip[honed|\s\w*]+);/i],[e,[n,"Apple"],[r,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[n,e,[r,c]],[/\(bb10;\s(\w+)/i],[e,[n,"BlackBerry"],[r,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[e,[n,"Asus"],[r,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[n,"Sony"],[e,"Xperia Tablet"],[r,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[n,"Sony"],[r,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[n,e,[r,s]],[/android.+;\s(shield)\sbuild/i],[e,[n,"Nvidia"],[r,s]],[/(playstation\s[34portablevi]+)/i],[e,[n,"Sony"],[r,s]],[/(sprint\s(\w+))/i],[[n,f.str,I.device.sprint.vendor],[e,f.str,I.device.sprint.model],[r,c]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[n,[e,/_/g," "],[r,c]],[/(nexus\s9)/i],[e,[n,"HTC"],[r,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[e,[n,"Huawei"],[r,c]],[/android.+(bah2?-a?[lw]\d{2})/i],[e,[n,"Huawei"],[r,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[n,e,[r,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[n,"Microsoft"],[r,s]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[n,"Microsoft"],[r,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[n,"Motorola"],[r,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[n,"Motorola"],[r,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[n,p.trim],[e,p.trim],[r,g]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[n,"Samsung"],[r,g]],[/\(dtv[\);].+(aquos)/i],[e,[n,"Sharp"],[r,g]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[n,"Samsung"],e,[r,l]],[/smart-tv.+(samsung)/i],[n,[r,g],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[n,"Samsung"],e,[r,c]],[/sie-(\w*)/i],[e,[n,"Siemens"],[r,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[n,"Nokia"],e,[r,c]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[n,"Acer"],[r,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[e,[n,"LG"],[r,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[n,"LG"],e,[r,l]],[/(lg) netcast\.tv/i],[n,e,[r,g]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[e,[n,"LG"],[r,c]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[n,e,[r,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[n,"Lenovo"],[r,l]],[/(lenovo)[_\s-]?([\w-]+)/i],[n,e,[r,c]],[/linux;.+((jolla));/i],[n,e,[r,c]],[/((pebble))app\/[\d\.]+\s/i],[n,e,[r,h]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[n,e,[r,c]],[/crkey/i],[[e,"Chromecast"],[n,"Google"],[r,g]],[/android.+;\s(glass)\s\d/i],[e,[n,"Google"],[r,h]],[/android.+;\s(pixel c)[\s)]/i],[e,[n,"Google"],[r,l]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[e,[n,"Google"],[r,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[n,"Xiaomi"],[r,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[n,"Xiaomi"],[r,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[e,[n,"Meizu"],[r,c]],[/(mz)-([\w-]{2,})/i],[[n,"Meizu"],e,[r,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[e,[n,"OnePlus"],[r,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[e,[n,"RCA"],[r,l]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[e,[n,"Dell"],[r,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[e,[n,"Verizon"],[r,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[n,"Barnes & Noble"],e,[r,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[e,[n,"NuVision"],[r,l]],[/android.+;\s(k88)\sbuild/i],[e,[n,"ZTE"],[r,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[e,[n,"Swiss"],[r,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[e,[n,"Swiss"],[r,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[e,[n,"Zeki"],[r,l]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[n,"Dragon Touch"],e,[r,l]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[e,[n,"Insignia"],[r,l]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[e,[n,"NextBook"],[r,l]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[n,"Voice"],e,[r,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[n,"LvTel"],e,[r,c]],[/android.+;\s(PH-1)\s/i],[e,[n,"Essential"],[r,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[e,[n,"Envizen"],[r,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[n,e,[r,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[e,[n,"MachSpeed"],[r,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[n,e,[r,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[e,[n,"Rotor"],[r,l]],[/android.+(KS(.+))\s+build/i],[e,[n,"Amazon"],[r,l]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[n,e,[r,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[r,p.lowerize],n,e],[/[\s\/\(](smart-?tv)[;\)]/i],[[r,g]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[n,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[t,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[a,[t,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,a],[/rv\:([\w\.]{1,9}).+(gecko)/i],[a,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[t,[a,f.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[a,f.str,I.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[t,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[t,"Symbian"],a],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],a],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],a],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[t,a],[/(haiku)\s(\w+)/i],[t,a],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[a,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,a]]},b=function(e,t){if("object"==typeof e&&(t=e,e=u),!(this instanceof b))return new b(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?p.extend(m,t):m;return this.getBrowser=function(){var e={name:u,version:u};return f.rgx.call(e,r,n.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:u};return f.rgx.call(e,r,n.cpu),e},this.getDevice=function(){var e={vendor:u,model:u,type:u};return f.rgx.call(e,r,n.device),e},this.getEngine=function(){var e={name:u,version:u};return f.rgx.call(e,r,n.engine),e},this.getOS=function(){var e={name:u,version:u};return f.rgx.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};b.VERSION="0.7.21",b.BROWSER={NAME:t,MAJOR:"major",VERSION:a},b.CPU={ARCHITECTURE:o},b.DEVICE={MODEL:e,VENDOR:n,TYPE:r,CONSOLE:s,MOBILE:c,SMARTTV:g,TABLET:l,WEARABLE:h,EMBEDDED:"embedded"},b.ENGINE={NAME:t,VERSION:a},b.OS={NAME:t,VERSION:a},A.exports&&(v=A.exports=b),v.UAParser=b;var C,y=i&&(i.jQuery||i.Zepto);y&&!y.ua&&(C=new b,y.ua=C.getResult(),y.ua.get=function(){return C.getUA()},y.ua.set=function(e){C.setUA(e);var t=C.getResult();for(var r in t)y.ua[r]=t[r]})}("object"==typeof window?window:commonjsGlobal)}),uaParser_1=uaParser.UAParser,PubSubTopic=(createClass(hs,[{key:"addListener",value:function(e){this.listeners.push(e)}},{key:"publishTopic",value:function(){for(var e=0;e<this.listeners.length;e++)this.listeners[e].apply(this,arguments)}}]),hs);function hs(){classCallCheck(this,hs),this.listeners=[]}var PubSub=(createClass(ms,[{key:"addListener",value:function(e,t){if("function"!=typeof t||"string"!=typeof e)return!1;var r;this.topics.hasOwnProperty(e)||(this.topics[e]=new PubSubTopic(e)),this.topics[e].addListener(t),this.topicDataBackfill[e]&&0<this.topicDataBackfill[e].length&&(r=this.topics[e],this.topicDataBackfill[e].forEach(function(e){try{r.publishTopic(e)}catch(e){}}),this.topicDataBackfill[e]=[])}},{key:"publish",value:function(e,t){if(!this.topics.hasOwnProperty(e))return this.topicDataBackfill[e]=this.topicDataBackfill[e]||[],this.topicDataBackfill[e].push(t),!1;try{this.topics[e].publishTopic(t)}catch(e){return!0}return!0}},{key:"findTopic",value:function(e){return!!this.topics.hasOwnProperty(e)}}]),ms);function ms(){classCallCheck(this,ms),this.topics={},this.topicId=-1,this.topicDataBackfill={}}var AurycPubSub=new PubSub;function applyRegex(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return e?e.replace(t,"$1REDACTED"):void 0}var pathRegex=/(((account\/)(plan\/|app\/)(devices\/|payment\/|location\/|confirmation\/|plans\/(?:subscribe\/|upgrade\/|cancel\/|remove\/|)))|(cases\/|alerts\/|share\/|user\/viewprofilepage\/user-id\/|orders\/|checkouts\/))([A-Za-z0-9_@.-]+?)(?=\/|\?|$)/g,pathRegex1=new RegExp("(((account/)(app/)(location/)))([A-Za-z0-9_@.-]+?)(?=/|$)((/base-station/|/bridge-flatline/|/configure/|/devices/|/motion-detector/|/settings/users/|/settings/|/device-add/(?:configure/|device/))?)(([A-Za-z0-9_@.-]+?)?)(?=/|$)"),pathRegex2=new RegExp("(((account/)(plan/|app/|plans/)(devices/|payment/|location/|confirmation/|plans/(?:subscribe/|upgrade/|cancel/|remove/|)))|(cases/|alerts/|share/|user/viewprofilepage/user-id/|orders/|checkouts/))([A-Za-z0-9_@.-]+?)(?=/|$)"),pathLocationRegex=new RegExp("(location/)([A-Za-z0-9_@.-]+?)(?=/|$)"),pathDeviceRegex=new RegExp("(base-station/|bridge-flatline/|configure/|devices/|motion-detector/|device/)(([A-Za-z0-9_@.-]+?)?)(?=/|$)"),pathUserSettingsRegex=new RegExp("(users/|settings/)([0-9]+?)(?=/|$)"),queryParamsRegex=/([&?]deviceId=|[&?]providerId=|[&?]devicesId=|[&?]attachmentId=|[&?]attachmentIds=|[&?]locationId=|[&?]locationid=|[&?]PayerID=|[&?]deviceID=|[&?]subscriptionId=|[&?]user_email=|[&?]msclkid=|[&?]mkt_tok=|[&?]fbclid=|[&?]token=|[&?]l=|[&?]discount=|[&?]location=|[&?]devices=|[&?]checkout\[email\]=|[&?]invitation_token=|[&?]code=)([A-Za-z0-9_@%.-]+?)(?=\/|$|\&|])/gi;function obfuscateUrl(e,t){return e?obfuscatePath(obfuscateQuery(e,t),t):e}function obfuscatePath(e,t){if(!e)return e;if(!0!==(config.getConfig("urlObfuscation","behavior",!1,t)||{}).redactUrlPath)return e;var r=e;return[pathRegex,pathRegex1,pathRegex2,pathLocationRegex,pathDeviceRegex,pathUserSettingsRegex].forEach(function(e){r=applyRegex(r,e)}),r}function obfuscateQuery(e,t){return e&&!0===(config.getConfig("urlObfuscation","behavior",!1,t)||{}).redactUrlQuery?applyRegex(e,queryParamsRegex):e}function getDocumentTitle(e){var t=document.getElementsByTagName("title")[0];return t&&"true"===t.getAttribute("data-heap-redact-text")?"xxxx":e.title}function getQueryParam(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")}function getAllQueryParams(e){var r={};return e&&e.split("&").forEach(function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])}),r}function getHashParam(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?decodeURIComponent(r[1]):null}function isPrivateIP(e){return!(!e||!(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e)))&&(logger.log("found private ip:"+e),!0)}function isSameDomain(e,t){var r=windowDocument.createElement("a");r.href=windowLocation.href;var n=r.hostname,i=r.protocol;r.href=e;var a=r.hostname||n,o=0===r.protocol.indexOf("http")?r.protocol:i;r.href=t;var s=r.hostname||n,c=0===r.protocol.indexOf("http")?r.protocol:i;return a.toLowerCase()===s.toLowerCase()&&o.toLowerCase()===c.toLowerCase()}function getRootDomain(e){var t=getTopDomain();return t?(logger.log("domain 1: "+t),t):isPrivateIP(e)?"localhost":e.toLowerCase().split(".").slice(-2).join(".")}function getTopDomain(){for(var e="weird_get_top_level_domain=cookie",t=document.location.hostname.split("."),r=t.length-1;0<=r;r--){var n=t.slice(r).join(".");if(document.cookie=e+";domain=."+n+";",-1<document.cookie.indexOf(e))return document.cookie=e.split("=")[0]+"=;domain=."+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",n}return document.location.hostname}function getPath(e){var t=locationInfo(e);return t&&obfuscateUrl(t.path)}function matchSingleUrl(t,e){t=t.toLowerCase();var r="is";if(0===(e=e.toLowerCase()).indexOf("^")?(r="regex",e=e.replace(/\^/,"")):0<e.indexOf("*")?(r="starts",e=e.replace(/\*/g,"")):0===e.indexOf("*")&&(r="contains",e=e.replace(/\*/g,"")),"is"===r)return t===e;if("starts"!==r)return"contains"!==r?"regex"===r&&regexMatchUrl(t,e):!e.split(",").find(function(e){return t.indexOf(e.trim())<0});if(!(t.length<e.length)){for(var n=0;n<e.length;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return;return 1}}function containsUrl(e,t){for(var r=0;r<t.length;r++)if(matchSingleUrl(e,t[r]))return!0;return!1}function regexMatchUrl(e,t){return!(!e||!t)&&!!new RegExp(t,"i").test(e)}function campaignParams(){var t,e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),r={};return _.each(e,function(e){(t=_.trim(getQueryParam(document.URL,e))).length&&(r[e]=t)}),r}function getFbParams(){var t,e="fbId email siteId".split(" "),r={};return _.each(e,function(e){(t=_.trim(getQueryParam(document.URL,e))).length&&(r[e]=t)}),r}function getLinkidParams(){var e=config.getArLinkid(),t=[];t.push(e);var r,n={};return _.each(t,function(e){(r=_.trim(getQueryParam(document.URL,e))).length&&(n[e]=r)}),0===Object.keys(n).length&&window[e]&&(n[e]=window[e]),n}function searchEngine(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null}function browser(e,t,r){return t=t||window.navigator.vendor||"",r||_.includes(e," OPR/")?_.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":_.includes(e,"IEMobile")||_.includes(e,"WPDesktop")?"Internet Explorer Mobile":_.includes(e,"Edge")?"Microsoft Edge":_.includes(e,"FBIOS")?"Facebook Mobile":_.includes(e,"Chrome")?_.includes(e,"Android")?"Chrome Mobile":"Chrome":_.includes(e,"CriOS")?"Chrome iOS":_.includes(e,"FxiOS")?"Firefox iOS":/Version\/([0-9\.]*)[\w\W]*Safari/i.test(e)?_.includes(e,"Mobile")?"Mobile Safari":"Safari":_.includes(e,"Android")?"Android Mobile":_.includes(e,"Konqueror")?"Konqueror":_.includes(e,"Firefox")?"Firefox":_.includes(e,"MSIE")||_.includes(e,"Trident/")?"Internet Explorer":_.includes(e,"Gecko")?"Mozilla":""}function browserVersion(e,t,r){return browserAndVersion(e,t,r).version}function browserAndVersion(e,t,r){var n,i=browser(e=e||window.navigator.userAgent,t=t||window.navigator.vendor,r),a={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome Mobile":/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[i];return{name:i,version:void 0!==a&&(n=e.match(a))?parseFloat(n[n.length-2]):null}}function osVersion(e){return new uaParser(e||window.navigator.userAgent).getResult().os.version}function device(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""}function isMobile(e){return e=e||windowNavigator.userAgent,/IEMobile|android|blackberry|ipad|iphone|ipod|kindle|mini|nokia|silk|ucweb|windows ce|windows phone/i.test(e)}function isTablet(e){return/tablet|ipad|playbook|silk|(android(?!.*mobile))/i.test(e)}function isSmartphone(e){return isMobile(e)&&!isTablet(e)}function isIOS(e){return/ipad|iphone/i.test(e)}function isWindowsPhone(e){return/windows ce|IEMobile|windows phone/i.test(e)}function visibilityEventPrefix(){var e=null;if(void 0!==document.hidden)e="";else for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++)if(void 0!==document[t[r]+"Hidden"]){e=t[r];break}return e}function isSafari(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Safari")}function isMobileSafari(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Mobile Safari")}function isMobileSafariIOS15Plus(e,t){var r=browserAndVersion(e=e||windowNavigator.userAgent,t=t||windowNavigator.vendor);try{return _.includes(r.name,"Mobile Safari")&&15<=r.version}catch(e){return!1}}function isFireFox(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Firefox")}function isInternetExp(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Internet Explorer")}function canUseVisibilityChange(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return!!e&&(-1<e.indexOf("Firefox")||-1<e.indexOf("Chrome")?null!==visibilityEventPrefix():-1<e.indexOf("Safari")&&isMobile(windowNavigator.userAgent))}function referringDomain(e){var t=e.split("/");return 3<=t.length?t[2]:""}function isTouchDevice(){return"ontouchstart"in document.documentElement}function properties(){return _.extend(_.strip_empty_properties({$os:config.os(),$browser:browser(windowNavigator.userAgent,windowNavigator.vendor,win.opera),$referrer:document.referrer,$referring_domain:referringDomain(document.referrer),$device:device(windowNavigator.userAgent)}),{$current_url:obfuscateUrl(windowLocation.href),$browser_version:browserVersion(windowNavigator.userAgent,windowNavigator.vendor,win.opera),$screen_height:screen.height,$screen_width:screen.width,$lib_version:config.getCodeVersion()})}function locationInfo(e,t){t=t||windowDocument;var r=(e=e||windowLocation).protocol,n=":"===r.slice(-1)?r.slice(0,-1):r;return _.strip_empty_properties({protocol:n,domain:e.hostname&&e.hostname.toLowerCase(),port:e.port,path:e.pathname&&obfuscatePath(e.pathname.toLowerCase()),query:e.search&&obfuscateQuery(e.search.toLowerCase()),hash:e.hash&&e.hash.toLowerCase(),name:getDocumentTitle(t)})}function getPageType(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=e.pageType;if(t&&_.isString(t))return t;var r=_.get(e,config.getConfig("pageTypeVar","behavior",!1,e),"");return r&&_.isString(r)?r:void 0}function pageviewInfo(e){return _.strip_empty_properties({page:e,referrer:document.referrer,browser:browser(windowNavigator.userAgent,windowNavigator.vendor,win.opera),platform:config.os()})}function addDomEvent(e,t,r,n){e&&(e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r,n))}function removeDomEvent(e,t,r){e.detachEvent?e.detachEvent("on"+t,r):e.removeEventListener(t,r)}function getWinSize(e){return{w:e.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth,h:e.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}}function getWinScrlPos(e){return{x:e.pageXOffset||_.get(e,"document.documentElement.scrollLeft",0),y:e.pageYOffset||_.get(e,"document.documentElement.scrollTop",0)}}function getWinScrRes(e){return{w:(e=e||window).screen.width||0,h:e.screen.height||0}}function getWinScrResString(e){var t=getWinScrRes(e);return t.w+" x "+t.h}var Browser=(createClass($u,[{key:"init",value:function(e){this.features={mobile:isMobile(e),smartphone:isSmartphone(e),tablet:isTablet(e),ios:isIOS(e),winphone:isWindowsPhone(e),deviceType:isMobile(e)?isTablet(e)?"Tablet":"Smartphone":"Desktop",isInternetExp:!1},this.browser={},this.os={},this.analyzeDetails(e)}},{key:"isInternetExp",value:function(){return this.features.isInternetExp}},{key:"initClientSide",value:function(e){var t=browserAndVersion();this.browser.name=t.name,this.browser.version=t.version,this.os.name=config.os(e),this.os.version=osVersion(e),this.features.isInternetExp="Internet Explorer"===this.browser.name,this.isAvail=!0,this.brAvailEvent.publishTopic()}},{key:"saveCurrBrData",value:function(e){var t=JSON.parse(e);this.browser.name=t.browser;var r=t.browserVersion.split(".")[0];this.browser.version=r,this.os={name:t.os,version:t.osVersion};var n=t.deviceType;this.features=_extends({},this.features,{mobile:"Tablet"===n||"Smartphone"===n||"Feature Phone"===n||"Other Mobile"===n,tablet:"Tablet"===n,deviceType:n}),this.isAvail=!0,this.brAvailEvent.publishTopic()}},{key:"clientSideDetectable",value:function(){return!0!==config.getConfig("ua_detect","behavior")||!this.features.mobile||this.features.ios||this.features.tablet||this.features.winphone}},{key:"getDT",value:function(){return this.features.deviceType}},{key:"analyzeDetails",value:function(e){var t,r,n,i=this,a="//"+(config.getConfig("device_uri")||"uba-detector.auryc.com/useragent/")+"?accessToken=";this.clientSideDetectable()?this.initClientSide(e):(t="_ar_br_",(r=localStorage?localStorage.getItem(t):null)?this.saveCurrBrData(r):((n={type:"GET"}).url=a+constants.symbols.DEVICE+"&ua="+e,n.contentType="application/x-www-form-urlencoded",n.onSuccess=function(e){setItem("localStorage",t,e),i.saveCurrBrData(e)},n.failure=function(){i.initClientSide(e)},asyncReq(n)))}},{key:"isPhone",value:function(){return this.features.winphone||this.features.mobile&&!this.features.tablet}},{key:"isPhoneOrTablet",value:function(){return this.features.mobile}}]),$u);function $u(e){classCallCheck(this,$u),this.brAvailEvent=new PubSubTopic,this.isAvail=!1,this.init(e||window.navigator.userAgent)}var browserObj=null;function getInstance(){return null===browserObj&&(browserObj=new Browser),browserObj}function addDomMethods(r){return r.sel=function(e){return r.querySelectorAll(e)},r.addCssCls=function(e){-1===r.className.indexOf(e)&&(r.className&&(r.className+=" "),r.className+=e)},r.replaceCssCls=function(e,t){r.removeCssCls(e),r.addCssCls(t)},r.removeCssCls=function(e){r.className=(r.className||"").replace(e,"")},r.getStyle=function(e){return window.getComputedStyle?window.getComputedStyle(r)[e]:r.currentStyle?r.currentStyle[e]:void 0},r.css=function(e){for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t])},r.setAttr=function(e,t){r.setAttribute(e,t)},r.removeAttr=function(e){r.removeAttribute(e)},r}function toDomNode(e){if(!e)return null;var t,r=e;return _.isString(e)&&""!==e&&((t=document.createElement("div"))[constants.record.tags.IH]=e,r=t[constants.record.attr.FEC]),addDomMethods(r)}function getMaxWinHeight(){var e=document.documentElement,t=Math.max(e.clientHeight,e.scrollHeight,e.offsetHeight),r=document.body,n=Math.max(r.scrollHeight,r.offsetHeight);return Math.max(t,n)}function setItem(e,t,r){if(window[e])try{window[e].setItem(t,r)}catch(e){}}function removeFBStyle(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=";";e.document.querySelectorAll("style[id=auryc_style]").forEach(function(e){-1===r.indexOf(e.innerText)&&(r+=e.innerText+";"),e.parentNode.removeChild(e)});try{t&&e.sessionStorage&&(e.sessionStorage.getItem(constants.storage.FEEDBACK_STYLE)||e.sessionStorage.setItem(constants.storage.FEEDBACK_STYLE,r))}catch(e){}}function restoreFBStyles(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;try{if(0<e.document.querySelectorAll("style[id=auryc_style]").length)return;var t=e.sessionStorage.getItem(constants.storage.FEEDBACK_STYLE);if(!t)return;var r=e.document.createElement("style");r.id="auryc_style",r.id="auryc_style",r.innerHTML=t;var n=e.document.head||e.document.getElementsByTagName("head")[0];n&&n.appendChild(r)}catch(e){}}var browser$1={setItem:setItem,getHashParam:getHashParam,isPrivateIP:isPrivateIP,isSameDomain:isSameDomain,getRootDomain:getRootDomain,getTopDomain:getTopDomain,containsUrl:containsUrl,campaignParams:campaignParams,getFbParams:getFbParams,searchEngine:searchEngine,browser:browser,browserVersion:browserVersion,browserAndVersion:browserAndVersion,device:device,isMobile:isMobile,visibilityEventPrefix:visibilityEventPrefix,isSafari:isSafari,isFireFox:isFireFox,isInternetExp:isInternetExp,canUseVisibilityChange:canUseVisibilityChange,referringDomain:referringDomain,isTouchDevice:isTouchDevice,properties:properties,locationInfo:locationInfo,pageviewInfo:pageviewInfo,addDomEvent:addDomEvent,removeDomEvent:removeDomEvent,getWinSize:getWinSize,getScroll:getWinScrlPos,getScreenResolution:getWinScrRes,getWinScrResString:getWinScrResString,Browser:Browser,getInstance:getInstance,toDomNode:toDomNode,getQueryParam:getQueryParam,getLinkidParams:getLinkidParams,isMobileSafari:isMobileSafari,getPath:getPath,getPageType:getPageType,isMobileSafariIOS15Plus:isMobileSafariIOS15Plus,getAllQueryParams:getAllQueryParams,getDocumentTitle:getDocumentTitle,removeFBStyle:removeFBStyle,restoreFBStyles:restoreFBStyles},b64c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",b64pad="=";function decodeBase64(e){var t,r="";return e?(5<e.length&&(t=e.length-5,r=e.substring(t)+e.substring(0,t)),base64_decode(r)):null}function encodeBase64(e){var t,r=base64url_encode(e);return 5<r.length&&(t=r.substring(0,5),r=r.substring(5)+t),r}function base64_encode_data(e,t,r){for(var n="",i=0;i<=t-3;i+=3)n+=r.charAt(e.charCodeAt(i)>>>2),n+=r.charAt((3&e.charCodeAt(i))<<4|e.charCodeAt(i+1)>>>4),n+=r.charAt((15&e.charCodeAt(i+1))<<2|e.charCodeAt(i+2)>>>6),n+=r.charAt(63&e.charCodeAt(i+2));return t%3==2?(n+=r.charAt(e.charCodeAt(i)>>>2),n+=r.charAt((3&e.charCodeAt(i))<<4|e.charCodeAt(i+1)>>>4),n+=r.charAt((15&e.charCodeAt(i+1))<<2),n+=b64pad):t%3==1&&(n+=r.charAt(e.charCodeAt(i)>>>2),n+=r.charAt((3&e.charCodeAt(i))<<4),n+=b64pad,n+=b64pad),n}function base64_encode(e){var t=unescape(encodeURIComponent(e));return base64_encode_data(t,t.length,b64c)}function base64url_encode(e){var t=unescape(encodeURIComponent(e));return base64_encode_data(t,t.length,b64u)}function base64_charIndex(e){return"+"==e?62:"/"==e?63:b64u.indexOf(e)}function base64_decode(e){for(var t,r,n,i,a="",o=e.length,s=0;s<=o-2;s+=4)t=base64_charIndex(e.charAt(s+0)),r=base64_charIndex(e.charAt(s+1)),n=base64_charIndex(e.charAt(s+2)),i=base64_charIndex(e.charAt(s+3)),a+=String.fromCharCode(t<<2|r>>>4),s+2<o&&e.charAt(s+2)!==b64pad&&(a+=String.fromCharCode(r<<4&240|n>>>2&15)),s+3<o&&e.charAt(s+3)!==b64pad&&(a+=String.fromCharCode(n<<6&192|i));return a=decodeURIComponent(escape(a))}function sha1(e){function t(e,t){return e<<t|e>>>32-t}function r(e){for(var t="",r=7;0<=r;r--)t+=(e>>>4*r&15).toString(16);return t}for(var n,i,a,o,s,c,l,g,u=[],d=1732584193,h=4023233417,p=2562383102,f=271733878,I=3285377520,m=[],b=(e=unescape(encodeURIComponent(e))).length,C=0;C<b-3;C+=4)i=e.charCodeAt(C)<<24|e.charCodeAt(C+1)<<16|e.charCodeAt(C+2)<<8|e.charCodeAt(C+3),m.push(i);switch(3&b){case 0:C=2147483648;break;case 1:C=e.charCodeAt(b-1)<<24|8388608;break;case 2:C=e.charCodeAt(b-2)<<24|e.charCodeAt(b-1)<<16|32768;break;case 3:C=e.charCodeAt(b-3)<<24|e.charCodeAt(b-2)<<16|e.charCodeAt(b-1)<<8|128}for(m.push(C);14!=(15&m.length);)m.push(0);for(m.push(b>>>29),m.push(b<<3&4294967295),n=0;n<m.length;n+=16){for(C=0;C<16;C++)u[C]=m[n+C];for(C=16;C<=79;C++)u[C]=t(u[C-3]^u[C-8]^u[C-14]^u[C-16],1);for(a=d,o=h,s=p,c=f,l=I,C=0;C<=19;C++)g=t(a,5)+(o&s|~o&c)+l+u[C]+1518500249&4294967295,l=c,c=s,s=t(o,30),o=a,a=g;for(C=20;C<=39;C++)g=t(a,5)+(o^s^c)+l+u[C]+1859775393&4294967295,l=c,c=s,s=t(o,30),o=a,a=g;for(C=40;C<=59;C++)g=t(a,5)+(o&s|o&c|s&c)+l+u[C]+2400959708&4294967295,l=c,c=s,s=t(o,30),o=a,a=g;for(C=60;C<=79;C++)g=t(a,5)+(o^s^c)+l+u[C]+3395469782&4294967295,l=c,c=s,s=t(o,30),o=a,a=g;d=d+a&4294967295,h=h+o&4294967295,p=p+s&4294967295,f=f+c&4294967295,I=I+l&4294967295}return(g=r(d)+r(h)+r(p)+r(f)+r(I)).toLowerCase()}function hashCode(e){var t=0,r=0;if(0===e.length)return t;for(r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t)}function isValidBase64Char(e){return e===b64pad||0<b64c.indexOf(e)}function shiftString(e){var t;return e&&5<e.length&&(t=e.substring(0,5),e=e.substring(e.length-5)+e.substring(5,e.length-5)+t),e}var encoder={decodeBase64:decodeBase64,encodeBase64:encodeBase64,base64_decode_original:base64_encode,sha1:sha1,hashCode:hashCode,isValidBase64Char:isValidBase64Char,shiftString:shiftString},cookieCache=new Map;setInterval(function(){cookieCache.clear()},1e4);var Cookie=(createClass(px,[{key:"isPrivateIP",value:function(e){return e&&(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e))}},{key:"setVal",value:function(e,t){cookieCache.set(e,t);var r=this.defaultConfigs;for(var n in e=encodeURIComponent(e),t=px.EncodeValue(r,t),r.duration&&(t+=";expires="+new Date(_.now()+r.duration*constants.time.FULL_DAY).toUTCString()),r.samesite&&(t+=";SameSite=None;Secure"),r.domain&&this.isPrivateIP(r.domain)&&delete r.domain,r)"duration"!==n&&"samesite"!==n&&r[n]&&(t+=";"+n+"="+r[n]);var i=e+"="+t;return document.cookie=i}},{key:"get",value:function(e){return px.Get(e)}},{key:"parse",value:function(e){return px.Parse(e)}},{key:"extendExp",value:function(e,t){var r=this.get(e);r&&(this.defaultConfigs=_extends({},this.defaultConfigs,{duration:t}),this.setVal(e,r))}}],[{key:"EncodeValue",value:function(e,t){return e.encode===constants.cookies.encoding.URI?t=encodeURIComponent(t):e.encode!==constants.cookies.encoding.BASE64&&!_.isDefined(e.encode)||(t="__"+encoder.encodeBase64(t)),t}},{key:"DecodeValue",value:function(e){if(!e||0===e.length)return e;var t=constants.cookies.encoding.BASE64;return"%"===e.charAt(0)?t=constants.cookies.encoding.URI:"_"===e.charAt(0)&&"_"===e.charAt(1)?(t=constants.cookies.encoding.BASE64,e=e.slice(2)):t=constants.cookies.encoding.NONE,t===constants.cookies.encoding.URI?decodeURIComponent(e):t===constants.cookies.encoding.BASE64?encoder.decodeBase64(e):e}},{key:"deleteCookie",value:function(e){cookieCache.clear(),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"Replace",value:function(e,t,r,n){cookieCache.clear();var i=px.Get(e),a=px.Get(t),o=new px(r);return null!==i&&null===a&&(o.setVal(t,i),n&&o.deleteCookie(e)),o}},{key:"GetSize",value:function(){return windowDocument.cookie.length}},{key:"Get",value:function(e){if(cookieCache.has(e))return cookieCache.get(e);for(var t=e+"=",r=windowDocument.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){var a=px.DecodeValue(i.substring(t.length,i.length));return cookieCache.set(e,a),a}}return null}},{key:"Parse",value:function(e){var t={};try{t=JSON.parse(px.Get(e))||{}}catch(e){}return t}}]),px);function px(e){classCallCheck(this,px),this.defaultConfigs=e||{}}var DataLayerImpl=(createClass(iy,[{key:"setSessionByKey",value:function(e,t,r){r===constants.storage.SCOPE.SESSION.TAB?browser$1.setItem("sessionStorage",this.sessionStoragePrefix+e,JSON.stringify(t)):this.setByKey(e,t)}},{key:"setTabByKey",value:function(e,t){this.setSessionByKey(e,t,constants.storage.SCOPE.SESSION.TAB)}},{key:"setByKey",value:function(e,t){this.dlObject=this.dlBackend.parse(this.dlNS),this.dlObject[e]=t,this.commit()}},{key:"getByKeyFromMem",value:function(e){return this.dlObject[e]}},{key:"getByKey",value:function(e){var t=sessionStorage&&sessionStorage.getItem(this.sessionStoragePrefix+e);return _.isDefined(t)&&!_.isNil(t)?JSON.parse(t):this.getFromCookie(e)}},{key:"getUserId",value:function(){}},{key:"hasExpired",value:function(e){var t=this.expiration[e];if(!t)return!0;var r=_.now();return!(r<t||(this.expiration[e]=r+5e3,0))}},{key:"getByKeyList",value:function(e){var r=this,n={},i=[];if(e.forEach(function(e){var t=sessionStorage&&sessionStorage.getItem(r.sessionStoragePrefix+e);_.isDefined(t)&&!_.isNil(t)?n[e]=t:i.push(e)}),0<i.length){var t=this.getFromCookieMulti(i);return _extends({},n,t)}return n}},{key:"getFromCookieMulti",value:function(e){var t=this;try{this.dlObject=this.dlBackend.parse(this.dlNS);var r={};return e.forEach(function(e){t.dlObject[e]&&(r[e]=t.dlObject[e])}),r}catch(e){return{}}}},{key:"getFromCookie",value:function(e){try{return this.dlObject=this.dlBackend.parse(this.dlNS),this.dlObject[e]}catch(e){return null}}},{key:"commit",value:function(){var e=JSON.stringify(this.dlObject);this.dlBackend.setVal(this.dlNS,e)}},{key:"replace",value:function(e){this.dlBackend.setVal(this.dlNS,e)}},{key:"setUserProp",value:function(e,t){this.cachedUserProp[e]=t,browser$1.setItem("localStorage",this.userDataNS,JSON.stringify(this.cachedUserProp))}},{key:"getUserProp",value:function(e){return this.cachedUserProp[e]}},{key:"resetUserProp",value:function(){this.cachedUserProp={},window.localStorage&&window.localStorage.removeItem(this.userDataNS)}},{key:"removeByKey",value:function(e){this.dlObject=this.dlBackend.parse(this.dlNS);var t=0;this.dlObject[e]&&(delete this.dlObject[e],t=1),1===t&&this.dlBackend.setVal(this.dlNS,JSON.stringify(this.dlObject)),null!==sessionStorage.getItem(this.sessionStoragePrefix+e)&&sessionStorage.removeItem(this.sessionStoragePrefix+e)}},{key:"isEmpty",value:function(){return _.isEmptyObject(this.dlObject)}},{key:"getSize",value:function(){return Cookie.GetSize()}},{key:"getStorageSize",value:function(){var e=0;for(var t in window.localStorage)window.localStorage.hasOwnProperty(t)&&(e+=2*(t.length+window.localStorage.getItem(t).length));return e}}]),iy);function iy(e){classCallCheck(this,iy);var t,r,n={};this.sessionStoragePrefix="_au_:",n.domain=browser$1.getRootDomain(window.location.hostname),n.path="/",n.encode=constants.cookies.encoding.BASE64,n.samesite=!browser$1.isInternetExp()&&!0===config.getConfig("samesite","behavior"),e.persistence!==constants.symbols.SESSION&&(t=e.duration||constants.storage.DEFAULT_COOKIE_DURATION,(r=new Date).setTime(r.getTime()+864e5*t),n.expires=r.toUTCString()),this.dlNS=e.namespace||constants.storage.DEFAULT_DATALAYER_PREFIX,this.userDataNS=this.dlNS+".u",this.dlBackend=null,e.replace?(this.dlBackend=Cookie.Replace(e.replace,this.dlNS,n,!!e.killOld),e.duration&&this.dlBackend.extendExp(this.dlNS,e.duration)):(this.dlBackend=new Cookie(n),e.duration&&this.dlBackend.extendExp(this.dlNs,e.duration),window.localStorage.removeItem(this.userDataNS)),this.dlObject=this.dlBackend.parse(this.dlNS),this.cachedUserProp={},window.localStorage.getItem(this.userDataNS)&&(this.cachedUserProp=JSON.parse(window.localStorage.getItem(this.userDataNS))),this.expiration={ic:1,ready:1}}var winNameSingleton=null,WinNameDataLayer=(createClass(oz,[{key:"initObj",value:function(e){this.objSize=0,this.objStart=e+"_OS_",this.objFinish=e+"_OF_",this.obj={}}},{key:"initString",value:function(e){this.strSize=0,this.strStart=e+"_SS_",this.strFinish=e+"_SF_",this.str=""}},{key:"clear",value:function(){this.initObj("_auryc_"+this.prefix),this.initString("_auryc_"+this.prefix)}},{key:"reload",value:function(){var e,t,r=_.isDefined(window.name)?window.name:"",n="",i=r.indexOf(this.objStart);-1<i&&(e=i+this.objStart.length,t=r.indexOf(this.objFinish)-e,n=r.substr(e,t));try{0<n.length&&(this.obj=JSON.parse(n),this.objSize=n.length)}catch(e){}var a,o,s="",c=r.indexOf(this.strStart);-1<c&&(a=c+this.strStart.length,o=r.indexOf(this.strFinish)-a,s=r.substr(a,o));try{0<s.length&&(this.str=s,this.strSize=s.length)}catch(e){}}},{key:"removeByKey",value:function(e){delete this.obj[e],this.objSize=JSON.stringify(this.obj).length}},{key:"getSize",value:function(){return this.objSize+this.strSize}},{key:"getByKey",value:function(e){return this.obj[e]}},{key:"getStr",value:function(){return this.str}},{key:"setStr",value:function(e){_.isUndefined(e)||(this.str=e,this.strSize=e.length)}},{key:"setStrAndCommit",value:function(e){_.isUndefined(e)||(e.length<=this.storageLimit?(this.setStr(e),this.commit()):logger.warn("exceeding limit. skip"))}},{key:"setByKey",value:function(e,t){_.isDefined(e)&&_.isDefined(t)&&(this.obj[e]=t,this.objSize=JSON.stringify(this.obj).length)}},{key:"commit",value:function(){try{var e=_.isDefined(window.name)?window.name:"",t=e.indexOf(this.objStart),r=JSON.stringify(this.obj),n=this.objStart+r+this.objFinish;-1<t?e=e.substring(0,t)+n+e.substr(e.indexOf(this.objFinish)+this.objFinish.length):e+=n;var i=e.indexOf(this.strStart),a=this.strStart+this.str+this.strFinish;-1<i?e=e.substring(0,i)+a+e.substr(e.indexOf(this.strFinish)+this.strFinish.length):e+=a,window.name=e}catch(e){}}},{key:"purge",value:function(){this.initObj("_auryc_"+this.prefix),this.initString("_auryc_"+this.prefix),this.commit()}}],[{key:"getInstance",value:function(e){return winNameSingleton=winNameSingleton||new oz(e)}}]),oz);function oz(e){classCallCheck(this,oz),this.prefix=e||"",this.initObj("_auryc_"+this.prefix),this.initString("_auryc_"+this.prefix),this.reload(),this.storageLimit=config.getConfig("winname_max_length","record")||constants.storage.WINNAME_MAX_LENGTH}var globalSessStg=null,globalPersistStg=null,DataLayer=(createClass(fA,null,[{key:"getInstance",value:function(e,t){return fA._getInstance()(e,t)}},{key:"_getInstance",value:function(){return function(e,t){var r,n,i=e===constants.symbols.SESSION?"s":"p",a={namespace:"userty."+(t=t||"core")+"."+i+"."+encoder.sha1(config.getSiteid()).slice(0,6),replace:"userty."+t+"."+i};return e===constants.symbols.SESSION?(null===globalSessStg&&(r=a,n={namespace:_.get(r,"namespace","userty.s"),persistence:constants.symbols.SESSION},r.replace&&(n.replace=r.replace,n.killOld=!0),globalSessStg=new DataLayerImpl(n)),globalSessStg):(a.duration=constants.storage.DEFAULT_COOKIE_DURATION,null===globalPersistStg&&(globalPersistStg=function(e){e=e||{};var t={namespace:_.get(e,"namespace","userty.p"),persistence:constants.symbols.PERMANENT,duration:_.get(e,"duration",constants.storage.DEFAULT_COOKIE_DURATION)};return e.replace&&(t.replace=e.replace),new DataLayerImpl(t)}(a)),globalPersistStg)}}}]),fA);function fA(){classCallCheck(this,fA)}var StorageDataLayer=(createClass(xA,[{key:"clearHistoryStorage",value:function(){window.sessionStorage.removeItem(this.stgPrefix+"_BLOB"),window.sessionStorage.removeItem(this.stgPrefix+"_OBJ")}},{key:"removeByKey",value:function(e){this.objData[e]&&(delete this.objData[e],this.storageBytesObj=JSON.stringify(this.objData).length)}},{key:"clear",value:function(){this.storageBytesObj=0,this.storageBytesBlob=0,this.objData={},this.blobData=""}},{key:"getByKey",value:function(e){return this.objData[e]}},{key:"getStr",value:function(){return this.blobData}},{key:"setByKey",value:function(e,t){_.isDefined(e)&&_.isDefined(t)&&(this.objData[e]=t,this.storageBytesObj=JSON.stringify(this.objData).length)}},{key:"setStr",value:function(e){this.blobData=e,this.storageBytesBlob=this.blobData.length}},{key:"isSupported",value:function(){return!!sessionStorage}},{key:"reload",value:function(){var e;try{(e=sessionStorage.getItem(this.stgPrefix+"_OBJ"))&&0<e.length&&(this.objData=JSON.parse(e),this.storageBytesObj=e.length)}catch(e){}try{(e=sessionStorage.getItem(this.stgPrefix+"_BLOB"))&&0<e.length&&(this.blobData=e,this.storageBytesBlob=e.length)}catch(e){}}},{key:"commit",value:function(){browser$1.setItem("sessionStorage",this.stgPrefix+"_OBJ",JSON.stringify(this.objData)),browser$1.setItem("sessionStorage",this.stgPrefix+"_BLOB",this.blobData)}},{key:"setStrAndCommit",value:function(e){_.isUndefined(e)||e.length<this.storageLimit&&(this.setStr(e),this.commit())}},{key:"purge",value:function(){this.clear(),this.commit()}}],[{key:"getInstance",value:function(e){return xA.instance||(xA.instance=new xA(e)),xA.instance}}]),xA);function xA(e){classCallCheck(this,xA),this.stgPrefix="aurycStg_"+(e||""),this.storageLimit=4e6,this.clear(),this.reload(),this.clearHistoryStorage()}var StorageManager=(createClass(WA,null,[{key:"getInstance",value:function(e){return config.getConfig("disableWinName","behavior")||config.isVisualEditorMode()?StorageDataLayer.getInstance(e):WinNameDataLayer.getInstance(e)}}]),WA);function WA(){classCallCheck(this,WA)}var device_detector_domain="uba-detector.auryc.com/useragent",tracking_url="mt.auryc.com",tracking_url_proxy="https://mt.auryc.com",inspectlet_wid="1309714722",inspectlet_blacklist="auryc.com,localhost",replay_samplelist="2redbeans.com:1,thredup.com:0.1,arenasolutions.com:1,lovewithfood.com:1",domain_name="userty",services_url="https://services.auryc.com",editor_url="//visualeditor.auryc.com",record_uri="https://uba-tracking.auryc.com/rec/",auto_tracking_url="uba-tracking.auryc.com",uba_api_url="client-api.auryc.com",token_url="services.auryc.com/cc-services/sites",portal_replay_url="https://portal.auryc.com/auth/replay/playback?q=",fb_view_uri="https://feedback-api.auryc.com/view/feedback-json",fb_submit_uri="https://feedback-api.auryc.com/submit-feedback",ip_detector_url="https://uba-detector.auryc.com/whereismyip?accessToken=auryc20160418",ip_addr_detector_url="https://uba-detector.auryc.com/whatismyip?accessToken=auryc20160418",tracking_url_selective="https://mt.auryc.com",script_url="https://cdn.auryc.com",remote_config_url="https://client-api.auryc.com/siteconfig?lib=web",configServerJson={device_detector_domain:device_detector_domain,tracking_url:tracking_url,tracking_url_proxy:tracking_url_proxy,inspectlet_wid:inspectlet_wid,inspectlet_blacklist:inspectlet_blacklist,replay_samplelist:replay_samplelist,domain_name:domain_name,services_url:services_url,editor_url:editor_url,record_uri:record_uri,auto_tracking_url:auto_tracking_url,uba_api_url:uba_api_url,token_url:token_url,portal_replay_url:portal_replay_url,fb_view_uri:fb_view_uri,fb_submit_uri:fb_submit_uri,ip_detector_url:ip_detector_url,ip_addr_detector_url:ip_addr_detector_url,tracking_url_selective:tracking_url_selective,script_url:script_url,remote_config_url:remote_config_url};function testSameDomain(e,t){if(!e||!t)return!1;var r=getLocation(e),n=getLocation(t);if(!r||!n)return!1;var i=r.protocol||window.location.protocol,a=n.protocol||window.location.protocol,o=r.port||("http"===i?"80":"443"),s=n.port||("http"===a?"80":"443");return i===a&&o===s&&r.hostname===n.hostname}function isPrivateIP$1(e){return!(!e||!(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e)))&&(logger.log("found private ip:"+e),!0)}function getRootDomain$1(e){var t=getTopDomain$1();return t?(logger.log("domain 1: "+t),t):isPrivateIP$1(e)?"localhost":e.toLowerCase().split(".").slice(-2).join(".")}function getTopDomain$1(){for(var e,t="weird_get_top_level_domain=cookie",r=document.location.hostname.split("."),n=r.length-1;0<=n;n--)if(e=r.slice(n).join("."),document.cookie=t+";domain=."+e+";",-1<document.cookie.indexOf(t))return document.cookie=t.split("=")[0]+"=;domain=."+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",e}function isAjaxProxyEnabled(e){var t=constants.ajax_proxy.domainFilters;if(new RegExp(t,"i").test(e)){var r=config.getConfig("ajax_whitelist","behavior");if(r)for(var n=r.split(","),i=0;i<n.length;i++){var a=n[i];if(new RegExp(a,"i").test(e))return!0}return!1}return!0}function getLocation(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],domain:t[2],hostname:t[3],port:t[4],path:t[5],query:t[6],hash:t[7]}}function isCrossDomainIframe(){if(top!==window)try{return top.location.host!==window.location.host}catch(e){return!0}return!1}function isDuplicateSameDomainIframe(){try{return window.self!==window.top&&!0===window.top.aurycInit}catch(e){return!1}}function isInPlayerIframe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;try{if(e.self===e.top)return!1;if("playerContainerFrame"===(e.self&&e.self.name||""))return!0}catch(e){return!1}}var urls={testSameDomain:testSameDomain,isPrivateIP:isPrivateIP$1,getRootDomain:getRootDomain$1,getTopDomain:getTopDomain$1,isAjaxProxyEnabled:isAjaxProxyEnabled,getLocation:getLocation,isCrossDomainIframe:isCrossDomainIframe,isDuplicateSameDomainIframe:isDuplicateSameDomainIframe,isInPlayerIframe:isInPlayerIframe};function runReadyCb(e,t,r){var n=window.auryc;if(t&&(window.auryc=t),e&&0<e.length)for(var i=e.length,a=0;a<i;a++)try{e[a].call()}catch(e){}window.auryc=n}function getCfg(e,t,r,n){r=r||"base";var i=_.get(e,r+"["+t+"]",null);if(n||"base"===r)return i;var a=_.get(e,"base["+t+"]",null),o=_.get(e,t,null);return null!==i||null!==a?i:o}function getCurrentIdentity(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=DataLayer.getInstance(constants.symbols.PERMANENT),r=t&&t.getByKey(constants.events.IDENTITYVALUE);return!r&&e.localStorage&&(r=e.localStorage.getItem(constants.storage.IDENTITY_KEY)),r}function getUserId(){var e=DataLayer.getInstance(constants.symbols.PERMANENT);return e&&e.getByKey(constants.events.USERID)}var userSamplingFlag=null,siteid,eventSamplingVar,ajaxEnabledVar,codeVersion,dfObjVar,domCacheItemVar,domCacheSizeVar,trackNetworkEnabledVar,isTrackResourceEnabledVar,ajaxRequestWhitelistVar,isSelectiveRecordingVar,piiBlackList,siteToken,compressVar,perfBlacklist,mutExcludeList,trackingUriVar,useProxyVar,ignoreNodeContentsListVar,memoryMonitorEnabled,memoryCheckInterval,memoryCheckLimit,memoryCheckPercentThreshold,ignoreHeapTextCapture,serializeCss,serializeImg,disableSRTextCapture,serializeSampling,isSameDocClone,redactTextEnabled,srOnlyDisableTextCaptureEnabled,isEnhancedHMVar,isEnrichedHTMLVar;function cacheUserSamplingFlag(e){userSamplingFlag=e}function resetUserSamplingFlag(){userSamplingFlag=null}function getUserSamplingFlag(){return userSamplingFlag}function getUserHash(e){var t=(t=getCurrentIdentity(1<arguments.length&&void 0!==arguments[1]?arguments[1]:window))||(e||getUserId());return encoder.hashCode(t)%100%100}function getSamplingRate(){var t=getConfig("sampling","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window);if(null==t)t=100;else if(!_.isNumber(t))try{t=parseFloat(t,10)}catch(e){t=100}return t}function isUserSampled(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;try{var r=getUserSamplingFlag();if(null!==r)return r;var n=!0,i=getSamplingRate(t);return cacheUserSamplingFlag(n=100===i||0!==i&&getUserHash(e,t)<i),n}catch(e){return!1}}function isCookieSupported$1(){var e=windowNavigator.cookieEnabled;return e||(window.cookie="testcookie",e=-1!==window.cookie.indexOf("testcookie")),e}function getOverrideParams(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,n="_ar_:"+(t=t||"behavior")+":"+e,i=r&&r.localStorage&&r.localStorage.getItem(n);if(null==i)return null;try{i=JSON.parse(i)}catch(e){}return i}function getConfig(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window,i=getCfg(n.aurycJsLibConfig||{},e,t,r),a=getOverrideParams(e,t,n);return null==a?i:a}function getProductConfig(e,t){var r=window.aurycJsLibConfig||{};return r[e]?r[e]:t?r.base||r:{}}function isVisualEditorMode(){if(window.name&&0===window.name.indexOf("auryc_eventmarker:#mode=editor"))return!0;if(!0===window._auryc_is_event_marker_override_)return!0;var e=window.location.hash;if(e&&getHashParam$1(e,"mode")&&"editor"===getHashParam$1(e,"mode"))return!0;var t=constants.event_marker_keys.AurycHashKey;return"editor"===DataLayer.getInstance(constants.symbols.SESSION).getByKey(t)}function getHashParam$1(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null}function basicMode(){var e=getConfig("basicMode","behavior");if(!0===e)return!0;var t=document.location.href;if(_.isArray(e))for(var r=0;r<e.length;r++){var n=e[r],i=new RegExp(n);if(t.match(i))return!0}return!1}function os(e){var t=e;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":""}function isLimitedUrlTracking(){return!0===getConfig("limitedUrlTracking","behavior")}function isSPAEnabled(){var e=getConfig("spaUnsupported","behavior");if(!0===e)return!1;var t=os(windowNavigator.userAgent);if(e&&e.os&&t)for(var r=0;r<e.os.length;r++)if(t===e.os[r])return!1;return!0}function isAppcueBuilderEnabled(){return document.getElementsByTagName("appcues-crx")&&0<document.getElementsByTagName("appcues-crx").length}function hasConflicting3PJS(){return isAppcueBuilderEnabled()}function isAjaxBlacklist(){return-1<document.location.host.indexOf("demandware.net")}function getWorkerJSPath(){var e=getOverrideParams("jslibPath","container")||window.__AURYC_JSLIB_PATH__;switch("production".toLowerCase()){case"local":return e||"https://local.auryc.com:8887/";case"development":return e||"https://cdn.auryc.dev/libs/"+getLibVersion()+"/";case"production":return e||"https://cdn.auryc.com/libs/"+getLibVersion()+"/";default:return""}}function supportsDeclarativeShadowDOM(){return window.HTMLTemplateElement&&window.HTMLTemplateElement.prototype.hasOwnProperty("shadowRoot")}function getLibVersion(){return window.aurycJsLibConfig.version||"latest"}function isFeedbackEnabled(){return!1!==getConfig("feedbackEnabled","behavior")}function checkFeedbackScheduled(e){var t=e.scheduled;if(t&&t.enabled){var r=_.now(),n=t.startTime||r-1,i=t.endTime||r+1;return n<=r&&r<=i}return!0}function isFeedbackInviteEnabled(e){var t=e.invite;return!(!t||!t.enabled)}function getWorkerJS(){return getWorkerJSPath()+"auryc.worker.js"}function isStyleLink(e){return e&&e.type&&"text/css"===e.type&&e.rel&&"stylesheet"===e.rel}function isBlobStyle(e){return isStyleLink(e)&&e.href&&0===e.href.indexOf("blob:")}function enableProduct(e){DataLayer.getInstance(constants.symbols.SESSION).setSessionByKey("p",e?"t":"f")}function matchUrl(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:window).location.href.toLowerCase(),n=e.filter(function(e){return""!==e.trim()&&-1<r.indexOf(e.toLowerCase().trim())});if(n&&0<n.length){var i=t.filter(function(e){return""!==e.trim()&&-1<r.indexOf(e.toLowerCase().trim())});return!(i&&0<i.length)}return!1}function isProductEnabled(e){if(!window.JSON)return!1;var t=getConfig("trackAll","behavior"),r=(getConfig("excluded","behavior")||{}).ua;if(_.isBlockedUAComplex(windowNavigator.userAgent,r)&&!0!==t)return logger.warn(e+" disabled. UA not supported: "+windowNavigator.userAgent),!1;if(hasConflicting3PJS())return logger.warn(e+" disabled. Found conflicting 3rd part JS"),!1;if(!isCookieSupported$1())return logger.warn(e+" disabled. cookie is not supported"),!1;if(_.aurycOverride(e))return logger.warn(e+" enabled as per aurycOverride"),!0;if(!1===getConfig("enabled",e,!0))return logger.warn(e+" disabled as per client config"),!1;if(-1<document.location.href.indexOf("ar_id="))return enableProduct(!0),!0;if(getConfig("crossdomain","behavior")&&urls.isCrossDomainIframe())return enableProduct(!0),!0;var n=!0;if(isIpRequired()){var i=getIpBlockedEls(),a=i.wl,o=i.bl,s=DataLayer.getInstance(constants.symbols.SESSION).getByKey(constants.pii.geoIP);if("unknown"===s&&o&&0<o.length)return!1;s&&(_.inArray(s,o)||matchIPSegment(s,o)?n=!1:(_.inArray(s,a)||matchIPSegment(s,a))&&(n=!0))}return n}function checkSalesforceAuraJS(e){if(!e)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(r&&"SCRIPT"===r.tagName&&/\/?aura_prod\.js(\?.+)?$/.test(r.src))return!0}return!1}function matchIPSegment(e,t){for(var r=!1,n=0;n<t.length;n++)if(0<t[n].indexOf("*")){var i=t[n].split("*");if(_.startsWith(e,i[0])){r=!0;break}}return r}function getSiteid(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===siteid&&(!1===(siteid=getConfig("siteid","base",!1,e)||getConfig("siteid","behavior",!1,e)||getConfig("siteid","feedback",!1,e))&&(siteid=getConfig("site_id","base",!1,e)||getConfig("site_id","behavior",!1,e)||getConfig("site_id","feedback",!1,e)),!1===siteid&&logger.critical("Unable to find a siteid")),siteid}function isSnapshotEnabled(){var e=getConfig("spEnabled","behavior");if(!e)return!1;for(var t=(window.location.href||"about:blank").toLowerCase(),r=0;r<e.length;r++){if(new RegExp(e[r],"i").test(t))return!0}return!1}function getBaseBlockedEls(){var e=getConfig("doNotTrack","behavior");return e&&e.blocked?e.blocked:null}function getGeoSpecificBlockedEls(){var e=getGeoBlocks();return _.get(e||{},"cssSelectors","")}function getGeoBlocks(){var e=getConfig("doNotTrack","behavior");return e&&e.geoBlocked?e.geoBlocked:null}function getGeoDefault(){return(getGeoBlocks()||{}).default||"allow"}function getGeoBlockContinents(){return((getGeoBlocks()||{}).continents||[]).map(function(e){return e.toLowerCase()})}function getGeoBlockCountries(){return((getGeoBlocks()||{}).countries||[]).map(function(e){return e.toLowerCase()})}function isGeoDetectionRequired(){var e=getGeoBlocks()||{};return 0<_.get(e,"continents",[]).length}function getInputWhiteList(){return getConfig("keepInputsWhiteList","record")||""}function getEventSamplingRate(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;void 0===eventSamplingVar&&(eventSamplingVar=getConfig("eventSampling","behavior",!1,t));var r=100;return eventSamplingVar&&(0===(r=eventSamplingVar[e])||r||(r=100)),r}function isPerfTimingAPIAvailable(e){var t=!1;try{(t="performance"in(e=e||window)&&"PerformanceObserver"in e)&&new e.PerformanceObserver(function(){})}catch(e){return!1}return t}function isPaintTimingSupported(e){return!!e.PerformancePaintTiming}function isAjaxProxyEnabled$1(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===ajaxEnabledVar&&(ajaxEnabledVar=!0===getConfig("ajax","behavior",!1,e)),ajaxEnabledVar}function getCodeVersion(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===codeVersion&&(codeVersion=getConfig("code_version","base",!1,e)),codeVersion}function compress(r){if(!r.comp)return r;delete r.comp;var n={};return Object.keys(r).forEach(function(e){var t=e.split(":").map(function(e){switch(e){case"z":return"a";case"Z":return"A";default:return String.fromCharCode(1+e.charCodeAt(0))}}).join("");n[t]=r[e]}),n}function loadRemoteConfig(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;if("disabled"===_.get(n,"aurycJsLibConfig.behavior.remote_cfg",""))return r();var t=n.aurycJsLibConfig.base.siteid,i=n.aurycJsLibConfig.base.siteToken;if(!i||!t)return r();var a={type:"GET",url:e,onSuccess:function(e){try{var t=JSON.parse(e);n.aurycJsLibConfig={base:t.baseConfig||n.aurycJsLibConfig.base,feedback:t.feedbackConfig||n.aurycJsLibConfig.feedback,record:t.recordConfig||n.aurycJsLibConfig.record,ruleengine:t.ruleengineConfig||n.aurycJsLibConfig.ruleengine,behavior:t.behaviorConfig||n.aurycJsLibConfig.behavior,version:n.aurycJsLibConfig.version},r()}catch(e){r()}},onFailure:function(){r()},contentType:"application/json",timeout:5e3,headers:{"x-authorized-identity":t,"x-authorized-token":i}};try{asyncTimeoutReq(a)}catch(e){}}function initCfg(e){var baseConfig={enabled:!0,code_version:"4.7.5",device_uri:e.device_detector_domain,ip_url:e.ip_detector_url,ip_address_url:e.ip_addr_detector_url,tracking_uri:e.tracking_url,tracking_uri_proxy:e.tracking_url_proxy,tracking_uri_selective:e.tracking_url_selective,uba_api_uri:e.uba_api_url,auto_tracking_uri:e.auto_tracking_url,editor_uri:e.editor_url,replay_url:e.portal_replay_url,fb_view_url:e.fb_view_uri,fb_submit_url:e.fb_submit_uri,script_uri:e.script_url};win.aurycJsLibConfig.base=_.extend(win.aurycJsLibConfig.base,baseConfig)}function init(e){var t=configServerJson;if(_.isUndefined(win.aurycJsLibConfig))return logger.critical("Unable to initialize. Missing aurycConfig"),void(win.aurycJsLibConfig={base:{enabled:!1},behavior:{enabled:!1},feedback:{enabled:!0}});"server"===win.aurycJsLibConfig.source?(initCfg(t),e&&e()):loadRemoteConfig(t.remote_config_url,function(){initCfg(t),e&&e()},win)}function getFBViewUrl(e){return(e=e||win).aurycJsLibConfig.base.fb_view_url}function getFBSubmitUrl(e){return(e=e||win).aurycJsLibConfig.base.fb_submit_url}function getExcludedUrls(){return(getConfig("excluded","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)||{}).urls||[]}function getExcludedUrlExceptions(){return(getConfig("excluded","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)||{}).urlExceptions||[]}function getIncludedUrls(){return(getConfig("included","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)||{}).urls||[]}function getIncludedUrlExceptions(){return(getConfig("included","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)||{}).urlExceptions||[]}function isUrlWhiteListEnabled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=getConfig("urlFilterControl","behavior",!1,e)||{};return isUrlFilterEnabled(e)&&"W"===_.get(t,"mode","B")}function isUrlBlackListEnabled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=getConfig("urlFilterControl","behavior",!1,e)||{};return isUrlFilterEnabled(e)&&"B"===_.get(t,"mode","B")}function isUrlFilterEnabled(){var e=getConfig("urlFilterControl","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)||{};return!1!==_.get(e,"enabled",!0)}function isDomDiffEnabled(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===dfObjVar&&(e=getConfig("diffEnabled","record",!1,t),dfObjVar=!!_.isUndefined(e)),dfObjVar}function getDomCacheItem(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===domCacheItemVar&&(domCacheItemVar=getConfig("cacheItems","record",!1,e)),domCacheItemVar}function getDomCacheSize(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===domCacheSizeVar&&(domCacheSizeVar=getConfig("cacheSize","record",!1,e)),domCacheSizeVar}function isBatchProcessingMutationEnabled(){var e=getConfig("batchMutationEnabled","record");return!!_.isUndefined(e)||e}function isTrackConsoleEnabled(){var e=getConfig("trackConsole","behavior");return _.isObject(e)?!0===e.enabled:!0===e}function isInJsErrorSamplingPool(){return samplingEvent(getEventSamplingRate("jsError"),"jsError")}function isInWebVitalsSamplingPool(){return samplingEvent(getEventSamplingRate("webvitals",0<arguments.length&&void 0!==arguments[0]?arguments[0]:window),"wv")}function isInAjaxSamplingPool(){return!!isAjaxProxyEnabled$1()&&samplingEvent(getEventSamplingRate("ajax"),"ajax")}function isTrackNetworkEnabled(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===trackNetworkEnabledVar&&(e=getConfig("trackNetwork","behavior",!1,t),trackNetworkEnabledVar=_.isObject(e)?!0===e.enabled:!0===e),trackNetworkEnabledVar}function addShimAPIs(){window.auryc=window.auryc||{},["track","identify","addFBCustomData","addUserProperties","addSessionProperties","getReplayUrl","setFeedbackEnabled","clearUserCookie","addFBSubmitHandler","addFBCancelHandler","pause","resume"].forEach(function(e){window.auryc[e]=function(){}})}function isShadowDOMEnabled(e){return!1!==getConfig("shadowDom","behavior",!1,e=e||window)}function isTrackResourceEnabled(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;return"navigation"===e||(void 0===isTrackResourceEnabledVar&&(isTrackResourceEnabledVar=getConfig("trackResource","behavior",!1,t)),!0===isTrackResourceEnabledVar)}function isStackTraceEnabledForConsole(){var e=getConfig("trackConsole","record");return _.isObject(e)&&!0===e.st}function getRequestHeaderWhiteList(){var e=getConfig("requestHeaderWhiteList","behavior");return _.isUndefined(e)?[]:e.split(",").map(function(e){return e.trim()})}function getResponseHeaderWhiteList(){var e=getConfig("responseHeaderWhiteList","behavior");return _.isUndefined(e)?[]:e.split(",").map(function(e){return e.trim()})}function getAjaxBodyWhitelist(r){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;void 0===ajaxRequestWhitelistVar&&(ajaxRequestWhitelistVar=getConfig("ajaxRequestWhitelist","behavior",!1,e));var t=ajaxRequestWhitelistVar;if(_.isUndefined(t))return{isRecorded:!1};var n={};return t.forEach(function(e){try{var t=e.reg;new RegExp(t,"i").test(r)&&((n=e).isRecorded=!0)}catch(e){}}),n.isRecorded?n:{isRecorded:!1}}function samplingEvent(e,t){return checkSampling(DataLayer.getInstance(constants.symbols.SESSION),t,e,t)}function checkSampling(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;if(void 0===r||!_.isNumber(r)||100===r)return!0;if((n=n||t)&&"true"===window.localStorage[n])return!0;if(i=i||Math.random(),0===r)return!1;if(e&&t){var a="smpl."+t,o=e.getByKey(a);if(o)return"t"===o;var s=100*i<r;return e.setByKey(a,s?"t":"f"),s}return 100*i<r}function setErrorRule(e){DataLayer.getInstance(constants.symbols.SESSION).setSessionByKey("auryc.onerror.key",JSON.stringify(e),constants.storage.SCOPE.SESSION.TAB)}function getErrorRule(){return{properties:[{name:"js_error",dataType:"customEvent",attribute:[{name:"relative_error_loc",value:"fileRelativeLocation"},{name:"error_message",value:"message"},{name:"error_lineNo",value:"lineNo"},{name:"error_columnNo",value:"columnNo"}],handler:"aurycJSErrorHanlder"}],triggers:[{event:"error",object:"window"}]}}function getParameterCaseInsensitive(e,t){if(e)return e[Object.keys(e).filter(function(e){return e.toLowerCase()===t.toLowerCase()})[0]]}function getIpBlockedEls(){var e=getConfig("doNotTrack","behavior");return e&&e.ip?(e.ip.wl=e.ip.wl||[],e.ip.bl=e.ip.bl||[],e.ip):null}function isIpRequired(){var e=getIpBlockedEls();if(e){var t=e.wl,r=e.bl;return 0<t.length||0<r.length?!0:!1}return!1}function checkDomOnloadSampling(){var e=1;if(localStorage.getItem("domOnloadSampling"))return!0;var t=getConfig("domOnloadSampling","record");return _.isDefined(t)&&(e=t),100*Math.random()<e}function isWebVitalsEnabled(){return!1!==getConfig("webvitals","behavior")}function isNetworkInfoEnabled(){return!0===getConfig("netinfo","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)}function getArLinkid(){return getConfig("arLinkid","behavior")||"_ar_id_"}function isSelectiveRecording(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===isSelectiveRecordingVar&&(isSelectiveRecordingVar=!0===getConfig("selectiveRecording","behavior",!1,e)),isSelectiveRecordingVar}function trackIframeLoad(){return!0===getConfig("trackiframeurl","behavior",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)}function isCoBrowsingEnabled(){return 1===getConfig("cb","record",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)}function isCheckOffsetParent(){return getConfig("checkInputOffsetParent","record",!1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)}function resetAttribute(){return!1!==getConfig("resetAttribute","record",!0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:window)}function getPIIBlacklistUrl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===piiBlackList&&(piiBlackList=getConfig("blacklist","record",!1,e)),piiBlackList}function getSiteToken(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===siteToken&&(siteToken=getConfig("siteToken","base",!1,e)),siteToken}function getCompress(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===compressVar&&(compressVar=!1!==getConfig("compress","behavior",!1,e)),compressVar}function getPerfBlacklist(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===perfBlacklist&&(perfBlacklist=getConfig("perf_blacklist","record",!1,e)||getConfig("mut_blacklist","record",!1,e)||{}),perfBlacklist}function getMutExcludeList(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===mutExcludeList&&(mutExcludeList=getConfig("mutexclude","record",!1,e)||{}),mutExcludeList}function getTrackingUri(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===trackingUriVar&&(trackingUriVar=getConfig("tracking_uri","base",!1,e)),trackingUriVar}function getUseProxy(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===useProxyVar&&(useProxyVar=!0===getConfig("proxy","base",!1,e)),useProxyVar}function getIgnoreNodeContentsList(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===ignoreNodeContentsListVar&&(ignoreNodeContentsListVar=constants.record.mutatationConfig.ignoreNodeContentsList,(e=getConfig("ignoreNodeContentsList","record","",t))&&_.isArray(e)&&0<e.length&&(ignoreNodeContentsListVar=ignoreNodeContentsListVar.concat(e))),ignoreNodeContentsListVar}function getMemoryMonitorEnabled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===memoryMonitorEnabled&&(memoryMonitorEnabled=getConfig("memoryMonitor","behavior",!1,e)),memoryMonitorEnabled}function getMemoryCheckInterval(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===memoryCheckInterval&&(memoryCheckInterval=getConfig("memoryCheckInterval","behavior",!1,e)),memoryCheckInterval}function getMemoryCheckLimit(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===memoryCheckLimit&&(memoryCheckLimit=getConfig("memoryCheckLimit","behavior",!1,e)),memoryCheckLimit}function getMemoryCheckThreshold(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return void 0===memoryCheckPercentThreshold&&(memoryCheckPercentThreshold=getConfig("memoryCheckPercentThreshold","behavior",!1,e)),memoryCheckPercentThreshold}function getIgnoreHeapTextCapture(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==ignoreHeapTextCapture||(ignoreHeapTextCapture=getConfig("ignoreHeapTextCapture","behavior",!1,e)),!1!==ignoreHeapTextCapture}function getSerializeCss(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==serializeCss||(serializeCss=getConfig("serializeCss","record",!1,e)),!!(serializeCss||!1!==serializeCss&&isHeapSiteId())&&isSerializeSampled()}function isHeapSiteId(){var e=getSiteid();return void 0!==window.heap||e&&-1<e.indexOf("-heap")}function getSerializeImg(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==serializeImg||(serializeImg=getConfig("serializeImg","record",!1,e)),!!serializeImg&&isSerializeSampled()}function getDisableTextCapture(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==disableSRTextCapture||(disableSRTextCapture=getConfig("disableSRTextCapture","record",!1,e)),disableSRTextCapture}function isSerializeSampled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==serializeSampling||(serializeSampling=getConfig("serializeSampling","record",!1,e)),null===serializeSampling&&(serializeSampling=constants.record.cssSerializationSamplingRate),0!==serializeSampling&&100*Math.random()<+serializeSampling}function getSameDocClone(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==isSameDocClone||(isSameDocClone=getConfig("isSameDocClone","record",!1,e)),!1!==isSameDocClone}function isRedactTextEnabled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return!!isHeapSiteId()&&(t&&void 0!==redactTextEnabled||(redactTextEnabled=getConfig("isRedactTextEnabled","record",!1,e)),!1!==redactTextEnabled)}function isSROnlyDisableTextCaptureEnabled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==srOnlyDisableTextCaptureEnabled||(srOnlyDisableTextCaptureEnabled=getConfig("srOnlyDisableTextCaptureEnabled","record",!0,e)),!1!==srOnlyDisableTextCaptureEnabled}function isEnhancedHM(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==isEnhancedHMVar||(isEnhancedHMVar=getConfig("isEnhancedHM","record",!1,e)),!1!==isEnhancedHMVar}function isEnrichedHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&void 0!==isEnrichedHTMLVar||(isEnrichedHTMLVar=getConfig("isEnrichedHTML","record",!1,e)),!0===isEnrichedHTMLVar}var config={getSameDocClone:getSameDocClone,getSerializeImg:getSerializeImg,getSerializeCss:getSerializeCss,getMemoryCheckThreshold:getMemoryCheckThreshold,getMemoryCheckLimit:getMemoryCheckLimit,getMemoryCheckInterval:getMemoryCheckInterval,getMemoryMonitorEnabled:getMemoryMonitorEnabled,getIgnoreNodeContentsList:getIgnoreNodeContentsList,getSiteToken:getSiteToken,getCompress:getCompress,getPerfBlacklist:getPerfBlacklist,getTrackingUri:getTrackingUri,getUseProxy:getUseProxy,isCheckOffsetParent:isCheckOffsetParent,getConfig:getConfig,isSPAEnabled:isSPAEnabled,hasConflicting3PJS:hasConflicting3PJS,isProductEnabled:isProductEnabled,getSiteid:getSiteid,isVisualEditorMode:isVisualEditorMode,getProductConfig:getProductConfig,isSnapshotEnabled:isSnapshotEnabled,init:init,getBaseBlockedEls:getBaseBlockedEls,isCookieSupported:isCookieSupported$1,os:os,isAjaxProxyEnabled:isAjaxProxyEnabled$1,compress:compress,getEventSamplingRate:getEventSamplingRate,basicMode:basicMode,getWorkerJS:getWorkerJS,getInputWhiteList:getInputWhiteList,isBlobStyle:isBlobStyle,isDomDiffEnabled:isDomDiffEnabled,isBatchProcessingMutationEnabled:isBatchProcessingMutationEnabled,enableProduct:enableProduct,isFeedbackEnabled:isFeedbackEnabled,getExcludedUrls:getExcludedUrls,getIncludedUrls:getIncludedUrls,matchUrl:matchUrl,getGeoBlockContinents:getGeoBlockContinents,getGeoBlockCountries:getGeoBlockCountries,getGeoDefault:getGeoDefault,isGeoDetectionRequired:isGeoDetectionRequired,getGeoSpecificBlockedEls:getGeoSpecificBlockedEls,isAjaxBlacklist:isAjaxBlacklist,getRequestHeaderWhiteList:getRequestHeaderWhiteList,getResponseHeaderWhiteList:getResponseHeaderWhiteList,isTrackConsoleEnabled:isTrackConsoleEnabled,isTrackNetworkEnabled:isTrackNetworkEnabled,getAjaxBodyWhitelist:getAjaxBodyWhitelist,isStackTraceEnabledForConsole:isStackTraceEnabledForConsole,isInJsErrorSamplingPool:isInJsErrorSamplingPool,isInAjaxSamplingPool:isInAjaxSamplingPool,setErrorRule:setErrorRule,getErrorRule:getErrorRule,isPerfTimingAPIAvailable:isPerfTimingAPIAvailable,isPaintTimingSupported:isPaintTimingSupported,getParameterCaseInsensitive:getParameterCaseInsensitive,isTrackResourceEnabled:isTrackResourceEnabled,addShimAPIs:addShimAPIs,getIpBlockedEls:getIpBlockedEls,isIpRequired:isIpRequired,checkDomOnloadSampling:checkDomOnloadSampling,checkFeedbackScheduled:checkFeedbackScheduled,isFeedbackInviteEnabled:isFeedbackInviteEnabled,getCurrentIdentity:getCurrentIdentity,isWebVitalsEnabled:isWebVitalsEnabled,getArLinkid:getArLinkid,getFBSubmitUrl:getFBSubmitUrl,getFBViewUrl:getFBViewUrl,isSelectiveRecording:isSelectiveRecording,isNetworkInfoEnabled:isNetworkInfoEnabled,isInWebVitalsSamplingPool:isInWebVitalsSamplingPool,checkSampling:checkSampling,loadRemoteConfig:loadRemoteConfig,trackIframeLoad:trackIframeLoad,isCoBrowsingEnabled:isCoBrowsingEnabled,getExcludedUrlExceptions:getExcludedUrlExceptions,getIncludedUrlExceptions:getIncludedUrlExceptions,isUrlWhiteListEnabled:isUrlWhiteListEnabled,isUrlBlackListEnabled:isUrlBlackListEnabled,isUrlFilterEnabled:isUrlFilterEnabled,isUserSampled:isUserSampled,resetUserSamplingFlag:resetUserSamplingFlag,getUserHash:getUserHash,getSamplingRate:getSamplingRate,runReadyCb:runReadyCb,isShadowDOMEnabled:isShadowDOMEnabled,checkSalesforceAuraJS:checkSalesforceAuraJS,supportsDeclarativeShadowDOM:supportsDeclarativeShadowDOM,resetAttribute:resetAttribute,getPIIBlacklistUrl:getPIIBlacklistUrl,getDomCacheItem:getDomCacheItem,getDomCacheSize:getDomCacheSize,getMutExcludeList:getMutExcludeList,getCodeVersion:getCodeVersion,getIgnoreHeapTextCapture:getIgnoreHeapTextCapture,isRedactTextEnabled:isRedactTextEnabled,isEnhancedHM:isEnhancedHM,isEnrichedHTML:isEnrichedHTML,getDisableTextCapture:getDisableTextCapture,isSROnlyDisableTextCaptureEnabled:isSROnlyDisableTextCaptureEnabled,isLimitedUrlTracking:isLimitedUrlTracking},AurycPublicApi=(createClass(GG,[{key:"mergeAPI",value:function(t,e){var r,n,i=this;t&&(r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),e&&(r=t,n=Object.keys(t)),n.forEach(function(e){"function"==typeof r[e]&&"constructor"!==e&&0!==e.indexOf("_")&&i.safeWrap(t,e)}))}},{key:"safeWrap",value:function(e,t){var r=e[t];this[t]=function(){try{return r.apply(e,arguments)}catch(e){}}}}]),GG);function GG(e,t,r,n,i){classCallCheck(this,GG),this.mergeAPI(e,!0),this.mergeAPI(e),this.mergeAPI(t),this.mergeAPI(n),this.mergeAPI(i),this.mergeAPI(r)}var sha256=createCommonjsModule(function(module){!function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=!1,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,r){return function(e){return new Sha256(r,!0).update(e)[t]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createOutputMethod(n,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(r,n){return function(e,t){return new HmacSha256(e,n,!0).update(t)[r]()}},createHmacMethod=function(t){var r=createHmacOutputMethod("hex",t);r.create=function(e){return new HmacSha256(e,t)},r.update=function(e,t){return r.create(e).update(t)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];r[n]=createHmacOutputMethod(n,t)}return r};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,r){var n=typeof e;if("string"==n){for(var i,a=[],o=e.length,s=0,c=0;c<o;++c)(i=e.charCodeAt(c))<128?a[s++]=i:(i<2048?a[s++]=192|i>>6:(i<55296||57344<=i?a[s++]=224|i>>12:(i=65536+((1023&i)<<10|1023&e.charCodeAt(++c)),a[s++]=240|i>>18,a[s++]=128|i>>12&63),a[s++]=128|i>>6&63),a[s++]=128|63&i);e=a}else{if("object"!=n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}64<e.length&&(e=new Sha256(t,!0).update(e).array());var l=[],g=[];for(c=0;c<64;++c){var u=e[c]||0;l[c]=92^u,g[c]=54^u}Sha256.call(this,t,r),this.update(g),this.oKeyPad=l,this.inner=!0,this.sharedMemory=r}Sha256.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if("string"!=r){if("object"!=r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var n,i,a=0,o=e.length,s=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(i=this.start;a<o&&i<64;++a)s[i>>2]|=e[a]<<SHIFT[3&i++];else for(i=this.start;a<o&&i<64;++a)(n=e.charCodeAt(a))<128?s[i>>2]|=n<<SHIFT[3&i++]:(n<2048?s[i>>2]|=(192|n>>6)<<SHIFT[3&i++]:(n<55296||57344<=n?s[i>>2]|=(224|n>>12)<<SHIFT[3&i++]:(n=65536+((1023&n)<<10|1023&e.charCodeAt(++a)),s[i>>2]|=(240|n>>18)<<SHIFT[3&i++],s[i>>2]|=(128|n>>12&63)<<SHIFT[3&i++]),s[i>>2]|=(128|n>>6&63)<<SHIFT[3&i++]),s[i>>2]|=(128|63&n)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,64<=i?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,e=this.blocks,t=this.lastByteIndex,e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash())},Sha256.prototype.hash=function(){for(var e,t,r,n,i,a,o,s,c=this.h0,l=this.h1,g=this.h2,u=this.h3,d=this.h4,h=this.h5,p=this.h6,f=this.h7,I=this.blocks,m=16;m<64;++m)e=((n=I[m-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,t=((n=I[m-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,I[m]=I[m-16]+e+I[m-7]+t<<0;for(s=l&g,m=0;m<64;m+=4)this.first?(u=this.is224?(i=300032,f=(n=I[0]-1413257819)-150054599<<0,n+24177077<<0):(i=704751109,f=(n=I[0]-210244248)-1521486534<<0,n+143694565<<0),this.first=!1):(e=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(i=c&l)^c&g^s,f=u+(n=f+(t=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&p)+K[m]+I[m])<<0,u=n+(e+r)<<0),e=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(a=u&c)^u&l^i,p=g+(n=p+(t=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&d^~f&h)+K[m+1]+I[m+1])<<0,e=((g=n+(e+r)<<0)>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10),r=(o=g&u)^g&c^a,h=l+(n=h+(t=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&f^~p&d)+K[m+2]+I[m+2])<<0,e=((l=n+(e+r)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),r=(s=l&g)^l&u^o,d=c+(n=d+(t=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&f)+K[m+3]+I[m+3])<<0,c=n+(e+r)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+l<<0,this.h2=this.h2+g<<0,this.h3=this.h3+u<<0,this.h4=this.h4+d<<0,this.h5=this.h5+h<<0,this.h6=this.h6+p<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,o=this.h6,s=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o];return this.is224||(c+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,o=this.h6,s=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||c.push(s>>24&255,s>>16&255,s>>8&255,255&s),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){var e;Sha256.prototype.finalize.call(this),this.inner&&(this.inner=!1,e=this.array(),Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this))};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(void 0)(function(){return exports}))}()});function idGen(e){e=sha256.sha256(e);for(var t="",r=0;r<e.length;){for(var n=0,i=r;i<r+16&&i<e.length;i++){n=(n<<5)-n+e.charCodeAt(i);n&=n}t+=(n=0<n?n:-n).toString(16),r+=16}return t.length<constants.storage.ID_LENGTH?t+=t.substr(0,constants.storage.ID_LENGTH-t.length):t=t.substr(0,constants.storage.ID_LENGTH),t}function generateSessionId(e,t){var r=config.getSiteid();return!1===r?(logger.log("siteid is false. using old global session id"),idGen(_.UUID())):e&&t?idGen(r+e+t):(logger.log("userId or lastvisitTS is false. using old global session id"),idGen(_.UUID()))}function generateViewId(){return idGen(_.UUID())}function generateUserId(){return idGen(config.getSiteid()+"-"+_.UUID())}function generateGUID(){return _.UUID()}var idGen$1={generateSessionId:generateSessionId,generateViewId:generateViewId,generateUserId:generateUserId,generateGUID:generateGUID},SessionTracker=(createClass(MI,[{key:"initFlags",value:function(){var e=this.sessStg.getByKey(constants.symbols.CANCELED);this.isCanceledFlag=!!_.isDefined(e)&&e;var t=this.sessStg.getByKey(constants.symbols.UNREGISTERED);this.isUnregisteredFlag=!!_.isDefined(t)&&t}},{key:"getPrevSessionId",value:function(){return this.prevSessionId}},{key:"setPrevSessionId",value:function(e){this.prevSessionId=e}},{key:"removeUser",value:function(){this.persStg.removeByKey(constants.events.USERID),this.persStg.removeByKey(constants.events.IDENTITYVALUE),window.localStorage&&window.localStorage.removeItem(constants.storage.IDENTITY_KEY),this.persStg.resetUserProp(),this.stg.purge(),this.endSession(!0)}},{key:"setSessionIds",value:function(e,t,r,n){var i=constants.storage.SESSIONID,a=constants.storage.VIEWID,o=constants.events.USERID,s=r||idGen$1.generateSessionId(e,t);this.setPrevSessionId(s);var c=n||idGen$1.generateViewId();return logger.log("userid: "+e+", time:"+t+" sid: "+s+", vid: "+c),this.sessStg.setSessionByKey(a,c,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(i,s),this.sessStg.setSessionByKey(constants.events.SESSIONTIME,t),this.stg.setByKey(a,c),this.stg.setByKey(i,s),this.stg.setByKey(o,e),this.stg.setByKey(constants.events.SESSIONTIME,t),this.stg.commit(),{sessionId:s,viewId:c}}},{key:"isCanceled",value:function(){return this.isUnregistered()||this.isCanceledFlag}},{key:"isUnregistered",value:function(){return this.isUnregisteredFlag}},{key:"setCancel",value:function(e){this.isCanceledFlag=e,this.sessStg.setSessionByKey(constants.symbols.CANCELED,e,constants.storage.SCOPE.SESSION.TAB)}},{key:"setUnregister",value:function(e){this.isUnregisteredFlag=e,this.sessStg.setSessionByKey(constants.symbols.UNREGISTERED,e,constants.storage.SCOPE.SESSION.BROWSER)}},{key:"setSessionValues",value:function(r){var n=this;return Object.keys(r).forEach(function(e){var t=r[e];void 0!==t&&(n.sessStg.setSessionByKey(e,t),n.stg.setByKey(e,t))}),this.stg.commit(),this.sessStg}},{key:"getValueByKey",value:function(e){return this.stg.getByKey(e)||this.sessStg.getByKey(e)}},{key:"isNewTab",value:function(){var e=constants.storage.IS_NEW,t=this.stg.getByKey(e)||this.sessStg.getByKey(e);return t||(t="true",this.sessStg.setSessionByKey(e,t,constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(e,t),this.stg.commit()),t}},{key:"getSessionIdTimeCached",value:function(e){var t,r=_.now();return(!this.cachedIdTime||this.lastSessionCheckTime+5e3<r)&&(t=this.sessStg.getByKeyList(e),this.cachedIdTime=t,this.lastSessionCheckTime=r),this.cachedIdTime}},{key:"getSessionMetadata",value:function(e){var t=0<arguments.length&&void 0!==e&&e,r=[constants.storage.SESSIONID,constants.events.SESSIONTIME],n=this.getSessionIdTimeCached(r),i=n[constants.storage.SESSIONID]||this.stg.getByKey(constants.storage.SESSIONID),a=n[constants.events.SESSIONTIME]||this.stg.getByKey(constants.events.SESSIONTIME),o=this.persStg.getByKeyFromMem(constants.events.USERID)||this.sessStg.getByKey(constants.events.USERID),s=this.stg.getByKey(constants.linkid.aurycMode),c=this.stg.getByKey(constants.linkid.editorHash),l=constants.storage.VIEWID,g=this.stg.getByKey(l)?this.stg.getByKey(l):this.sessStg.getByKey(l);if(g&&!this.stg.getByKey(l)&&(this.stg.setByKey(l,g),this.stg.commit()),this.isSessionOver()){var u={sessionId:i,viewId:g,userId:o,identity:config.getCurrentIdentity(),sampled:config.isUserSampled(),sessionTime:a,siteId:this.siteid,aurycMode:s,editorHash:c,paused:this.isCanceled(),unregistered:this.isUnregistered(),isOver:!0};return t&&(u=_extends({},u,{userHash:config.getUserHash(),samplingRate:config.getSamplingRate()})),u}this.getPrevSessionId()||this.setPrevSessionId(i),i!==this.getPrevSessionId()?(g=idGen$1.generateViewId(),this.setPrevSessionId(i),this.sessStg.setSessionByKey(l,g,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.storage.IS_NEW,"false",constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(constants.storage.VIEWID,g),this.stg.setByKey(constants.storage.IS_NEW,"false"),this.initSessionOrPV()):(g||(g=idGen$1.generateViewId(),this.sessStg.setSessionByKey(l,g,constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(l,g),this.stg.commit(),this.isSessionOver()&&this.initSessionOrPV()),window.opener&&window.opener!==window.self&&"true"===this.isNewTab()&&(g=idGen$1.generateViewId(),this.sessStg.setSessionByKey(l,g,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.storage.IS_NEW,"false",constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(constants.storage.VIEWID,g),this.stg.setByKey(constants.storage.IS_NEW,"false"),this.stg.commit())),logger.log("userid: "+o+", time:"+a+" sessionId: "+i+", viewId: "+g);var d={sessionId:i,viewId:g,userId:o,identity:config.getCurrentIdentity(),sampled:config.isUserSampled(),sessionTime:a,siteId:this.siteid,aurycMode:s,editorHash:c,paused:this.isCanceled(),unregistered:this.isUnregistered(),isOver:!1};return t&&(d=_extends({},d,{userHash:config.getUserHash(),samplingRate:config.getSamplingRate()})),d}},{key:"isCrossDomain",value:function(){if(this.crossDomain)return!0;var e=this.stg.getByKey(constants.storage.HOST);return!!e&&this.host!==e}},{key:"setSessionCrossDomainFrame",value:function(e){this.isSessionCrosFrame=e}},{key:"isSpaSendPV",value:function(){return!0===this.isSpaSendPVFlag}},{key:"setSpaSendPV",value:function(e){this.isSpaSendPVFlag=e}},{key:"renewSession",value:function(){this.beginSession(),this.cachedIdTime=null;var e,t=config.getCurrentIdentity();t&&0<t.length&&((e={})[constants.symbols.IDENTITY_IN_SESSION]=t,window.auryc&&window.auryc.addSessionProperties(e))}},{key:"beginSession",value:function(){var e=window.aurycLoadedTime?Math.max(_.now(),window.aurycLoadedTime):_.now(),t=e+this.duration;this.sessStg.setSessionByKey(constants.events.SESSION_EXP,t),logger.warn("begin a new session: "+e+" exp: "+(e+this.duration));var r,n,i,a,o=this.stg.getByKey(constants.events.USERID);this.isCrossDomain()&&o?(r=this.stg.getByKey(constants.storage.VIEWID),n=this.stg.getByKey(constants.storage.SESSIONID),i=(i=this.stg.getByKey(constants.events.SESSIONTIME))||e,this.setSessionIds(o,i,n,r),this.initPV()):(o=(o=this.persStg.getByKey(constants.events.USERID))||idGen$1.generateUserId(),a=this.setSessionIds(o,e),logger.log("exp: "+this.sessStg.getByKey(constants.events.SESSION_EXP)),this.resetPV(),AurycPubSub.publish(constants.events.NEW_SESSION,{sessionId:a.sessionId,viewId:a.viewId}),this.incPV()),this.persStg.setSessionByKey(constants.events.USERID,o),this.resetTimer(t),config.getConfig("sessionPropertyInherit","behavior")&&this.reSendSessionProperty(o),logger.log("published new session event"),this.syncWindowStg()}},{key:"reSendSessionProperty",value:function(e){var t=e+constants.events.INTERNALSESSIONPROP,r=e+constants.events.SESSIONPROP,n=localStorage.getItem(t);n&&AurycPubSub.publish(constants.events.USERIDENTIFY,{internalSessionProperties:JSON.parse(n)}),(n=localStorage.getItem(r))&&AurycPubSub.publish(constants.events.USERIDENTIFY,{sessionProperties:JSON.parse(n)})}},{key:"incPV",value:function(){var e=this.getPVFromSessStorage();null==e&&(e=this.stg.getByKey(constants.storage.PVCT)),null==e?e=0:e++,this.pvCount=e,this.setPVInStorage(e)}},{key:"resetPV",value:function(){this.sessStg.removeByKey(constants.storage.PV),this.stg.removeByKey(constants.storage.PVCT),this.pvCount=0}},{key:"getPV",value:function(){return this.pvCount}},{key:"getPVFromSessStorage",value:function(){return this.sessStg.getByKey(constants.storage.PV)}},{key:"setPVInStorage",value:function(e){this.sessStg.setSessionByKey(constants.storage.PV,e),this.stg.setByKey(constants.storage.PVCT,e)}},{key:"syncPVInFrame",value:function(e){this.sessStg.setSessionByKey(constants.storage.LAST_PV_VIEWID,this.getCurrentWindowViewID()||""),this.sessStg.setSessionByKey(constants.storage.PV,e),this.stg.setByKey(constants.storage.PVCT,e),this.pvCount=e}},{key:"getCurrentWindowViewID",value:function(){return this.stg.getByKey(constants.storage.VIEWID)}},{key:"getLastPVViewID",value:function(){return this.sessStg.getByKey(constants.storage.LAST_PV_VIEWID)||""}},{key:"endSession",value:function(e){this.isSessionOver()||e?(logger.warn("end a session. now:"+_.now()+", exp:"+this.sessStg.getByKey(constants.events.SESSION_EXP)),this.sessStg.removeByKey(constants.events.SESSION_EXP),this.sessStg.removeByKey(constants.storage.VIEWID),this.stg.removeByKey(constants.storage.VIEWID),this.stg.commit(),AurycPubSub.publish(constants.events.ENDSESSION)):logger.log("session still alive. now:"+_.now()+", exp:"+this.sessStg.getByKey(constants.events.SESSION_EXP))}},{key:"endIframeSession",value:function(){this.askedToEnd=!0}},{key:"isSessionOver",value:function(){if(this.askedToEnd)return!0;if(this.isSessionCrosFrame)return!1;var e=this.sessStg.getByKeyFromMem(constants.events.SESSION_EXP),t=_.now();(!e||e<t)&&(e=this.sessStg.getByKey(constants.events.SESSION_EXP));var r=!0;return!e||e<t?(r=!0,logger.log("session id:"+this.sessStg.getByKey(constants.storage.SESSIONID)+", session is over. now: "+t+", exp: "+e)):r=!1,r}},{key:"resetTimer",value:function(e){var t=this;window.clearTimeout(this.timeoutId);var r,n=this;this.timeoutId=window.setTimeout(function(){t.parentWin||n.endSession()},this.duration),e||(r=_.now()+this.duration,this.sessStg.setSessionByKey(constants.events.SESSION_EXP,r))}},{key:"startTrackingHeartbeat",value:function(){var e=this;config.isVisualEditorMode()||this.heartbeatTracker||(this.heartbeatTracker=setInterval(function(){e.sendHeartbeat()},this.heartbeatInterval))}},{key:"stopTrackingHeartbeat",value:function(){!config.isVisualEditorMode()&&this.heartbeatTracker&&clearInterval(this.heartbeatTracker)}},{key:"sendHeartbeat",value:function(){this.isSessionOver()||config.basicMode()?(logger.log("session is over. skip ping"),this.parentWin||this.endSession()):AurycPubSub.publish(constants.events.PINGTRIGGER)}},{key:"handleUnload",value:function(){var e=browser$1.visibilityEventPrefix();null!==e?document.addEventListener(e+"visibilitychange",_.bind(function(){"hidden"===document[(""===e?"v":e+"V")+"isibilityState"]&&(logger.log("visibility hidden. ping"),this.sendHeartbeat(),this.stg&&this.stg.commit())},this)):browser$1.isPhoneOrTablet()?window.addEventListener("unload",_.bind(function(){logger.log("unload fires. ping"),this.stg&&this.stg.commit(),this.sendHeartbeat()},this)):window.addEventListener("beforeunload",_.bind(function(){logger.log("befoerunload fires. ping"),this.stg&&this.stg.commit(),this.sendHeartbeat()},this))}},{key:"bindEvent",value:function(){var t=this;"pointerover pointerenter pointerdown pointermove pointerup pointercancel pointerout pointerleave".split(" ").forEach(function(e){browser$1.addDomEvent(window,e,_.throttle(function(){t.isSessionOver()?(logger.log("not create a new session"),!0===config.getConfig("renewSession","behavior")&&t.renewSession()):t.resetTimer()},5e3,{leading:!0,trailing:!1}))});var e=browser$1.visibilityEventPrefix();null!==e&&document.addEventListener(e+"visibilitychange",function(){"visible"===document[(""===e?"v":e+"V")+"isibilityState"]&&(logger.log("visibility visible"),t.isSessionOver()?(logger.log("create a new session"),!0===config.getConfig("renewSession","behavior")&&t.renewSession()):t.resetTimer())}),"pointerover pointerenter pointerdown pointermove pointerup pointercancel pointerout pointerleave".split(" ").forEach(function(e){browser$1.addDomEvent(window,e,_.throttle(function(){if(t.parentWin&&!t.askedToEnd)try{t.parentWin.postMessage({source:"_ar_",content:{siteId:config.getSiteid(),cmd:{command:"extendSession"}}},"*")}catch(e){}},3e4,{leading:!0,trailing:!1}))})}},{key:"syncWindowStg",value:function(){var e=constants.storage.HOST,t=[constants.storage.SESSIONID,constants.events.SESSIONTIME],r=this.sessStg.getByKeyList(t),n=r[constants.storage.SESSIONID],i=r[constants.events.SESSIONTIME];i&&this.stg.setByKey(constants.events.SESSIONTIME,i),n&&this.stg.setByKey(constants.storage.SESSIONID,n);var a=this.persStg.getByKey(constants.events.USERID);a&&this.stg.setByKey(constants.events.USERID,a),this.stg.setByKey(e,this.host),this.stg.commit()}},{key:"initSession",value:function(e){if(!this.isCanceled()){var t,r,n,i=config.getArLinkid(),a=browser$1.getLinkidParams();if(0<Object.keys(a).length&&2===(n=(n=a[i]).split("_")).length&&(t=encoder.shiftString(n[0]),r=encoder.shiftString(n[1]),this.persStg.setSessionByKey(constants.events.USERID,t),this.stg.setByKey(constants.events.USERID,t),this.stg.setByKey(constants.storage.SESSIONID,r),this.sessStg.setSessionByKey(constants.storage.SESSIONID,r),this.setPrevSessionId(r),this.crossDomain=!0),e){var o=e.userId,s=e.sessionId,c=e.viewId,l=e.sessionTime,g=e.pv,u=e.frameIdx;this.persStg.setSessionByKey(constants.events.USERID,o),this.stg.setByKey(constants.events.USERID,o),this.stg.setByKey(constants.storage.SESSIONID,s),this.sessStg.setByKey(constants.storage.SESSIONID,s,constants.storage.SCOPE.SESSION.TAB);var d=_.now()+this.duration;return this.sessStg.setSessionByKey(constants.events.SESSION_EXP,d,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.events.USERID,o,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.storage.SESSIONID,s),this.stg.setByKey(constants.storage.VIEWID,c),this.stg.setByKey(constants.events.SESSIONTIME,l),this.sessStg.setByKey(constants.events.SESSIONTIME,l),this.setPrevSessionId(s),this.pvCount=g,this.setPVInStorage(g),this.resetTimer(),this.frameIdx=u,this.parentWin=e.parentWin,void this.bindEvent()}this.isSessionOver()?this.renewSession():(this.resetTimer(),this.syncWindowStg()),this.bindEvent(),this.startTrackingHeartbeat()}}},{key:"initSessionOrPV",value:function(e){this.isCanceled()||(this.initSession(e),this.initPV())}},{key:"initPV",value:function(e){var t=window.aurycLoadedTime?Math.max(_.now(),window.aurycLoadedTime):_.now();logger.log("create a new pv. setting startTS:"+t),this.sessStg.setSessionByKey(constants.events.PV_START_TS,t,constants.storage.SCOPE.SESSION.TAB);var r=browser$1.getWinSize(window);this.sessStg.setByKey(constants.events.WIN_SIZE,JSON.stringify(r),constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(constants.events.PV_START_TS,t),this.stg.setByKey(constants.events.WIN_SIZE,JSON.stringify(r)),this.stg.commit(),e||this.incPV(),AurycPubSub.publish(constants.events.PAGEVIEWTRACKER,{pvid:this.pvCount})}},{key:"getPVStartTS",value:function(){var e=this.stg.getByKey(constants.events.PV_START_TS)||this.sessStg.getByKey(constants.events.PV_START_TS);return e?(logger.log("Getting start ts from storage: "+e),e):(logger.log("Not getting start ts from storage. using now()"),_.now())}},{key:"getWinSize",value:function(){return this.stg.getByKey(constants.events.WIN_SIZE)||this.sessStg.getByKey(constants.events.WIN_SIZE)}},{key:"getSessionStorage",value:function(){return this.sessStg}},{key:"getSession",value:function(r){var n=this;return r&&Object.keys(r).forEach(function(e){var t=n.stg.getByKey(r[e]);void 0!==t&&n.sessStg.setSessionByKey(r[e],t)}),this.sessStg}}]),MI);function MI(e,t){classCallCheck(this,MI),this.sessStg=e,this.persStg=t,this.prevSessionId=null,this.siteid=config.getSiteid(),this.duration=1e3*config.getConfig("sessionDuration","behavior"),this.timeoutId=null,this.heartbeatTracker=null,this.isNew=!0,this.heartbeatInterval=1e3*(config.getConfig("heartbeatInterval","behavior")||60),this.pvCount=0,this.host=window.location.protocol+"//"+window.location.host,this.stg=StorageManager.getInstance(this.siteid),this.crossDomain=!1,this.initFlags(),this.lastSessionCheckTime=0,this.frameIdx=1,this.isSpaSendPVFlag=!1}var globalSessionTracker=new SessionTracker(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT)),LinkId=(createClass(zL,[{key:"parseConfig",value:function(){var e=config.getConfig("crossDomainConfig","behavior");this.rules="",e&&e.property&&e.property.cssSelector&&(this.rules=e.property.cssSelector.split(" ").join(","))}},{key:"process",value:function(e){var a=this;e&&(this.rules=e.split(" ").join(","));var t,r=window.document;0<this.rules.length&&(t=r.querySelectorAll(this.rules),[].forEach.call(t,function(e,t){if("a"===e.tagName.toLowerCase()||"form"===e.tagName.toLowerCase())a.addLinkId(e);else for(var r=e.querySelectorAll("a,form"),n=r.length-1;0<=n;n--){var i=r[n];a.addLinkId(i)}}))}},{key:"getAurycLinkId",value:function(){var e=globalSessionTracker.getSessionMetadata(),t=encoder.shiftString(e.userId)+"_"+encoder.shiftString(e.sessionId);return e.aurycMode&&(t="editor#mode="+e.aurycMode+"&t="+e.editorHash),t}},{key:"addLinkId",value:function(e){var t,r,n,i,a,o=e.getAttribute("href")||e.getAttribute("action");o&&0!==o.indexOf("javascript:")&&0!==o.indexOf("#")&&0!==o.indexOf("?")&&(r=void 0,(t=globalSessionTracker.getSessionMetadata()).aurycMode?(r=t.aurycMode,-1===o.indexOf("#mode")&&(o+="#mode="+r+"&t="+t.editorHash)):-1===o.indexOf(this.id)&&(r=encoder.shiftString(t.userId)+"_"+encoder.shiftString(t.sessionId),n=o.indexOf("?")+1,i=o.indexOf("#")+1,a=(n?"&":"?")+this.id+"="+r,o=i?o.replace("#",a+"#"):o+a),e.getAttribute("href")?e.setAttribute("href",o):e.setAttribute("action",o))}}]),zL);function zL(){classCallCheck(this,zL),this.id=config.getArLinkid(),this.parseConfig()}var globalLinkIdHandler=null;function getLinkIdHandler(){return globalLinkIdHandler=globalLinkIdHandler||new LinkId}var LinkidAPI=(createClass(XL,[{key:"addLinkId",value:function(e){getLinkIdHandler().process(e)}},{key:"getAurycLinkId",value:function(){return getLinkIdHandler().getAurycLinkId()}}]),XL);function XL(){classCallCheck(this,XL)}function initGeoInfo(t){if(config.isGeoDetectionRequired()){var e=DataLayer.getInstance(constants.symbols.SESSION).getByKey(constants.pii.geoContinent);if(e&&"unknown"!==e)t();else try{loadGeoInfo(t)}catch(e){t()}}else t()}function initGeoIP(t){if(config.isIpRequired()){var e=DataLayer.getInstance(constants.symbols.SESSION).getByKey(constants.pii.geoIP);if(e&&"unknown"!==e)t();else try{loadGeoIP(t)}catch(e){t()}}else t()}function syncGeoInfo(e){var t={continent:"unknown",country:"unknown",ip:"unknown"};if(e)try{t=JSON.parse(e)}catch(e){}var r=DataLayer.getInstance(constants.symbols.SESSION);r.setSessionByKey(constants.pii.geoContinent,(t.continent||"").toLowerCase()),r.setSessionByKey(constants.pii.geoCountry,(t.country||"").toLowerCase()),r.setSessionByKey(constants.pii.geoIP,t.ip)}function syncGeoIP(e){e&&DataLayer.getInstance(constants.symbols.SESSION).setSessionByKey(constants.pii.geoIP,e)}function isGeoBlocked(){if(!config.isGeoDetectionRequired())return!1;var e=DataLayer.getInstance(constants.symbols.SESSION),t=config.getGeoBlockContinents(),r=e.getByKey(constants.pii.geoContinent);return r&&"unknown"!==r?_.inArray(r,t):"allow"!==config.getGeoDefault()}function loadGeoInfo(t){var e={type:"GET"};e.url=config.getConfig("ip_url"),e.contentType="application/json",e.onSuccess=function(e){syncGeoInfo(e),t()};var r=JSON.stringify({continent:"unknown",country:"unknown"});e.onFailure=function(e){syncGeoInfo(r),t()},e.timeout=3e3,asyncTimeoutReq(e)}function loadGeoIP(t){var e={type:"GET"};e.url=config.getConfig("ip_address_url"),e.contentType="text/html",e.onSuccess=function(e){syncGeoIP(e),t()},e.onFailure=function(e){syncGeoIP("unknown"),t()},e.timeout=3e3,asyncTimeoutReq(e)}var location$1={initGeoInfo:initGeoInfo,isGeoBlocked:isGeoBlocked,loadGeoInfo:loadGeoInfo,initGeoIP:initGeoIP};function getInputType(e){var t=(e.getAttribute("type")||e.type||"text").toLowerCase();return"select"!==e.nodeName.toLowerCase()&&"textarea"!==e.nodeName.toLowerCase()||(t=e.nodeName.toLowerCase()),"input"===t&&(t="text"),t}function isInputSupported(e){return"textarea"===e.nodeName||_.inArray(getInputType(e),["","color","email","number","password","search","tel","text","textarea","url"])}var input={getInputType:getInputType,isInputSupported:isInputSupported},PIIHandler=(createClass(CM,[{key:"parseConfig",value:function(){var e=",[data-heap-redact-text]:not(title), [heap-ignore], [data-heap-ignore], [data-heap-redact-attributes]";this.rules=config.getBaseBlockedEls(),this.rules||(this.rules={}),this.rules[".*"]?this.rules[".*"]+=","+this.defaultMaskCSSSelectors+","+this.defaultRedactCSSSelectors+e:this.rules[".*"]=this.defaultMaskCSSSelectors+","+this.defaultRedactCSSSelectors+e;var t=location$1.isGeoBlocked(),r=config.getGeoSpecificBlockedEls();t&&r&&(this.rules[".*"]+=","+r),!1===config.getConfig("keepInputs","record")||t?(this.inputRule="input:not([type]), input[type=text], input[type=email], input[type=password],input[type=tel],textarea,input[type=date],input[type=datetime-local],input[type=week],input[type=email],input[type=number],input[type=search], select,input[name*=password],input[id*=password],input[class*=password],span[class*=password],div[class*=password],input[type=radio],input[type=checkbox]"+e,t||(this.whiteList=config.getInputWhiteList())):(this.rules[".*"]+=", input[id=cc], input[name=cc], input[type=password],input[class*=password],span[class*=password],div[class*=password]"+e,this.whiteList=config.getInputWhiteList())}},{key:"isIgnoreInputsOverride",value:function(){return this.isIgnoreInputsOverrideVar}},{key:"isBlacklist",value:function(e){var t=config.getPIIBlacklistUrl();if(!t)return!1;var r=document.location.href;return!(!r||-1===r.toLowerCase().indexOf(t.toLowerCase())||"SELECT"!==e.tagName&&"TEXTAREA"!==e.tagName)}},{key:"processKeepInputs",value:function(e,t){var r,n=this,i=!(1<arguments.length&&void 0!==t)||t;this.tagCreditCardInput(e),0<this.inputRule.length&&(r=dom.querySelectorAll(e,this.inputRule,i),_.each(r,function(e,t){n.isBlacklist(e)||(n.addPIIClassNameTo(e),n.addMaskAttribute(e)),n.shouldRedactText(e)||(e[constants.pii.maskingProperty]=!0)})),this.processWhiteList(e,i)}},{key:"processWhiteList",value:function(e,t){var r=!(1<arguments.length&&void 0!==t)||t;if(0<this.whiteList.length)for(var n=dom.querySelectorAll(e,this.whiteList,r),i=0;i<n.length;i++){var a=n[i];"select"!==a.tagName.toLowerCase()&&"input"!==a.tagName.toLowerCase()&&"textarea"!==a.tagName.toLowerCase()||(a.removeAttribute(this.maskClassName),_.removeClass(a,this.maskClassName),a[constants.pii.maskingProperty]=!1,a.setAttribute(constants.pii.whitelistClassName,"true"))}}},{key:"getPIISelectors",value:function(){var e=[];if(this.isTextCaptureDisabled()&&e.push("body"),0===Object.keys(this.rules).length)return e;var t=window.location.href||"";for(var r in this.rules)new RegExp(r,"i").test(t)&&e.push(this.rules[r]);return e}},{key:"isTagged",value:function(e){var t=e.parentNode;if(!t)return!1;for(var r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(0<r&&n===t.childNodes[r]){var i=t.childNodes[r-1];if(i.data&&-1<i.data.indexOf(this.piiMarkerPrefix))return!0}}return!1}},{key:"isTaggedDynamic",value:function(e){return!(!e.nextSibling||8!==e.nextSibling.nodeType)&&e.nextSibling.data&&-1<e.nextSibling.data.indexOf(this.piiMarkerEnd)}},{key:"updateBoundingRect",value:function(e){var t=this.getPIISelectors();if(0===t.length)return!1;for(var r=dom.querySelectorAll(e,t.join(","),!1),n=0;n<r.length;n++){var i=r[n];this.addMaskAttribute(i)}}},{key:"tagCreditCardInput",value:function(e){for(var t=dom.querySelectorAll(e,"input, select"),r=t.length-1;0<=r;r--){var n=t[r],i=n.getAttribute("id"),a=n.getAttribute("name"),o=n.getAttribute("class"),s=n.getAttribute("autocomplete");(this.matchingCard(i)||this.matchingCard(a)||this.matchingCard(o)||this.matchingCard(s))&&(this.addMaskAttribute(n),n[constants.pii.maskingProperty]=!0)}}},{key:"matchingCard",value:function(e){if(e)for(var t=constants.pii.creditCardAtt,r=e.replace(/c-c/g,"").replace(/c_c/g,"").replace(/_/g,"").replace(/-/g,"").toLowerCase(),n=0;n<t.length;n++)if(-1!==r.indexOf(t[n]))return!0;return!1}},{key:"tagDynamic",value:function(e,t){var r=dom.isShadowRoot(e)&&e.host?e.host:e;try{this.processKeepInputs(r,!1)}catch(e){}var n=this.getPIISelectors();if(0===n.length)return"false";for(var i=dom.querySelectorAll(t,n.join(","),!1),a=0;a<i.length;a++){var o=i[a];if(PIIUtils.containedBy(r,o)||o===r)return r[constants.pii.maskingProperty]=!0,this.shouldRedactText(o)?(r.setAttribute(constants.pii.redactingClassName,!0),"true"):"skip";if(PIIUtils.containedBy(o,r))return o[constants.pii.maskingProperty]=!0,"true"}return"false"}},{key:"processPII",value:function(e,t){var r=e,n=null;return t?n=new RegExp(".+","mig"):0<=e.indexOf(this.piiMarkerStart)&&(n=new RegExp("\x3c!--(\\W)*"+this.piiMarkerStart+"[\\w\\W]*?"+this.piiMarkerEnd+"(\\W)*--\x3e","mig")),n&&(r=PIIUtils.replaceWithMask(e,n)),r}},{key:"removeComments",value:function(e){var t=this;if(/<!--/gim.test(e)){var r=new RegExp("(\x3c!--)[\\w\\W]*?(--\x3e)","mig");return PIIUtils.replaceWithMask(e,r,function(e){return e[0].indexOf("arPreserve")<0&&e[0].indexOf("arHiddenBlock")<0&&e[0].indexOf(t.piiMarkerPrefix)<0?"":e[0]})}return e}},{key:"replaceIntegrity",value:function(e){return e?e.indexOf('integrity="sha256')<0?e:e=e.replace(/integrity="sha256/g,'au_integrity="sha256'):""}},{key:"replaceMediaSrc",value:function(e){return e?e.indexOf("au_image_src")<0?e:e=e.replace(/au_image_src=/g,"src="):""}},{key:"removeJS",value:function(e){if(!e)return"";if(e.indexOf("script")<0)return e;for(var t=RegExp("(<script[^>]*?>)[\\s\\S]*?(<\/script>)","gim"),r="",n=e.length,i=0,a=t.exec(e);_.isDefined(a);)var o=a.index,s=a[0],c=a[1].replace("src=","au_src="),l=a[2],r=(r+=e.substring(i,o))+c+l,i=o+s.length,a=t.exec(e);return r+=e.substring(i,n)}},{key:"removeBlobLink",value:function(e){if(!e)return"";if(e.indexOf("blob:")<0&&e.indexOf("prefetch")<0)return e;var t=RegExp("(<link.*?>)","gim");return PIIUtils.replaceWithMask(e,t,function(e){var t=e instanceof Array?e[0]:e||"";return-1<t.indexOf("blob:")?"":-1<t.indexOf('rel="prefetch"')?t.replace(/rel="prefetch"/g,'rel="au_prefetch"'):-1<t.indexOf("rel='prefetch'")?t.replace(/rel=\'prefetch\'/g,'rel="au_prefetch"'):t})}},{key:"addMaskAttribute",value:function(e){var t;e.hasAttribute(this.maskClassName)||this.shouldRedactText(e)||(t=this.getBoundingRect(e),e.setAttribute(this.maskClassName,t))}},{key:"cloneAttributes",value:function(e,t){for(var r,n=Array.prototype.slice.call(t.attributes);r=n.pop();)if(!_.inArray(r.nodeName,this.maskedAttributes)&&!/data-*/.test(r.nodeName))try{e.setAttribute(r.nodeName,r.nodeValue)}catch(e){}}},{key:"processHiddenElement",value:function(e){for(var t=dom.querySelectorAll(e,'input[type="hidden"]'),r=0;r<t.length;r++){var n=t[r],i=n.tagName,a=document.createElement(i);this.cloneAttributes(a,n),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n)}}},{key:"addMaskAttributeToTags",value:function(e){var t=this.getPIISelectors();if(0!==t.length)for(var r=dom.querySelectorAll(e,t.join(",")),n=0;n<r.length;n++){var i=r[n];this.addMaskAttribute(i)}}},{key:"processMaskElement",value:function(e){var t=e.querySelector("title");t&&"true"===t.getAttribute("data-heap-redact-text")&&(t.innerHTML="xxxxxx");var r=this.getPIISelectors(),n=dom.querySelectorAll(e,[].concat(toConsumableArray(r),["[_ar_hide_]"]).join(",")),i=!1;this.shouldRedactText(e)&&(this.redactElementText(e),i=!0);for(var a=0;a<n.length;a++){var o=n[a];this.shouldRedactText(o)?i||this.redactElementText(o):this.maskElement(o)}}},{key:"maskElement",value:function(e){var t=e.tagName,r=document.createElement(t);e.getAttribute(this.maskClassName)&&this.cloneAttributes(r,e),_.addCssCls(r,this.redactClassName),e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e)}},{key:"isTextCaptureDisabled",value:function(){return config.isSROnlyDisableTextCaptureEnabled()?config.getDisableTextCapture():this.isHeapTextCaptureDisabled()}},{key:"isHeapTextCaptureDisabled",value:function(){return!config.getIgnoreHeapTextCapture()&&(RcController.getInstance().getDisableTextCapture()||_.get(window,"heap.config.disableTextCapture"))}},{key:"shouldRedactText",value:function(e){var t=dom.isShadowRoot(e)&&e.host?e.host:e;return!!config.isRedactTextEnabled()&&("#text"===t.nodeName||!(!t.hasAttribute(this.redactClassName)||t.hasAttribute(this.maskClassName))||!("BODY"!==t.tagName||!this.isTextCaptureDisabled())||!(_.includes(constants.record.form.inputTypes,t.tagName.toLowerCase())&&!input.isInputSupported(t))&&t.hasAttribute("data-heap-redact-text"))}},{key:"addPIIClassNameTo",value:function(e){this.shouldRedactText(e)?_.addCssCls(e,this.redactClassName):_.addCssCls(e,this.maskClassName)}},{key:"redactElementText",value:function(e){if(e&&"SCRIPT"!==e.tagName&&"STYLE"!==e.tagName)if(e.nodeType!==Node.TEXT_NODE){this.redactAttributes(e);for(var t=e.childNodes||[],r=e.shadowRoot&&e.shadowRoot.childNodes||[],n=[].concat(toConsumableArray(t),toConsumableArray(r)),i=0;i<n.length;i++)this.redactElementText(n[i])}else e.textContent=this.redactText(e.textContent)}},{key:"redactAttributes",value:function(e){if(e){if("SELECT"===e.tagName)try{for(var t=0;t<e.selectedOptions.length;t++){var r=e.selectedOptions[t];this.redactElementText(r)}}catch(e){}if(e.attributes){for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n].nodeName||"";if(-1<i.indexOf("<")||-1<i.indexOf(">"))e.removeAttribute(i);else if(_.inArray(i,this.redactedAttributes)||/data-*/.test(i))try{e.setAttribute(i,this.redactText(e.getAttribute(i)))}catch(e){}}return e}}}},{key:"redactText",value:function(e){for(var t=0<arguments.length&&void 0!==e?e:"",r="",n=0;n<t.length;n++)" "===t[n]||"\n"===t[n]||"\t"===t[n]||"\r"===t[n]?r+=t[n]:r+="*";return r}},{key:"processAttribute",value:function(e){var t,r;constants.pii.ignoreAttributes&&0!==constants.pii.ignoreAttributes.length&&(t=constants.pii.ignoreAttributes.map(function(e){return"["+e+"]"}).join(","),r=dom.querySelectorAll(e,t),_.each(r,function(t){try{constants.pii.ignoreAttributes.forEach(function(e){return t.removeAttribute(e)})}catch(e){}}))}},{key:"isAttributeProcessRequired",value:function(e){if(!constants.pii.ignoreAttributes||0===constants.pii.ignoreAttributes.length)return!1;var t=constants.pii.ignoreAttributes.map(function(e){return"["+e+"]"}).join(","),r=dom.querySelectorAll(e,t);return r&&0<r.length}},{key:"getBoundingRect",value:function(e){var t,r,n,i,a=getComputedStyle(e,!1);return a?(r=a.width,n=a.height,void 0!==r&&void 0!==n&&"auto"!==r&&"auto"!==n||(t=e.getBoundingClientRect(),r=Math.floor(t.width)+"px",n=Math.floor(t.height)+"px"),"width:"+r+";height:"+n+";margin:"+a.margin+";position:"+a.position+";display:"+("inline"===a.display?"inline-block":a.display)+";"):(i=e.getBoundingClientRect(),"width:"+Math.floor(i.width)+"px;height:"+Math.floor(i.height)+"px;")}}]),CM);function CM(){classCallCheck(this,CM),this.piiMarkerStart="arMaskedContentStart",this.piiMarkerEnd="arMaskedContentEnd",this.piiMarkerPrefix="arMaskedContent",this.maskClassName=constants.pii.maskingClassName,this.defaultMaskCSSSelectors="."+constants.pii.maskingClassName,this.maskedAttributes=constants.pii.maskingAttributes,this.redactedAttributes=constants.pii.redactingAttributes,this.redactClassName=constants.pii.redactingClassName,this.defaultRedactCSSSelectors="."+constants.pii.redactingClassName,this.maskElementWithStyle=["input","textarea"],this.rules={},this.whiteList="",this.inputRule="",this.isIgnoreInputsOverrideVar=!1===config.getConfig("keepInputs","record")&&!0===config.getConfig("ignoreInputsOverride","record"),this.parseConfig()}var PIIUtils=(createClass($P,null,[{key:"replaceWithMask",value:function(e,t,r){var n=t.exec(e),i="",a=0;for(r=r||$P.maskStr;_.isDefined(n);)i+=e.substring(a,n.index),i+=r(n),a=n.index+n[0].length,n=t.exec(e);return i+=e.substring(a,e.length)}},{key:"maskStr",value:function(e){var t=e instanceof Array?e[0]:e||"";return 0<t.length?t.replace(/(>)|(&[^\s;]*;)|(<[^<>]*?>)|(<)|\w/g,function(e,t,r,n){return r||n||"*"}).replace(/&((?!nbsp| |amp).)*?;/g,"*"):""}},{key:"containedBy",value:function(e,t){var r=e,n=t;do{if(n.contains?r!==n&&n.contains(r):16&n.compareDocumentPosition(r))return!0;var i=r.getRootNode(),r=dom.isShadowRoot(i)&&i.host?i.host:null}while(r);return!1}}]),$P);function $P(){classCallCheck(this,$P)}var globalPIIHandler=null,resetAttribute$1;function getPIIHandler(){return globalPIIHandler=globalPIIHandler||new PIIHandler}var PIINodeReCache=new WeakMap;function isPIINodeRec(t){if(!t)return!1;if(PIINodeReCache.has(t))return PIINodeReCache.get(t);t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);try{if(!0===t[constants.pii.maskingProperty]||t.getAttribute(constants.pii.maskingClassName))return PIINodeReCache.set(t,!0),!0;var e=t.type||t.getAttribute("type");if("reset"===e||"submit"===e||"button"===e)return PIINodeReCache.set(t,!1),!1;if("input"===t.nodeName.toLowerCase()&&getPIIHandler().isIgnoreInputsOverride())return PIINodeReCache.set(t,!0),!0;if(getPIIHandler().shouldRedactText(t))return PIINodeReCache.set(t,!0),!0;var r=t.className||t.getAttribute("class"),n=r&&"string"==typeof r&&(0<=r.indexOf(constants.pii.maskingClassName)||0<=r.indexOf(constants.pii.redactingClassName));return n?(getPIIHandler().shouldRedactText(t)||(t[constants.pii.maskingProperty]=!0),PIINodeReCache.set(t,n),n):(getPIIHandler().shouldRedactText(t)&&(n=!0),isCreditcardInput(t,t.value)&&(n=!0,t[constants.pii.maskingProperty]=!0),PIINodeReCache.set(t,n),n)}catch(e){return PIINodeReCache.set(t,!1),!1}}function processKeepInputs(e){getPIIHandler().processKeepInputs(e)}function addMaskAttributeToTags(e){getPIIHandler().addMaskAttributeToTags(e)}function isMaskedPIINode(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=((e||{}).ownerDocument||{}).body;if(r&&r.getAttribute("_ar_hide_"))return!0;if(!t&&!isPIINode(e))return!1;var n=e.className||e.getAttribute("class");return!0===e[constants.pii.maskingProperty]||(!!e.getAttribute(constants.pii.maskingClassName)||(!!(n&&"string"==typeof n&&0<=n.indexOf(constants.pii.maskingClassName))||(!!isCreditcardInput(e,e.value)||(getPIIHandler().shouldRedactText(e)||n&&"string"==typeof n&&n.indexOf(constants.pii.redactingClassName),!1))))}function isSecret(e){return!!e&&(!!isPIINode(e)&&isMaskedPIINode(e,!0))}var isRedactedCache=new WeakMap;function isRedacted(e){if(!e)return!1;if(isRedactedCache.has(e))return isRedactedCache.get(e);var t=isPIINode(e)&&!isMaskedPIINode(e,!0);return isRedactedCache.set(e,t),t}function deepCloneShadowRoot(e,a,o){var t=o.createDocumentFragment();return function l(e,t){function r(e,t){if(e){var r=e.childNodes||[],n=!0,i=!1,a=void 0;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;l(c,t)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}}try{var n,i=o.importNode(e,!1);void 0!==i&&(a&&a(i),t.appendChild(i),e.shadowRoot&&(n=i.shadowRoot||i.attachShadow({mode:"open",source:"auryc"}),r(e.shadowRoot,n)),r(e,i),"function"==typeof e.getAttribute&&"function"==typeof e.setAttribute&&e.getAttribute("class")&&(void 0===resetAttribute$1&&(resetAttribute$1=config.resetAttribute()),resetAttribute$1&&e.setAttribute("class",e.getAttribute("class"))))}catch(e){}}(isShadowRoot(e)?e.host:e,t),isShadowRoot(e)?t.firstChild.shadowRoot:t.firstChild}function cloneDomNode(e){function t(e){var t=(e.tagName||"").toLowerCase();"video"!==t&&"audio"!==t||e.setAttribute&&e.setAttribute("muted","true")}var r=null;try{r=(browser$1.isSafari()||browser$1.isMobile())&&config.getSameDocClone()?deepCloneShadowRoot(e,t,document):deepCloneShadowRoot(e,t,document.implementation.createHTMLDocument(""))}catch(e){}return r}function isPIIWhitelistNode(e){return e&&("true"===e[constants.pii.whitelistClassName]||"true"===e.getAttribute(constants.pii.whitelistClassName))}var piiNodeCache=new WeakMap;function isPIINode(e){var t=void 0;if(!e||!e.nodeName)return!1;if(piiNodeCache.has(e))return piiNodeCache.get(e);if(e.nodeType===Node.TEXT_NODE)return t=isPIINode(e.parentNode),piiNodeCache.set(e,t),t;if("body"===e.nodeName.toLowerCase())return t=isPIINodeRec(e),piiNodeCache.set(e,t),t;t=isPIINodeRec(e);var r=getParentNode(e);return!t&&r&&(t=isPIINode(r)),piiNodeCache.set(e,t),t}function getParentNode(e){return e&&e.parentNode?isShadowRoot(e.parentNode)?e.parentNode.host:e.parentNode:null}function isCreditcardInput(e,t){return!isPIIWhitelistNode(e)&&(t&&10<t.length&&_.isLongNumber(t))}function getContainingWinObj(e){if(!e)return null;if(e.ownerDocument&&e.ownerDocument.defaultView)return e.ownerDocument.defaultView;for(;e.parentNode||e.document;){if(e.document)return e;e=e.parentNode}}function getNodeCoordInWin(e,t){for(var r=0,n=0;e;){var i=(i=parseFloat(getElCssProp(e,t,"border-top-width")))||0,a=(a=parseFloat(getElCssProp(e,t,"border-left-width")))||0,o=0,s=0;if(t.getComputedStyle){var c=t.getComputedStyle(e).getPropertyValue("transform");if(c&&0<c.indexOf(")"))try{c=matrixToArray(c),o=parseFloat(c[4]),s=parseFloat(c[5])}catch(e){}}r=r+a+o+e.offsetLeft,n=n+i+s+e.offsetTop,e=e.offsetParent}return{x:r,y:n}}function getNodeCoord(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window,r=0,n=0,i=t;i.frameElement;){var a=getContainingWinObj(i.frameElement),o=getNodeCoordInWin(i.frameElement,a);r+=o.x,n+=o.y,i=a}var s=getNodeCoordInWin(e,t);return{x:r+=s.x,y:n+=s.y}}function matrixToArray(e){return e.split("(")[1].split(")")[0].split(",")}function getPosInTopFrame(e,t,r){var n={x:0,y:0};if(!t)return n;var i=getNodeCoord(e,t);return i&&0<=i.y&&0<=i.x&&(n.x=i.x,n.y=i.y),r&&(n.x+=r.x,n.y+=r.y),n}function getElCssProp(e,t,r){try{return e&&t&&r&&1===e.nodeType?t.getComputedStyle(e,null).getPropertyValue(r):""}catch(e){return""}}function getWinSz(){return{w:document.documentElement.clientWidth||0,h:document.documentElement.clientHeight||0}}function isFeedbackShown(e){return e&&0<e.querySelectorAll("."+constants.css.FBMODAL_CONTAINER).length}function getDocumentWH(e){var t=(e=e||window.document).body,r=e.documentElement,n="hidden"!==window.getComputedStyle(t).overflowX||isFeedbackShown(t)?Math.max(t.scrollWidth,r.scrollWidth):0;0===n&&(n=Math.max(r.clientWidth,t.offsetWidth,r.offsetWidth));var i="hidden"!==window.getComputedStyle(t).overflowY||isFeedbackShown(t)?i=Math.max(t.scrollHeight,r.scrollHeight):0;return 0===i&&(i=Math.max(r.clientHeight,t.offsetHeight,r.offsetHeight)),{width:n,height:i}}function nodeBelongsTo(e,t){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(;e.parentNode;){if(e===t||e===t.body)return!0;e=e.parentNode}return!1}function findCommonPrefix(e){for(var t=e.concat().sort(),r=t[0],n=t[t.length-1],i=r.length,a=0;a<i&&r.charAt(a)===n.charAt(a);)a++;if(0===a)return null;if(a===r.length)return{prefix:r,shortest:r};for(var o=a;0<o&&"."!==r.charAt(o-1);)o--;return 0===o?null:{prefix:r.substring(0,o-1),shortest:r}}function isShadowRoot(e){try{return e&&"function"==typeof e.toString?"[object ShadowRoot]"===e.toString():!1}catch(e){return!1}}function isNodeInShadowDom(e){var t="function"==typeof e.getRootNode?e.getRootNode():null;return null!==t&&isShadowRoot(t)}function getTargetInShadowDOM(e,t){if(t.shadowRoot&&e.composedPath){var r=e.composedPath();if(r&&0<r.length&&t!==r[0])return r[0]}return null}function getEventTarget(e){var t=e.target||e.srcElement||e.originalTarget;t&&t.nodeType===Node.TEXT_NODE&&t.parentNode&&(t=t.parentNode);var r=getTargetInShadowDOM(e,t);return r&&(t=r),t}function querySelectorAllInShadowDOM(e,n){var i=[];return _.each(e,function(e){var t,r;e.shadowRoot&&(t=e.shadowRoot.querySelectorAll(n),r=querySelectorAllInShadowDOM(e.shadowRoot.querySelectorAll(":not(hr,iframe,table,tr,td,th,img,li,em,svg,circle,text,a,label,button,div,span,p,form,input,select,textarea,i,script,style,link,br,option,slot,icon,ol,ul,g,path,svg,dd,dt,line,header"),n),(0<t.length||0<r.length)&&(i=[].concat(toConsumableArray(i),toConsumableArray(t),toConsumableArray(r))))}),i}function querySelectorAll(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{if(!e||!t)return[];var n,i=e.querySelectorAll(t)||[];return!r||0<(n=querySelectorAllInShadowDOM(e.querySelectorAll(":not(hr,iframe,table,tr,td,th,img,li,em,svg,circle,text,a,label,button,div,span,p,form,input,select,textarea,i,script,style,link,br,option,slot,icon,ol,ul,g,path,svg,dd,dt,line,header"),t)||[]).length&&(i=[].concat(toConsumableArray(i),toConsumableArray(n))),i}catch(e){}}function traverse(e,t){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:NodeFilter.SHOW_ALL,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a=document.createTreeWalker(t,r,n,!1),o=a.nextNode();null!==o;){try{e(o),i&&o.shadowRoot&&(e(o.shadowRoot),traverse(e,o.shadowRoot,r,n,i))}catch(e){}o=a.nextNode()}}function overrideObjectProperty(e,t,r,n){var i=_.getObjectPropertyDescriptor(t,r,e);n&&i&&Object.defineProperty(t,r,{get:function(){var e=void 0;if(i.get&&(e=i.get.apply(this,arguments)),n.get&&n.get.apply(this,arguments),i.get)return e},set:function(){i.set&&i.set.apply(this,arguments),n.set&&n.set.apply(this,arguments)},configurable:i.configurable,enumerable:i.enumerable})}var dom={isPIINode:isPIINode,getContainingWinObj:getContainingWinObj,getPosInTopFrame:getPosInTopFrame,getSize:getWinSz,getDocSize:getDocumentWH,nodeBelongsTo:nodeBelongsTo,getPosition:getNodeCoord,getStyle:getElCssProp,findCommonPrefix:findCommonPrefix,isCreditcardInput:isCreditcardInput,cloneDomNode:cloneDomNode,isPIIWhitelistNode:isPIIWhitelistNode,isShadowRoot:isShadowRoot,getTargetInShadowDOM:getTargetInShadowDOM,querySelectorAll:querySelectorAll,getEventTarget:getEventTarget,traverse:traverse,isNodeInShadowDom:isNodeInShadowDom,overrideObjectProperty:overrideObjectProperty,isSecret:isSecret,isRedacted:isRedacted,isMaskedPIINode:isMaskedPIINode,processKeepInputs:processKeepInputs,addMaskAttributeToTags:addMaskAttributeToTags},$zlib={};(function(){var ie=void 0,ae=!0,a=this;function e(e,t){var r,n=e.split("."),i=a;n[0]in i||!i.execScript||i.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)n.length||t===ie?i=i[r]?i[r]:i[r]={}:i[r]=t}var oe="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function se(e,t){if(this.index="number"==typeof t?t:0,this.d=0,this.buffer=e instanceof(oe?Uint8Array:Array)?e:new(oe?Uint8Array:Array)(32768),2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&c(this)}function c(e){var t,r=e.buffer,n=r.length,i=new(oe?Uint8Array:Array)(n<<1);if(oe)i.set(r);else for(t=0;t<n;++t)i[t]=r[t];return e.buffer=i}se.prototype.a=function(e,t,r){var n,i=this.buffer,a=this.index,o=this.d,s=i[a];if(r&&1<t&&(e=8<t?(l[255&e]<<24|l[e>>>8&255]<<16|l[e>>>16&255]<<8|l[e>>>24&255])>>32-t:l[e]>>8-t),t+o<8)s=s<<t|e,o+=t;else for(n=0;n<t;++n)s=s<<1|e>>t-n-1&1,8==++o&&(o=0,i[a++]=l[s],s=0,a===i.length&&(i=c(this)));i[a]=s,this.buffer=i,this.d=o,this.index=a},se.prototype.finish=function(){var e=this.buffer,t=this.index;return 0<this.d&&(e[t]<<=8-this.d,e[t]=l[e[t]],t++),oe?e.subarray(0,t):(e.length=t,e)};for(var t=new(oe?Uint8Array:Array)(256),r=0;r<256;++r){for(var n=o=r,i=7,o=o>>>1;o;o>>>=1)n<<=1,n|=1&o,--i;t[r]=(n<<i&255)>>>0}var l=t;function g(e){this.buffer=new(oe?Uint16Array:Array)(2*e),this.length=0}function s(e,t){this.e=ce,this.f=0,this.input=oe&&e instanceof Array?new Uint8Array(e):e,this.c=0,t&&(t.lazy&&(this.f=t.lazy),"number"==typeof t.compressionType&&(this.e=t.compressionType),t.outputBuffer&&(this.b=oe&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.c=t.outputIndex)),this.b||(this.b=new(oe?Uint8Array:Array)(32768))}g.prototype.getParent=function(e){return 2*((e-2)/4|0)},g.prototype.push=function(e,t){var r,n,i=this.buffer,a=this.length;for(i[this.length++]=t,i[this.length++]=e;0<a&&(r=this.getParent(a),i[a]>i[r]);)n=i[a],i[a]=i[r],i[r]=n,n=i[a+1],i[a+1]=i[r+1],i[r+1]=n,a=r;return this.length},g.prototype.pop=function(){var e,t,r,n=this.buffer,i=n[0],a=n[1];for(this.length-=2,n[0]=n[this.length],n[1]=n[this.length+1],r=0;!((t=2*r+2)>=this.length)&&(t+2<this.length&&n[t+2]>n[t]&&(t+=2),n[t]>n[r]);)e=n[r],n[r]=n[t],n[t]=e,e=n[r+1],n[r+1]=n[t+1],n[t+1]=e,r=t;return{index:a,value:i,length:this.length}};for(var ce=2,le=[],u=0;u<288;u++)switch(ae){case u<=143:le.push([u+48,8]);break;case u<=255:le.push([u-144+400,9]);break;case u<=279:le.push([u-256,7]);break;case u<=287:le.push([u-280+192,8]);break;default:throw"invalid literal: "+u}function C(e,t){this.length=e,this.g=t}s.prototype.h=function(){var e,t,r,n,i=this.input;switch(this.e){case 0:for(r=0,n=i.length;r<n;){var a,o,s,c,l=t=oe?i.subarray(r,r+65535):i.slice(r,r+65535),g=(r+=t.length)===n,u=ie,d=this.b,h=this.c;if(oe){for(d=new Uint8Array(this.b.buffer);d.length<=h+l.length+5;)d=new Uint8Array(d.length<<1);d.set(this.b)}if(a=g?1:0,d[h++]=0|a,s=65536+~(o=l.length)&65535,d[h++]=255&o,d[h++]=o>>>8&255,d[h++]=255&s,d[h++]=s>>>8&255,oe)d.set(l,h),h+=l.length,d=d.subarray(0,h);else{for(u=0,c=l.length;u<c;++u)d[h++]=l[u];d.length=h}this.c=h,this.b=d}break;case 1:var p=new se(oe?new Uint8Array(this.b.buffer):this.b,this.c);p.a(1,1,ae),p.a(1,2,ae);for(var f,I=ge(this,i),m=0,b=I.length;m<b;m++)if(f=I[m],se.prototype.a.apply(p,le[f]),256<f)p.a(I[++m],I[++m],ae),p.a(I[++m],5),p.a(I[++m],I[++m],ae);else if(256===f)break;this.b=p.finish(),this.c=this.b.length;break;case ce:var C,y,A,v,w,S,k,T,_,P,E,x,R,N,W=new se(oe?new Uint8Array(this.b.buffer):this.b,this.c),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=Array(19),F=ce;for(W.a(1,1,ae),W.a(F,2,ae),C=ge(this,i),S=de(w=ue(this.j,15)),T=de(k=ue(this.i,7)),y=286;257<y&&0===w[y-1];y--);for(A=30;1<A&&0===k[A-1];A--);for(var L,O,U,M,G,Z=y,j=A,V=new(oe?Uint32Array:Array)(Z+j),H=new(oe?Uint32Array:Array)(316),J=new(oe?Uint8Array:Array)(19),X=L=0;X<Z;X++)V[L++]=w[X];for(X=0;X<j;X++)V[L++]=k[X];if(!oe)for(X=0,U=J.length;X<U;++X)J[X]=0;for(X=M=0,U=V.length;X<U;X+=L){for(L=1;X+L<U&&V[X+L]===V[X];++L);if(O=L,0===V[X])if(O<3)for(;0<O--;)J[H[M++]=0]++;else for(;0<O;)O-3<(G=O<138?O:138)&&G<O&&(G=O-3),G<=10?(H[M++]=17,H[M++]=G-3,J[17]++):(H[M++]=18,H[M++]=G-11,J[18]++),O-=G;else if(H[M++]=V[X],J[V[X]]++,--O<3)for(;0<O--;)H[M++]=V[X],J[V[X]]++;else for(;0<O;)O-3<(G=O<6?O:6)&&G<O&&(G=O-3),H[M++]=16,H[M++]=G-3,J[16]++,O-=G}for(e=oe?H.subarray(0,M):H.slice(0,M),_=ue(J,7),R=0;R<19;R++)B[R]=_[D[R]];for(v=19;4<v&&0===B[v-1];v--);for(P=de(_),W.a(y-257,5,ae),W.a(A-1,5,ae),W.a(v-4,4,ae),R=0;R<v;R++)W.a(B[R],3,ae);for(R=0,N=e.length;R<N;R++)if(E=e[R],W.a(P[E],_[E],ae),16<=E){switch(R++,E){case 16:x=2;break;case 17:x=3;break;case 18:x=7;break;default:throw"invalid code: "+E}W.a(e[R],x,ae)}for(var Y,z,K=[S,w],$=[T,k],Q=K[0],q=K[1],ee=$[0],te=$[1],re=0,ne=C.length;re<ne;++re)if(Y=C[re],W.a(Q[Y],q[Y],ae),256<Y)W.a(C[++re],C[++re],ae),z=C[++re],W.a(ee[z],te[z],ae),W.a(C[++re],C[++re],ae);else if(256===Y)break;this.b=W.finish(),this.c=this.b.length;break;default:throw"invalid compression type"}return this.b};var d=function(){for(var e,t=[],r=3;r<=258;r++)e=function(e){switch(ae){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}(r),t[r]=e[2]<<24|e[1]<<16|e[0];return t}(),y=oe?new Uint32Array(d):d;function ge(e,t){function r(e,t){var r,n,i,a=e.g,o=[],s=0,c=y[e.length];switch(o[s++]=65535&c,o[s++]=c>>16&255,o[s++]=c>>24,ae){case 1===a:r=[0,a-1,0];break;case 2===a:r=[1,a-2,0];break;case 3===a:r=[2,a-3,0];break;case 4===a:r=[3,a-4,0];break;case a<=6:r=[4,a-5,1];break;case a<=8:r=[5,a-7,1];break;case a<=12:r=[6,a-9,2];break;case a<=16:r=[7,a-13,2];break;case a<=24:r=[8,a-17,3];break;case a<=32:r=[9,a-25,3];break;case a<=48:r=[10,a-33,4];break;case a<=64:r=[11,a-49,4];break;case a<=96:r=[12,a-65,5];break;case a<=128:r=[13,a-97,5];break;case a<=192:r=[14,a-129,6];break;case a<=256:r=[15,a-193,6];break;case a<=384:r=[16,a-257,7];break;case a<=512:r=[17,a-385,7];break;case a<=768:r=[18,a-513,8];break;case a<=1024:r=[19,a-769,8];break;case a<=1536:r=[20,a-1025,9];break;case a<=2048:r=[21,a-1537,9];break;case a<=3072:r=[22,a-2049,10];break;case a<=4096:r=[23,a-3073,10];break;case a<=6144:r=[24,a-4097,11];break;case a<=8192:r=[25,a-6145,11];break;case a<=12288:r=[26,a-8193,12];break;case a<=16384:r=[27,a-12289,12];break;case a<=24576:r=[28,a-16385,13];break;case a<=32768:r=[29,a-24577,13];break;default:throw"invalid distance"}for(c=r,o[s++]=c[0],o[s++]=c[1],o[5]=c[2],n=0,i=o.length;n<i;++n)h[p++]=o[n];I[o[0]]++,m[o[3]]++,f=e.length+t-1,g=null}var n,i,a,o,s,c,l,g,u,d={},h=oe?new Uint16Array(2*t.length):[],p=0,f=0,I=new(oe?Uint32Array:Array)(286),m=new(oe?Uint32Array:Array)(30),b=e.f;if(!oe){for(a=0;a<=285;)I[a++]=0;for(a=0;a<=29;)m[a++]=0}for(I[256]=1,n=0,i=t.length;n<i;++n){for(a=s=0,o=3;a<o&&n+a!==i;++a)s=s<<8|t[n+a];if(d[s]===ie&&(d[s]=[]),c=d[s],!(0<f--)){for(;0<c.length&&32768<n-c[0];)c.shift();if(i<=n+3){for(g&&r(g,-1),a=0,o=i-n;a<o;++a)u=t[n+a],h[p++]=u,++I[u];break}0<c.length?(l=function(e,t,r){var n,i,a,o,s,c,l=0,g=e.length;o=0,c=r.length;e:for(;o<c;o++){if(n=r[c-o-1],(a=3)<l){for(s=l;3<s;s--)if(e[n+s-1]!==e[t+s-1])continue e;a=l}for(;a<258&&t+a<g&&e[n+a]===e[t+a];)++a;if(l<a&&(i=n,l=a),258===a)break}return new C(l,t-i)}(t,n,c),g?g.length<l.length?(u=t[n-1],h[p++]=u,++I[u],r(l,0)):r(g,-1):l.length<b?g=l:r(l,0)):g?r(g,-1):(u=t[n],h[p++]=u,++I[u])}c.push(n)}return h[p++]=256,I[256]++,e.j=I,e.i=m,oe?h.subarray(0,p):h}function ue(e,t){var r,n,i,a,o,s=e.length,c=new g(572),l=new(oe?Uint8Array:Array)(s);if(!oe)for(a=0;a<s;a++)l[a]=0;for(a=0;a<s;++a)0<e[a]&&c.push(a,e[a]);if(r=Array(c.length/2),n=new(oe?Uint32Array:Array)(c.length/2),1===r.length)return l[c.pop().index]=1,l;for(a=0,o=c.length/2;a<o;++a)r[a]=c.pop(),n[a]=r[a].value;for(i=function(e,n,t){var r,i,a,o,s,c=new(oe?Uint16Array:Array)(t),l=new(oe?Uint8Array:Array)(t),g=new(oe?Uint8Array:Array)(n),u=Array(t),d=Array(t),h=Array(t),p=(1<<t)-n,f=1<<t-1;for(c[t-1]=n,i=0;i<t;++i)p<f?l[i]=0:(l[i]=1,p-=f),p<<=1,c[t-2-i]=(c[t-1-i]/2|0)+n;for(c[0]=l[0],u[0]=Array(c[0]),d[0]=Array(c[0]),i=1;i<t;++i)c[i]>2*c[i-1]+l[i]&&(c[i]=2*c[i-1]+l[i]),u[i]=Array(c[i]),d[i]=Array(c[i]);for(r=0;r<n;++r)g[r]=t;for(a=0;a<c[t-1];++a)u[t-1][a]=e[a],d[t-1][a]=a;for(r=0;r<t;++r)h[r]=0;for(1===l[t-1]&&(--g[0],++h[t-1]),i=t-2;0<=i;--i){for(o=r=0,s=h[i+1],a=0;a<c[i];a++)(o=u[i+1][s]+u[i+1][s+1])>e[r]?(u[i][a]=o,d[i][a]=n,s+=2):(u[i][a]=e[r],d[i][a]=r,++r);h[i]=0,1===l[i]&&function e(t){var r=d[t][h[t]];r===n?(e(t+1),e(t+1)):--g[r],++h[t]}(i)}return g}(n,n.length,t),a=0,o=r.length;a<o;++a)l[r[a].index]=i[a];return l}function de(e){for(var t,r,n=new(oe?Uint16Array:Array)(e.length),i=[],a=[],o=0,s=0,c=e.length;s<c;s++)i[e[s]]=1+(0|i[e[s]]);for(s=1,c=16;s<=c;s++)a[s]=o,o+=0|i[s],o<<=1;for(s=0,c=e.length;s<c;s++)for(o=a[e[s]],a[e[s]]+=1,t=n[s]=0,r=e[s];t<r;t++)n[s]=n[s]<<1|1&o,o>>>=1;return n}e("Zlib.RawDeflate",s),e("Zlib.RawDeflate.prototype.compress",s.prototype.h);var h,p,f,I,m={NONE:0,FIXED:1,DYNAMIC:ce};if(Object.keys)h=Object.keys(m);else for(p in h=[],f=0,m)h[f++]=p;for(f=0,I=h.length;f<I;++f)e("Zlib.RawDeflate.CompressionType."+(p=h[f]),m[p])}).call($zlib);var Zlib=(createClass(XW,null,[{key:"stringToByteArray",value:function(e){for(var t=e.split(""),r=0,n=t.length;r<n;r++)t[r]=(255&t[r].charCodeAt(0))>>>0;return t}},{key:"byteArrayToString",value:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}},{key:"emojiToHtmlEntity",value:function(e){return e.replace(/(?:\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDE51\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFF]|\uD83E[\uDD00-\uDDFF])/g,function(e){return"&#"+e.codePointAt(0)+";"})}},{key:"utf8Encode",value:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}},{key:"timerSplitAndProcess",value:function(e,t,r,n,i,a,o,s,c,l){logger.log("timerSplitAndProcess: processing "+t+" - "+r);for(var g,u=t;u<r;u++){var d=e.substring(u*i,(u+1)*i),h=XW.utf8Encode(d),p=XW.stringToByteArray(h),f=new $zlib.Zlib.RawDeflate(p).compress(),I=btoa(XW.byteArrayToString(f));o.push(I)}logger.log("timerSplitAndProcess: finished processing "+t+" - "+r),r<n?(g=Math.min(n,r+a),logger.log("set timeout to process: "+r+" - "+g),setTimeout(function(){XW.timerSplitAndProcess(e,r,g,n,i,a,o,s,c,l)},s)):(logger.log("finished compressinbg all: "+o.length),l(o,c))}},{key:"splitAndProcess",value:function(e,i,t,r,n,a){var o=5,s=25;r&&r.browser&&"Firefox"===r.browser.name?(o=2,s=r.browser.version<51?75:50):r&&r.isInternetExp()&&(o=2,s=75);var c=parseInt(e.length/t)+1;logger.log("initiating timer. length: "+e.length+", fragment count:"+c);var l=Math.min(o,c);XW.timerSplitAndProcess(e,0,l,c,t,o,[],s,n,function(e,t){var r="";logger.log("finalizing array after compression: "+e.length);for(var n=0;n<e.length;n++)r+=constants.record.upload.delim+e[n];a(r,i,t,1)})}}]),XW);function XW(){classCallCheck(this,XW)}var CacheObj=(createClass(XX,[{key:"clearCache",value:function(){this.domPathCache={},this.nodeMappings=new WeakMap}},{key:"addMappingNode",value:function(e,t){this.nodeId++;var r="",n=null;if(dom.isShadowRoot(e)?(r="shadowRoot",n=e.host||t,this.nodeMappings.has(n)||this.addMappingNode(n)):(r=e.tagName.toLowerCase(),n=e.parentNode||t),this.nodeMappings.has(n)&&this.nodeMappings.get(n).path&&this.nodeMappings.get(n).deweyId){var i={id:this.nodeId,path:this.nodeMappings.get(n).path+","+r,deweyId:this.nodeMappings.get(n).deweyId+"."+this.nodeId};return this.nodeMappings.set(e,i),e._arid=this.nodeId,i}return null}},{key:"getMappingNode",value:function(e){return this.nodeMappings.get(e)}},{key:"removeMappingNode",value:function(e){var t=this;e&&(dom.isShadowRoot(e)||"SCRIPT"!==e.tagName)&&(dom.traverse(function(e){t.nodeMappings.delete(e),delete e._arid},e,NodeFilter.SHOW_ELEMENT),this.nodeMappings.delete(e),delete e._arid)}},{key:"setUp",value:function(e,t){this.mappingNode(e,null,!0,t)}},{key:"mappingNode",value:function(e,t,r,n){var i=this;if(e){if(dom.isShadowRoot(e)&&void 0===e._arid)this.addMappingNode(e,e.host);else{if(1!==e.nodeType)return;var a=e.tagName.toLowerCase();if(void 0===e._arid){this.nodeId++,e._arid=this.nodeId;var o=void 0,s=void 0;if(t&&void 0!==t._arid){if(!this.nodeMappings.has(t)||!this.nodeMappings.get(t).path)return;o=this.nodeMappings.get(t).path+","+a,s=this.nodeMappings.get(t).deweyId+"."+e._arid}else o=a,s=e._arid.toString();this.nodeMappings.set(e,{id:this.nodeId,path:o.toLowerCase(),deweyId:s}),r&&(n.headPath||"html,head"!==this.nodeMappings.get(e).path||(n.headPath=this.nodeMappings.get(e).deweyId),n.bodyPath||"html,body"!==this.nodeMappings.get(e).path||(n.bodyPath=this.nodeMappings.get(e).deweyId))}}dom.traverse(function(e){!dom.isShadowRoot(e)&&1!==e.nodeType||void 0!==e._arid||i.addMappingNode(e);var t=i.nodeMappings.get(e);r&&t&&t.path&&(n.headPath||"html,head"!==t.path||(n.headPath=t.deweyId),n.bodyPath||"html,body"!==t.path||(n.bodyPath=t.deweyId))},e,NodeFilter.SHOW_ELEMENT,null,!0)}}},{key:"getPositionOfNode",value:function(e){var t=!1,r=1,n=e.nodeName,i=e;if(e.previousElementSibling)for(i=e.previousElementSibling;i;)i.nodeType===Node.ELEMENT_NODE&&i.tagName===n&&(t=t||!0,r+=1),i=i.previousElementSibling;if(!t){for(i=e.nextElementSibling;!t&&i;)i.nodeType===Node.ELEMENT_NODE&&i.tagName===n&&(t=!0),i=i.nextElementSibling;t&&(r=1)}return t||(r=0),r}},{key:"getEventTargetXPath",value:function(e,t){var r=dom.getEventTarget(e);return this.getNodeXPath(r,t)}},{key:"getNodeXPath",value:function(e,t){if(!e)return[];var r=[],n="";if(e.parentNode?dom.isShadowRoot(e.parentNode)?(r=this.getNodeXPath(e.parentNode.host)).push("shadowRoot"):r=this.getNodeXPath(e.parentNode):dom.isShadowRoot(e)&&(r=this.getNodeXPath(e.host)).push("shadowRoot"),e.nodeType!==Node.ELEMENT_NODE)return r;var i=this.getPositionOfNode(e),a=e.tagName.toLowerCase(),o=e.getAttribute("id"),n=t&&"id"!==t&&o?(0===i&&(i=1),a+"[@id='"+o+"']["+i+"]"):a+(0<i?"["+i+"]":"");return r.push(n),r}}]),XX);function XX(){classCallCheck(this,XX),this.domPathCache={},this.pathid=0,this.nodeId=0,this.nodeMappings=new WeakMap,this.count=0}var globalCacheObj=new CacheObj,DataCache=(createClass(PY,[{key:"getMaxItem",value:function(){var e=config.getDomCacheItem();return e||0===e?e:constants.record.cache.maxItems}},{key:"getMaxSize",value:function(){var e=config.getDomCacheSize();return e||0===e?e:constants.record.cache.maxSize}},{key:"clearCache",value:function(){this.caches=[],this.totalSize=0}},{key:"sizeLimit",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";return this.totalSize+t.length>this.getMaxSize()}},{key:"updateSize",value:function(e){this.totalSize+=e.length}},{key:"getObject",value:function(e,t,r){t=t.join(",");for(var n,i={},a=this.caches,o=this.caches.length-1;0<=o;o--)if(a[o].v===e){i=a[o];break}if(e=Zlib.emojiToHtmlEntity(e),!_.isDefined(i.id)){if(i.id=_.UUID(),(i.kl=t)&&e.length>constants.record.cache.minLength&&config.isDomDiffEnabled())for(var s=this.caches.length-1;0<=s;s--)if(a[s].kl===t){var c=_.Diff(a[s].v,e);i.diff={id:a[s].id,df:c};break}_.isDefined(i.diff)?this.caches.length<this.getMaxItem()&&!this.sizeLimit(e)&&((n={}).v=e,n.id=i.id,n.kl=i.kl,this.updateSize(e),this.caches.push(n)):(i.v=e,this.caches.length<this.getMaxItem()&&!this.sizeLimit(e)&&(this.updateSize(e),this.caches.push(i)))}var l=Object.assign({},i);return r&&delete l[r],l}}]),PY);function PY(){classCallCheck(this,PY),this.caches=[],this.totalSize=0}var globalDataCache=new DataCache,RcFrame=(createClass(iZ,[{key:"enqueue",value:function(e,t){if(this.init)try{e.source.postMessage(t,"*")}catch(e){}}},{key:"loadFrame",value:function(e,t,r){var n,i=e.target||e.srcElement||e.originalTarget;t&&i&&this.checkSrc(i)&&this.checkSameOrigin(i)&&(n=this.getWinObject(i),logger.liveDebug("Load frame in same domain iframe on :"+n.location.href),this.getDocObject(n)&&(_.isDefined(n.processor)?(logger.liveDebug("in load old processor and send generateHTML..."+n.location.href),n.processor.setProcXPath(globalCacheObj.getNodeXPath(r).join(",")),n.processor.sendFramePage(!0)):(logger.liveDebug("in load new processor and send generateHTML..."+n.location.href),n.processor=new ReplayProcessor(n,globalCacheObj.getNodeXPath(i),t),n.processor.sendFramePage(!0),t.addChildProc(n.processor))))}},{key:"getIframeSrc",value:function(e,t){var r=t.getAttribute("src")||"";return r&&r.startsWith("//")&&e&&e.getWinObj()&&(r=e.getWinObj().location.protocol+r),r}},{key:"checkDocReady",value:function(e){var t=!1,r=this.getDocObject(e,!1);try{"complete"===r.readyState&&(t=!0)}catch(e){}return t}},{key:"handleIframeEndSession",value:function(e){if(e&&e.getDocObj())for(var t=e.getDocObj().querySelectorAll("iframe"),r=0;r<t.length;r++){var n=t[r],i=this.getWinObject(n);if(!i)return;if(this.checkSrc(n)&&!1===this.checkSameOrigin(n)){var a={source:"_ar_",content:{siteId:config.getSiteid(),isOver:!0}};if(n._arOnload)try{i.postMessage(a,"*")}catch(e){}else try{i.postMessage(a,"*")}catch(e){}}}}},{key:"handleIframePauseResume",value:function(e,t){if(e&&e.getDocObj())for(var r=e.getDocObj().querySelectorAll("iframe"),n=0;n<r.length;n++){var i=r[n],a=this.getWinObject(i);if(!a)return;if(this.checkSrc(i)&&!1===this.checkSameOrigin(i)){var o={source:"_ar_",content:{siteId:config.getSiteid(),cmd:{command:t}}};try{a.postMessage(o,"*")}catch(e){}}}}},{key:"skipZendeskIframeOnSafari",value:function(e){try{if(e&&"function"==typeof e.getAttribute&&("launcher"===e.getAttribute("id")||"webWidget"===e.getAttribute("id")||"qt-widget-frame"===e.getAttribute("id")||"Messaging window"===e.getAttribute("name")||-1<e.getAttribute("title").indexOf("messaging window")))return!0}catch(e){return!1}return!1}},{key:"handleIframe",value:function(p,e){var f=this;if(!globalSessionTracker.isCanceled()){this.init=!0;for(var I=(e||p.getDocObj()).querySelectorAll("iframe"),t=0;t<I.length;t++){var r=function(e){var r=I[e];if(f.skipZendeskIframeOnSafari(r))return"continue";var t=!r._arB||!f.childrenIframes[globalCacheObj.getNodeXPath(r)],n=f.getWinObject(r);if(!n)return{v:void 0};if(t||globalSessionTracker.isSpaSendPV()){f.childrenIframes[globalCacheObj.getNodeXPath(r)]=!0,r._arB=!0;var i=globalSessionTracker.getSessionMetadata(),a=globalCacheObj.getNodeXPath(r).join(","),o=globalSessionTracker.getPVFromSessStorage(),s=globalSessionTracker.getLastPVViewID(),c=globalSessionTracker.getCurrentWindowViewID(),l={source:"_ar_",content:_extends({fpath:a,pv:o},i)},g=dom.getPosInTopFrame(r,dom.getContainingWinObj(r)),u=globalSessionTracker.isSpaSendPV();if(l.content.myCoordinates=g,l.content.frameIdx=p.getIframeIndex(r),l.content.spaSendPV=u,f.checkSrc(r)&&f.checkSameOrigin(r)){var d=f.getDocObject(n,!1),h=!1;if(d){f.resetIframeBindings(d);try{"complete"!==d.readyState&&"loaded"!==d.readyState||(h=!0)}catch(e){}h&&(_.isDefined(n.processor)?(logger.liveDebug("Found existing processor in same domain iframe on :"+n.location.href),n.processor.setProcXPath(globalCacheObj.getNodeXPath(r).join(",")),r._arPV!==o&&s===c&&globalSessionTracker.syncPVInFrame(o),logger.liveDebug("sendFramePage on :"+n.location.href),n.processor.sendFramePage(!0),r._arPV=o):(logger.liveDebug("To init same domain iframe processor on :"+n.location.href,globalCacheObj.getNodeXPath(r).join(",")),n.processor=new ReplayProcessor(n,globalCacheObj.getNodeXPath(r),p),logger.liveDebug("sendFramePage on :"+n.location.href,globalCacheObj.getNodeXPath(r).join(",")),p.addChildProc(n.processor)))}_.addEventListener(r,"load",function(e){if(!globalSessionTracker.isCanceled()){f.loadFrame(e,p,r);try{var t=f.getWinObject(r);t.addEventListener("beforeunload",function(){t&&t.processor&&t.processor.reset()})}catch(e){}}})}if(f.checkSrc(r)&&!1===f.checkSameOrigin(r))if(r._arOnload)try{n.postMessage(l,"*")}catch(e){}else try{n.postMessage(l,"*")}catch(e){}}}(t);switch(r){case"continue":continue;default:if("object"===(void 0===r?"undefined":_typeof(r)))return r.v}}}}},{key:"checkSrc",value:function(e){return!e.src||!(-1<e.src.indexOf("javascript:")||-1<e.src.indexOf("about:blank"))}},{key:"getSrcByForm",value:function(e){if(e.name){var t=document.querySelectorAll("form[target='"+e.name+"']")[0];if(t)return t.action}}},{key:"checkSameOrigin",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:window.location.href;if(e.src&&0!==e.src.indexOf(" "))return urls.testSameDomain(r,e.src);var n=this.getSrcByForm(e);if(n)return urls.testSameDomain(r,n);var i=null;try{i=e.contentDocument}catch(e){}return null!==i}},{key:"resetIframeBindings",value:function(e){for(var t=e.querySelectorAll("iframe[_arB='true']"),r=0;r<t.length;r++)t[r]._arB=!1}},{key:"getWinObject",value:function(e){var t=void 0;return e&&e.contentWindow?t=e.contentWindow:e&&e.contentDocument&&e.contentDocument.defaultView&&(t=e.contentDocument.defaultView),t&&t!==t.top?t:null}},{key:"getDocObject",value:function(e){try{return e.document}catch(e){return!1}}}],[{key:"getInstance",value:function(){return iZ.instance||(iZ.instance=new iZ),iZ.instance}}]),iZ);function iZ(){classCallCheck(this,iZ),this.childrenIframes={},this.init=!1}var globalHammer=null;!function(a,s,u){var o,c=["","webkit","Moz","MS","ms","o"],e=s.createElement("div"),r="function",l=Math.round,d=Math.abs,h=Date.now;function g(e,t,r){return setTimeout(m(e,r),t)}function n(e,t,r){return Array.isArray(e)&&(p(e,r[t],r),1)}function p(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(e.length!==u)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function t(n,e,t){var i="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=a.console&&(a.console.warn||a.console.log);return r&&r.call(a.console,i,t),n.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===u||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==u&&null!==n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Object.assign;var i=t(function(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;)(!r||r&&e[n[i]]===u)&&(e[n[i]]=t[n[i]]),i++;return e},"extend","Use `assign`."),f=t(function(e,t){return i(e,t,!0)},"merge","Use `assign`.");function I(e,t,r){var n=t.prototype,i=e.prototype=Object.create(n);i.constructor=e,i._super=n,r&&o(i,r)}function m(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return(void 0===e?"undefined":_typeof(e))==r?e.apply(t&&t[0]||u,t):e}function C(e,t){return e===u?t:e}function y(t,e,r){p(S(e),function(e){t.addEventListener(e,r,!1)})}function A(t,e,r){p(S(e),function(e){t.removeEventListener(e,r,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function w(e,t){return-1<e.indexOf(t)}function S(e){return e.trim().split(/\s+/g)}function k(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function _(e,r,t){for(var n=[],i=[],a=0;a<e.length;){var o=r?e[a][r]:e[a];k(i,o)<0&&n.push(e[a]),i[a]=o,a++}return t&&(n=r?n.sort(function(e,t){return e[r]>t[r]}):n.sort()),n}function P(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),a=0;a<c.length;){if((n=(r=c[a])?r+i:t)in e)return n;a++}return u}var E=1;function x(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var R="ontouchstart"in a,N=P(a,"PointerEvent")!==u,W=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D="touch",B="mouse",F=25,L=1,O=4,U=8,M=1,G=2,Z=4,j=8,V=16,H=G|Z,J=j|V,X=H|J,Y=["x","y"],z=["clientX","clientY"];function K(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&r.handler(e)},this.init()}function $(e,t,r){var n=r.pointers.length,i=r.changedPointers.length,a=t&L&&n-i==0,o=t&(O|U)&&n-i==0;r.isFirst=!!a,r.isFinal=!!o,a&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,i=n.length;r.firstInput||(r.firstInput=Q(t));1<i&&!r.firstMultiple?r.firstMultiple=Q(t):1===i&&(r.firstMultiple=!1);var a=r.firstInput,o=r.firstMultiple,s=o?o.center:a.center,c=t.center=q(n);t.timeStamp=h(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=ne(s,c),t.distance=re(s,c),function(e,t){var r=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};t.eventType!==L&&a.eventType!==O||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=i.x+(r.x-n.x),t.deltaY=i.y+(r.y-n.y)}(r,t),t.offsetDirection=te(t.deltaX,t.deltaY);var l=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,t.scale=o?function(e,t){return re(t[0],t[1],z)/re(e[0],e[1],z)}(o.pointers,n):1,t.rotation=o?function(e,t){return ne(t[1],t[0],z)+ne(e[1],e[0],z)}(o.pointers,n):0,t.maxPointers=!r.prevInput||t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers,function(e,t){var r,n,i,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;{var c,l,g;t.eventType!=U&&(F<s||o.velocity===u)?(c=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,g=ee(s,c,l),n=g.x,i=g.y,r=d(g.x)>d(g.y)?g.x:g.y,a=te(c,l),e.lastInterval=t):(r=o.velocity,n=o.velocityX,i=o.velocityY,a=o.direction)}t.velocity=r,t.velocityX=n,t.velocityY=i,t.direction=a}(r,t);var g=e.element;v(t.srcEvent.target,g)&&(g=t.srcEvent.target);t.target=g}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function Q(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:l(e.pointers[r].clientX),clientY:l(e.pointers[r].clientY)},r++;return{timeStamp:h(),pointers:t,center:q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function q(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var r=0,n=0,i=0;i<t;)r+=e[i].clientX,n+=e[i].clientY,i++;return{x:l(r/t),y:l(n/t)}}function ee(e,t,r){return{x:t/e||0,y:r/e||0}}function te(e,t){return e===t?M:d(e)>=d(t)?e<0?G:Z:t<0?j:V}function re(e,t,r){var n=t[(r=r||Y)[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function ne(e,t,r){var n=t[(r=r||Y)[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}K.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(x(this.element),this.evWin,this.domHandler)}};var ie={mousedown:L,mousemove:2,mouseup:O},ae="mousedown",oe="mousemove mouseup";function se(){this.evEl=ae,this.evWin=oe,this.pressed=!1,K.apply(this,arguments)}I(se,K,{handler:function(e){var t=ie[e.type];t&L&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=O),this.pressed&&(t&O&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:B,srcEvent:e}))}});var ce={pointerdown:L,pointermove:2,pointerup:O,pointercancel:U,pointerout:U},le={2:D,3:"pen",4:B,5:"kinect"},ge="pointerdown",ue="pointermove pointerup pointercancel";function de(){this.evEl=ge,this.evWin=ue,K.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(ge="MSPointerDown",ue="MSPointerMove MSPointerUp MSPointerCancel"),I(de,K,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),i=ce[n],a=le[e.pointerType]||e.pointerType,o=a==D,s=k(t,e.pointerId,"pointerId");i&L&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):i&(O|U)&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),r&&t.splice(s,1))}});var he={touchstart:L,touchmove:2,touchend:O,touchcancel:U};function pe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,K.apply(this,arguments)}I(pe,K,{handler:function(e){var t,r=he[e.type];r===L&&(this.started=!0),this.started&&(t=function(e,t){var r=T(e.touches),n=T(e.changedTouches);t&(O|U)&&(r=_(r.concat(n),"identifier",!0));return[r,n]}.call(this,e,r),r&(O|U)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,r,{pointers:t[0],changedPointers:t[1],pointerType:D,srcEvent:e}))}});var fe={touchstart:L,touchmove:2,touchend:O,touchcancel:U},Ie="touchstart touchmove touchend touchcancel";function me(){this.evTarget=Ie,this.targetIds={},K.apply(this,arguments)}I(me,K,{handler:function(e){var t=fe[e.type],r=function(e,t){var r=T(e.touches),n=this.targetIds;if(t&(2|L)&&1===r.length)return n[r[0].identifier]=!0,[r,r];var i,a,o=T(e.changedTouches),s=[],c=this.target;if(a=r.filter(function(e){return v(e.target,c)}),t===L)for(i=0;i<a.length;)n[a[i].identifier]=!0,i++;i=0;for(;i<o.length;)n[o[i].identifier]&&s.push(o[i]),t&(O|U)&&delete n[o[i].identifier],i++;return s.length?[_(a.concat(s),"identifier",!0),s]:void 0}.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:D,srcEvent:e})}});var be=2500;function Ce(){K.apply(this,arguments);var e=m(this.handler,this);this.touch=new me(this.manager,e),this.mouse=new se(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ye(e){var t,r,n=e.changedPointers[0];n.identifier===this.primaryTouch&&(t={x:n.clientX,y:n.clientY},this.lastTouches.push(t),r=this.lastTouches,setTimeout(function(){var e=r.indexOf(t);-1<e&&r.splice(e,1)},be))}I(Ce,K,{handler:function(e,t,r){var n=r.pointerType==D,i=r.pointerType==B;if(!(i&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&L?(this.primaryTouch=t.changedPointers[0].identifier,ye.call(this,t)):e&(O|U)&&ye.call(this,t)}).call(this,t,r);else if(i&&function(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],a=Math.abs(t-i.x),o=Math.abs(r-i.y);if(a<=25&&o<=25)return!0}return!1}.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ae=P(e.style,"touchAction"),ve=Ae!==u,we="compute",Se="manipulation",ke="none",Te="pan-x",_e="pan-y",Pe=function(){if(!ve)return!1;var t={},r=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!r||a.CSS.supports("touch-action",e)}),t}();function Ee(e,t){this.manager=e,this.set(t)}Ee.prototype={set:function(e){e==we&&(e=this.compute()),ve&&this.manager.element.style&&Pe[e]&&(this.manager.element.style[Ae]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(w(e,ke))return ke;var t=w(e,Te),r=w(e,_e);if(t&&r)return ke;if(t||r)return t?Te:_e;if(w(e,Se))return Se;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=w(n,ke)&&!Pe[ke],a=w(n,_e)&&!Pe[_e],o=w(n,Te)&&!Pe[Te];if(i){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!o||!a)return i||a&&r&H||o&&r&J?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var xe=1;function Re(e){this.options=o({},this.defaults,e||{}),this.id=E++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=xe,this.simultaneous={},this.requireFail=[]}function Ne(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function We(e){return e==V?"down":e==j?"up":e==G?"left":e==Z?"right":""}function De(e,t){var r=t.manager;return r?r.get(e):e}function Be(){Re.apply(this,arguments)}function Fe(){Be.apply(this,arguments),this.pX=null,this.pY=null}function Le(){Be.apply(this,arguments)}function Oe(){Re.apply(this,arguments),this._timer=null,this._input=null}function Ue(){Be.apply(this,arguments)}function Me(){Be.apply(this,arguments)}function Ge(){Re.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ze(e,t){return(t=t||{}).recognizers=C(t.recognizers,Ze.defaults.preset),new je(e,t)}Re.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=De(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=De(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=De(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=De(e,this);var t=k(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var r=this,e=this.state;function n(e){r.manager.emit(e,t)}e<8&&n(r.options.event+Ne(e)),n(r.options.event),t.additionalEvent&&n(t.additionalEvent),8<=e&&n(r.options.event+Ne(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|xe)))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=xe),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(){},getTouchAction:function(){},reset:function(){}},I(Be,Re,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,i=this.attrTest(e);return n&&(r&U||!i)?16|t:n||i?r&O?8|t:2&t?4|t:2:32}}),I(Fe,Be,{defaults:{event:"pan",threshold:10,pointers:1,direction:X},getTouchAction:function(){var e=this.options.direction,t=[];return e&H&&t.push(_e),e&J&&t.push(Te),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(n=t.direction&H?(i=0===a?M:a<0?G:Z,r=a!=this.pX,Math.abs(e.deltaX)):(i=0===o?M:o<0?j:V,r=o!=this.pY,Math.abs(e.deltaY))),e.direction=i,r&&n>t.threshold&&i&t.direction},attrTest:function(e){return Be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=We(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),I(Le,Be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ke]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){var t;1!==e.scale&&(t=e.scale<1?"in":"out",e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),I(Oe,Re,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!n||!r||e.eventType&(O|U)&&!i)this.reset();else if(e.eventType&L)this.reset(),this._timer=g(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&O)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&O?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),I(Ue,Be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ke]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),I(Me,Be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:H|J,pointers:1},getTouchAction:function(){return Fe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return r&(H|J)?t=e.overallVelocity:r&H?t=e.overallVelocityX:r&J&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&O},emit:function(e){var t=We(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),I(Ge,Re,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&L&&0===this.count)return this.failTimeout();if(n&&i&&r){if(e.eventType!=O)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||re(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=g(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=g(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ze.VERSION="2.0.7",Ze.defaults={domEvents:!1,touchAction:we,enable:!0,inputTarget:null,inputClass:null,preset:[[Ue,{enable:!1}],[Le,{enable:!1},["rotate"]],[Me,{direction:H}],[Fe,{direction:H},["swipe"]],[Ge],[Ge,{event:"doubletap",taps:2},["tap"]],[Oe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function je(e,t){var r,n;this.options=o({},Ze.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=(n=(r=this).options.inputClass,new(n||(N?de:W?me:R?Ce:se))(r,$)),this.touchAction=new Ee(this,this.options.touchAction),Ve(this,!0),p(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ve(r,n){var i,a=r.element;a.style&&(p(r.options.cssProps,function(e,t){i=P(a.style,t),n?(r.oldCssProps[i]=a.style[i],a.style[i]=e):a.style[i]=r.oldCssProps[i]||""}),n||(r.oldCssProps={}))}je.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t,r=this.session;if(!r.stopped){this.touchAction.preventDefaults(e);var n=this.recognizers,i=r.curRecognizer;(!i||i&&8&i.state)&&(i=r.curRecognizer=null);for(var a=0;a<n.length;)t=n[a],2===r.stopped||i&&t!=i&&!t.canRecognizeWith(i)?t.reset():t.recognize(e),!i&&14&t.state&&(i=r.curRecognizer=t),a++}},get:function(e){if(e instanceof Re)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){return n(e,"remove",this)||!(e=this.get(e))||-1!==(r=k(t=this.recognizers,e))&&(t.splice(r,1),this.touchAction.update()),this;var t,r},on:function(e,t){if(e!==u&&t!==u){var r=this.handlers;return p(S(e),function(e){r[e]=r[e]||[],r[e].push(t)}),this}},off:function(e,t){if(e!==u){var r=this.handlers;return p(S(e),function(e){t?r[e]&&r[e].splice(k(r[e],t),1):delete r[e]}),this}},emit:function(e,t){var r,n,i;this.options.domEvents&&(r=e,n=t,(i=s.createEvent("Event")).initEvent(r,!0,!0),(i.gesture=n).target.dispatchEvent(i));var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](t),o++}},destroy:function(){this.element&&Ve(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Ze,{INPUT_START:L,INPUT_MOVE:2,INPUT_END:O,INPUT_CANCEL:U,STATE_POSSIBLE:xe,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:M,DIRECTION_LEFT:G,DIRECTION_RIGHT:Z,DIRECTION_UP:j,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:H,DIRECTION_VERTICAL:J,DIRECTION_ALL:X,Manager:je,Input:K,TouchAction:Ee,TouchInput:me,MouseInput:se,PointerEventInput:de,TouchMouseInput:Ce,SingleTouchInput:pe,Recognizer:Re,AttrRecognizer:Be,Tap:Ge,Pan:Fe,Swipe:Me,Pinch:Le,Rotate:Ue,Press:Oe,on:y,off:A,each:p,merge:f,extend:i,assign:o,inherit:I,bindFn:m,prefixed:P}),globalHammer=Ze}(window,document);var Hammer=globalHammer,eventTypes={},EventType=(createClass(H8,null,[{key:"init",value:function(){var t=constants.events.IDGEN.behavior;["HeartbeatT","UserProfileT","SessionPropT","IdentifyUserT","SessionStartT","SessionEndT","ViewStartT","ViewEndT","DeviceInfoT"].forEach(function(e){eventTypes[e]=t++}),t=constants.events.IDGEN.sessions,["ViewChangeT","InternalSessionPropT","MergeSessionT"].forEach(function(e){eventTypes[e]=t++}),t=constants.events.IDGEN.interactions,["ResEvt1T","HTMLTextT","NodeDictionaryT","WindowDimT","SclWindowT","MouseMoveT","MouseLeaveEntryT","FormInputT","DblClickT","KeyStrokeDownT","InputPosT","InputValChangedT","MutNodeTextT","PropChangeT","JSExceptionT","MouseClickT","ResEvt4T","ResEvt5T","PVT","HTMLDimT","SclInNodeT","DownloadedT","FormSubmitT","CSSSerializeT","ResEvt8T","ResizeT","MutInsertT","MutRemoveT","TouchStartT","TouchEndT","CustomEventT","ErrorT","TapT","PressT","SwipeT","PinchT","ConsoleT","NetworkT"].forEach(function(e){eventTypes[e]=t++})}},{key:"CustomEventT",value:function(){return eventTypes.CustomEventT}},{key:"DblClickT",value:function(){return eventTypes.DblClickT}},{key:"DeviceInfoT",value:function(){return eventTypes.DeviceInfoT}},{key:"HTMLDimT",value:function(){return eventTypes.HTMLDimT}},{key:"NodeDictionaryT",value:function(){return eventTypes.NodeDictionaryT}},{key:"DownloadedT",value:function(){return eventTypes.DownloadedT}},{key:"ErrorT",value:function(){return eventTypes.ErrorT}},{key:"FormSubmitT",value:function(){return eventTypes.FormSubmitT}},{key:"HTMLTextT",value:function(){return eventTypes.HTMLTextT}},{key:"PropChangeT",value:function(){return eventTypes.PropChangeT}},{key:"InputPosT",value:function(){return eventTypes.InputPosT}},{key:"HeartbeatT",value:function(){return eventTypes.HeartbeatT}},{key:"IdentifyUserT",value:function(){return eventTypes.IdentifyUserT}},{key:"FormInputT",value:function(){return eventTypes.FormInputT}},{key:"InternalSessionPropT",value:function(){return eventTypes.InternalSessionPropT}},{key:"JSExceptionT",value:function(){return eventTypes.JSExceptionT}},{key:"KeyStrokeDownT",value:function(){return eventTypes.KeyStrokeDownT}},{key:"MergeSessionT",value:function(){return eventTypes.MergeSessionT}},{key:"MouseClickT",value:function(){return eventTypes.MouseClickT}},{key:"MouseMoveT",value:function(){return eventTypes.MouseMoveT}},{key:"MouseLeaveEntryT",value:function(){return eventTypes.MouseLeaveEntryT}},{key:"SclInNodeT",value:function(){return eventTypes.SclInNodeT}},{key:"PVT",value:function(){return eventTypes.PVT}},{key:"PinchT",value:function(){return eventTypes.PinchT}},{key:"PressT",value:function(){return eventTypes.PressT}},{key:"SessionEndT",value:function(){return eventTypes.SessionEndT}},{key:"SessionStartT",value:function(){return eventTypes.SessionStartT}},{key:"SwipeT",value:function(){return eventTypes.SwipeT}},{key:"TapT",value:function(){return eventTypes.TapT}},{key:"TouchEndT",value:function(){return eventTypes.TouchEndT}},{key:"TouchStartT",value:function(){return eventTypes.TouchStartT}},{key:"UserProfileT",value:function(){return eventTypes.UserProfileT}},{key:"InputValChangedT",value:function(){return eventTypes.InputValChangedT}},{key:"ViewChangeT",value:function(){return eventTypes.ViewChangeT}},{key:"ViewEndT",value:function(){return eventTypes.ViewEndT}},{key:"ViewStartT",value:function(){return eventTypes.ViewStartT}},{key:"MutNodeTextT",value:function(){return eventTypes.MutNodeTextT}},{key:"MutInsertT",value:function(){return eventTypes.MutInsertT}},{key:"MutRemoveT",value:function(){return eventTypes.MutRemoveT}},{key:"SessionPropT",value:function(){return eventTypes.SessionPropT}},{key:"SclWindowT",value:function(){return eventTypes.SclWindowT}},{key:"WindowDimT",value:function(){return eventTypes.WindowDimT}},{key:"ResizeT",value:function(){return eventTypes.ResizeT}},{key:"CSSSerializeT",value:function(){return eventTypes.CSSSerializeT}},{key:"ConsoleT",value:function(){return 67}},{key:"NetworkT",value:function(){return 68}},{key:"isInteractionEvent",value:function(e){return _.inArray(e,[H8.MouseClickT(),H8.TapT(),H8.PressT(),H8.KeyStrokeDownT(),H8.ResizeT(),H8.SclWindowT(),H8.SclInNodeT(),H8.MouseLeaveEntryT()])}}]),H8);function H8(){classCallCheck(this,H8)}var aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),a=0,n=2,o=!0;n<arguments.length;)r[a++]=arguments[n++];return new Promise(function(n,i){r[a]=function(e){if(o)if(o=!1,e)i(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,i(e))}})}var base64_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var l=new Array(64),c=new Array(123),n=0;n<64;)c[l[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;r.encode=function(e,t,r){for(var n,i=null,a=[],o=0,s=0;t<r;){var c=e[t++];switch(s){case 0:a[o++]=l[c>>2],n=(3&c)<<4,s=1;break;case 1:a[o++]=l[n|c>>4],n=(15&c)<<2,s=2;break;case 2:a[o++]=l[n|c>>6],a[o++]=l[63&c],s=0}8191<o&&((i=i||[]).push(String.fromCharCode.apply(String,a)),o=0)}return s&&(a[o++]=l[n],a[o++]=61,1===s&&(a[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var g="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,a=0,o=0;o<e.length;){var s=e.charCodeAt(o++);if(61===s&&1<a)break;if(void 0===(s=c[s]))throw Error(g);switch(a){case 0:n=s,a=1;break;case 1:t[r++]=n<<2|(48&s)>>4,n=s,a=2;break;case 2:t[r++]=(15&n)<<4|(60&s)>>2,n=s,a=3;break;case 3:t[r++]=(3&n)<<6|s,a=0}}if(1===a)throw Error(g);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float_1=factory(factory);function factory(e){function t(e,t,r,n){var i,a=t<0?1:0;a&&(t=-t),0===t?e(0<1/t?0:2147483648,r,n):isNaN(t)?e(2143289344,r,n):e(34028234663852886e22<t?(a<<31|2139095040)>>>0:t<11754943508222875e-54?(a<<31|Math.round(t/1401298464324817e-60))>>>0:(a<<31|(i=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,a=n>>>23&255,o=8388607&n;return 255==a?o?NaN:1/0*i:0==a?1401298464324817e-60*i*o:i*Math.pow(2,a-150)*(8388608+o)}function n(e,t,r){s[0]=e,t[r]=c[0],t[r+1]=c[1],t[r+2]=c[2],t[r+3]=c[3]}function i(e,t,r){s[0]=e,t[r]=c[3],t[r+1]=c[2],t[r+2]=c[1],t[r+3]=c[0]}function a(e,t){return c[0]=e[t],c[1]=e[t+1],c[2]=e[t+2],c[3]=e[t+3],s[0]}function o(e,t){return c[3]=e[t],c[2]=e[t+1],c[1]=e[t+2],c[0]=e[t+3],s[0]}var s,c,l,g,u,d;function h(e,t,r,n,i,a){var o,s,c=n<0?1:0;c&&(n=-n),0===n?(e(0,i,a+t),e(0<1/n?0:2147483648,i,a+r)):isNaN(n)?(e(0,i,a+t),e(2146959360,i,a+r)):17976931348623157e292<n?(e(0,i,a+t),e((c<<31|2146435072)>>>0,i,a+r)):n<22250738585072014e-324?(e((o=n/5e-324)>>>0,i,a+t),e((c<<31|o/4294967296)>>>0,i,a+r)):(1024===(s=Math.floor(Math.log(n)/Math.LN2))&&(s=1023),e(4503599627370496*(o=n*Math.pow(2,-s))>>>0,i,a+t),e((c<<31|s+1023<<20|1048576*o&1048575)>>>0,i,a+r))}function p(e,t,r,n,i){var a=e(n,i+t),o=e(n,i+r),s=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+a;return 2047==c?l?NaN:1/0*s:0==c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}function f(e,t,r){g[0]=e,t[r]=u[0],t[r+1]=u[1],t[r+2]=u[2],t[r+3]=u[3],t[r+4]=u[4],t[r+5]=u[5],t[r+6]=u[6],t[r+7]=u[7]}function I(e,t,r){g[0]=e,t[r]=u[7],t[r+1]=u[6],t[r+2]=u[5],t[r+3]=u[4],t[r+4]=u[3],t[r+5]=u[2],t[r+6]=u[1],t[r+7]=u[0]}function m(e,t){return u[0]=e[t],u[1]=e[t+1],u[2]=e[t+2],u[3]=e[t+3],u[4]=e[t+4],u[5]=e[t+5],u[6]=e[t+6],u[7]=e[t+7],g[0]}function b(e,t){return u[7]=e[t],u[6]=e[t+1],u[5]=e[t+2],u[4]=e[t+3],u[3]=e[t+4],u[2]=e[t+5],u[1]=e[t+6],u[0]=e[t+7],g[0]}return"undefined"!=typeof Float32Array?(s=new Float32Array([-0]),c=new Uint8Array(s.buffer),l=128===c[3],e.writeFloatLE=l?n:i,e.writeFloatBE=l?i:n,e.readFloatLE=l?a:o,e.readFloatBE=l?o:a):(e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)),"undefined"!=typeof Float64Array?(g=new Float64Array([-0]),u=new Uint8Array(g.buffer),d=128===u[7],e.writeDoubleLE=d?f:I,e.writeDoubleBE=d?I:f,e.readDoubleLE=d?m:b,e.readDoubleBE=d?b:m):(e.writeDoubleLE=h.bind(null,writeUintLE,0,4),e.writeDoubleBE=h.bind(null,writeUintBE,4,0),e.readDoubleLE=p.bind(null,readUintLE,0,4),e.readDoubleBE=p.bind(null,readUintBE,4,0)),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){for(var t,r=0,n=0;n<e.length;++n)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(n+1))?(++n,r+=4):r+=3;return r},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,a=[],o=0;t<r;)(n=e[t++])<128?a[o++]=n:191<n&&n<224?a[o++]=(31&n)<<6|63&e[t++]:239<n&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(n>>10),a[o++]=56320+(1023&n)):a[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],8191<o&&((i=i||[]).push(String.fromCharCode.apply(String,a)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))},r.write=function(e,t,r){for(var n,i,a=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&i),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-a}}),pool_1=pool;function pool(r,n,e){var i=e||8192,a=i>>>1,o=null,s=i;return function(e){if(e<1||a<e)return r(e);i<s+e&&(o=r(i),s=0);var t=n.call(o,s,s+=e);return 7&s&&(s=1+(7|s)),t}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++n&&(n=0))),new LongBits(r,n)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule(function(e,t){var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function r(e){function r(e,t){if(!(this instanceof r))return new r(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&i(this,t)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return e}}),r.prototype.toString=function(){return this.name+": "+this.message},r}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.global=void 0!==commonjsGlobal&&"[object global]"===Object.prototype.toString.call(commonjsGlobal)&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(n.global.process&&n.global.process.versions&&n.global.process.versions.node),n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||0<(Array.isArray(r)?r.length:Object.keys(r).length))},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=r,n.ProtocolError=r("ProtocolError"),n.oneOfGetter=function(e){for(var r={},t=0;t<e.length;++t)r[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===r[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},n.oneOfSetter=function(r){return function(e){for(var t=0;t<r.length;++t)r[t]!==e&&delete this[r[t]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var r=n.Buffer;r?(n._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,t){return new r(e,t)},n._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop$2(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;127<e;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function(e){var t,r=e.length>>>0;return r?(minimal.isString(e)&&(t=Writer.alloc(r=base64.length(e)),base64.decode(e,t,0),e=t),this.uint32(r)._push(writeBytes,r,e)):this._push(writeByte,1,0)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?minimal.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&"set"===minimal.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter$1.writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=minimal.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array},vga;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(vga=4294967295,function(){if(vga=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return vga;if(vga=(vga|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return vga;if(vga=(vga|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return vga;if(vga=(vga|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return vga;if(vga=(vga|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return vga;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return vga}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(r,t,n,i,a){if(!i)throw TypeError("request must be specified");var o=this;if(!a)return minimal.asPromise(e,o,r,t,n,i);if(o.rpcImpl)try{return o.rpcImpl(r,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,t){if(e)return o.emit("error",e,r),a(e);if(null!==t){if(!(t instanceof n))try{t=n[o.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return o.emit("error",e,r),a(e)}return o.emit("data",t,r),a(null,t)}o.end(!0)})}catch(e){return o.emit("error",e,r),void setTimeout(function(){a(e)},0)}else setTimeout(function(){a(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,t){t.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,t){var r=t;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,r.configure=n,n()}),minimal$2=indexMinimal,minimal_1=minimal$2.util,minimal_2=minimal$2.Writer,minimal_3=minimal$2.Reader,$Reader=minimal_3,$Writer=minimal_2,$util=minimal_1,$root={},com=$root.com=(zha={},zha.auryc=((Aha={}).ubi=((Bha={}).core=((Cha={}).model=((Dha={}).Message=(Eha.prototype.cid="",Eha.prototype.uid="",Eha.prototype.sid="",Eha.prototype.domain="",Eha.prototype.context=null,Eha.prototype.packet=$util.emptyArray,Eha.create=function(e){return new Eha(e)},Eha.encode=function(e,t){if(t=t||$Writer.create(),null!=e.cid&&e.hasOwnProperty("cid")&&t.uint32(10).string(e.cid),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(18).string(e.uid),null!=e.sid&&e.hasOwnProperty("sid")&&t.uint32(26).string(e.sid),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(34).string(e.domain),null!=e.context&&e.hasOwnProperty("context")&&$root.com.auryc.ubi.core.model.Message.MessageContext.encode(e.context,t.uint32(42).fork()).ldelim(),null!=e.packet&&e.packet.length)for(var r=0;r<e.packet.length;++r)$root.com.auryc.ubi.core.model.Message.MessagePacket.encode(e.packet[r],t.uint32(50).fork()).ldelim();return t},Eha.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Eha.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.cid=e.string();break;case 2:n.uid=e.string();break;case 3:n.sid=e.string();break;case 4:n.domain=e.string();break;case 5:n.context=$root.com.auryc.ubi.core.model.Message.MessageContext.decode(e,e.uint32());break;case 6:n.packet&&n.packet.length||(n.packet=[]),n.packet.push($root.com.auryc.ubi.core.model.Message.MessagePacket.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},Eha.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},Eha.verify=function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return"object expected";if(null!=e.cid&&e.hasOwnProperty("cid")&&!$util.isString(e.cid))return"cid: string expected";if(null!=e.uid&&e.hasOwnProperty("uid")&&!$util.isString(e.uid))return"uid: string expected";if(null!=e.sid&&e.hasOwnProperty("sid")&&!$util.isString(e.sid))return"sid: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!$util.isString(e.domain))return"domain: string expected";if(null!=e.context&&e.hasOwnProperty("context")){var t=$root.com.auryc.ubi.core.model.Message.MessageContext.verify(e.context);if(t)return"context."+t}if(null!=e.packet&&e.hasOwnProperty("packet")){if(!Array.isArray(e.packet))return"packet: array expected";for(var r=0;r<e.packet.length;++r){var n=$root.com.auryc.ubi.core.model.Message.MessagePacket.verify(e.packet[r]);if(n)return"packet."+n}}return null},Eha.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message)return e;var t=new $root.com.auryc.ubi.core.model.Message;if(null!=e.cid&&(t.cid=String(e.cid)),null!=e.uid&&(t.uid=String(e.uid)),null!=e.sid&&(t.sid=String(e.sid)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.context){if("object"!==_typeof(e.context))throw TypeError(".com.auryc.ubi.core.model.Message.context: object expected");t.context=$root.com.auryc.ubi.core.model.Message.MessageContext.fromObject(e.context)}if(e.packet){if(!Array.isArray(e.packet))throw TypeError(".com.auryc.ubi.core.model.Message.packet: array expected");t.packet=[];for(var r=0;r<e.packet.length;++r){if("object"!==_typeof(e.packet[r]))throw TypeError(".com.auryc.ubi.core.model.Message.packet: object expected");t.packet[r]=$root.com.auryc.ubi.core.model.Message.MessagePacket.fromObject(e.packet[r])}}return t},Eha.toObject=function(e,t){var r={};if(((t=t||{}).arrays||t.defaults)&&(r.packet=[]),t.defaults&&(r.cid="",r.uid="",r.sid="",r.domain="",r.context=null),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=e.cid),null!=e.uid&&e.hasOwnProperty("uid")&&(r.uid=e.uid),null!=e.sid&&e.hasOwnProperty("sid")&&(r.sid=e.sid),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.context&&e.hasOwnProperty("context")&&(r.context=$root.com.auryc.ubi.core.model.Message.MessageContext.toObject(e.context,t)),e.packet&&e.packet.length){r.packet=[];for(var n=0;n<e.packet.length;++n)r.packet[n]=$root.com.auryc.ubi.core.model.Message.MessagePacket.toObject(e.packet[n],t)}return r},Eha.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},Eha.MessageContext=(mia.prototype.ln="",mia.prototype.lv="",mia.prototype.ip="",mia.prototype.ref="",mia.prototype.ua="",mia.create=function(e){return new mia(e)},mia.encode=function(e,t){return t=t||$Writer.create(),null!=e.ln&&e.hasOwnProperty("ln")&&t.uint32(10).string(e.ln),null!=e.lv&&e.hasOwnProperty("lv")&&t.uint32(18).string(e.lv),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(26).string(e.ip),null!=e.ref&&e.hasOwnProperty("ref")&&t.uint32(34).string(e.ref),null!=e.ua&&e.hasOwnProperty("ua")&&t.uint32(42).string(e.ua),t},mia.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},mia.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message.MessageContext;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.ln=e.string();break;case 2:n.lv=e.string();break;case 3:n.ip=e.string();break;case 4:n.ref=e.string();break;case 5:n.ua=e.string();break;default:e.skipType(7&i)}}return n},mia.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},mia.verify=function(e){return"object"!==(void 0===e?"undefined":_typeof(e))||null===e?"object expected":null!=e.ln&&e.hasOwnProperty("ln")&&!$util.isString(e.ln)?"ln: string expected":null!=e.lv&&e.hasOwnProperty("lv")&&!$util.isString(e.lv)?"lv: string expected":null!=e.ip&&e.hasOwnProperty("ip")&&!$util.isString(e.ip)?"ip: string expected":null!=e.ref&&e.hasOwnProperty("ref")&&!$util.isString(e.ref)?"ref: string expected":null!=e.ua&&e.hasOwnProperty("ua")&&!$util.isString(e.ua)?"ua: string expected":null},mia.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message.MessageContext)return e;var t=new $root.com.auryc.ubi.core.model.Message.MessageContext;return null!=e.ln&&(t.ln=String(e.ln)),null!=e.lv&&(t.lv=String(e.lv)),null!=e.ip&&(t.ip=String(e.ip)),null!=e.ref&&(t.ref=String(e.ref)),null!=e.ua&&(t.ua=String(e.ua)),t},mia.toObject=function(e,t){var r={};return(t=t||{}).defaults&&(r.ln="",r.lv="",r.ip="",r.ref="",r.ua=""),null!=e.ln&&e.hasOwnProperty("ln")&&(r.ln=e.ln),null!=e.lv&&e.hasOwnProperty("lv")&&(r.lv=e.lv),null!=e.ip&&e.hasOwnProperty("ip")&&(r.ip=e.ip),null!=e.ref&&e.hasOwnProperty("ref")&&(r.ref=e.ref),null!=e.ua&&e.hasOwnProperty("ua")&&(r.ua=e.ua),r},mia.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},mia),Eha.MessagePacket=(Qia.prototype.vid="",Qia.prototype.ts=$util.Long?$util.Long.fromBits(0,0,!1):0,Qia.prototype.status=0,Qia.prototype.size=0,Qia.prototype.data=$util.newBuffer([]),Qia.prototype.payload=$util.emptyObject,Qia.create=function(e){return new Qia(e)},Qia.encode=function(e,t){if(t=t||$Writer.create(),null!=e.vid&&e.hasOwnProperty("vid")&&t.uint32(10).string(e.vid),null!=e.ts&&e.hasOwnProperty("ts")&&t.uint32(16).int64(e.ts),null!=e.status&&e.hasOwnProperty("status")&&t.uint32(24).int32(e.status),null!=e.size&&e.hasOwnProperty("size")&&t.uint32(32).int32(e.size),null!=e.data&&e.hasOwnProperty("data")&&t.uint32(42).bytes(e.data),null!=e.payload&&e.hasOwnProperty("payload"))for(var r=Object.keys(e.payload),n=0;n<r.length;++n)t.uint32(50).fork().uint32(10).string(r[n]).uint32(18).bytes(e.payload[r[n]]).ldelim();return t},Qia.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Qia.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n=void 0===t?e.len:e.pos+t,i=new $root.com.auryc.ubi.core.model.Message.MessagePacket;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.vid=e.string();break;case 2:i.ts=e.int64();break;case 3:i.status=e.int32();break;case 4:i.size=e.int32();break;case 5:i.data=e.bytes();break;case 6:e.skip().pos++,i.payload===$util.emptyObject&&(i.payload={}),r=e.string(),e.pos++,i.payload[r]=e.bytes();break;default:e.skipType(7&a)}}return i},Qia.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},Qia.verify=function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return"object expected";if(null!=e.vid&&e.hasOwnProperty("vid")&&!$util.isString(e.vid))return"vid: string expected";if(null!=e.ts&&e.hasOwnProperty("ts")&&!($util.isInteger(e.ts)||e.ts&&$util.isInteger(e.ts.low)&&$util.isInteger(e.ts.high)))return"ts: integer|Long expected";if(null!=e.status&&e.hasOwnProperty("status")&&!$util.isInteger(e.status))return"status: integer expected";if(null!=e.size&&e.hasOwnProperty("size")&&!$util.isInteger(e.size))return"size: integer expected";if(null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||$util.isString(e.data)))return"data: buffer expected";if(null!=e.payload&&e.hasOwnProperty("payload")){if(!$util.isObject(e.payload))return"payload: object expected";for(var t=Object.keys(e.payload),r=0;r<t.length;++r)if(!(e.payload[t[r]]&&"number"==typeof e.payload[t[r]].length||$util.isString(e.payload[t[r]])))return"payload: buffer{k:string} expected"}return null},Qia.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message.MessagePacket)return e;var t=new $root.com.auryc.ubi.core.model.Message.MessagePacket;if(null!=e.vid&&(t.vid=String(e.vid)),null!=e.ts&&($util.Long?(t.ts=$util.Long.fromValue(e.ts)).unsigned=!1:"string"==typeof e.ts?t.ts=parseInt(e.ts,10):"number"==typeof e.ts?t.ts=e.ts:"object"===_typeof(e.ts)&&(t.ts=new $util.LongBits(e.ts.low>>>0,e.ts.high>>>0).toNumber())),null!=e.status&&(t.status=0|e.status),null!=e.size&&(t.size=0|e.size),null!=e.data&&("string"==typeof e.data?$util.base64.decode(e.data,t.data=$util.newBuffer($util.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),e.payload){if("object"!==_typeof(e.payload))throw TypeError(".com.auryc.ubi.core.model.Message.MessagePacket.payload: object expected");t.payload={};for(var r=Object.keys(e.payload),n=0;n<r.length;++n)"string"==typeof e.payload[r[n]]?$util.base64.decode(e.payload[r[n]],t.payload[r[n]]=$util.newBuffer($util.base64.length(e.payload[r[n]])),0):e.payload[r[n]].length&&(t.payload[r[n]]=e.payload[r[n]])}return t},Qia.toObject=function(e,t){var r,n={};((t=t||{}).objects||t.defaults)&&(n.payload={}),t.defaults&&(n.vid="",$util.Long?(r=new $util.Long(0,0,!1),n.ts=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.ts=t.longs===String?"0":0,n.status=0,n.size=0,n.data=t.bytes===String?"":[]),null!=e.vid&&e.hasOwnProperty("vid")&&(n.vid=e.vid),null!=e.ts&&e.hasOwnProperty("ts")&&("number"==typeof e.ts?n.ts=t.longs===String?String(e.ts):e.ts:n.ts=t.longs===String?$util.Long.prototype.toString.call(e.ts):t.longs===Number?new $util.LongBits(e.ts.low>>>0,e.ts.high>>>0).toNumber():e.ts),null!=e.status&&e.hasOwnProperty("status")&&(n.status=e.status),null!=e.size&&e.hasOwnProperty("size")&&(n.size=e.size),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?$util.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data);var i=void 0;if(e.payload&&(i=Object.keys(e.payload)).length){n.payload={};for(var a=0;a<i.length;++a)n.payload[i[a]]=t.bytes===String?$util.base64.encode(e.payload[i[a]],0,e.payload[i[a]].length):t.bytes===Array?Array.prototype.slice.call(e.payload[i[a]]):e.payload[i[a]]}return n},Qia.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},Qia),Eha),Dha),Cha),Bha),Aha),zha),Dha,Cha,Bha,Aha,zha;function Eha(e){if(this.packet=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function mia(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Qia(e){if(this.payload={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}for(var byteLength_1=byteLength,toByteArray_1=toByteArray,fromByteArray_1=fromByteArray,lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){for(var t,r=getLens(e),n=r[0],i=r[1],a=new Arr(_byteLength(e,n,i)),o=0,s=0<i?n-4:n,c=0;c<s;c+=4)t=revLookup[e.charCodeAt(c)]<<18|revLookup[e.charCodeAt(c+1)]<<12|revLookup[e.charCodeAt(c+2)]<<6|revLookup[e.charCodeAt(c+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;return 2===i&&(t=revLookup[e.charCodeAt(c)]<<2|revLookup[e.charCodeAt(c+1)]>>4,a[o++]=255&t),1===i&&(t=revLookup[e.charCodeAt(c)]<<10|revLookup[e.charCodeAt(c+1)]<<4|revLookup[e.charCodeAt(c+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(tripletToBase64(n));return i.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,i=[],a=0,o=r-n;a<o;a+=16383)i.push(encodeChunk(e,a,o<a+16383?o:a+16383));return 1==n?(t=e[r-1],i.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),i.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var base64Js={byteLength:byteLength_1,toByteArray:toByteArray_1,fromByteArray:fromByteArray_1},read=function(e,t,r,n,i){var a,o,s=8*i-n-1,c=(1<<s)-1,l=c>>1,g=-7,u=r?i-1:0,d=r?-1:1,h=e[t+u];for(u+=d,a=h&(1<<-g)-1,h>>=-g,g+=s;0<g;a=256*a+e[t+u],u+=d,g-=8);for(o=a&(1<<-g)-1,a>>=-g,g+=n;0<g;o=256*o+e[t+u],u+=d,g-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=l}return(h?-1:1)*o*Math.pow(2,a-n)},write=function(e,t,r,n,i,a){var o,s,c,l=8*a-i-1,g=(1<<l)-1,u=g>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=g):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),2<=(t+=1<=o+u?d/c:d*Math.pow(2,1-u))*c&&(o++,c/=2),g<=o+u?(s=0,o=g):1<=o+u?(s=(t*c-1)*Math.pow(2,i),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));8<=i;e[r+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;e[r+h]=255&o,h+=p,o/=256,l-=8);e[r+h-p]|=128*f},ieee754={read:read,write:write},buffer=createCommonjsModule(function(e,r){var t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},r.INSPECT_MAX_BYTES=50;var n=2147483647;function o(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"!=typeof e)return i(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function i(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|d(e,t),n=o(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(x(e,Uint8Array)){var t=new Uint8Array(e);return l(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(x(e,ArrayBuffer)||e&&x(e.buffer,ArrayBuffer))return l(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(x(e,SharedArrayBuffer)||e&&x(e.buffer,SharedArrayBuffer)))return l(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t=0|g(e.length),r=o(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(void 0!==e.length)return"number"!=typeof e.length||R(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return s(e),o(e<0?0:0|g(e))}function c(e){for(var t=e.length<0?0:0|g(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return Object.setPrototypeOf(n,u.prototype),n}function g(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||x(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return _(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(e).length;default:if(i)return n?-1:_(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,r){var n,i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||n<r)&&(r=n);for(var i="",a=t;a<r;++a)i+=N[e[a]];return i}(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return n=this,a=r,0===(i=t)&&a===n.length?base64Js.fromByteArray(n):base64Js.fromByteArray(n.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function f(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),R(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,i){var a=1,o=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i)for(var l=-1,g=r;g<o;g++)if(c(e,g)===c(t,-1===l?0:g-l)){if(-1===l&&(l=g),g-l+1===s)return l*a}else-1!==l&&(g-=g-l),l=-1;else for(o<r+s&&(r=o-s),g=r;0<=g;g--){for(var u=!0,d=0;d<s;d++)if(c(e,g+d)!==c(t,d)){u=!1;break}if(u)return g}return-1}function m(e,t,r,n){return E(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return E(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,c,l=e[i],g=null,u=239<l?4:223<l?3:191<l?2:1;if(i+u<=r)switch(u){case 1:l<128&&(g=l);break;case 2:128==(192&(a=e[i+1]))&&127<(c=(31&l)<<6|63&a)&&(g=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(c=(15&l)<<12|(63&a)<<6|63&o)&&(c<55296||57343<c)&&(g=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&c<1114112&&(g=c)}null===g?(g=65533,u=1):65535<g&&(g-=65536,n.push(g>>>10&1023|55296),g=56320|1023&g),n.push(g),i+=u}return function(e){var t=e.length;if(t<=y)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=y));return r}(n)}r.kMaxLength=n,(u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=i,Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return i=t,a=r,s(n=e),n<=0||void 0===i?o(n):"string"==typeof a?o(n).fill(i,a):o(n).fill(i);var n,i,a},u.allocUnsafe=a,u.allocUnsafeSlow=a,u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(x(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),x(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=u.allocUnsafe(t),n=0,i=0;i<e.length;++i){var a=e[i];if(x(a,Uint8Array))n+a.length>r.length?u.from(a).copy(r,n):Uint8Array.prototype.set.call(r,a,n);else{if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n)}n+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):h.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t&&(u.prototype[t]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(x(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(n,i),l=e.slice(t,r),g=0;g<s;++g)if(c[g]!==l[g]){a=c[g],o=l[g];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return f(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return f(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var a,o,s,c,l,g,u=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;(!n||i<(n=Number(n)))&&(n=i);var a=t.length;a/2<n&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(R(s))return o;e[r+o]=s}return o}(this,e,t,r);case"utf8":case"utf-8":return l=t,g=r,E(_(e,(c=this).length-l),c,l,g);case"ascii":case"latin1":case"binary":return m(this,e,t,r);case"base64":return a=this,o=t,s=r,E(P(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function A(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function w(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function S(e,t,r,n,i){return t=+t,r>>>=0,i||w(e,0,r,4),ieee754.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t=+t,r>>>=0,i||w(e,0,r,8),ieee754.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=t,i=1,a=this[e+--n];0<n&&(i*=256);)a+=this[e+--n]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),ieee754.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),ieee754.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),ieee754.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),ieee754.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){var i;e=+e,t>>>=0,n||v(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){var i;e=+e,t>>>=0,n||v(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var a=r-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return S(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return S(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t=t||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===n&&i<128||"latin1"===n)&&(e=i))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else{var o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var T=/[^+/0-9A-Za-z-_]/g;function _(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,r<128){if(--t<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function P(e){return base64Js.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function E(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function x(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function R(e){return e!=e}var N=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()}),buffer_1=buffer.Buffer,buffer_2=buffer.SlowBuffer,buffer_3=buffer.INSPECT_MAX_BYTES,buffer_4=buffer.kMaxLength,CryptoJS=CryptoJS||function(g){var e={},t=e.lib={},r=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}};function n(){}var u=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<i;a++){var o=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=g.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(){}}),i=e.enc={},a=i.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new u.init(r,t/2)}},o=i.Latin1={stringify:function(){},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new u.init(r,t)}},s=i.Utf8={stringify:function(){},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,n=t.sigBytes,i=this.blockSize,a=n/(4*i),o=(a=e?g.ceil(a):g.max((0|a)-this._minBufferSize,0))*i,s=g.min(4*o,n);if(o){for(var c=0;c<o;c+=i)this._doProcessBlock(r,c);var l=r.splice(0,o);t.sigBytes-=s}return new u.init(l,s)},_minBufferSize:0});t.Hasher=c.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(){},_createHmacHelper:function(){}}),e.algo={};return e}(Math),iwa,lwa,jwa,lxa,pxa,mxa,rxa;!function(){var e=CryptoJS,t=e.lib,r=t.Base;t.WordArray;(e=e.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=r.extend({})}(),CryptoJS.lib.Cipher||function(){var e=(s=CryptoJS).lib,t=e.Base,r=(e.WordArray,e.BufferedBlockAlgorithm),n=(s.enc.Base64,s.algo.EvpKDF,e.Cipher=r.extend({cfg:t.extend(),keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2}));e.StreamCipher=n.extend({blockSize:1});var i=s.mode={},a=(e.BlockCipherMode=t.extend({})).extend();a.Encryptor=a.extend({}),a.Decryptor=a.extend({}),i=i.CBC=a,a=(s.pad={}).Pkcs7={},e.BlockCipher=n.extend({cfg:n.cfg.extend({mode:i,padding:a}),blockSize:4});e.CipherParams=t.extend({});var i=(s.format={}).OpenSSL={},o=e.SerializableCipher=t.extend({cfg:t.extend({format:i})}),s=(s.kdf={}).OpenSSL={};e.PasswordBasedCipher=o.extend({cfg:o.cfg.extend({kdf:s})})}(),function(){CryptoJS.lib.WordArray;CryptoJS.enc.Base64={_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),iwa=CryptoJS,(jwa=iwa.lib).WordArray,lwa=jwa.Hasher,jwa=iwa.algo.SHA1=lwa.extend({}),iwa.SHA1=lwa._createHelper(jwa),iwa.HmacSHA1=lwa._createHmacHelper(jwa),function(i){function e(e){return 4294967296*(e-(0|e))|0}for(var t,r=CryptoJS,n=(o=r.lib).WordArray,a=o.Hasher,o=r.algo,s=[],p=[],c=2,l=0;l<64;){e:{t=c;for(var g=i.sqrt(t),u=2;u<=g;u++)if(!(t%u)){t=!1;break e}t=!0}t&&(l<8&&(s[l]=e(i.pow(c,.5))),p[l]=e(i.pow(c,1/3)),l++),c++}var f=[],o=o.SHA256=a.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r,n,i=this._hash.words,a=i[0],o=i[1],s=i[2],c=i[3],l=i[4],g=i[5],u=i[6],d=i[7],h=0;h<64;h++){h<16?f[h]=0|e[t+h]:(r=f[h-15],n=f[h-2],f[h]=((r<<25|r>>>7)^(r<<14|r>>>18)^r>>>3)+f[h-7]+((n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10)+f[h-16]),r=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&g^~l&u)+p[h]+f[h],n=((a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22))+(a&o^a&s^o&s),d=u,u=g,g=l,l=c+r|0,c=s,s=o,o=a,a=r+n|0}i[0]=i[0]+a|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+c|0,i[4]=i[4]+l|0,i[5]=i[5]+g|0,i[6]=i[6]+u|0,i[7]=i[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=i.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}});r.SHA256=a._createHelper(o),r.HmacSHA256=a._createHmacHelper(o)}(Math),function(){function e(){return n.create.apply(n,arguments)}for(var t=CryptoJS,r=t.lib.Hasher,n=(i=t.x64).Word,i=(i.WordArray,t.algo),a=(e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591),[]),o=0;o<80;o++)a[o]=e();i=i.SHA512=r.extend({_doReset:function(){},_doProcessBlock:function(){},_doFinalize:function(){},clone:function(){},blockSize:32}),t.SHA512=r._createHelper(i),t.HmacSHA512=r._createHmacHelper(i)}(),lxa=CryptoJS,(mxa=lxa.x64).Word,mxa.WordArray,pxa=(mxa=lxa.algo).SHA512,mxa=mxa.SHA384=pxa.extend({}),lxa.SHA384=pxa._createHelper(mxa),lxa.HmacSHA384=pxa._createHmacHelper(mxa),rxa=CryptoJS.enc.Utf8,CryptoJS.algo.HMAC=CryptoJS.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=rxa.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),o=i.words,s=a.words,c=0;c<r;c++)o[c]^=1549556828,s[c]^=909522486;i.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}});var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad$1="=",dbits;function hex2b64(e){for(var t,r="",n=0;n+3<=e.length;n+=3)t=parseInt(e.substring(n,n+3),16),r+=b64map.charAt(t>>6)+b64map.charAt(63&t);if(n+1==e.length?(t=parseInt(e.substring(n,n+1),16),r+=b64map.charAt(t<<2)):n+2==e.length&&(t=parseInt(e.substring(n,n+2),16),r+=b64map.charAt(t>>2)+b64map.charAt((3&t)<<4)),b64pad$1)for(;0<(3&r.length);)r+=b64pad$1;return r}function BigInteger(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;for(var BI_RC=new Array,rr,vv,rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}BigInteger.prototype.fromInt=bnpFromInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);var rng_psize=256,rng_pool,rng_pptr;function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_psize<=rng_pptr&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t,rng_pool=new Array,rng_pptr=0;if(void 0!==window&&(void 0!==window.crypto||void 0!==window.msCrypto)){var crypto=window.crypto||window.msCrypto;if(crypto.getRandomValues){var ua=new Uint8Array(32);for(crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5")for(var z=window.crypto.random(32),t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function SecureRandom(){}var jsonParse=(Xxa=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),Yxa=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),Zxa=new String(""),function(e,t){var r,n=e.match(Xxa),i=n[0],a=!1;"{"===i?s={}:"["===i?s=[]:(s=[],a=!0);for(var o,s,c=[s],l=1-a,g=n.length;l<g;++l)switch((i=n[l]).charCodeAt(0)){default:(o=c[0])[r||o.length]=+i,r=void 0;break;case 34:if(-1!==(i=i.substring(1,i.length-1)).indexOf("\\")&&(i=i.replace(Yxa,h)),o=c[0],!r){if(!(o instanceof Array)){r=i||Zxa;break}r=o.length}o[r]=i,r=void 0;break;case 91:o=c[0],c.unshift(o[r||o.length]=[]),r=void 0;break;case 93:c.shift();break;case 102:(o=c[0])[r||o.length]=!1,r=void 0;break;case 110:(o=c[0])[r||o.length]=null,r=void 0;break;case 116:(o=c[0])[r||o.length]=!0,r=void 0;break;case 123:o=c[0],c.unshift(o[r||o.length]={}),r=void 0;break;case 125:c.shift()}if(a){if(1!==c.length)throw new Error;s=s[0]}else if(c.length)throw new Error;return t&&(s=void 0),s}),Xxa,Yxa,Zxa,KJUR,utf8tob64u;function stoBA(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function BAtohex(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function stohex(e){return BAtohex(stoBA(e))}function b64tob64u(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function hextob64u(e){return e.length%2==1&&(e="0"+e),b64tob64u(hex2b64(e))}function rstrtohex(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function uricmptohex(e){return e.replace(/%/g,"")}function encodeURIComponentAll(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+stohex(t[n]);return r}void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.lang&&KJUR.lang||(KJUR.lang={}),KJUR.lang.String=function(){},utf8tob64u="function"==typeof Buffer?function(e){return b64tob64u(Buffer.from(e,"utf8").toString("base64"))}:function(e){return hextob64u(uricmptohex(encodeURIComponentAll(e)))},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER=JSON.parse('{"md5":"cryptojs","sha1":"cryptojs","sha224":"cryptojs","sha256":"cryptojs","sha384":"cryptojs","sha512":"cryptojs","ripemd160":"cryptojs","hmacmd5":"cryptojs","hmacsha1":"cryptojs","hmacsha224":"cryptojs","hmacsha256":"cryptojs","hmacsha384":"cryptojs","hmacsha512":"cryptojs","hmacripemd160":"cryptojs","MD5withRSA":"cryptojs/jsrsa","SHA1withRSA":"cryptojs/jsrsa","SHA224withRSA":"cryptojs/jsrsa","SHA256withRSA":"cryptojs/jsrsa","SHA384withRSA":"cryptojs/jsrsa","SHA512withRSA":"cryptojs/jsrsa","RIPEMD160withRSA":"cryptojs/jsrsa","MD5withECDSA":"cryptojs/jsrsa","SHA1withECDSA":"cryptojs/jsrsa","SHA224withECDSA":"cryptojs/jsrsa","SHA256withECDSA":"cryptojs/jsrsa","SHA384withECDSA":"cryptojs/jsrsa","SHA512withECDSA":"cryptojs/jsrsa","RIPEMD160withECDSA":"cryptojs/jsrsa","SHA1withDSA":"cryptojs/jsrsa","SHA224withDSA":"cryptojs/jsrsa","SHA256withDSA":"cryptojs/jsrsa","MD5withRSAandMGF1":"cryptojs/jsrsa","SHA1withRSAandMGF1":"cryptojs/jsrsa","SHA224withRSAandMGF1":"cryptojs/jsrsa","SHA256withRSAandMGF1":"cryptojs/jsrsa","SHA384withRSAandMGF1":"cryptojs/jsrsa","SHA512withRSAandMGF1":"cryptojs/jsrsa","RIPEMD160withRSAandMGF1":"cryptojs/jsrsa"}'),this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){},this.getPaddedDigestInfoHex=function(e,t,r){},this.hashString=function(e,t){},this.hashHex=function(e,t){return new KJUR.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){},this.sha256=function(e){},this.sha256Hex=function(e){},this.sha512=function(e){},this.sha512Hex=function(e){},this.isKey=function(e){}},KJUR.crypto.Util.SECURERANDOMGEN=new SecureRandom,KJUR.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbytes(e),16)},KJUR.crypto.MessageDigest=function(e){},KJUR.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},KJUR.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=KJUR.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=CryptoJS.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){},this.doFinal=function(){return this.mac.finalize().toString(CryptoJS.enc.Hex)},this.doFinalString=function(e){},this.doFinalHex=function(e){}}},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=rstrtohex(e)),void(this.pass=CryptoJS.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":_typeof(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;t=null;if(void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=utf8tohex(e.utf8)),void 0!==e.rstr&&(t=rstrtohex(e.rstr)),void 0!==e.b64&&(t=b64tohex(e.b64)),void 0!==e.b64u&&(t=b64utohex(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=CryptoJS.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(e){},KJUR.crypto.Cipher=function(e){},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWS=function(){},KJUR.jws.JWS.sign=function(e,t,r,n,i){var a,o,s,c=KJUR.jws.JWS,l=c.readSafeJSONString,g=c.isSafeJSONString,u=KJUR.crypto,d=(u.ECDSA,u.Mac),h=u.Signature,p=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":_typeof(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":_typeof(t))&&(o=t,a=p.stringify(o)),"string"==typeof t){if(!g(a=t))throw"JWS Head is not safe JSON string: "+a;o=l(a)}if("object"==(void 0===(s=r)?"undefined":_typeof(r))&&(s=p.stringify(r)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,a=p.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var f=null;if(void 0===c.jwsalg2sigalg[e])throw"unsupported alg name: "+e;f=c.jwsalg2sigalg[e];var I,m,b=utf8tob64u(a)+"."+utf8tob64u(s),C="";if("Hmac"==f.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var y=new d({alg:f,prov:"cryptojs",pass:n});y.updateString(b),C=y.doFinal()}else{-1!=f.indexOf("withECDSA")?((m=new h({alg:f})).init(n,i),m.updateString(b),I=m.sign(),C=KJUR.crypto.ECDSA.asn1SigToConcatSig(I)):"none"!=f&&((m=new h({alg:f})).init(n,i),m.updateString(b),C=m.sign())}return b+"."+hextob64u(C)},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(e,t,r){var n;try{return"object"!=(void 0===(n=jsonParse(e))?"undefined":_typeof(n))?0:n.constructor===Array?0:(t&&(t[r]=n),1)}catch(e){return 0}},KJUR.jws.JWS.readSafeJSONString=function(e){var t;try{return"object"!=(void 0===(t=jsonParse(e))?"undefined":_typeof(t))||t.constructor===Array?null:t}catch(e){return null}};var jsrsasign=KJUR;function createWorkerFallback(t){var r,e=null;try{try{r=new Blob(["importScripts('"+t+"');"],{type:"application/javascript"})}catch(e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);n.append("importScripts('"+t+"');"),r=n.getBlob("application/javascript")}var i=(window.URL||window.webkitURL).createObjectURL(r),e=new Worker(i)}catch(e){console.log("")}return e}function createWorker(e){return createWorkerFallback(e)}var EventWriter=(createClass(gAa,[{key:"isInitialized",value:function(){return this.initialized}},{key:"setupWebWorker",value:function(){window.Worker&&this.webworkerEnabled&&(this.worker=createWorker(config.getWorkerJS()))}},{key:"useWebWorker",value:function(){return window.Worker&&this.webworkerEnabled&&!!this.worker}},{key:"initParams",value:function(){this.transmitInterval=1e3*(config.getConfig("transmitInterval","behavior")||constants.record.upload.defaultTransmitInterval),this.mobileTransmitInterval=1e3*(config.getConfig("mobileTransmitInterval","behavior")||constants.record.upload.defaultMobileMaxTransmitInterval),this.maxTransmitInterval=1e3*(config.getConfig("maxTransmitInterval","behavior")||constants.record.upload.defaultMaxTransmitInterval),this.mobileMaxTransmitInterval=1e3*(config.getConfig("mobileMaxTransmitInterval","behavior")||constants.record.upload.defaultMobileMaxTransmitInterval)}},{key:"syncToServerAndPersist",value:function(e){if(this.ready&&!globalSessionTracker.isCanceled()&&this.initialized){if(this.transformDataForUpload(),this.useWebWorker()){var t="";for(var r in this.eventCache)t+=this.eventCache[r]+constants.symbols.SPLITFLAG;this.dataLayer.setStrAndCommit(t)}else this.dataLayer.setStrAndCommit(this.serialized);this.upload(e)}}},{key:"logVisibilityChange",value:function(){var e=globalSessionTracker.getSessionMetadata();e.isOver||e.sessionId&&this.append(EventType.ViewChangeT(),{k:"vc",v:{sid:e.viewId,status:0,url:obfuscateUrl(location.href),title:this.title}})}},{key:"setReady",value:function(){this.initialized&&(this.ready=!0,this.stg.setByKey(constants.events.READY,!0))}},{key:"setNotReady",value:function(){this.ready=!1,this.stg.setByKey(constants.events.READY,!1)}},{key:"stopUploading",value:function(){this.setNotReady(),this.initAndClearInterval()}},{key:"initAndClearInterval",value:function(){this.initEventQueue(),this.readyFlagTracker&&(clearInterval(this.readyFlagTracker),delete this.readyFlagTracker)}},{key:"pause",value:function(){var e=this;return globalSessionTracker.isCanceled()||(globalSessionTracker.getSessionMetadata().isOver||(this.sendRecordingStatusEvent("Recording Paused"),this.serializeAndUpload(!0)),setTimeout(function(){e.initAndClearInterval(),e.cancelStorageCheck(),globalSessionTracker.setCancel(!0),e.worker&&e.worker.postMessage(e.createWorkerData("cmd",{command:"pause"}))},500)),!0}},{key:"resume",value:function(){var e=!1;return globalSessionTracker.getSessionMetadata().isOver&&(globalSessionTracker.renewSession(),e=!0),globalSessionTracker.getSessionMetadata(),!!globalSessionTracker.isCanceled()&&(globalSessionTracker.setCancel(!1),this.startCheckingStorage(),this.startCheckingState(),e||globalSessionTracker.initSessionOrPV(),this.sendRecordingStatusEvent("Recording Resumed"),this.worker&&this.worker.postMessage(this.createWorkerData("cmd",{command:"resume"})),!0)}},{key:"sendRecordingStatusEvent",value:function(e){this.append(EventType.CustomEventT(),{k:e,v:JSON.stringify({et:e,url:obfuscateUrl(location.href),title:this.title})})}},{key:"updateToCoBrowsing",value:function(){this.cobrowsing||(this.upgradedToCoBrowsing=!0)}},{key:"isUpgradedToCoBrowsing",value:function(){return this.upgradedToCoBrowsing}},{key:"initState",value:function(e){var i=this,t=e.getByKey(constants.events.READY);this.ready=!_.isDefined(t)||t,t!==this.ready&&this.stg.setByKey(constants.events.READY,this.ready),this.numUploadErrors=0,this.uploadWaiting=!1,this.isUploader=!1,this.prevUploadTS=_.now()-constants.record.upload.initTimeOffset,this.lastPingTime=_.now()-constants.record.upload.initTimeOffset,this.cobrowsing=config.isCoBrowsingEnabled()?1:0,this.upgradedToCoBrowsing=!1,this.title=getDocumentTitle(document)||_.isObject(history.state)&&history.state&&history.state.title,this.title||(this.title="Untitled Page"),this.eventid=0,this.dataLayer=StorageManager.getInstance(this.storKey),this.serialized="",this.dataLayer&&this.dataLayer.getStr().split(constants.symbols.SPLITFLAG).forEach(function(e,t){var r,n;0<t?(r=i.serialized.lastIndexOf("}"),n=e.indexOf("{"),i.serialized=i.serialized.substring(0,r+1)+","+e.substring(n)):i.serialized+=e}),this.instance=null,this.lastEvtTime=null,this.lastTrackingSessionTime=0,this.resetDomPathCache(),this.initEventQueue(),this.startCheckingState(),this.startCheckingStorage()}},{key:"serializeAndUpload",value:function(e){this.ready&&!globalSessionTracker.isCanceled()&&config.isUserSampled()&&(e||this.isFull())&&(this.transformDataForUpload(),this.upload(e))}},{key:"readyForUpload",value:function(){return config.isVisualEditorMode()?(this.resetSerialized(),!1):!(globalSessionTracker.isSessionOver()||!this.ready||0===this.serialized.length||globalSessionTracker.isCanceled())}},{key:"upload",value:function(e){if(this.readyForUpload()){var t=_.timestamp();if(this.isUploading){var r=e?constants.record.upload.shortWait:constants.record.upload.wait;if(t-this.prevUploadTS<=r)return void(this.uploadWaiting=!0)}this.prevUploadTS=t,config.getSiteToken()?this.sendWithProtobuf(this.serialized,t):logger.warn("Can not found accessToken")}}},{key:"ping",value:function(){var e;globalSessionTracker.isSessionOver()||!this.ready||globalSessionTracker.isCanceled()||(e=_.now())-this.prevUploadTS<constants.record.upload.pingWaitInterval||e-this.lastPingTime<constants.record.upload.pingWaitInterval||this.append(EventType.HeartbeatT(),{},0)}},{key:"initEventQueue",value:function(){this.queue={},this.newEventsByteLength=0,this.queue.log=[],this.queue.start=_.timestamp(),this.queue.guid=idGen$1.generateGUID()}},{key:"isQueueEmpty",value:function(){return 0===this.queue.log.size}},{key:"addDeviceInfoEvent",value:function(e){var t=browser$1.getScreenResolution(),r={et:EventType.DeviceInfoT(),dt:"",df:"",dm:"",on:"",ov:"",sw:t.w,sh:t.h,longitude:0,latitude:0};this.uach&&(r.uach=parseUACH(this.uach));var n=config.getCurrentIdentity();n&&0<n.length&&(r.identity=n);var i={id:this.eventid,x:-1,p:globalSessionTracker.getPV(),d:r,t:_.now()};return this.eventid=this.eventid+1,e.push(i),e}},{key:"getEventCacheLimit",value:function(){return this.eventCacheLengthLimit}},{key:"transformDataForUpload",value:function(){var e,t,r;this.isQueueEmpty()||(e=JSON.stringify(this.queue.log),-1===this.serialized.indexOf("{")?this.serialized=e:(t=this.serialized.lastIndexOf("}"),r=e.indexOf("{"),this.serialized=this.serialized.substring(0,t+1)+","+e.substring(r)),0<this.serialized.indexOf("{")&&this.useWebWorker()&&(this.eventCacheLength+this.serialized.length>this.getEventCacheLimit()?logger.log("Exceeding the event cache limit. Skip"):(this.requestId++,this.eventCacheLength+=this.serialized.length,this.eventCache[this.requestId]=this.serialized)),this.initEventQueue())}},{key:"append",value:function(e,t,r,n){var i,a,o,s,c,l,g,u,d,h,p=3<arguments.length&&void 0!==n?n:0;this.ready&&!globalSessionTracker.isCanceled()&&this.initialized&&config.isUserSampled()&&((i=globalSessionTracker.getSessionMetadata()).isOver||(a="number"==typeof r?r:r?this.updateNodeDict(r.getProcXPath()):0,s=o=_.timestamp(),t.basicProps&&t.basicProps.currentTime?(o=t.basicProps.currentTime,delete t.basicProps):t._to?(o=t._to,delete t._to):o-=p,c=t.pvid||globalSessionTracker.getPV(),delete t.pvid,(t=config.compress(t)).et=e,l=i.sessionId,g=i.viewId,u={id:this.eventid,x:a,p:c,d:t,t:o,ct:s,_v:g,_s:l},e!==EventType.ConsoleT()&&e!==EventType.NetworkT()||(u.d.pv=c,u.d.p.vid=g),config.isEnrichedHTML()&&e===EventType.HTMLTextT()&&(d=browser$1.getScreenResolution(),h=(new Date).getTimezoneOffset(),u.d.id=o+","+h+","+d.w+","+d.h),e===EventType.KeyStrokeDownT()&&(u.d.trusted=u.d.u,delete u.d.u),this.eventid=this.eventid+1,this.queue.log.push(u),this.newEventsByteLength+=JSON.stringify(u).length,this.isCriticalEvents(e,t)&&this.serializeAndUpload(!0)))}},{key:"isCriticalEvents",value:function(e,t){return e===EventType.TapT()||e===EventType.PressT()||e===EventType.MouseClickT()||this.isCriticalECommEvents(e,t)}},{key:"isCriticalECommEvents",value:function(e,t){return e===EventType.CustomEventT()&&t&&"confirmation"===t.k}},{key:"isUserInitiatedEvents",value:function(e){return e===EventType.PVT()||e===EventType.HTMLTextT()||e===EventType.SclWindowT()||e===EventType.MouseLeaveEntryT()||e===EventType.KeyStrokeDownT()||e===EventType.InputValChangedT()||e===EventType.MouseClickT()||e===EventType.SclInNodeT()||e===EventType.SwipeT()||e===EventType.PinchT()||e===EventType.TapT()||e===EventType.PressT()||e===EventType.MouseClickT()}},{key:"updateNodeDict",value:function(e,t){if(this.ready&&!globalSessionTracker.isCanceled()&&this.initialized){var r,n,i=e.join(",");return _.isDefined(this.domPathCache[i])||(this.domPathList[this.domPathList.length]=i,r=this.domPathList.length-1,urls.isCrossDomainIframe()&&(r=1e5*(globalSessionTracker.frameIdx?globalSessionTracker.frameIdx:1)+r),this.domPathCache[i]=r,(n=t)?this.append(EventType.NodeDictionaryT(),{x:r+"",v:i},n):this.append(EventType.NodeDictionaryT(),{x:r+"",v:i})),this.domPathCache[i]}}},{key:"resetDomPathCache",value:function(){this.domPathCache={},this.domPathList=[]}},{key:"resetState",value:function(){this.eventid=0}},{key:"isFull",value:function(){return constants.storage.DEFAULT_LIMIT<=this.newEventsByteLength+this.serialized.length}},{key:"loadReadyFlagFromStg",value:function(){var e=this.stg.getByKey(constants.events.READY);this.ready=!_.isDefined(e)||e,this.ready||this.stopUploading()}},{key:"startCheckingState",value:function(){var e=this;this.readyFlagTracker||(this.loadReadyFlagFromStg(),this.readyFlagTracker=setInterval(function(){return e.loadReadyFlagFromStg()},5e3))}},{key:"startCheckingStorage",value:function(){var e=this;this.storageChecker||(this.storageChecker=setInterval(function(){return e.serializeAndUpload()},this.browser.isPhoneOrTablet()?this.mobileTransmitInterval:this.transmitInterval)),this.maxWaitMonitor||(this.maxWaitMonitor=setInterval(function(){return e.serializeAndUpload(!0)},this.browser.isPhoneOrTablet()?this.mobileMaxTransmitInterval:this.maxTransmitInterval))}},{key:"cancelStorageCheck",value:function(){this.storageChecker&&(clearInterval(this.storageChecker),delete this.storageChecker),this.maxWaitMonitor&&(clearInterval(this.maxWaitMonitor),delete this.maxWaitMonitor)}},{key:"useProxy",value:function(){return config.getUseProxy()}},{key:"getUploadUri",value:function(){var e=config.getTrackingUri();return e=this.useProxy()?config.getConfig("tracking_uri_proxy","base")+"/v1/event":config.isSelectiveRecording()?config.getConfig("tracking_uri_selective","base")+"/v1/event":"https://"+e+"/v1/event"}},{key:"uploadToServer",value:function(e,t,r,n,i){var a=this;try{var o=new window.XMLHttpRequest;for(var s in o.open(i,r,!0),o.onreadystatechange=function(){4===this.readyState&&(202===this.status&&"POST"===i?(a.serialized===t?a.serialized="":-1!==a.serialized.indexOf(t.substring(1,t.length))&&(a.serialized="["+a.serialized.substring(t.length)),a.isUploading=!1,a.uploadWaiting&&setTimeout(function(){a.serializeAndUpload(!0)},100)):202!==this.status&&"POST"===i&&(a.isUploading=!1,a.numUploadErrors++,a.numUploadErrors>constants.storage.RETRY_LIMIT?(a.stopUploading(),a.initEventQueue()):a.uploadWaiting&&setTimeout(function(){a.serializeAndUpload(!0)},100)))},n)"Content-length"!==n&&"Connection"!==n&&o.setRequestHeader(s,n[s]);"POST"===i?o.send(e):o.send()}catch(e){}}},{key:"convertToProtobuf",value:function(e,t,r,n){var i=n.sessionId,a=n.viewId,o=n.userId,s=config.getSiteid();if(s&&o&&i){var c=$root.com.auryc.ubi.core.model.Message,l=new buffer_1(e),g=new c.MessagePacket({vid:a,ts:r,status:t,size:l.length,data:l}),u=new c({cid:s,uid:o,sid:i,domain:document.domain.toString(),context:new c.MessageContext({ln:"Web",lv:"4.7.5",ref:document.referrer}),packet:[g]}),d=c.verify(u);if(d)throw Error(d);return c.encode(u).finish()}return null}},{key:"getUTCTime",value:function(){var e=new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Math.floor(t/1e3)}},{key:"getStatusInt",value:function(e,t){var r=0;return 1===e&&(r|=1),1===t&&(r|=2),this.isUpgradedToCoBrowsing()&&(r|=4),r}},{key:"getJWTToken",value:function(){var e={};e.iss=config.getSiteid(),e.iat=this.getUTCTime()-12e4;var t=config.getSiteToken(),r=JSON.stringify({alg:"HS256",typ:"JWT"}),n=JSON.stringify(e);return jsrsasign.jws.JWS.sign("HS256",r,n,{rstr:t})}},{key:"getJWTToken2",value:function(e){var t=this.getUTCTime(),r=void 0,r=e?Math.floor((e+constants.record.upload.maxRetryTime)/1e3):t+Math.floor(constants.record.upload.maxRetryTime/1e3);e=Math.floor(e/1e3)||this.getUTCTime();var n={};n.iss=config.getSiteid(),n.iat=t,n.exp=r;var i=config.getSiteToken(),a=JSON.stringify({alg:"HS256",typ:"JWT"}),o=JSON.stringify(n);return jsrsasign.jws.JWS.sign("HS256",a,o,{rstr:i})}},{key:"splitEvents",value:function(e){var t=[];if(1===e.length)return[e];var r,n,i=Math.floor(e.length/2),a=e.slice(0,i),o=e.slice(i);return JSON.stringify(a).length>constants.storage.MAX_PACKET_SIZE&&1<a.length?(r=this.splitEvents(a),t=t.concat(r)):t.push(a),JSON.stringify(o).length>constants.storage.MAX_PACKET_SIZE&&1<o.length?(n=this.splitEvents(o),t=t.concat(n)):t.push(o),t}},{key:"getLastUserEventTime",value:function(e){if(e&&0<e.length)for(var t=e.length-1;0<=t;t--)if(this.isUserInitiatedEvents(e[t].d.et))return e[t].t;return null}},{key:"isDelayedEvent",value:function(e){return e===EventType.PropChangeT()||e===EventType.MutNodeTextT()}},{key:"sendWithProtobuf",value:function(e,t){var l=this,g=globalSessionTracker.getSessionMetadata();if(!g.isOver){var r,n,i,a,o,s,c=[];try{c=JSON.parse(e)}catch(e){c=[]}c&&0!==c.length?(c=c.filter(function(e){return e&&e.t>=g.sessionTime&&e._v===g.viewId&&e._s===g.sessionId&&t-e.t<constants.record.upload.maxRetryTime}).sort(function(e,t){return e.t-t.t}).map(function(e){return delete e._v,delete e._s,e}))&&0!==c.length&&(r=this.getLastUserEventTime(c),this.lastEvtTime?c[c.length-1].t>=this.lastEvtTime?(c=c.filter(function(e){return l.isDelayedEvent(e.d.et)?e.ct>=l.lastEvtTime:e.t>=l.lastEvtTime}),this.lastEvtTime=r||this.lastEvtTime):c=[]:this.lastEvtTime=r,c&&0!==c.length&&(n=(c=this.addDeviceInfoEvent(c))[0].t,c.forEach(function(e){e.t=e.t-n,delete e.ct}),i=JSON.stringify(c),a=function(e,t,r,n){var i,a,o,s=l.getStatusInt(n,l.cobrowsing),c=l.convertToProtobuf(e,s,r,g);c&&(logger.log("SIZE: pb data length: "+c.length,!0),i=l.getJWTToken(r),a=l.getUploadUri(),o={"Content-Type":"application/x-protobuf;charset=utf-8",Authorization:i},l.useProxy()&&(o["Payload-Type"]=0),config.isSelectiveRecording()&&(o["X-Message-Type"]=1),l.uploadToServer(c,t,a,o,"POST",r))},config.getCompress()&&!this.isCompressBlackList()?this.useWebWorker()?(o=this.getStatusInt(1,this.cobrowsing),s=this.createWorkerData("data",{data:i,properties:_extends({},g,{startTime:n,siteId:config.getSiteid(),siteToken:this.getJWTToken(n),referrer:document.referrer,flag:o,uploadUrl:this.getUploadUri(),useProxy:this.useProxy(),requestId:this.requestId,domain:document.domain.toString(),selectiveRecording:config.isSelectiveRecording()})}),this.worker.postMessage(s),this.worker.onmessage=function(e){l.eventCache[e.data]&&(l.eventCacheLength-=l.eventCache[e.data].length,delete l.eventCache[e.data])},this.resetSerialized()):Zlib.splitAndProcess(i,e,constants.record.upload.fragLength,this.browser,n,a):a(i,e,n,0))):logger.log("Empty event list. Skip")}}},{key:"resetSerialized",value:function(){this.serialized=""}},{key:"createWorkerData",value:function(e,t){return _extends({type:e},t)}},{key:"isCompressBlackList",value:function(){var e=getInstance(),t=config.getPerfBlacklist(),r=t.urls||[],n=(t.browser_cutoff||{})[e.browser.name];if(n&&e.browser.version<n)for(var i=0;i<r.length;i++)if(-1!==window.location.href.indexOf(r[i]))return!0;return!1}}],[{key:"getInstance",value:function(e,t){return gAa.instance||(gAa.instance=new gAa(e,t)),gAa.instance}}]),gAa);function gAa(e,t){var r;classCallCheck(this,gAa),logger.log("event writer constructor"),e&&t?(this.storKey=t,this.stg=e,this.browser=getInstance(),this.initParams(),this.initState(e),this.worker=null,this.webworkerEnabled=!1!==config.getConfig("webworker","behavior"),this.setupWebWorker(),this.requestId=0,this.eventCache={},this.eventCacheLength=0,this.eventCacheLengthLimit=config.getConfig("eventCacheLength","record")||constants.storage.EVENT_CACHE_MAX_LENGTH,this.initialized=!0,navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(r=this,navigator.userAgentData.getHighEntropyValues(["fullVersionList","platformVersion","model"]).then(function(e){return r.uach=e}))):this.initialized=!1}var parseUACH=function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.model,n=t.fullVersionList,i=void 0===n?[]:n,a=t.platformVersion,o="",s=/Chromium/.test(navigator.userAgent)?"Chromium":"Chrome",c=!0,l=!1,g=void 0;try{for(var u,d=i[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value,p=h.brand;if(-1<(void 0===p?"":p).indexOf(s)){o=h.version;break}}}catch(e){l=!0,g=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw g}}return{ubv:o,upv:a,umo:r}};function normalize(e){var r=[];return e.forEach(function(e,t){r.push(normalizeNode(e))}),r}var htmlEscape={"&":"&amp;","=":"&#61;","'":"&#39;","\0":"&#00;","\v":"&#11;","\n":"&#12;","\\[":"&#91;","\\]":"&#93;"};function normalizeAttribute(e){return e.value&&(e.value=replaceAll(e.value.trim(),htmlEscape)),e}function normalizeClassName(e){var t=e.value.replace(/\s\s+/g," ").split(" ").sort();return e.value="."+t.join("."),e}function normalizeNode(e){var r={},n={},i={};e.forEach(function(e){var t=e.name.toLowerCase();0<=["tag","id","class"].indexOf(t)?("tag"===t?e.value=e.value.toLowerCase():"class"===t&&(e=normalizeClassName(e)),r[t]=e):0===t.indexOf(":")?i[t]=e:(e=normalizeAttribute(e),n[t]=e)});var t=[];return r.tag&&t.push(r.tag),r.id&&t.push(r.id),r.class&&t.push(r.class),t=(t=t.concat(mapToArrayByKey(n))).concat(mapToArrayByKey(i))}function mapToArrayByKey(t){var r=[];return Object.keys(t).sort().forEach(function(e){r.push(t[e])}),r}function replaceAll(e,t){var r=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(r,function(e){return t[e.toLowerCase()]||t["\\"+e.toLowerCase()]})}var attrCode={tag:"t",id:"i",class:"c",":nth-child":":nc",":nth-of-type":":nt"};function generateElementContext(e){return serializeNodes(normalize(getElementsOnPath(e)))}function generateElementContextRec(e){var t="function"==typeof e.getRootNode?e.getRootNode():null;if(t&&dom.isShadowRoot(t)){var r=generateElementContext(e),n=t.host?generateElementContextRec(t.host):null;return n?n+"\v"+r:r}return generateElementContext(e)}function serializeNodes(r){var n="";return r.forEach(function(e,t){e.forEach(function(e){var t=attrCode[e.name]||e.name;n+="["+t+"="+e.value+"]"}),t<r.length-1&&(n+="\v")}),n}function getElementsOnPath(e){for(var t=[];e&&!dom.isShadowRoot(e);){var r=getElementProperties(e);if(t.unshift(r),e===document.body||"BODY"===e.nodeName)break;e=e.parentNode}return t}function getClassName(e){switch(_typeof(e.className)){case"string":return e.className;case"object":return e.className.baseVal||e.getAttribute("class")||"";default:return""}}function getElementProperties(e){var t=[{name:"tag",value:e.tagName?e.tagName:""}],r="";e.id&&_.isString(e.id)?r=e.id:"function"==typeof e.getAttribute&&e.getAttribute("id")&&_.isString(e.getAttribute("id"))&&(r=e.getAttribute("id")),r&&t.push({name:"id",value:r});var n=getClassName(e).trim();n&&t.push({name:"class",value:n});var i=[],a=dom.isPIINode(e),o=["id","class"];if(a&&(o=o.concat(constants.pii.maskingAttributes)),e.attributes)for(var s=0;s<e.attributes.length;s++)!(e.attributes[s].name&&o.indexOf(e.attributes[s].name)<0)||a&&/data-*/.test(e.attributes[s].name)||i.push({name:e.attributes[s].name,value:e.attributes[s].value});0<i.length&&(i=i.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),t=t.concat(i));for(var c=1,l=1,g=previousElementSibling(e);g;)c++,g.tagName===e.tagName&&l++,g=previousElementSibling(g);return t.push({name:":nth-child",value:c}),t.push({name:":nth-of-type",value:l}),t}var ELEMENT_NODE=1;function previousElementSibling(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&e.nodeType!==ELEMENT_NODE;);return e}var eventTargetParser={_initializedTokens:[],_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&e.nodeType!==Node.ELEMENT_NODE;);return e},_loadScript:function(e,t){var r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=t;var n=document.getElementsByTagName("script");0<n.length?n[0].parentNode.insertBefore(r,n[0]):document.body.appendChild(r)},_getClassName:function(e){return e.tagName&&"svg"===e.tagName.toLowerCase()?e.className.baseVal||e.getAttribute("class")||"":e.className||""},_isClickEvent:function(e){return"click"===e||"mousedown"===e||-1<e.indexOf("touch")||-1<e.indexOf("pointer")},_shouldTrackDomEvent:function(e,t){if(!e||e===document||e===document.body.parentNode||e.nodeType!==Node.ELEMENT_NODE)return!1;switch(e.tagName?e.tagName.toLowerCase():""){case"html":return!1;case"form":return"submit"===t.type;case"input":return["button","submit"].indexOf(e.getAttribute("type")),this._isClickEvent(t.type);case"select":case"textarea":default:return this._isClickEvent(t.type)}},_getDefaultProperties:function(e){if(document&&document.body)return{$event_type:e,$host:window.location.host,$pathname:obfuscateUrl(window.location.pathname)};logger.log("document not ready yet, trying again in 500 milliseconds...");var t=this;setTimeout(function(){t._getDefaultProperties(e)},500)},_getInputValue:function(e){var t=null;switch(e.type.toLowerCase()){case"checkbox":e.checked&&(t=[e.value]);break;case"radio":e.checked&&(t=e.value);break;default:t=dom.isRedacted(e)?getPIIHandler().redactText(e.value):e.value}return t},_getSelectValue:function(t){var r,e=t.multiple?(r=[],_.each(t.querySelectorAll("[selected]"),function(e){dom.isRedacted(e)||dom.isRedacted(t)?r.push(getPIIHandler().redactText(e.value)):r.push(e.value)}),r):dom.isRedacted(t)?getPIIHandler().redactText(t.value):t.value;return e},_includeProperty:function(e,t){for(var r=e;r.parentNode&&r!==document.body;r=r.parentNode){var n=this._getClassName(r).split(" ");if(_.includes(n,"_ar_hide_")||r._ar_hide_)return!1}if(null===t)return!1;switch((e.type||"").toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))return!1;if("string"==typeof t){if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[\- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(t))return!1}return!0},_getFormFieldValue:function(e){switch((e.tagName?e.tagName:"").toLowerCase()){case"input":t=this._getInputValue(e);break;case"select":t=this._getSelectValue(e);break;default:var t=(e.value||"")+""||e.textContent;dom.isRedacted(e)&&(t=getPIIHandler().redactText(t))}return this._includeProperty(e,t)?t:null},_getFormFieldProperties:function(e){var i={};return _.each(e.elements,function(e){var t,r,n=e.getAttribute("name")||e.getAttribute("id");null!==n&&(n="$form_field__"+n,t=this._getFormFieldValue(e),this._includeProperty(e,t)&&(r=i[n],i[n]=void 0!==r?[].concat(r,t):t))},this),i},_extractCustomPropertyValue:function(e,t){var r=[];return _.each(t.querySelectorAll(e.css_selector),function(e){var t=e.tagName?e.tagName:"";-1<["input","select"].indexOf(t.toLowerCase())?r.push(e.value):e.textContent&&r.push(e.textContent)}),r.join(", ")},_getCustomProperties:function(n,i){var a={};return _.each(this._customProperties,function(r){_.each(r.event_selectors,function(e){var t=i.querySelectorAll(e);_.each(t,function(e){_.includes(n,e)&&(a[r.name]=this._extractCustomPropertyValue(r,i))},this)},this)},this),a},getTarget:function(e){var i=this;if("string"==typeof e)return this._getDefaultProperties(e);var t=dom.getEventTarget(e),r="function"==typeof t.getRootNode&&t.getRootNode()||document;if(this._shouldTrackDomEvent(t,e)){for(var n=[t],a=t;a.parentNode&&a!==document.body&&!dom.isShadowRoot(a);)n.push(a.parentNode),a=a.parentNode;var o,s,c,l,g=!1,u=!1;_.each(n,function(e,t){var r,n;e.tagName&&"a"===e.tagName.toLowerCase()?s=e.getAttribute("href"):e.tagName&&"form"===e.tagName.toLowerCase()&&(l=e),!c&&t<5&&e.textContent&&((r=_.trim(e.textContent.substring(0,510)))&&(c=r.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))),"string"==typeof i._getClassName(e)&&(n=i._getClassName(e).split(" "),(_.includes(n,"_ar_hide_")||a._ar_hide_)&&(g=!0),!g&&_.includes(n,"_ar_redact_")&&(u=!0))}),u&&(c=getPIIHandler().redactText(c)),g&&(c="Sensitive Information"),o=generateElementContextRec(t);var d=_.extend(this._getDefaultProperties(e.type),{$elements:o,$el_attr__href:s});return g||(d=_.extend(d,this._getCustomProperties(n,r))),!l||"submit"!==e.type&&"click"!==e.type||_.extend(d,this._getFormFieldProperties(l)),d}},_navigate:function(e){window.location.href=e},_customProperties:{},isBrowserSupported:function(){return _.isFunction(document.querySelectorAll)}},SnapshotProperties=(createClass(XGa,[{key:"setEventGroups",value:function(e){var t=this;e&&(this.snapshotProperties.egs={},e.forEach(function(e){e.snapshotProperties&&0<e.snapshotProperties.length&&(t.snapshotProperties.egs[e.id]=e)}))}},{key:"isEnabled",value:function(){var e=config.getConfig("spEnabled","behavior");if(!e)return!1;for(var t=(window.location.href||"about:blank").toLowerCase(),r=0;r<e.length;r++)if(new RegExp(e[r],"i").test(t))return!0;return!1}},{key:"getMatchedEventGroups",value:function(e){var t=[];for(var r in logger.log("getMatchedEventGroups:",e),this.snapshotProperties.egs){var n=this.snapshotProperties.egs[r],i=n.jsCriteria;if(i&&""!==i){/^\s*return/.test(i)||(i="return "+i);var a=!1;try{a=new Function("event",i)(e)}catch(e){logger.warn("error in getMatchedEventGroups:",r),a=!1}logger.log("eg:"+r+": "+a),a&&n&&t.push(n)}}return t}},{key:"collect",value:function(e){var r=this,t=e.snapshotProperties,n={};return t.forEach(function(e){var t=r.collectOne(e);n=_.extend(t,n)}),n}},{key:"collectOne",value:function(e){if(e){var t=e.name,r=e.content,n=e.valueType,i=e.type;if(t&&r&&n&&i){var a,o={};return"javascript"===i.toLowerCase()?null!=(a=this.getJSProp(r,n))?o[t]=a:logger.warn("Ignoring null or undefined property value for content: "+r):logger.warn("Unsupported snapshot property type: "+i),o}logger.warn("missing snapshop properties metadata:",e)}}},{key:"getJSProp",value:function(t,e){/^\s*return/.test(t)||(t="return "+t),e=e.toLowerCase();var r=null;try{switch(r=new Function(t)()+"",logger.log("value: ",r),e){case"number":r=+r;break;case"currency":r=+r.replace(/[^0-9\.-]+/g,"");break;case"boolean":r=!!r}}catch(e){logger.warn("exception in getJSProp: "+t,e),r=null}return r}}]),XGa);function XGa(){classCallCheck(this,XGa),this.snapshotProperties={}}var AurycSP=new SnapshotProperties,eventPropertiesPropKey="eventprops",pageEventProperties={};function getSessionScope(e){var t={};if(!e.getByKey(eventPropertiesPropKey))return t;try{t=JSON.parse(e.getByKey(eventPropertiesPropKey))}catch(e){}return t}function getUserScope(e){var t={};if(!e.getByKey(eventPropertiesPropKey))return t;try{t=JSON.parse(e.getByKey(eventPropertiesPropKey))}catch(e){}return t}function addEventProperties(t){var r,n,i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],o=arguments[3],s=!_.isUndefined(e.set_once)&&e.set_once,c=_.isUndefined(e.scope)?"user":e.scope;"page"===c?Object.keys(t).forEach(function(e){(!s||s&&_.isUndefined(pageEventProperties[e]))&&(pageEventProperties[e]=t[e])}):"session"===c?(r=getSessionScope(a),Object.keys(t).forEach(function(e){_.isUndefined(pageEventProperties[e])&&(!s||s&&_.Undefined(r[e]))&&(r[e]=t[e])}),a.setByKey(eventPropertiesPropKey,JSON.stringify(r))):"user"===c&&(n=getSessionScope(a),i=getUserScope(o),Object.keys(t).forEach(function(e){_.isUndefined(pageEventProperties[e])&&_.isUndefined(n[e])&&(s&&(!s||_.isUndefined(i[e]))||(i[e]=t[e]))}),o.setByKey(eventPropertiesPropKey,JSON.stringify(i)))}function getSuperEventProperties(e,t){var r=_.cloneDeep(pageEventProperties||{}),n=getSessionScope(e),i=getUserScope(t);return Object.keys(n).forEach(function(e){_.isUndefined(r[e])&&(r[e]=n[e])}),Object.keys(i).forEach(function(e){_.isUndefined(r[e])&&(r[e]=i[e])}),r}function getOneEventProperty(e,t,r){if(_.isDefined(pageEventProperties[e]))return _.cloneDeep(pageEventProperties[e]);var n=getSessionScope(t);return _.isDefined(n[e])?n[e]:getUserScope(r)[e]}function removeOneEventProperty(e,t,r){delete pageEventProperties[e];var n=getSessionScope(t);delete n[e],t.setByKey(eventPropertiesPropKey,JSON.stringify(n||{}));var i=getUserScope(r);delete i[e],r.setByKey(eventPropertiesPropKey,JSON.stringify(i||{}))}function removeAllEventProperties(e,t,r){"page"!==r&&!_.isUndefined(r)||(pageEventProperties={}),"session"!==r&&!_.isUndefined(r)||e.setByKey(eventPropertiesPropKey,JSON.stringify({})),"user"!==r&&!_.isUndefined(r)||t.setByKey(eventPropertiesPropKey,JSON.stringify({}))}var superProperties={addEventProperties:addEventProperties,getSuperEventProperties:getSuperEventProperties,getOneEventProperty:getOneEventProperty,removeOneEventProperty:removeOneEventProperty,removeAllEventProperties:removeAllEventProperties},EventGenerator=(createClass(tIa,[{key:"getTrackingTarget",value:function(e){var t=eventTargetParser.getTarget(e);return _.extend({},browser$1.properties(),t)}},{key:"getConsoleTarget",value:function(e){var t=eventTargetParser.getTarget(e);return _.extend({},browser$1.locationInfo(),t)}},{key:"generateLastVisitTime",value:function(e){if(globalSessionTracker.isSessionOver())logger.log("Session is over. No action");else{var t=e.currentTime;e.$timeSinceFirstVisit=t,e.visitTime=t;var r=globalSessionTracker.getSessionMetadata();if(e.userId=r.userId,e.$timeSinceLastVisit=r.sessionTime,e.userId&&""!==e.userId)return e;logger.log("can not get userId. No action")}}},{key:"getSessionId",value:function(){return globalSessionTracker.getSessionMetadata().sessionId}},{key:"getGlobalSessionId",value:function(){return globalSessionTracker.getSessionMetadata().globalSessionId}},{key:"getStartTs",value:function(e,t){return t&&"pageview"===e.$event_type&&(e.$timeSinceFirstVisit=e.startTS,e.visitTime=e.startTS),e}},{key:"assemblePayloads",value:function(e,t,r){var n,i,a,o,s,c,l,g,u;return t&&(n=t.eventName,o=t.path,s=t.form,c=t.userIdentify,l=t.userProperties,(g=t.eventProperties)&&g.formid&&(i=g.formid),(u=t.eventType)&&(e.$event_type=u),o||(i&&(e.tags=[t.eventName+":"+i]),"Feedback Submitted"===n?(a=g.respid,e.tags=[t.eventName+":"+i+"-"+a]):"FeedbackSubmitted"===n&&(e.tags=[n+":"+i+"-"+a],e.payloads=_.extend(s,e.payloads)),c&&(e.$event_type="IDENTIFY_USER",e.identity=c),l&&(e.$event_type="ADD_USER_PROPERTY",e.payloads=l),r&&(e.payloads=g))),e}},{key:"getEventProperties",value:function(){return superProperties.getSuperEventProperties(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT))}},{key:"getUTMParameter",value:function(){var e={us:"utm_source",um:"utm_medium",uc:"utm_campaign",ut:"utm_term",un:"utm_content"},t=browser$1.campaignParams(),r={};for(var n in e){var i=e[n];t[i]&&(r[n]=t[i])}return r}},{key:"getEventCommonProperties",value:function(e,t,r){var n,i={currentTime:_.now()};if(t===constants.events.PAGEVIEWTRACKER&&(n=globalSessionTracker.getPVStartTS(),i.startTS=parseInt(n),i=_.extend(i,r)),t===constants.events.CLICKTRACKER){if(i.elText=this.getClickTargetText(e),!i.elText)return null;i.ps=this.calcMouseCoord(e,r)}return i}},{key:"getClickTargetText",value:function(e){var t=dom.getEventTarget(e),r="";if(!t)return r;try{var n,i=dom.isSecret(t),a=dom.isRedacted(t);if("password"===t.type)r='input[type="password"]';else if("select"===t.nodeName.toLowerCase())r=t.name;else if("img"===t.nodeName.toLowerCase())r=t.alt;else{if("body"===t.nodeName.toLowerCase())return null;if("html"===t.nodeName.toLowerCase())return null}r||i||(t.getAttribute&&t.getAttribute("data-text")&&(r=t.getAttribute("data-text")),n=(t.value||"")+"",r=r||n||t.textContent||t.innerText),0===(r=(r=(r=r||"")&&r.substring(0,60)).replace(/^\s+|\s+$/g,"")).length&&(r=t.nodeName||t.name)&&(r=r.toLowerCase(),t.type&&(r+='[type="'+t.type.toLowerCase()+'"]')),i&&(r+=" - Sensitive Information"),a&&(r=getPIIHandler().redactText(r)),r=r.replace(/^\s+|\s+$/g,""),logger.log("elText: "+r)}catch(e){logger.warn("Exception in getTargetText"),logger.warn(e),r=""}return r}},{key:"calcMouseCoord",value:function(e,t){if(t&&t.position)return t.position;var r={x:e.clientX,y:e.clientY},n=browser$1.getScroll(window);this.previousEventPos=r;var i={};if(i.x=e.clientX+n.x,i.y=e.clientY+n.y,this.inIframe()){var a=dom.getPosInTopFrame(window.frameElement,dom.getContainingWinObj(window.frameElement));return i.x=i.x+a.x-n.x,i.y=i.y+a.y-n.y,i}return i}},{key:"inIframe",value:function(){try{return window!==window.top}catch(e){return!0}}},{key:"getEvent",value:function(e,t,r,n,i){var a=4<arguments.length&&void 0!==i?i:window;if(!(n=this.getEventCommonProperties(e,t,r)))return null;var o=this.getTrackingTarget(e),s=_.extend({},n,o),c=this.assembleBehaviorEvent(s,r,a);return c?(c.basicProps=n,c):null}}],[{key:"getInstance",value:function(){return tIa.instance||(tIa.instance=new tIa),tIa.instance}}]),tIa);function tIa(){var f=this;classCallCheck(this,tIa),this.assembleBehaviorEvent=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;if(!(e=f.generateLastVisitTime(e)))return null;var n,i,a=t&&t.eventType===constants.events.CUSTOM_EVENT,o=(e=f.assemblePayloads(e,t,a)).$event_type;"mousedown"===o&&(o="click");var s=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;"pageview"===e.$event_type||"feedback"===e.$event_type||a?(n=browser$1.getDocumentTitle(document),i=decodeURIComponent(e.$current_url),o="URL"):"IDENTIFY_USER"===e.$event_type?(n=e.userId,i=e.identity):"ADD_USER_PROPERTY"===e.$event_type?n=e.userId:i=a?(n=t.eventName,t.eventName):(n=o,e.elText);var c,l,g,u,d,h={userId:e.userId,name:n,content:i,source:{elements:e.$elements},payload:f.getEventProperties()||{}},p=browser$1.locationInfo(r.location,r.document);return h.source=_.extend({},h.source,p),"pageview"===e.$event_type&&(c=1,s&&s.timing&&s.timing.requestStart&&s.timing.responseEnd&&(c=s.timing.responseEnd-s.timing.requestStart),h.generationTime=Math.max(1,c),(l=browser$1.getPageType())&&(h.payload.pageType=l)),e.ps&&(h.ps=e.ps,h.v=e.elText),a&&t.eventProperties&&(h.payload=_.extend(h.payload,e.payloads)),"pageview"===e.$event_type&&(h=_.extend(h,f.getUTMParameter())),_.inArray(e.$event_type,["click","pageview"])&&AurycSP.isEnabled()&&(g=e.$event_type.toUpperCase(),u=_.extend({libraryName:"Web",type:g},h),(d=AurycSP.getMatchedEventGroups(u))&&d.forEach(function(e){var t=AurycSP.collect(e);h.payload=_.extend(t,h.payload)})),h},this.previousEventPos=null,this.instance=null}var overrideProperties={text:[[HTMLInputElement.prototype,"value"]],email:[[HTMLInputElement.prototype,"value"]],number:[[HTMLInputElement.prototype,"value"]],tel:[[HTMLInputElement.prototype,"value"]],textarea:[[HTMLTextAreaElement.prototype,"value"]],select:[[HTMLSelectElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"]],radio:[[HTMLInputElement.prototype,"checked"]],checkbox:[[HTMLInputElement.prototype,"checked"]]},RcInputMonitor=(createClass(aKa,null,[{key:"getNewInstance",value:function(e,t){return t._arIM||(t._arIM=new aKa(e,t)),t._arIM}}]),createClass(aKa,[{key:"trackValueSetter",value:function(r,n){var i=this,e=overrideProperties[n];e&&e.forEach(function(e){var t=i;try{dom.overrideObjectProperty(window,r,e[1],{set:function(e){setTimeout(function(){t.previousIptVal!==e&&(t.createInputEvent(n),t.previousIptVal=e)},0)}})}catch(e){}})}},{key:"trackInputEvents",value:function(t,e,r,n){var i=this;e&&(_.addEventListener(n,"focus",function(){return i.iptReceivedFocus(n)}),_.addEventListener(n,"blur",function(){return i.iptLostFocus()}),_.addEventListener(n,"keydown",function(e){return i.processKeyStroke(n,t,e)})),!r&&"select"!==t||_.addEventListener(n,"click",function(){return i.elemCheckValChanged(n,t)}),r||_.addEventListener(n,"change",function(){return i.elemSelectedValChanged(n,t)}),this.trackValueSetter(n,t)}},{key:"iptReceivedFocus",value:function(e){var t=this;this.updateCursorData(e),this.cursorTracker=setInterval(function(){t.updateCursorData(e)},constants.record.throttler.CURSOR_INFO_INTERVAL)}},{key:"iptLostFocus",value:function(){this.cursorTracker&&clearInterval(this.cursorTracker)}},{key:"elemCheckValChanged",value:function(e,t){var r;dom.isSecret(e||this.iNode)||this.previousSelected!==e.checked&&(this.previousSelected=e.checked,r={jNodeName:this.getNodeName(e),aCheckValue:e.checked,wNodePath:this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e)),comp:1,sInputType:t},this.eventWriter.append(EventType.InputValChangedT(),r,this.rcProcessor))}},{key:"elemSelectedValChanged",value:function(e,t){var r;dom.isSecret(e||this.iNode)||(this.previousElInnerText!==e.innerHTML&&(this.processCurrElem(),this.previousElInnerText=e.innerHTML),r={jNodeName:("select"===t?this.getSelectedOptionText(e):this.getNodeName(e))||"","rSelected:hIndex":e.selectedIndex,wNodePath:this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e)),comp:1,sInputType:t},this.eventWriter.append(EventType.InputValChangedT(),r,this.rcProcessor),this.previousIptVal=e.value)}},{key:"getSelectedOptionText",value:function(e){try{return dom.isRedacted(e)?getPIIHandler().redactText(e.options[e.selectedIndex].text):e.options[e.selectedIndex].text}catch(e){return null}}},{key:"processKeyStroke",value:function(t,r,n){var i=this;setTimeout(function(){var e;dom.isSecret(t)||(i.updateCursorData(),i.processCurrElem(),i.previousIptVal=t.value,t.value&&t.value.length&&(dom.isCreditcardInput(t,t.value)||(e={"rSelected:jKey":1,"oScroll:rPos":{x:i.iNode.scrollTop,y:i.iNode.scrollLeft},wNodePath:i.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(t)),uValue:i.getInputValue(t),comp:1,sInputType:r,trusted:n&&n.isTrusted},i.eventWriter.append(EventType.KeyStrokeDownT(),e,i.rcProcessor))))},1)}},{key:"getInputValue",value:function(e){var t=(e=e||this.iNode).value||"";return dom.isSecret(e)?"":dom.isRedacted(e)?getPIIHandler().redactText(t):t}},{key:"hasChanged",value:function(){return input.isInputSupported(this.iNode)?this.previousIptVal!==this.iNode.value:!!this.isRadioCbox()&&this.previousSelected!==this.iNode.checked}},{key:"isRadioCbox",value:function(e){var t=(e=e||this.iNode).getAttribute("type")?e.getAttribute("type").toLowerCase():"text";return"radio"===t||"checkbox"===t}},{key:"isSubmitInput",value:function(){return"submit"===(this.iNode.getAttribute("type")?this.iNode.getAttribute("type").toLowerCase():"text")}},{key:"initProcess",value:function(e,t){"hidden"!==e&&"password"!==e&&("text"!==e&&"textarea"!==t.nodeName||""!==t.value)&&(this.isRadioCbox(t)&&!0!==t.checked?this.previousSelected=!1:this.createInputEvent(e))}},{key:"getNodeName",value:function(e){if(!e)return"";var t,r="";return e.labels&&e.labels[0]&&0<(t=e.labels[0]||"").length&&(r=t.textContent||t.innerText),r||!e.getAttribute("data-text")||dom.isSecret(e)||(r=e.getAttribute("data-text")),r||(r=e.name||e.nodeName)&&(r=r.toLowerCase(),e.type&&(r+='[type="'+e.type.toLowerCase()+'"]')),dom.isRedacted(e)&&(r=getPIIHandler().redactText(r)),r}},{key:"processCurrElem",value:function(){"hidden"!==input.getInputType(this.iNode)&&"password"!==input.getInputType(this.iNode)&&this.hasChanged()&&this.createInputEvent(input.getInputType(this.iNode))}},{key:"getCursorPosition",value:function(e){e=e||this.iNode;var t={rFirst:0,dLast:0};try{t.rFirst=e.selectionStart||0,t.dLast=e.selectionEnd||0}catch(e){}return t.bCurrent=t.dLast,t.comp=1,t}},{key:"updateCursorData",value:function(e){var t,r,n;e=e||this.iNode,dom.isSecret(e)||(t=this.getCursorPosition(e),r=!1,this.previousCursorPos||(r=!0),!r&&this.previousCursorPos.rFirst===t.rFirst&&this.previousCursorPos.dLast===t.dLast||(n={zNodeName:this.getNodeName(e),"bCursor:hIndex":config.compress(t),comp:1,wNodePath:this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e))},this.eventWriter.append(EventType.InputPosT(),n,this.rcProcessor)),this.previousCursorPos=t)}},{key:"_createRadioCB",value:function(e){var t;dom.isSecret(e)||void 0!==(t=this.iNode.checked)&&(e.aSelected=t,this.eventWriter.append(EventType.FormInputT(),e,this.rcProcessor),this.previousSelected=t)}},{key:"_createTextArea",value:function(e){dom.isSecret(e)||(e.uValue=this.getInputValue(this.iNode),e["rWidth:yHeight"]={w:parseInt(dom.getStyle(this.iNode,this.rcProcessor.getWinObj(),"width")),h:parseInt(dom.getStyle(this.iNode,this.rcProcessor.getWinObj(),"height"))},this.eventWriter.append(EventType.FormInputT(),e,this.rcProcessor))}},{key:"_getSelectSize",value:function(e){try{if(!e)return{w:0,h:0};var t=getComputedStyle(e);if(t&&0!==t["flex-grow"]){var r=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);return{w:e.offsetWidth-r-n,h:e.offsetHeight}}return{w:e.offsetWidth,h:e.offsetHeight}}catch(e){return{w:0,h:0}}}},{key:"_createSelect",value:function(e){var r,n=this;dom.isSecret(e)||(r=[],Array.apply(null,this.iNode.options).forEach(function(e){var t=dom.isRedacted(n.iNode)||dom.isRedacted(e);r.push({uVal:t?getPIIHandler().redactText(e.value):e.value,jKey:t?getPIIHandler().redactText(e.text):e.text,comp:1})}),e["rWidth:yHeight"]=this._getSelectSize(this.iNode),e["rSelected:hIndex"]=this.iNode.options.selectedIndex,e.nOptions=r.map(function(e){return config.compress(e)}),this.previousElInnerText=this.iNode.innerHTML,this.eventWriter.append(EventType.FormInputT(),e,this.rcProcessor))}},{key:"createInputEvent",value:function(t){var r,n,i;dom.isSecret(this.iNode)||(r=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(this.iNode),this.rcProcessor),n={jNodeName:this.getNodeName(this.iNode),sInputType:t,wNodePath:r,uValue:"",comp:1},(i=this).debounceTimer&&clearTimeout(i.debounceTimer),i.debounceTimer=setTimeout(function(){switch(clearTimeout(i.debounceTimer),t){case"radio":case"checkbox":i._createRadioCB(n);break;case"textarea":i._createTextArea(n);break;case"select":i._createSelect(n);break;default:n.uValue="password"===t||dom.isSecret(i.iNode)?"":i.getInputValue(i.iNode),dom.isPIIWhitelistNode(i.iNode)&&(n.aSelected=!0);var e=dom.isCreditcardInput(i.iNode,i.iNode.value);e&&!i.rcProcessor.ccInputCache[r]?(i.rcProcessor.ccInputCache[r]=r,i.eventWriter.append(EventType.FormInputT(),n,i.rcProcessor)):e||i.eventWriter.append(EventType.FormInputT(),n,i.rcProcessor)}},20))}}]),aKa);function aKa(e,t){classCallCheck(this,aKa),this.debounceTimer=null,this.eventWriter=EventWriter.getInstance(),this.iNode=t,this.rcProcessor=e,this.cursorTracker=null,this.maskClassName=constants.pii.maskingClassName;var r=input.isInputSupported(t),n=this.isRadioCbox(t);r&&(this.previousIptVal=t.getAttribute("value")||t.value||"");var i=input.getInputType(t);(r&&t.value||"checkbox"===i&&t.checked||"select-one"===i||"select"===i)&&this.initProcess(i,t),this.trackInputEvents(i,r,n,t,e)}var StyledComponent=(createClass(ULa,[{key:"processBlobCss",value:function(e,n,i){for(var t,r=dom.querySelectorAll(e,"link"),a=0;a<r.length;a++)config.isBlobStyle(r[a])&&((t=new XMLHttpRequest).open("get",r[a].href,!0),t.responseType="blob",t.onloadend=function(e){e.loaded||i&&i("",n)},t.onload=function(){var r;200<=this.status&&this.status<300||304===this.status?((r=new FileReader).readAsText(this.response,"utf-8"),r.onload=function(e){var t=r.result;i&&i(t,n)}):i&&i("",n)},t.send())}},{key:"process",value:function(e,t,r,n){var i=this,a=3<arguments.length&&void 0!==n?n:window;this.processDynamicCss(t,null,a),this.processBlobCss(e,t,r),this.processAdoptedStyleSheets(e,t),setTimeout(function(){i.processDynamicCss(t,null,a),i.processBlobCss(e,t,r),i.processAdoptedStyleSheets(e,t)},500)}},{key:"processAdoptedStyleSheets",value:function(e,t){var r=this;9===e.nodeType&&this.serializeAdoptedStyleSheets(e),dom.traverse(function(e){return r.serializeAdoptedStyleSheets(e,t)},e,NodeFilter.SHOW_ELEMENT,null,!0)}},{key:"serializeAdoptedStyleSheets",value:function(e,t){var n,r;e&&e.adoptedStyleSheets&&0!==e.adoptedStyleSheets.length&&"function"==typeof e.getRootNode&&(t=t||e.getRootNode({composed:!0}),n="",e.adoptedStyleSheets.forEach(function(e){try{if(!e.href||_.startsWith(e.href,window.document.location.origin))for(var t=e.cssRules||e.rules,r=0;r<t.length;r++)n+=t[r].cssText}catch(e){}}),(r=e.querySelectorAll("style[data-adopted-style-ar]")[0])?r.textContent=this.wrapStyleText(n):((r=t.createElement("style")).setAttribute("data-adopted-style-ar",""),r.textContent=this.wrapStyleText(n),9===e.nodeType?(e.querySelectorAll("head")[0]||t.querySelectorAll("body")[0]).appendChild(r):11===e.nodeType&&e.appendChild(r)))}},{key:"getContainerNode",value:function(e,t){if(!t)return null;var r,n,i=null;if(!(i=dom.isNodeInShadowDom(t)?t.getRootNode():(r=e.querySelectorAll("head")[0],n=e.querySelectorAll("body")[0],r&&r.contains(t)?r:n)))return null;var a=i.querySelector("style[data-dynamic-styles-ar]");return a||((a=e.createElement("style")).setAttribute("data-dynamic-styles-ar",""),t.parentNode&&t.parentNode===i?i.insertBefore(a,t):i.appendChild(a),a)}},{key:"wrapStyleText",value:function(e){return e?-1<e.indexOf("/** arPreserve")?e:"/** arPreserve "+e+" arPreserve **/":""}},{key:"processDynamicCss",value:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:window;if(!urls.isInPlayerIframe(n))try{t=t||e;var i=dom.querySelectorAll(t,"style");this.serializeCSSRules(e,i,t)}catch(e){}}},{key:"serializeCSSRules",value:function(e,t){var n,i,r;t&&0!==t.length&&(n=null,i="",[].forEach.call(t,function(e){if(e&&e.sheet&&(/^\s*$/.test(e.textContent)||e.hasAttribute("data-aphrodite")||e.hasAttribute("data-styled")||e.hasAttribute("data-styles")))try{if(!e.sheet.href||_.startsWith(e.sheet.href,window.document.location.origin)){for(var t=e.sheet.cssRules||e.sheet.rules,r=0;r<t.length;r++)i+=t[r].cssText;n=n||e}}catch(e){}}),0<t.length&&!/^\s*$/.test(i)&&(n=n||t[0],(r=this.getContainerNode(e,n))&&r.textContent!==i&&(r.textContent=this.wrapStyleText(i))))}},{key:"processInsertRuleCSS",value:function(e,t){e&&t&&0!==t.length&&this.processDynamicCss(e)}}]),ULa);function ULa(){classCallCheck(this,ULa)}var styledComponentHandler=null;function getStyledComponentHandler(){return styledComponentHandler=styledComponentHandler||new StyledComponent}var SerializeStyleImage=(createClass(bNa,[{key:"setupWebWorker",value:function(){if(window.Worker&&this.webworkerEnabled){if(this.worker=createWorker(config.getWorkerJS()),null===this.worker)return;var t=this;this.worker.onmessage=function(e){try{t.sendData(JSON.parse(e.data))}catch(e){}}}}},{key:"serializeImage",value:function(e,t){var r,n=this;config.getSerializeImg()&&!browser$1.isMobile()&&(r=Array.from(e.querySelectorAll("img")).map(function(e){return e.src}),t&&0<t.length&&(r=r.filter(function(e){return t.includes(e)})),this.worker&&0<r.length?this.worker.postMessage({type:"serialize",urls:r}):r.forEach(function(e){n.getImageData(e)}))}},{key:"serializeCSSRulesByUrl",value:function(e,t){var n=this;if(config.getSerializeCss()&&!browser$1.isMobile())try{var r=Array.from(e.styleSheets);t&&0<t.length&&(r=r.filter(function(e){return t.includes(e.href)})),r.forEach(function(e){var t=e.href,r=n.getCssRulesString(e);t&&r&&(r=n.absoluteToStylesheet(r,t),n.sendData({k:t,v:r}))})}catch(e){}}},{key:"extractOrigin",value:function(e){return(-1<e.indexOf("//")?e.split("/").slice(0,3).join("/"):e.split("/")[0]).split("?")[0]}},{key:"absoluteToStylesheet",value:function(e,I){var m=this;return(e||"").replace(this.URL_IN_CSS_REF,function(e,t,r,n,i,a){var o=r||i||a,s=t||n||"";if(!o)return e;if(!m.RELATIVE_PATH.test(o))return"url("+s+o+s+")";if(m.DATA_URI.test(o))return"url("+s+o+s+")";if("/"===o[0])return"url("+s+(m.extractOrigin(I)+o)+s+")";var c=I.split("/"),l=o.split("/");c.pop();var g=!0,u=!1,d=void 0;try{for(var h,p=l[Symbol.iterator]();!(g=(h=p.next()).done);g=!0){var f=h.value;"."!==f&&(".."===f?c.pop():c.push(f))}}catch(e){u=!0,d=e}finally{try{!g&&p.return&&p.return()}finally{if(u)throw d}}return"url("+s+c.join("/")+s+")"})}},{key:"fixBrowserCompatibilityIssuesInCSS",value:function(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}},{key:"getCssRulesString",value:function(e){try{var t=e.rules||e.cssRules;return t?this.fixBrowserCompatibilityIssuesInCSS(Array.from(t).map(this.getCssRuleString).join("")):null}catch(e){return null}}},{key:"getCssRuleString",value:function(e){return e.cssText}},{key:"sendData",value:function(e){this.evtWriter.append(EventType.CSSSerializeT(),e)}},{key:"getImageData",value:function(t){var r,n;t&&(r=new XMLHttpRequest,n=this,r.onload=function(){var e=new FileReader;e.onloadend=function(){n.sendData({k:t,v:e.result})},e.readAsDataURL(r.response)},r.open("GET",t),r.responseType="blob",r.send())}}]),bNa);function bNa(e){classCallCheck(this,bNa),this.evtWriter=e,this.worker=null,this.webworkerEnabled=!1!==config.getConfig("webworker","behavior"),this.setupWebWorker(),this.URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,this.RELATIVE_PATH=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,this.DATA_URI=/^(data:)([^,]*),(.*)/i}var serializeStyleImageHandler=null;function getSerializeStyleImageHandler(e){return serializeStyleImageHandler=serializeStyleImageHandler||new SerializeStyleImage(e)}var MATCH_COUNT_LIMIT=500,removeCommentsFromHTMLString=function(e){if(!e)return"";var t=0;return e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,function(e){if(!e)return"";if(MATCH_COUNT_LIMIT<t)return e;return e.replace(/\/\*[\s\S]*?\*\//g,function(e){return t++,e&&-1<e.indexOf("arPreserve")?e:""})})},DomSerialize=(createClass(rOa,[{key:"serialize",value:function(e,t,r){var n=e.document,i=null;try{getPIIHandler().processKeepInputs(n),this.getBlobStyleCount(n),getStyledComponentHandler().process(n,n,this.addBlobStyleEvent,e),getSerializeStyleImageHandler(r).serializeCSSRulesByUrl(n,[]),getSerializeStyleImageHandler(r).serializeImage(n,[]),getPIIHandler().addMaskAttributeToTags(n);for(var a=(i=dom.cloneDomNode(n.querySelectorAll("html")[0])).querySelectorAll('img[src*="data:image"]'),o=0;o<a.length;o++){var s=a[o];s.alt&&1e5<s.alt.length&&s.setAttribute("alt",""),s.src&&1e5<s.src.length&&s.setAttribute("src","")}return getPIIHandler().processMaskElement(i,n),getPIIHandler().processHiddenElement(i,n),getPIIHandler().processAttribute(i),this.handleDomHTML(this._getDocTag()+this.getOuterHTML(i),t)}catch(e){return logger.log("serialize error: ",e),null}}},{key:"getOuterHTML",value:function(e){if(config.supportsDeclarativeShadowDOM()){var t=document.implementation.createHTMLDocument("").createElement("html");return t.appendChild(e),""+t.getInnerHTML({includeShadowRoots:!0})}return e.outerHTML}},{key:"prepShadowDOMHTML",value:function(e,t){var r=getPIIHandler().tagDynamic(e,document);if("true"===r){getPIIHandler().addMaskAttributeToTags(e);var n=dom.cloneDomNode(e);return getPIIHandler().processMaskElement(n),getPIIHandler().processHiddenElement(n),getPIIHandler().processAttribute(n),this.handleDomHTML(n.innerHTML,t)||[]}if("false"!==r)return this.handleDomHTML(e.innerHTML,t)||[];var i=dom.cloneDomNode(e);return getPIIHandler().isAttributeProcessRequired(e)&&getPIIHandler().processAttribute(i),this.handleDomHTML(i.innerHTML,t)||[]}},{key:"processShadowDOM",value:function(e,t,r){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();null!==i;){try{var a,o,s,c=i.shadowRoot;c&&(a=globalCacheObj.getNodeXPath(i),a=[].concat(toConsumableArray(a),["shadowRoot"]),o=this.prepShadowDOMHTML(c,a),(s={}).x=t.updateNodeDict(a),s.dom=o,s.v="",s._to=_.now(),t.append(EventType.MutNodeTextT(),s,r),this.processShadowDOM(c,t,r))}catch(e){}i=n.nextNode()}}},{key:"getBlobStyleCount",value:function(e){for(var t=e.querySelectorAll("link"),r=0;r<t.length;r++)config.isBlobStyle(t[r])&&rOa.blobStyleNum++;rOa.time=(new Date).getTime()}},{key:"addBlobStyleEvent",value:function(e,t){var r,n,i;rOa.blobStyleCount++,rOa.blobStyleContent+=e,rOa.blobStyleCount===rOa.blobStyleNum&&((r=t.createElement("style")).innerHTML=rOa.blobStyleContent,(i=(n=t.querySelectorAll("head")[0]).querySelectorAll("link")[0])?n.insertBefore(r,i):n.appendChild(r),rOa.blobStyleNum=0,rOa.blobStyleCount=0,rOa.blobStyleContent="")}},{key:"handleDomHTML",value:function(e,t){e=removeCommentsFromHTMLString(e=e||""),e=getPIIHandler().removeComments(e),e=getPIIHandler().removeJS(e),e=getPIIHandler().removeBlobLink(e),e=getPIIHandler().replaceMediaSrc(e),e=getPIIHandler().replaceIntegrity(e);var r=globalDataCache.getObject(e,t,"kl");return r.id?r:null}},{key:"getDocType",value:function(){return this._getDocTag()}},{key:"_getDocTag",value:function(){var e="";try{window.XMLSerializer&&window.document.doctype&&(e=(new XMLSerializer).serializeToString(window.document.doctype),logger.log("doctype:"+e))}catch(e){}return e}}],[{key:"getInstance",value:function(){return rOa.instance||(rOa.instance=new rOa,rOa.blobStyleNum=0,rOa.blobStyleCount=0,rOa.blobStyleContent=""),rOa.instance}}]),rOa);function rOa(){classCallCheck(this,rOa)}function getUrlObject(e){var t=document.createElement("a");return t.href=e,t}var MAX_VALUE_LENGTH=1024,attributeMap={message:"message",fileLocation:"fileLocation",fileRelativeLocation:"fileRelativeLocation",lineNo:"lineno",columnNo:"colno"},lastTrackedError={};function handleJSError(r,e,t,n){t=t||window;var i={};if(!r)return i;var a=void 0;return e.attribute.forEach(function(e){var t=attributeMap[e.value];t&&(a=getJSErrorAttribute(t,r)),a&&(i[e.name]=a)}),!0===n?i:i=checkAndSetData(i)}function checkAndSetData(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r];if(e[n]&&0<e[n].indexOf("auryc.lib"))return null;if(e[n]!==lastTrackedError[n])return lastTrackedError=e}return null}function getJSErrorAttribute(e,t){if("message"!==e)return"fileLocation"===e?getFileLocation(t):"fileRelativeLocation"===e?getFileRelativeLocation(t):"lineno"===e||"colno"===e?""+t[e]:void 0;var r=t.error?t.error.message:t.message;try{r=trimLength(r||"")}catch(e){r=""}return r||""}function getFileLocation(e){var t,r=(e.filename||"<Unknown>")+":"+e.lineno+":"+e.colno;return r.length>MAX_VALUE_LENGTH&&(t=r.length-MAX_VALUE_LENGTH,r=r.subStr(t)),r}function getFileRelativeLocation(e){var t,r=(getUrlObject(e.filename).pathname||"<Unknown>")+":"+e.lineno+":"+e.colno;return r.length>MAX_VALUE_LENGTH&&(t=r.length-MAX_VALUE_LENGTH,r=r.subStr(t)),r}function trimLength(e){return(e||"").substr(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:MAX_VALUE_LENGTH)}function handleOptimizely(e,t,r){var n=null;return(r=r||window).optimizely&&"function"==typeof r.optimizely.get&&(n=getExps(t,r)),n}function getExps(e,t){for(var r=(t=t||window).optimizely.get("data"),n=t.optimizely.get("state"),i=n.getActiveExperimentIds(),a=n.getVariationMap(),o=e.name||"optimizely",s={},c=[],l=[],g=0;g<i.length;g++){var u=i[g],d=a[u].name||a[u].id,h=r.experiments[u].name||u;c.push(h+""),l.push(h+"."+d)}return 0<c.length&&(s[o+"_exp"]=c),0<l.length&&(s[o+"_exp_var"]=l),s}var textInputs=["","color","email","number","search","tel","text","textarea","url"],supportedInputs=[].concat(textInputs,["radio","select","checkbox"]);function getInputType$1(e){return"textarea"===e.nodeName.toLowerCase()?"text":"select"===e.nodeName.toLowerCase()?"select":(e.getAttribute("type")||e.type).toLowerCase()}function isTextInputs(e){return _.inArray(e,textInputs)}function isSupportedInputs(e){return _.inArray(e,supportedInputs)}function getParentForm(e){if(!e)return null;if(e&&e.tagName&&"form"===e.tagName.toLowerCase())return e;for(var t=e.parentElement,r=t&&t.tagName&&"form"===t.tagName.toLowerCase();!r&&t;)r=(t=t.parentElement)&&t.tagName&&"form"===t.tagName.toLowerCase();return t}function handleForm(e,t,r){if(!e||!e.target&&!e.srcElement)return null;r=r||window;var n=e.target||e.srcElement;if(!(n=getParentForm(n))||!n.tagName||"form"!==n.tagName.toLowerCase()||dom.isPIINode(n))return null;var o={},i=n;i.name&&(o.form_name=i.name+""),i.id&&(o.form_id=i.id+""),i.name||i.id||(o.form_name="unnamed");var a=i.querySelectorAll("input, textarea, select");if(_.each(a,function(e){var t,r,n,i,a=getInputType$1(e);isSupportedInputs(a)&&!dom.isPIINode(e)&&(t=e.type||"unnamed",r=e.value,isTextInputs(a)?void 0===e.value||""===e.value||dom.isCreditcardInput(e,e.value)||(o["input_"+t]=(r+"").substring(0,255)):"radio"===a?e.checked&&(o.radio=e.value):"checkbox"===a?e.checked&&r&&(o[n="checkbox"]?o[n].push(r):o[n]=[r]):"select"!==a||(i=Array.from(e.querySelectorAll("option:checked"),function(e){return e.value.substring(0,255)}))&&0<i.length&&(o.select=i))}),t&&t.dataType&&_.isArray(t.dataType)&&_.inArray("userProperty",t.dataType)){var s=[{property:_extends({},t,{dataType:t.dataType.filter(function(e){return"userProperty"!==e})}),data:o}];return o.input_email&&s.push({property:_extends({},t,{dataType:["userProperty"]}),data:{email:o.input_email}}),s}return o}var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(e){this.message=e}function polyfill(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,a=0,o="";n=t.charAt(a++);~n&&(r=i%4?64*r+n:n,i++%4)&&(o+=String.fromCharCode(255&r>>(-2*i&6))))n=chars.indexOf(n);return o}InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError";var atob="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||polyfill;function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var base64_url_decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return b64DecodeUnicode(t)}catch(e){return atob(t)}};function InvalidTokenError(e){this.message=e}InvalidTokenError.prototype=new Error,InvalidTokenError.prototype.name="InvalidTokenError";var lib=function(e,t){if("string"!=typeof e)throw new InvalidTokenError("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(base64_url_decode(e.split(".")[r]))}catch(e){throw new InvalidTokenError("Invalid token specified: "+e.message)}},InvalidTokenError_1=InvalidTokenError;function normalizeStr(e){return e&&_.isString(e)?e.replace(/\u00a0/g," "):e}function getRegEx(e){return e instanceof Array||(e=[e]),new RegExp(e[0])}lib.InvalidTokenError=InvalidTokenError_1;var subdomainRegex=/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/i;function getObjectProperty(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window;if(!e)return r;if(!t)return r;if("object"===(void 0===e?"undefined":_typeof(e)))return getObjectPropertyValue(e,t,r);if("location"===e)return getLocationPropertyValue(t,n)||r;if("localStorage"===e||"sessionStorage"===e)return getStoragePropertyValue(e,t,n)||r;if("cookie"===e)return getCookieValue(t,n)||r;if("variable"===e)return getObjectPropertyValue(n,t,r);if("subdomain"!==e)return"domain"===e?n.document.location.hostname:_.get(n[e],t,r);var i=n.document.location.hostname,a=i.match(subdomainRegex);return null!==a?a[1]:i}function getArrayObject(e,t){var r=t.arrayName,n=t.arrayIndex,i=_.get(e,r,{});return _.isArray(i)&&0!==i.length?("last"===n&&(n=i.length-1),i[n]):{}}function getObjectPropertyValue(e,t,r){_.isObject(t)&&t.type&&"array"===t.type&&(e=getArrayObject(e,t),t=t.arrayItem);var n=_.get(e,t,r);if(_.isArray(n)||_.isString(n)||_.isNumber(n))return n;if(_.isObject(n)){for(var i=[],a=Object.keys(n),o=0;o<Math.min(constants.storage.MAX_PROPERTIES,a.length);o++){var s,c=a[o],l=n[c];(_.isString(l)||_.isNumber(l))&&(s=(c+":"+l).substring(0,255),i.push(s))}return i}return JSON.stringify(n)}function getLocationPropertyValue(e,t){t=t||window;var r=e.split("."),n=r[0];if("search"!==n)return"hash"===n?2===r.length?browser$1.getHashParam(t.location.hash||"",r[1]):t.location.hash:t.location[n];if(2<=r.length){var i,a="";try{(a=browser$1.getQueryParam(t.location.search||"",r.slice(1).join(".")))||(i=JSON.parse(browser$1.getQueryParam(t.location.search||"",r[1])),a=_.get(i,r.slice(2).join(".")))}catch(e){a=""}return a}return t.location.search}function getCookieValue(e){if(_.isString(e))return Cookie.Get(e);if(_.isArray(e)){if(1===e.length)return Cookie.Get(e[0]);var t=Cookie.Parse(e[0]);return _.get(t,e.slice(1))}if(_.isObject(e)&&e.name){var r=e.name;try{var n=Cookie.Get(r),i="",i=e.encode?decode(e.encode,n):JSON.parse(n);return e.path?getObjectPropertyValue(i,e.path,""):getObjectPropertyValue(i,e,"")}catch(e){return null}}return null}function decode(e,t){try{return"jwt"===e?lib(t):t}catch(e){return{}}}function getStoragePropertyValue(e,t){if(_.isString(t)&&(t=[t]),_.isArray(t)&&0<t.length){var r=t[0],n=(n=window[e][r])&&decodeURIComponent(n);if(1===t.length)return n;try{var i=JSON.parse(n);return _.get(i,t.slice(1))}catch(e){return null}}else if(_.isObject(t)&&t.name){var a=(a=window[e][t.name])&&decodeURIComponent(a),o="";try{return o=t.encode?decode(t.encode,a):JSON.parse(a),t.path?getObjectPropertyValue(o,t.path):getObjectPropertyValue(o,t)}catch(e){return null}}}var propertyHandlerMap={aurycJSErrorHanlder:handleJSError,aurycOptimizelyHandler:handleOptimizely,aurycFormHandler:handleForm};function getPropertyHandler(e){var t=void 0;return e&&(t="function"==typeof e?e:propertyHandlerMap[e]),t=t||defaultPropertyHandler}function defaultPropertyHandler(e,n){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,r=void 0,a=void 0,o={},s=!1;return n.attribute?n.attribute instanceof Array?_.each(n.attribute,function(e){var t=selectValue(a=e.value,!0,i);!0===a.isList?o[e.name]=t:1===t.length?o[e.name]=t[0]:("userProperty"!==n.dataType&&"sessionProperty"!==n.dataType||(t="currency"===a.type||"number"===a.type?t.reduce(function(e,t){return e+t},0):t.join(",")),o[e.name]=t);var r=o[e.name];"true"===e.required&&(r&&_.isArray(r)&&(r=r.filter(function(e){return!_.isNil(e)})),o[e.name]=r),"true"===e.required&&0!==r&&(!r||_.isArray(r)&&0===r.length)&&(s=!0)}):(t=selectValue(a=n,!1,i),!0===a.isList?r=t:0<t.length&&(r=t[0])):r=!0,r&&(o[n.name||"_default_"]=r),s?null:o}function selectValue(i){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,a=[],r=[].concat(toConsumableArray(dom.querySelectorAll(t.document,i.cssSelector))).filter(function(e){return!dom.isPIINode(e)});return r.length&&(e||(r=[r[0]]),_.each(r,function(e,t){var r,n;!1!==i.visible&&!e.offsetParent||("string"==typeof(n=e[i.attribute]||!1===e[i.attribute]?e[i.attribute]:e.getAttribute(i.attribute))&&(n=n.trim())&&(n=normalizeStr(n),i.pattern&&(r=getRegEx(i.pattern),"currency"===i.type&&(n=n.replace(",","")),n=(n.match(r)||[])[0])),"currency"===i.type||"number"===i.type?acceptValue(n=n?+n:0,i)&&a.push(n):void 0!==n&&acceptValue(n,i)&&a.push(n))})),a}function acceptValue(e,t){if(!t.ignore)return 1;var r=t.ignore;if(void 0===r.value||r.value!==e){if(void 0!==r.pattern){var n=getRegEx(r.pattern);if(e.match(n))return}return 1}}var EventThrottler=(createClass(wSa,[{key:"reset",value:function(e,t){this.lastSent={},this.limit=t||constants.storage.AUTOCAPTURE_CUSTOM_EVENT_THROTTLE_LIMIT,this.throttleInterval=e||constants.record.throttler.AUTOCAPTURE_CUSTOM_EVENT_INTERVAL}},{key:"check",value:function(e,t){var r=this.lastSent[e];t=t||+new Date;var n=!1;return(void 0===r||t-r>this.throttleInterval)&&(n=!0),n&&Object.keys(this.lastSent).length<this.limit&&(this.lastSent[e]=t),n}}]),wSa);function wSa(e,t){classCallCheck(this,wSa),this.reset(e,t)}var eventThrottler=null;function getEventThrottler(e,t){return null===eventThrottler&&(eventThrottler=new EventThrottler(e,t)),eventThrottler}function sendCustomData(a,o){var s,c=2<arguments.length&&void 0!==arguments[2]||window,c=window,e="string"==typeof a.dataType?[a.dataType]:a.dataType,l=c.aurycBehaviorAPI||window.aurycBehaviorAPI;l?(s=function(e){getEventThrottler(a.throttle).check(e.name)&&l.track(e.name,e.attributes||{})},_.each(e,function(e){var r,t,n=void 0,i=void 0;"userProperty"===e?(n=l.addUserProperties,0<Object.keys(o).length&&(i=o)):"sessionProperty"===e?(n=l.addSessionProperties,0<Object.keys(o).length&&(i=o)):"identity"===e?(n=l.identify,i=o[a.identityKey||a.name||"_default_"]):"customEventMultiVal"===e?(n=s,i={name:a.nameOverride||a.name,attributes:o}):"customEvent"===e?(n=s,r={},t={},_.each(Object.keys(o),function(e){o[e]instanceof Array?r[e]=o[e]:t[e]=o[e]}),i=[],0<Object.keys(t).length&&i.push({name:a.nameOverride||a.name,attributes:t}),_.each(Object.keys(r),function(t){var e=r[t];_.each(e,function(e){i.push({name:a.name,attributes:defineProperty$2({},t,e)})})}),i.length||(i=null)):"eventProperty"===e&&(n=l.addEventProperties,0<Object.keys(o).length&&(i=o)),n&&i&&(i instanceof Array?_.each(i,function(e){_setDataValue(n,e,c)}):_setDataValue(n,i,c))})):console.warn("Auryc API not found")}var attempts=0;function _setDataValue(e,t){window.auryc&&e?e.call(window.aurycBehaviorAPI,t):window.aurycReadyCb?window.aurycReadyCb.push(function(){window.auryc&&e&&e.call(window.aurycBehaviorAPI,t)}):attempts++<=5&&window.setTimeout(function(){_setDataValue(e,t,window)},2e3)}function handleObjectProperty(n,i){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,o={};return i&&i.attribute&&i.object&&(i.attribute instanceof Array||(i.attribute=[i.attribute]),i.attribute.forEach(function(e){var t=e.value,r=selectValue$1("context"===i.object?n:i.object,t,e.name,a);!r&&0!==r||(o[e.name]=r)})),o}function handlePropertyName(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,n=t.name;if(n){if(_.isString(n))return n;if(_.isObject(n)&&n.value){var i=n.value,a=selectValue$1("context"===t.object?e:t.object,i,"",r);return a||0===a?a:JSON.stringify(n)}return JSON.stringify(n)}}function selectValue$1(e,t){var r,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window,i=void 0,a="";if(_.isString(t)||_.isArray(t))i=t;else{if(!_.isObject(t))return"";t.attribute?i=t.attribute:"array"!==t.type&&"object"!==t.type||(i=t)}try{(a=getObjectProperty(e,i,t.default,n))instanceof Array||(a=(a+"").trim()),!_.isObject(t)||"currency"!==t.datatype&&"number"!==t.datatype||(a=a?+a:0)}catch(e){return""}return a?(_.isObject(t)&&(t.pattern?(r=getRegEx(t.pattern),"currency"===t.type&&(a=a.replace(",","")),a=(a.match(r)||[])[0]):t.delim&&(a=a.split(t.delim).filter(function(e){return""!==e})),"currency"!==t.type&&"number"!==t.type||(a=a?+a:0)),a):""}function processCustomDataRule(i,e,a){var t=e.properties;_.each(t,function(e){var t,r,n;e.object?((t=handlePropertyName(i,e,a))&&(e.nameOverride=t),null!==(r=handleObjectProperty(i,e,a))&&sendCustomData(e,r)):null!==(n=getPropertyHandler(e.handler)(i,e,a))&&(_.isArray(n)?n.forEach(function(e){sendCustomData(e.property,e.data,a)}):sendCustomData(e,n,a))})}function getEventHandler(t,e){var r=arguments,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;return 0<=e.timeout?function(){setTimeout(function(){return processCustomDataRule(r,t,n)},e.timeout)}:(t.eventHandler||(t.eventHandler=function(e){processCustomDataRule(e,t,n)}),t.eventHandler)}var no_of_clicks=5,time$1=3,click_events=[],possible_click=5,radius=100;function detectXClicks(e,t){var r=click_events.length-1,n=(click_events[r].time.getTime()-click_events[r-e+1].time.getTime())/1e3;if(t<n)return null;for(var i=0,a=r-e+1;a<r;a++)for(var o=a+1;o<=r;o++){var s=Math.round(Math.sqrt(Math.pow(click_events[a].event.clientX-click_events[o].event.clientX,2)+Math.pow(click_events[a].event.clientY-click_events[o].event.clientY,2)));if(i<s&&(i=s),radius<s)return null}return{clicks:e,range:i,period:n}}function removeUsedClickPoints(e){click_events.splice(click_events.length-e,e)}var rageClick=function(r){return function(e){var t;click_events.push({event:e||window.event,time:new Date}),click_events.length>possible_click&&click_events.splice(0,click_events.length-possible_click),5<=click_events.length&&(null!=(t=detectXClicks(no_of_clicks,time$1))&&(removeUsedClickPoints(5),r(t)))}},map={rageClick:rageClick};function getListener(e){return map[e]}function setupCutomDataCollection(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=arguments[1],e=e||window;(t=t||getConfig$1())&&collectCustomData(t,null,null,e)}function collectCustomData(e,t,r,n){n=n||window,_.each(e,function(e){!contextMatch(e.context,n)||t&&!e.dynamic||_processCustomDataRules(e,r,n)})}function _processCustomDataRules(o,s,c){var e=o.triggers;s=s||c.document,e?_.each(e,function(r){if(r.event){var e=[],t=r.object?getObject(r.object,null,c):null;if(t)e.push(t);else if(r.cssSelector){var n=dom.querySelectorAll(s,r.cssSelector);if(!n.length)return void(o.dynamic=!0);e=[].slice.call(n)}var i=getListener(r.listener),a=getEventHandler(o,r,c);i&&(a=i(a)),_.each(e,function(e){var t=config.isTrackConsoleEnabled();if("error"===r.event&&"window"===r.object&&t)return!1;e.addEventListener(r.event,a)})}else 0<=r.timeout&&setTimeout(function(){return processCustomDataRule(null,o,c)},r.timeout)}):processCustomDataRule(null,o,c)}function getConfig$1(){return config.getConfig("userProperties","behavior")}function contextMatch(e,t){if(!e)return 1;var r=e.url,n=e.cssSelector,i=objectWithoutProperties(e,["url","cssSelector"]);if(!r&&!n)return 1;if(!(r&&t.location.href.toLowerCase().indexOf(r.toLowerCase())<0)){if(n){var a=void 0;try{if(!(a=dom.querySelectorAll(t.document,n)).length)return}catch(e){return}var o=a[0];if(i)for(var s=Object.keys(i),c=0;c<s.length;c++){var l=s[c];if("minHeight"===l&&void 0!==o.offsetHeight){if(o.offsetHeight<+i[l])return}else if("minWidth"===l&&void 0!==o.offsetWidth){if(o.offsetWidth<+i[l])return}else if(!o[l]||i[l]&&o[l].indexOf(i[l])<0)return}}return 1}}function getObject(e,t){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,n=t||r,i=e.split("."),a=0;n&&a<i.length;)n=n[i[a]],a++;return n}var userProperty={setupCutomDataCollection:setupCutomDataCollection,collectCustomData:collectCustomData},RcDomChangeMonitor=(createClass(MUa,[{key:"exceedLimit",value:function(){return this.childCharMutsLimitEnabled&&this.childCharMutsLimit}},{key:"updateLimit",value:function(e){this.childCharMutsLimitEnabled&&(this.childCharMutsCnt>this.childCharMutsCntLimit?this.setLimit():this.childCharMutsCnt++,e&&e.innerHTML&&(this.childCharMutsLength+e.innerHTML.length>this.childCharMutsSizeLimit?this.setLimit():this.childCharMutsLength+=e.innerHTML.length))}},{key:"setLimit",value:function(){this.childCharMutsLimitEnabled&&(this.childCharMutsLimit=!0)}},{key:"resetState",value:function(){var e;this.childCharMutsLimitEnabled&&(e=config.getConfig("mutation","record")||{},this.childCharMutsLimitEnabled=!0===e.throttled,this.childCharMutsLimitEnabled&&(this.mutationWl.some(function(e){return-1<document.location.href.indexOf(e)})&&(e.maxNum*=10,e.maxSize*=10),this.childCharMutsCntLimit=e.maxNum||constants.record.throttler.DOM_MUT_MAX_NUM,this.childCharMutsSizeLimit=e.maxSize||constants.record.throttler.DOM_MUT_MAX_SIZE,this.childCharMutsCnt=0,this.childCharMutsLength=0,this.childCharMutsLimit=!1))}},{key:"resetCounter",value:function(){this.childCharMutsLimitEnabled&&(this.childCharMutsCnt=0,this.childCharMutsLength=0)}},{key:"ignoreScriptOnlyMut",value:function(e){for(var t=0;t<e.removedNodes.length;t++){var r=e.removedNodes[t];if(r.nodeName&&"script"!==r.nodeName.toLowerCase()&&"#comment"!==r.nodeName.toLowerCase())return!1}for(var n=0;n<e.addedNodes.length;n++){var i=e.addedNodes[n];if(i.nodeName&&"script"!==i.nodeName.toLowerCase()&&"#comment"!==i.nodeName.toLowerCase())return!1}return!0}},{key:"checkSalesforceScript",value:function(e){return!!e&&0!==e.addedNodes.length&&void(config.checkSalesforceAuraJS(e.addedNodes)&&this.resetAttachShadow())}},{key:"ignoreInvalidMut",value:function(e){if(!e)return!0;if(e.target.nodeType===Node.TEXT_NODE||dom.isShadowRoot(e.target))return!1;if(0===e.removedNodes.length&&0===e.addedNodes.length)return!0;if(this.ignoreScriptOnlyMut(e))return!0;if(1===e.addedNodes.length){var t=e.target,r=e.addedNodes[0];if(t.nodeName&&"head"===t.nodeName.toLowerCase()&&r.nodeName&&"style"===r.nodeName.toLowerCase()){var n=r.getAttribute("id")||r.id;if(n&&10<t.querySelectorAll('style[id="'+n+'"]').length)return!0}}return!1}},{key:"delayedProcess",value:function(o,e,t,r){var n,i,a,s,c,l=this;o&&(dom.isShadowRoot(o)||o.nodeType===Node.ELEMENT_NODE||(o=o.parentNode),o&&(o._arMutProp||(o._arMutProp="_"+this.mutNodeIdx++),(n=globalCacheObj.getMappingNode(o))&&(i=n.path,a=n.deweyId,this.mutationBl.some(function(e){return i===e})||(s={delayedFn:t,node:o,index:this.evtProcessIndex++,isAttrChange:r,path:i,deweyId:a,time:e||_.now()},dom.isNodeInShadowDom(o)&&(s=_extends({},s,{inShadowDom:!0,isShadowRoot:dom.isShadowRoot(o),shadowRoot:o.getRootNode()})),c=o._arMutProp+(r?r.toLowerCase():""),(0===this.mutsToProcess.length||this.prevMutNode&&!!this.prevMutNode.inShadowDom!=!!s.inShadowDom)&&this.mutsToProcess.push({}),this.mutsToProcess[this.mutsToProcess.length-1][c]=s,this.prevMutNode=s,r||this.updateLimit(o),this.blocked||(this.blocked=!0,this.timeOffsetBaseTime=_.now(),setTimeout(function(){try{for(var e=0;e<l.mutsToProcess.length;e++){var t=l.mutsToProcess[e],r=Object.keys(t);if(0<r.length&&l.processor.isActive())for(var n=l.groupNodes(t),i=0;i<n.length;i++){var a=n[i];a.delayedFn.call(l,a.node,a.time),delete o._arMutProp}}}catch(e){}l.mutsToProcess=[],l.prevMutNode=null,l.duplicateStyle={},l.resetCounter(),l.blocked=!1},this.processingDelay))))))}},{key:"groupNodes",value:function(e){var n=[],t={},r={},i={},a={},o=[];for(var s in e){var c,l=e[s];l.isAttrChange?i[s]=l:l.inShadowDom?(c=globalCacheObj.getMappingNode(l.shadowRoot))&&c.deweyId&&(a[c.deweyId]||(a[c.deweyId]={},o.push(c.deweyId)),a[c.deweyId][l.deweyId]=l):-1<l.deweyId.indexOf(this.bodyPath)?r[l.deweyId]=l:-1<l.deweyId.indexOf(this.headPath)&&(t[l.deweyId]=l),delete l.node._arMutProp}n=n.concat(this.findCommonAncestor(t),this.findCommonAncestor(r));var g=[];if(0<o.length){o=o.sort(function(e,t){return e.split(".").length-t.split(".").length});for(var u=0;u<o.length;u++){for(var d=this.findCommonAncestor(a[o[u]]),h=g.length-1;0<=h;h--)if(-1<d[0].deweyId.indexOf(g[h].deweyId)){d[0].time<=g[h].time&&(d[0].time=g[h].time+1);break}g=g.concat(d)}n=n.concat(g)}var p=[];for(var f in i)!function(t){var r=i[t].deweyId;n.some(function(e){return e.maxIndex?_.startsWith(r,e.deweyId)&&"."===r.charAt(e.deweyId.length)&&i[t].index<e.maxIndex:_.startsWith(r,e.deweyId)&&"."===r.charAt(e.deweyId.length)&&i[t].index<e.index})||p.push(i[t])}(f);return n=n.concat(p).sort(function(e,t){return e.deweyId.split(".").length-t.deweyId.split(".").length})}},{key:"findMinMaxNode",value:function(e){var t=2147483647,r=null,n=-1,i=null;for(var a in e){var o=e[a];o.index<t&&(t=o.index,r=o),o.index>n&&(n=o.index,i=o)}return{minIndex:t,maxIndex:n,minNodeWrapper:r,maxNodeWrapper:i}}},{key:"findCommonAncestor",value:function(e){var t=[];if(1<Object.keys(e).length&&config.isBatchProcessingMutationEnabled()){var r=Object.keys(e),n=dom.findCommonPrefix(r);if(n){var i=this.findMinMaxNode(e),a=i.maxNodeWrapper.node,o=i.maxNodeWrapper.index,s=i.maxNodeWrapper.time,c=i.maxNodeWrapper.delayedFn;if(n.prefix===this.headPath)a=this.processor.getHead();else if(n.prefix===this.bodyPath)a=this.processor.getBody();else for(var l=i.maxNodeWrapper.deweyId.split(".").length,g=n.prefix.split(".").length,u=0;u<l-g&&!dom.isShadowRoot(a);u++)a=a.parentNode;t.push({delayedFn:c,node:a,index:o,maxIndex:i.maxIndex,minIndex:i.minIndex,deweyId:n.prefix,time:s})}else for(var d in e)t.push(e[d])}else for(var h in e)t.push(e[h]);return t}},{key:"isMutationWhitelist",value:function(){}},{key:"isMutationBlackList",value:function(){var e=getInstance(),t=this.mutBlacklist,r=t.urls||[],n=(t.browser_cutoff||{})[e.browser.name],i=window.location.href;if(n&&e.browser.version<n)for(var a=0;a<r.length;a++)if(-1!==i.indexOf(r[a]))return!0;if(!(r=this.mutExclude.urls))return!1;if(_.isArray(r)){for(var o=0;o<r.length;o++)if(-1!==i.indexOf(r[o]))return!0}else r=[r];return!1}},{key:"isProcessingAttr",value:function(e,t,r,n){return!(!e||!t||r===n||"style"===t&&n&&-1!==n.indexOf("display: none")&&r&&-1!==r.indexOf("display: none")||"tabindex"===t||2<=t.length&&"on"===t.substr(0,2)||"value"===t&&dom.isSecret(e)||_.inArray(t,constants.record.mutatationConfig.ignoreAttrList)||_.inArray((e.nodeName||"").toLowerCase(),config.getIgnoreNodeContentsList())||"value"===t&&e.nodeType===Node.ELEMENT_NODE&&"input"===e.nodeName.toLowerCase()&&"hidden"===e.type||"id"===t&&null===n)}},{key:"processAttrMutEvent",value:function(e,i,t){var a,r,o,s,c=this;this.isMutationBlackList()||(this.exceedLimit()?this.limitNotified||(window.auryc.addInternalSessionProperties({perfOpt:!0}),this.limitNotified=!0):(a=e.target.getAttribute(e.attributeName),r=e.oldValue,o=e.attributeName,s=e.target,this.isProcessingAttr(s,o,r,a)&&globalCacheObj.getMappingNode(s)&&this.delayedProcess(s,t,function(e,t){e=e||s;var r,n={};n.k=o,n.v=a,n.x=c.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e,o),c.processor),n._to=t,"class"!==o&&"style"!==o||getPIIHandler().updateBoundingRect(e),"style"===o?(r=e.style||e.getAttribute("style"))&&(n.v=_.isDefined(r.cssText)?r.cssText:""):"disabled"===o&&(n.v=""===a),c.eventWriter.append(EventType.PropChangeT(),n,i),"src"===o&&s.tagName&&"iframe"===s.tagName.toLowerCase()&&s.parentNode&&s.parentNode.nodeType===Node.ELEMENT_NODE&&(s._arB=!1,c.processor.updateIframeIndex(s),c.processor.notifyDomUpdated(s.parentNode))},o)))}},{key:"overrideAttachShadow",value:function(){if(config.isShadowDOMEnabled(this.processor.getWinObj())){var e=this.processor.getDocObj().head;if(e){var t=e.querySelectorAll("script");if(config.checkSalesforceAuraJS(t))return}var r=this.processor.getWinObj().HTMLElement.prototype.attachShadow,n=this;r&&(this.processor.getWinObj().HTMLElement.prototype.attachShadow=function(){var e=r.apply(this,arguments);try{arguments&&arguments[0]&&"auryc"!==arguments[0].source&&n.mutProcessor.observe(e,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0})}catch(e){}return e},this.processor.getWinObj().HTMLElement.prototype.attachShadow.aurycName="_ar_attach_shadow",this.shadowDOMOverride=!0)}}},{key:"resetAttachShadow",value:function(){var e=this.processor.getWinObj().HTMLElement.prototype.attachShadow||{aurycName:""};this.shadowDOMOverride&&-1!==e.aurycName.indexOf("_ar_attach_shadow")&&(delete this.processor.getWinObj().HTMLElement.prototype.attachShadow,this.shadowDOMOverride=!1)}},{key:"registerMutationEvents",value:function(r){var n=this;if(!globalSessionTracker.isCanceled()){var e=r.getDocObj().getElementsByTagName("html")[0];globalCacheObj.setUp(e,this),this.mutProcessor=new MutationObserver(function(e){var t;globalSessionTracker.isCanceled()||(t=_.now(),e.forEach(function(e){"attributes"===e.type?n.processAttrMutEvent(e,r,t):("childList"===e.type||"characterData"===e.type&&e.target.nodeType===Node.TEXT_NODE)&&n.handleChildCharMut(e,r,t)}))}),this.mutProcessor.observe(r.getDocObj(),{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0});var t=this;dom.traverse(function(e){dom.isShadowRoot(e)&&t.mutProcessor.observe(e,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0})},r.getDocObj(),NodeFilter.SHOW_ELEMENT,null,!0);try{this.overrideAttachShadow()}catch(e){}}}},{key:"setupCustomConfig",value:function(){config.getConfig("userProperties","behavior")&&(this.customDataDefs=config.getConfig("userProperties","behavior"))}},{key:"handleChildCharMut",value:function(e,m,t){var b=this,C=dom.getEventTarget(e);if(dom.isShadowRoot(C)&&globalCacheObj.mappingNode(C),this.checkSalesforceScript(e),!this.isMutationBlackList()&&!this.ignoreInvalidMut(e))if(this.exceedLimit())this.limitNotified||(window.auryc.addInternalSessionProperties({perfOpt:!0}),this.limitNotified=!0);else{for(var r=0;r<e.removedNodes.length;r++)globalCacheObj.removeMappingNode(e.removedNodes[r]);for(var n=0;n<e.addedNodes.length;n++)globalCacheObj.mappingNode(e.addedNodes[n],C);var i=C.tagName?C.tagName.toLowerCase():"";C.nodeType===Node.ELEMENT_NODE&&(C.getAttribute("_ar_hide_")||_.inArray(i,config.getIgnoreNodeContentsList()))||this.delayedProcess(C,t,function(e,t){try{if(e&&(C=e),!C)return;dom.isShadowRoot(C)||C.nodeType===Node.ELEMENT_NODE||(C=C.parentNode);var r=C.tagName?C.tagName.toLowerCase():"";r===constants.record.tags.SELECT&&C._arIM&&C._arIM.processCurrElem();var n=globalCacheObj.getNodeXPath(C);if(n[0].indexOf("html")<0)return;var i=getPIIHandler().tagDynamic(C,b.processor.getDocObj()),a=void 0;getLinkIdHandler().process();for(var o=C.nodeName.toLowerCase(),s=C.querySelectorAll('img[src*="data:image"]'),c=!1,l=0;l<s.length;l++){var g=s[l];if(g.alt&&g.alt.length>constants.record.throttler.IMG_SRC_LENGTH||g.src&&g.src.length>constants.record.throttler.IMG_SRC_LENGTH){c=!0;break}}"style"===r&&"function"==typeof C.hasAttribute&&C.hasAttribute("data-dynamic-styles-ar")||getStyledComponentHandler().processDynamicCss(m.getDocObj(),C),getSerializeStyleImageHandler().serializeImage(C,[]);var u=null;if(c){u=dom.cloneDomNode(C),s=dom.querySelectorAll(u,'img[src*="data:image"]');for(var d=0;d<s.length;d++){var h=s[d];h.alt&&h.alt.length>constants.record.throttler.IMG_SRC_LENGTH&&h.setAttribute("alt",""),h.src&&h.src.length>constants.record.throttler.IMG_SRC_LENGTH&&h.setAttribute("src","")}}if("style"===o)a=DomSerialize.getInstance().handleDomHTML((u||C).outerHTML,n);else if("head"===o)a=DomSerialize.getInstance().handleDomHTML((u||C).outerHTML,n);else if("true"===i){getPIIHandler().addMaskAttributeToTags(m.getDocObj());var p=u||dom.cloneDomNode(C);getPIIHandler().processMaskElement(p,m.getDocObj()),getPIIHandler().processHiddenElement(p,m.getDocObj()),getPIIHandler().processAttribute(p),a="body"===o?DomSerialize.getInstance().handleDomHTML(p.outerHTML,n):DomSerialize.getInstance().handleDomHTML(p.innerHTML,n)}else if("false"===i){var f=C;getPIIHandler().isAttributeProcessRequired(m.getDocObj())&&(f=u||dom.cloneDomNode(C),getPIIHandler().processAttribute(f)),a="body"===o?DomSerialize.getInstance().handleDomHTML(f.outerHTML,n):DomSerialize.getInstance().handleDomHTML(f.innerHTML,n)}else if("skip"===i)return;if(!a)return;var I={};I.x=b.eventWriter.updateNodeDict(n,b.processor),I.dom=a,I.v="",I._to=t,globalSessionTracker.isSpaSendPV()&&(I.pvid=globalSessionTracker.getPV()),b.eventWriter.append(EventType.MutNodeTextT(),I,m),b.processor.notifyDomUpdated(C),b.processor.trackNodeDictionary(),b.customDataDefs.length&&userProperty.collectCustomData(b.customDataDefs,!0,C,b.processor.getWinObj())}catch(e){}})}}}]),MUa);function MUa(e){if(classCallCheck(this,MUa),this.processor=e,this.customDataDefs=[],this.eventWriter=EventWriter.getInstance(),this.headPath="",this.bodyPath="",this.shadowDOMOverride=!1,this.setupCustomConfig(),this.mutBlacklist=config.getPerfBlacklist(),this.mutExclude=config.getMutExcludeList(),!this.isMutationBlackList())try{this.registerMutationEvents(this.processor)}catch(e){}this.mutNodeIdx=0,this.evtProcessIndex=0,this.blocked=!1,this.mutsToProcess=[],this.prevMutNode=null,this.duplicateStyle={};var t=config.getConfig("mutation","record")||{};this.mutationBl=(t.ignore||"").split(","),this.mutationWl=(t.allowUrl||"").split(","),this.processingDelay=t.delay||constants.record.throttler.DOM_MUT_DELAY,this.timeOffsetBaseTime=0,this.childCharMutsCnt=0,this.childCharMutsLength=0,this.childCharMutsLimit=!1,this.limitNotified=!1,this.mutationWl.some(function(e){return-1<document.location.href.indexOf(e)})&&(t.maxNum*=10,t.maxSize*=10),this.childCharMutsCntLimit=t.maxNum||constants.record.throttler.DOM_MUT_MAX_NUM,this.childCharMutsSizeLimit=t.maxSize||constants.record.throttler.DOM_MUT_MAX_SIZE;var r=t.deviceTypes;r&&-1===r.indexOf(getInstance().getDT())?this.childCharMutsLimitEnabled=!1:this.childCharMutsLimitEnabled=!0===t.throttled}function getRequestProp(e,t){return t?_.get(e,"_auryc_xhr_request_["+t+"]",""):_.get(e,"_auryc_xhr_request_",{})}function setupAjaxProxy(e,t){if(!(t=t||window).NREUM){try{t.XMLHttpRequest&&!t._auryc_xhr_&&(t._auryc_xhr_=!0,proxyXhr(e,t))}catch(e){}try{if(t.fetch&&!t._auryc_fetch_)return t._auryc_fetch_=!0,void proxyFetch(e,t)}catch(e){}}}function handleErrorEvent(e,t,r){setAurycState(e,"error",t),r.processApiCall(e)}function initAurycState(e){e._auryc_xhr_request_||(e._auryc_xhr_request_={header:{},body:"",time:"",method:"",url:"",type:"xhr",error:""})}function setAurycState(e,t,r,n){e._auryc_xhr_request_||initAurycState(e),n?e._auryc_xhr_request_[t][n]=r:e._auryc_xhr_request_[t]=r}function proxyXhr(t,e){function r(){var e=new n;return _.wrapObjectPropertyValue(e,"setRequestHeader",function(){setAurycState(this,"header",arguments[1],arguments[0])}),_.wrapObjectPropertyValue(e,"send",function(){arguments[0]&&setAurycState(this,"body",arguments[0])}),_.wrapObjectPropertyValue(e,"open",function(){arguments[0]&&setAurycState(this,"method",arguments[0]),arguments[1]&&setAurycState(this,"url",arguments[1])}),e.addEventListener("readystatechange",function(){1===this.readyState?setAurycState(this,"time",_.now()):4===this.readyState&&t.processApiCall(this)}),e.addEventListener("error",function(){handleErrorEvent(this,"error",t)}),e.addEventListener("abort",function(){handleErrorEvent(this,"abort",t)}),e.addEventListener("timeout",function(){handleErrorEvent(this,"timeout",t)}),e}var n=e.XMLHttpRequest;r.prototype=n.prototype,e.XMLHttpRequest=r}function proxyFetch(o,e){var s=e.fetch;e.fetch=function(i,a){return new Promise(function(t,r){var n=null;try{_.isString(i)?(n=new Request(i,a)).time=_.now():n=null}catch(e){n=null}s(i,a).then(function(e){t(e);try{n&&processFetchResponse(o,n,e.clone(),a)}catch(e){}}).catch(function(e){r(e);try{var t;n&&(t={status:"4xx-5xx",url:i,error:{message:e.message,name:e.name,fileName:e.fileName||"",lineNumber:e.lineNumber||0,columnNumber:e.columnNumber||0,stack:e.stack}},processFetchResponse(o,n,t,a))}catch(e){}})})}}function processFetchResponse(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(r){var i={_auryc_xhr_request_:{time:e.time,type:constants.ajax_proxy.type.fetch,method:e.method,header:e.headers,url:r.url,body:e.body||n.body,error:""},status:r.status,responseURL:r.url?r.url:"",responseSize:0,header:r.headers};if(r.error)return i.responseText=r.error,i._auryc_xhr_request_.error="error",void t.processApiCall(i);var a=r&&r.headers&&r.headers.get("content-type")||"";if(-1!==a.indexOf("json")||-1!==a.indexOf("text/plain"))try{r.text().then(function(e){i.responseText=e,i.responseSize=e.length,t.processApiCall(i)}).catch(function(e){t.processApiCall(i)})}catch(e){t.processApiCall(i)}else try{r.blob().then(function(e){i.responseText="{}",i.responseSize=e.size,t.processApiCall(i)}).catch(function(e){t.processApiCall(i)})}catch(e){t.processApiCall(i)}}}var $gtm={},_Ya;function aZa(e){return null==e?String(e):(e=_Ya.exec(Object.prototype.toString.call(Object(e))))?e[1].toLowerCase():"object"}function bZa(e,t){return Object.prototype.hasOwnProperty.call(Object(e),t)}function cZa(e){if(e&&"object"==aZa(e)&&!e.nodeType&&e!=e.window){try{if(e.constructor&&!bZa(e,"constructor")&&!bZa(e.constructor.prototype,"isPrototypeOf"))return}catch(e){return}for(var t in e);return void 0===t||bZa(e,t)}}function dZa(r,e,t){var n;this.b=r,this.f=e||function(){},this.d=!1,this.a={},this.c=[],this.e=(n=this,{set:function(e,t){hZa(gZa(e,t),n.a)},get:function(e){return n.get(e)}}),eZa(this,r,!t);var i=r.push,a=this;r.push=function(){var e=[].slice.call(arguments,0),t=i.apply(r,e);return eZa(a,e),t}}function eZa(e,t,r){for(e.c.push.apply(e.c,t);!1===e.d&&0<e.c.length;){if("array"==aZa(t=e.c.shift()))e:{var n=t,i=e.a;if("string"==aZa(n[0])){for(var a=n[0].split("."),o=a.pop(),n=n.slice(1),s=0;s<a.length;s++){if(void 0===i[a[s]])break e;i=i[a[s]]}try{i[o].apply(i,n)}catch(e){}}}else if("function"==typeof t)try{t.call(e.e)}catch(e){}else{if(!cZa(t))continue;for(var c in t)hZa(gZa(c,t[c]),e.a)}r||(e.d=!0,e.f(e.a,t),e.d=!1)}}function gZa(e,t){for(var r={},n=r,i=e.split("."),a=0;a<i.length-1;a++)n=n[i[a]]={};return n[i[i.length-1]]=t,r}function hZa(e,t){for(var r in e){var n;bZa(e,r)&&("array"==aZa(n=e[r])?("array"==aZa(t[r])||(t[r]=[]),hZa(n,t[r])):cZa(n)?(cZa(t[r])||(t[r]={}),hZa(n,t[r])):t[r]=n)}}window.DataLayerHelper?$gtm.DataLayerHelper=window.DataLayerHelper:(_Ya=/\[object (Boolean|Number|String|Function|Array|Date|RegExp)\]/,($gtm.DataLayerHelper=dZa).prototype.get=function(e){var t=this.a;e=e.split(".");for(var r=0;r<e.length;r++){if(void 0===t[e[r]])return;t=t[e[r]]}return t},dZa.prototype.flatten=function(){this.b.splice(0,this.b.length),this.b[0]={},hZa(this.a,this.b[0])});var isBuffer$1=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},flat=flatten;function flatten(e,g){var u=(g=g||{}).delimiter||".",d=g.maxDepth,h={};return function o(s,c,l){l=l||1,Object.keys(s).forEach(function(e){var t=s[e],r=g.safe&&Array.isArray(t),n=Object.prototype.toString.call(t),i=isBuffer$1(t),a=c?c+u+e:e;if(!r&&!i&&("[object Object]"===n||"[object Array]"===n)&&Object.keys(t).length&&(!g.maxDepth||l<d))return o(t,a,l+1);h[a]=t})}(e),h}function unflatten(s,c){var l=(c=c||{}).delimiter||".",g=c.overwrite||!1,u={};if(isBuffer$1(s)||"[object Object]"!==Object.prototype.toString.call(s))return s;function d(e){var t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||c.object?e:t}return Object.keys(s).sort(function(e,t){return e.length-t.length}).forEach(function(e){for(var t=e.split(l),r=d(t.shift()),n=d(t[0]),i=u;void 0!==n;){var a=Object.prototype.toString.call(i[r]),o="[object Object]"===a||"[object Array]"===a;if(!g&&!o&&void 0!==i[r])return;(g&&!o||!g&&null==i[r])&&(i[r]="number"!=typeof n||c.object?{}:[]),i=i[r],0<t.length&&(r=d(t.shift()),n=d(t[0]))}i[r]=unflatten(s[e],c)}),u}flatten.flatten=flatten,flatten.unflatten=unflatten;var DataLayer$1=(createClass(I$a,[{key:"tryEnable",value:function(e,t){var r=this,n=1<arguments.length&&void 0!==t?t:window,i=(0<arguments.length&&void 0!==e?e:null)||config.getConfig("gtm_datalayer","behavior");if(!i||!0!==i.enabled)return!1;if(!this.checkSampling(i.sampling,n))return!1;if(this.enabled)return!1;this.enabled=!0,this.eventConfig=i.events||{},this.eventPrefix=this.eventConfig.prefix?this.eventConfig.prefix+"_":"",this.eventConfig.names=this.eventConfig.names||[],this.eventWhitelist=this.getRegex(this.eventConfig.names.filter(function(e){return _.isString(e)})),this.namedEventWhiteList=[],this.eventConfig.names.forEach(function(e){if(_.isObject(e)&&e.name&&e.matches)try{r.namedEventWhiteList.push(_extends({},e,{regex:new RegExp(e.matches+"","i")}))}catch(e){}}),this.eventPropertyWhitelist=this.getRegex(this.eventConfig.properties||[]),this.sessionConfig=i.session||{},this.sessionPrefix=this.sessionConfig.prefix?this.sessionConfig.prefix+"_":"",this.sessionPropertyWhitelist=this.getRegex(this.sessionConfig.properties||[]),this.userConfig=i.user||{},this.userPrefix=this.userConfig.prefix?this.userConfig.prefix+"_":"",this.userPropertyWhitelist=this.getRegex(this.userConfig.properties||[]);var a=i.dlVarName||"dataLayer";return window[a]=window[a]||[],this.dlHelper=new $gtm.DataLayerHelper(window[a],this.listener,!0),!0}},{key:"getRegex",value:function(e){var n={};return _.isArray(e)?n[this.defaultPropertyKey]=e:n=e,_.each(Object.keys(n),function(e){var t=n[e],r=[];_.each(t,function(e){try{r.push(new RegExp(e+"","i"))}catch(e){}}),0<r.length&&(n[e]=r)}),n}},{key:"checkSampling",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:window;if(void 0===e||100===e||"true"===r.localStorage.auryc_dl_enabled)return!0;if(0===e)return!1;var n="auryc.gtm_dl",i=this.sessionStorage.getByKey(n);if(i)return"t"===i;var a=100*Math.random()<e;return this.sessionStorage.setByKey(n,a?"t":"f"),a}},{key:"isValidValue",value:function(e){return void 0!==e&&""!==e}}]),I$a);function I$a(){var l=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;classCallCheck(this,I$a),this.listener=function(e,t){var r;globalSessionTracker.isCanceled()||(r=flat(t),l.sendCustomEvent(r),l.sendUserProp(r),l.sendSessionProp(r))},this.matchList=function(e,t,r){if(!e||!t)return!1;for(var n=t[l.defaultPropertyKey]||[],i=0;i<n.length;i++){var a=n[i];if(e.match(a))return!0}if(!r)return!1;n=t[r]||[];for(var o=0;o<n.length;o++){var s=n[o];if(e.match(s))return!0}return!1},this.sendCustomEventUsingAllEntries=function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window,r=Object.keys(t),n=null,i=0;!n&&i<r.length;i++)for(var a=r[i],o=0;!n&&o<l.namedEventWhiteList.length;o++){var s=l.namedEventWhiteList[o];a.match(s.regex)&&(n=s)}if(n){var c={};return _.each(Object.keys(t),function(e){l.matchList(e,l.eventPropertyWhitelist,n.name)&&l.isValidValue(t[e])&&(c[e]=t[e])}),0<Object.keys(c).length?e.aurycBehaviorAPI.track(l.eventPrefix+n.name,c):e.aurycBehaviorAPI.track(l.eventPrefix+n.name),!0}},this.sendCustomEventMatchingEventEntries=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;if(!l.matchList(t.event,l.eventWhitelist))return!1;var r={};return _.each(Object.keys(t),function(e){l.matchList(e,l.eventPropertyWhitelist,t.event)&&l.isValidValue(t[e])&&(r[e]=t[e])}),0<Object.keys(r).length?e.aurycBehaviorAPI.track(l.eventPrefix+t.event,r):e.aurycBehaviorAPI.track(l.eventPrefix+t.event),!0},this.sendCustomEvent=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;l.sendCustomEventMatchingEventEntries(e,t),l.sendCustomEventUsingAllEntries(e,t)},this.sendUserProp=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window,r={};_.each(Object.keys(t),function(e){l.matchList(e,l.userPropertyWhitelist)&&l.isValidValue(t[e])&&(r[l.userPrefix+e]=t[e])}),0<Object.keys(r).length&&e.aurycBehaviorAPI.addUserProperties(r)},this.sendSessionProp=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window,r={};_.each(Object.keys(t),function(e){l.matchList(e,l.sessionPropertyWhitelist)&&l.isValidValue(t[e])&&(r[l.sessionPrefix+e]=t[e])}),0<Object.keys(r).length&&e.aurycBehaviorAPI.addSessionProperties(r)},this.dlHelper=null,this.eventWhitelist=[],this.propertyWhitelist=[],this.sessionStorage=e||DataLayer.getInstance(constants.symbols.SESSION),this.defaultPropertyKey="__shared__",this.enabled=!1}var gtmDataLayer=new DataLayer$1,AdobeExp=(createClass(S_a,[{key:"setLimit",value:function(e){this.limit=e}},{key:"tryEnable",value:function(){if(!this.win)return!1;if(this.adobeCfg=config.getConfig("adobe_analytics","behavior"),!this.adobeCfg||!0!==this.adobeCfg.enabled)return!1;if(!this.checkSampling(this.adobeCfg.sampling))return!1;if(this.enabled)return!0;this.enabled=!0,this.parseUrlFilter(),this.parseReportFilter(),this.parseSelectors();var e=this.tryRegister(this.win.document.location.href),t=this.tryRegisterDataLayer(this.win);return e||t}},{key:"parseSelectors",value:function(){var t=this;_.get(this.adobeCfg,"selectors.name",[]).forEach(function(e){t.selectors.name.push(new RegExp(e))}),_.get(this.adobeCfg,"selectors.payloads",[]).forEach(function(e){t.selectors.payloads.push(new RegExp(e))}),this.namePrefix=_.get(this.adobeCfg,"selectors.name_prefix","")}},{key:"parseReportFilter",value:function(){var t=this;_.get(this.adobeCfg,"filter.report_ids",[]).forEach(function(e){t.allowReportId.push(new RegExp(e))})}},{key:"parseUrlFilter",value:function(){var t=this;_.get(this.adobeCfg,"filter.allow_urls",[]).forEach(function(e){t.allowUrlsRegex.push(new RegExp(e))})}},{key:"checkSampling",value:function(e){if(void 0===e||100===e||"true"===window.localStorage.auryc_aa_enabled)return!0;if(0===e)return!1;var t="auryc.adobe_analytics",r=this.sessionStorage.getByKey(t);if(r)return"t"===r;var n=100*Math.random()<e;return this.sessionStorage.setByKey(t,n?"t":"f"),n}}]),S_a);function S_a(e){classCallCheck(this,S_a),_initialiseProps.call(this),this.win=e,this.enabled=!1,this.allowUrlsRegex=[],this.allowReportId=[],this.registerAttempts=0,this.datalayerRegisterAttempts=0,this.namePrefix="",this.selectors={name:[],payloads:[]},this.limit=20,this.sessionStorage=DataLayer.getInstance(constants.symbols.SESSION),this.types={lnk_o:"CUSTOM LINK",lnk_e:"EXIT LINK",lnk_d:"DOWNLOAD LINK",m_i:"MEDIA",m_s:"MEDIA"},this.dict={pageName:"Page Name",pageType:"Page Type",ch:"Site Section",server:"Server",g:"Current URL",events:"Events",purchaseID:"Purchase ID",products:"Products",xact:"Transaction ID",v0:"Campaign","h([0-9]{1,2})":"Hier","l([0-9]{1,2})":"List eVar","v([0-9]{1,3})":"eVar","c([0-9]{1,3})":"prop",zip:"Zip",tnt:"TnT Campaign",cc:"Currency Code",vid:"Manualy set visitor ID"}}var _initialiseProps=function(){var c=this;this.datalayerHandler=function(e){try{if(!c.passUrlFilter())return!1;var t=e.event,r=c.generateEvent(t,null);if(!r)return!1;r.payloads=r.payloads||{},e.eventInfo&&!_.isEmptyObject(e.eventInfo)&&(r.payloads=flat(e.eventInfo)),r.payloads[constants.symbols.INTEGRATION_FLAG]="adobe",(c.win.aurycBehaviorAPI||window.aurycBehaviorAPI).track(r.name,r.payloads)}catch(r){}},this.tryRegisterDataLayer=function(e){return e.adobeDataLayer&&e.adobeDataLayer.push&&"function"==typeof e.adobeDataLayer.push?(e.adobeDataLayer.push(function(e){e.addEventListener("adobeDataLayer:event",c.datalayerHandler)}),!0):c.datalayerRegisterAttempts++<=5&&(setTimeout(function(){return c.tryRegisterDataLayer(e)},1e3),!0)},this.tryRegister=function(e){return c.win.s&&"function"==typeof c.win.s.registerPostTrackCallback?(c.win.s.registerPostTrackCallback(c.handleTrackingUrl),!0):c.registerAttempts++<=5&&(setTimeout(function(){return c.tryRegister(e)},1e3),!0)},this.passUrlFilter=function(){if(!c.allowUrlsRegex||0===c.allowUrlsRegex.length)return!0;var t=c.win.document.location.href;return c.allowUrlsRegex.some(function(e){return t.match(e)})},this.passReportSuiteId=function(e){if(!c.allowReportId||0===c.allowReportId.length)return!0;var t=e.split("/"),r=t[8]?t[8].split("?")[0]:"";return!!r&&c.allowReportId.some(function(e){return r.match(e)})},this.handleTrackingUrl=function(e){try{if(!e)return;if(!c.passUrlFilter())return!1;if(!c.passReportSuiteId(e))return!1;var t=c.win.aurycBehaviorAPI||window.aurycBehaviorAPI,r=c.getVisitorId(e);r&&t.addUserProperties({adobe_visitor_id:r});var n=c.getEvents(e);return n&&0!==n.length?t?(n.slice(0,c.limit).forEach(function(e){e.payloads=e.payloads||{},e.payloads[constants.symbols.INTEGRATION_FLAG]="adobe",t.track(e.name,e.payloads)}),!0):(console.warn("Auryc API not found"),!1):!1}catch(e){}},this.passRegex=function(e,t,r){return 0===e.length?r:e.some(function(e){return t.match(e)})},this.getVisitorId=function(e){var t,r=e.split("?")[1]?e.split("?")[1]:"",n=r?r.split("&"):[],i={};for(var a in n){n.hasOwnProperty(a)&&(i[(t=n[a].split("="))[0]]=decodeURIComponent(t[1]))}return i.mid||i.aid||i.vid},this.getEvents=function(e){var t,r=e.split("?")[1]?e.split("?")[1]:"",n=r?r.split("&"):[],i={};for(var a in n){n.hasOwnProperty(a)&&(i[(t=n[a].split("="))[0]]=decodeURIComponent(t[1]))}return i.pe?c.handleLinkEvents(i):c.handleBeaconEvents(i)},this.handleLinkEvents=function(e){var t=[];if("CUSTOM LINK"!==(c.types[e.pe]||"Unknown"))return null;var r=e.pev2||e.pev3,n=c.getPayloads(e),i=c.generateEvent(r,n);return i&&t.push(i),t},this.handleBeaconEvents=function(e){var i=[],a=c.getPayloads(e);return(e.events||"").split(",").forEach(function(e){var t,r,n={};(n=-1<e.indexOf("=")?(t=e.split("="),c.generateEvent(t[0],_extends({},a,{value:+t[1]}))):-1<e.indexOf(":")?(r=e.split(":"),a.value=+r[1],c.generateEvent(r[0],_extends({},a,{value:+r[1]}))):c.generateEvent(e,_extends({},a)))&&!_.isEmptyObject(n)&&i.push(n)}),i},this.generateEvent=function(e,t){return c.passRegex(c.selectors.name,e,!0)?_.isEmptyObject(t)?{name:c.namePrefix+e}:{name:c.namePrefix+e,payloads:t}:null},this.getPayloads=function(e){var t,r,n,i={},a=c.selectors.payloads;for(var o in c.dict)if(c.dict.hasOwnProperty(o))for(var s in e){e.hasOwnProperty(s)&&s.match("^"+o+"$")&&(t=e[s],r="products"===o?c.getProducts(t):t,n=c.dict[o]+(c.dict[o].match(/Hier|eVar|prop/)?s.match(/[0-9]{1,3}/)[0]:""),c.passRegex(a,n,!1)&&(i[n]=r))}return i},this.getProducts=function(e){var t={0:"Category   : ",1:"Product    : ",2:"Quantity   : ",3:"Price      : ",4:"Events     : ",5:"eVars      : "},r="\n";e=e.split(",");for(var n=0;n<e.length;n++){r=r+(0===n?"":"\n")+"    #"+(n+1)+"\n";for(var i=e[n].split(";"),a=0;a<i.length;a++)i[a]&&(r+=a<=5?"    "+t[a]:"    ",r+=i[a]+"\n")}return r}},RcConsoleMonitor=(createClass(C1a,[{key:"reset",value:function(){console.log=this._originalLog,console.error=this._originalError,console.warn=this._originalWarn,console.info=this._originalInfo,this._originalLog=null,this._originalInfo=null,this._originalWarn=null,this._originalError=null,this.eventWriter=null,this.rcProcessor=null,this.cacheEvent={}}},{key:"resetState",value:function(){this.cacheEvent={},this.totalMsg=0,this.disabled=!1,this.paused=!1,browser$1.setItem("sessionStorage",constants.api.disable_console,"false")}},{key:"getEventProperties",value:function(){return superProperties.getSuperEventProperties(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT))}},{key:"truncateMsg",value:function(e,t){try{return e=e||"",_.isString(e)||(e=JSON.stringify(e)),e.length>t&&(e=e.substring(0,t),e+="..."),e}catch(e){return""}}},{key:"getExceedLimitMsg",value:function(e){return{l:"warn",m:"Number of messages reached the limit.",s:"",src:e.src,p:_extends({},e.p,{internal:!0})}}},{key:"addToCache",value:function(e,t){var r=this;if(100<=Object.keys(this.cacheEvent))for(var n=Object.keys(this.cacheEvent).sort(function(e,t){return r.cacheEvent[e]-r.cacheEvent[t]}),i=0;i<20;i++)delete this.cacheEvent[n[i]];this.cacheEvent[e]=t}},{key:"exceedLimit",value:function(){var e=this.totalMsg>constants.storage.MAX_DEV_CONSOLE_EVENT;return e&&(this.disabled=!0),e}},{key:"appendEvent",value:function(e,r){var t,n,i,a,o=this;this.disabled||(t=this.getEventProperties(),e.p=_extends({},e.p,t),n=encoder.hashCode(JSON.stringify(e)),i=_.now(),this.exceedLimit()?(a=this.getExceedLimitMsg(e),this.eventWriter.append(EventType.ConsoleT(),a,this.rcProcessor)):this.isExpired(n,i)&&(this.addToCache(n,i),this.eventWriter.append(EventType.ConsoleT(),e,this.rcProcessor),this.totalMsg++,this.rule&&this.rule.properties&&r&&this.rule.properties.forEach(function(e){var t=handleJSError(r,e,o.rcProcessor.getWinObj()||window,!0);null!==t&&sendCustomData(e,t)})))}},{key:"getValidPromiseReason",value:function(e){if(_.isString(e))return"Uncaught exception (in promise) "+e;try{return"Uncaught exception (in promise) "+JSON.stringify(e)}catch(e){return"Uncaught exception (in promise)"}}},{key:"trackPromiseErrors",value:function(){try{_.addEventListener(this.rcProcessor.getWinObj(),"unhandledrejection",this.unhandledrejectionHandler)}catch(e){}}},{key:"saveConsoleEvent",value:function(e,t){if(!globalSessionTracker.isCanceled()){var r=Array.prototype.slice.call(e).join(","),n="";if(config.isStackTraceEnabledForConsole())try{n=(new Error).stack}catch(e){}var i={l:t,m:this.truncateMsg(r,constants.storage.CONSOLE_MSG_LENGTH),s:this.truncateMsg(n,constants.storage.CONSOLE_MSG_STACKTRACE_LENGTH),src:browser$1.locationInfo(),p:{}};this.appendEvent(i)}}},{key:"trackConsole",value:function(){var e,t,r,n,i=this;void 0!==window.console&&(e=console.log,t=console.error,r=console.warn,n=console.info,console.error=function(){try{i.saveConsoleEvent(arguments,"error")}catch(e){}t.apply(console,arguments)},console.log=function(){try{i.saveConsoleEvent(arguments,"log")}catch(e){}e.apply(console,arguments)},console.warn=function(){try{i.saveConsoleEvent(arguments,"warn")}catch(e){}r.apply(console,arguments)},console.info=function(){try{i.saveConsoleEvent(arguments,"info")}catch(e){}n.apply(console,arguments)})}},{key:"pause",value:function(){console.log=this._originalLog,console.error=this._originalError,console.warn=this._originalWarn,console.info=this._originalInfo,_.removeEventListener(this.rcProcessor.getWinObj(),"error",this.windowErrorHandler),_.removeEventListener(this.rcProcessor.getWinObj(),"unhandledrejection",this.unhandledrejectionHandler),browser$1.setItem("sessionStorage",constants.api.disable_console,"true"),this.paused=!0}},{key:"resume",value:function(){this.paused&&(this.trackWindowErrors(),this.trackPromiseErrors(),this.trackConsole(),browser$1.setItem("sessionStorage",constants.api.disable_console,"false"),this.paused=!1)}}]),C1a);function C1a(e){var c=this;classCallCheck(this,C1a),this.windowErrorHandler=function(e){var t,r,n,i,a,o,s;globalSessionTracker.isCanceled()||(r=void 0===(t=e.filename)?"":t,n=e.lineno,i=e.colno,a=e.message,o="",e.error&&(a=e.error.message||a,o=e.error.stack),s={l:"exception",m:c.truncateMsg(a,constants.storage.CONSOLE_MSG_LENGTH),s:c.truncateMsg(o,constants.storage.CONSOLE_MSG_STACKTRACE_LENGTH),src:c.eventGenerator.getConsoleTarget(e),p:{filename:r,lineno:n,colno:i}},_.isDefined(s.m)&&-1===r.indexOf("auryc")&&c.appendEvent(s,e))},this.trackWindowErrors=function(){try{_.addEventListener(c.rcProcessor.getWinObj(),"error",c.windowErrorHandler)}catch(e){}},this.isExpired=function(e,t){var r=c.cacheEvent[e];return!r||5e3<t-r},this.unhandledrejectionHandler=function(e){if(!globalSessionTracker.isCanceled()&&_.isDefined(e.reason)){var t=c.getValidPromiseReason(e.reason);if(!t)return;var r={l:"exception",m:c.truncateMsg(t,constants.storage.CONSOLE_MSG_LENGTH),s:c.truncateMsg(t,constants.storage.CONSOLE_MSG_STACKTRACE_LENGTH),src:browser$1.locationInfo(),p:{}},n={message:c.truncateMsg(t,constants.storage.CONSOLE_MSG_LENGTH),filename:r.src.path,lineno:0,colno:0};c.appendEvent(r,n)}},this._originalLog=console.log,this._originalWarn=console.warn,this._originalError=console.error,this._originalInfo=console.info,this.rule=config.getErrorRule(),this.eventWriter=EventWriter.getInstance(),this.rcProcessor=e,this.eventGenerator=EventGenerator.getInstance(),this.trackWindowErrors(),this.trackPromiseErrors(),this.trackConsole(),this.cacheEvent={},this.totalMsg=0,this.disabled=!1,this.paused="true"===sessionStorage.getItem(constants.api.disable_console),this.paused&&this.pause()}var RcNetworkMonitor=(createClass(W2a,[{key:"reset",value:function(){this.observedCache=[],this.navigationObserver=null,this.rcProcessor=null}},{key:"setWhiteListHeader",value:function(){var t=this,e=constants.record.inspect.resHeaderAllowed,r=constants.record.inspect.reqHeaderAllowed,n=config.getRequestHeaderWhiteList();0<n.length&&(r=_.intersection(n,this.reqHeaderArr));var i=config.getResponseHeaderWhiteList();0<i.length&&(e=_.intersection(i,this.resHeaderArr)),r&&r.forEach(function(e){t.reqHeaderWhitelist[e]=""}),e&&e.forEach(function(e){t.resHeaderWhitelist[e]=""})}},{key:"trackResources",value:function(t){var e,r=this;t=t||window,config.isPerfTimingAPIAvailable(t)&&!this.paused&&(e=["resource","measure","mark"],config.isPaintTimingSupported(t)&&e.push("paint"),this.observedCache=this.observedCache.concat(t.performance.getEntries()),this.observer=new t.PerformanceObserver(function(e){e.getEntries().forEach(function(e){_.inArray(e.initiatorType,r.ajaxType)&&(r.observedCache.push(e),150<r.observedCache.length&&(r.observedCache=r.observedCache.filter(function(e){return!e.processed}))),r.addResourceEvent(e)})}),this.observer.observe({entryTypes:e}),this.observedCache.forEach(function(e){"navigation"!==e.entryType&&r.addResourceEvent(e)}),t.performance.onresourcetimingbufferfull=function(e){t.performance.clearResourceTimings()})}},{key:"getObservedCache",value:function(){return this.observedCache}},{key:"getResHeaders",value:function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),i={};return t.forEach(function(e){var t=e.split(": "),r=t.shift(),n=t.join(": ");i[r]=n}),i}},{key:"filterHeaders",value:function(e,t,r){if(!t)return{};var n,i={};try{if(r===constants.ajax_proxy.type.fetch){var a=!0,o=!1,s=void 0;try{for(var c,l=t.keys()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var g,u=c.value;u.toLowerCase()in e&&(g=t.get(u),_.isDefined(g)&&(i[u]=g))}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}}else for(var d in t)d.toLowerCase()in e&&(n=t[d],_.isDefined(n)&&(i[d]=n))}catch(e){}return i}},{key:"processRule",value:function(e,t,r,n){var i=this;if("none"===e.type)t[r]={};else{var a,o,s=t[r],c={};if("req"===r)if(s=t[r].body||"{}",-1<(n||"").toLowerCase().indexOf("x-www-form-urlencoded"))try{s=browser$1.getAllQueryParams(s)}catch(e){s={}}else try{s=JSON.parse(s),_.isArray(s)&&(s={})}catch(e){s={}}"specific"===e.type?(a=e.fields.split(",").map(function(e){return e.trim()}),o=[],a.forEach(function(e){for(var t=s,r=e.split("/"),n=0;n<r.length;n++)t[r[n]]&&(t=t[r[n]],n===r.length-1&&o.push(e))}),o.forEach(function(e){var t=s,r=e.split("/");i.assignBody(t,r,c)})):("except"===e.type&&e.fields.split(",").map(function(e){return e.trim()}).forEach(function(e){for(var t=s,r=e.split("/"),n=0;n<r.length;n++)t[r[n]]&&(n===r.length-1&&delete t[r[n]],t=t[r[n]])}),c=s);var l=JSON.stringify(c);l.length>constants.ajax_proxy.limits.size&&(c={content:l.substring(0,constants.ajax_proxy.limits.size)+"...",notice:"Only partial content is shown because it has exceeded the size limit of 1MB."}),t[r]=c}return t}},{key:"assignBody",value:function(e,t,r){var n=t.shift();if(r[n]||(r[n]={}),0===t.length)return r[n]=e[n],r;this.assignBody(e[n],t,r[n])}},{key:"isResponseText",value:function(e){return!_.isUndefined(e)&&("text"===e||""===e)}},{key:"isJsonType",value:function(e){if(!e)return!1;var t="";return e.headers?t=e.headers.get("content-type")||e.headers.get("Content-Type")||"":e._header&&(t=config.getParameterCaseInsensitive(e._header,"content-type")||""),-1<t.indexOf("application/json")}},{key:"getResponseText",value:function(e){return this.isResponseText(e.responseType)?e.responseText:""}},{key:"getWaterfall",value:function(r,e){var n=this,i={};switch(e){case"xhr":for(var t=0;t<this.observedCache.length&&"break"!==function(e){var t=n.observedCache[e];if(!t.processed&&t.name===r.url)return r=Object.assign(r,t),[].forEach.call(n.resourceMeasure,function(e){i[e]=t[e]}),t.processed=!0,"break"}(t);t++);break;case"resource":[].forEach.call(this.resourceMeasure,function(e){i[e]=r[e]});break;case"navigation":[].forEach.call(this.navigationMeasure,function(e){i[e]=r[e]});break;case"measure":case"mark":case"paint":[].forEach.call(this.userTimingMeasure,function(e){i[e]=r[e]})}return i.name&&(i.name=obfuscateUrl(i.name)),i}},{key:"getEventProperties",value:function(){return superProperties.getSuperEventProperties(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT))}},{key:"pause",value:function(){this.paused=!0,browser$1.setItem("sessionStorage",constants.api.disable_network,"true")}},{key:"resume",value:function(){this.paused&&(this.paused=!1,browser$1.setItem("sessionStorage",constants.api.disable_network,"false"))}},{key:"isPaused",value:function(){return this.paused}}],[{key:"getInstance",value:function(e){return W2a.instance||(W2a.instance=new W2a(e)),W2a.instance}}]),W2a);function W2a(e){var b=this;classCallCheck(this,W2a),this.polyfillNavTiming=function(l,t){function r(e){var t=e.navigationStart;if(0===t||!t)return null;if(!e.domComplete||e.domComplete<=0)return null;var r={},n=!0,i=!1,a=void 0;try{for(var o,s=constants.record.inspect.navigationMeasure[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;e[c]&&0<e[c]&&(r[c]=e[c]-t)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r=_extends({},r,{entryType:"navigation",initiatorType:"navigation",name:obfuscateUrl(l.document.location.href),type:"navigate"})}"performance"in l&&l.performance.timing&&("complete"===l.document.readyState?setTimeout(function(){var e=r(l.performance.timing);e&&t(e)},100):_.addEventListener(l,"load",function(){setTimeout(function(){var e=r(l.performance.timing);e&&t(e)},100)}))},this.trackNavigationTimings=function(e){var t;"performance"in(e=e||window)&&("function"==typeof e.performance.getEntriesByType&&(0===(t=e.performance.getEntriesByType("navigation")).length?b.polyfillNavTiming(e,b.addResourceEvent):t.forEach(function(e){b.addResourceEvent(e)})),config.isPerfTimingAPIAvailable()&&(b.navigationObserver=new e.PerformanceObserver(function(e){e.getEntries().forEach(function(e){"navigation"===e.entryType&&b.addResourceEvent(e)})}),b.navigationObserver.observe({entryTypes:["navigation"]})))},this.addResourceEvent=function(e){var t;config.isTrackResourceEnabled(e.entryType)&&!b.paused&&(_.inArray(e.initiatorType,b.ajaxType)||e.processed||((t={n:obfuscateUrl(e.name),i:e.initiatorType||e.entryType,sz:e.transferSize||0,l:(e.responseEnd-e.fetchStart).toFixed(2),t:e.initiatorType||e.entryType,w:b.getWaterfall(e,e.entryType),req:{},res:{},p:_extends({},b.getEventProperties())}).src=browser$1.locationInfo(),b.eventWriter.append(EventType.NetworkT(),t,b.rcProcessor),e.processed=!0))},this.addNetworkEvent=function(e,t){if(!b.paused){var r,n,i=config.getAjaxBodyWhitelist(e.responseURL||getRequestProp(e,"url")),a=_.get(e,"responseSize",b.getResponseText(e).length),o=t.statusCode,s=t.exactLatency,c=t.type,l=t.statusCodeGroup,g=t.url,u=getRequestProp(e,"method")||c,d=getRequestProp(e,"error"),h={url:g},p=b.getWaterfall(h,"xhr"),f={n:obfuscateUrl(g),i:"",sz:a,l:s,t:c,w:_extends({},p,{name:obfuscateUrl(p.name)}),req:{},res:{},p:_extends({s:o,m:c,t:u,e:d||"",sg:l},b.getEventProperties())};if(c===constants.ajax_proxy.type.fetch){if(f.req=getRequestProp(e),e.responseText)try{f.res=JSON.parse(e.responseText)}catch(e){f.res={}}f.p.req=b.filterHeaders(b.reqHeaderWhitelist,getRequestProp(e,"header"),c),f.p.res=b.filterHeaders(b.resHeaderWhitelist,e.header,c)}else{var I=b.getResHeaders(e);f.req=getRequestProp(e);var m=config.getParameterCaseInsensitive(I,"content-type");if(m&&-1<m.indexOf("json"))try{f.res=JSON.parse(e.responseText)}catch(e){f.res={}}f.p.req=b.filterHeaders(b.reqHeaderWhitelist,getRequestProp(e,"header"),c),f.p.res=b.filterHeaders(b.resHeaderWhitelist,I,c)}i.isRecorded?(i.req&&(r=getRequestProp(e,"header"),n=c===constants.ajax_proxy.type.fetch?r.get("Content-Type"):r["Content-Type"],f=b.processRule(i.req,f,"req",n)),i.res&&(f=b.processRule(i.res,f,"res"))):(f.req={},f.res={}),f.src=browser$1.locationInfo(),_.isArray(f.res)&&(f.res={response:f.res}),b.eventWriter.append(EventType.NetworkT(),f,b.rcProcessor)}},this.eventWriter=EventWriter.getInstance(),this.rcProcessor=e,this.eventGenerator=EventGenerator.getInstance(),this.reqHeaderWhitelist={},this.resHeaderWhitelist={},this.setWhiteListHeader(),this.observedCache=[],this.navigationObserver=null,this.timingMeasure=constants.record.inspect.timingMeasure,this.navigationMeasure=constants.record.inspect.navigationMeasure,this.resourceMeasure=constants.record.inspect.resourceMeasure,this.memoryMeasure=constants.record.inspect.memoryMeasure,this.userTimingMeasure=constants.record.inspect.userTimingMeasure,this.ajaxType=constants.record.inspect.ajaxType,this.paused="true"===sessionStorage.getItem(constants.api.disable_network)}var ClearableWeakMap=(createClass(K5a,[{key:"clear",value:function(){this._wm=new WeakMap}},{key:"delete",value:function(e){return this._wm.delete(e)}},{key:"get",value:function(e){return this._wm.get(e)}},{key:"has",value:function(e){return this._wm.has(e)}},{key:"set",value:function(e,t){return this._wm.set(e,t),this}}]),K5a);function K5a(e){classCallCheck(this,K5a),this._wm=new WeakMap(e)}var RcEventMonitor=(createClass(W5a,[{key:"reset",value:function(){this.adobeExp=null,this.consoleMonitor&&(this.consoleMonitor.reset(),this.consoleMonitor=null),this.rcDomChangeMonitor&&(this.rcDomChangeMonitor=null),this.rcNetworkMonitor&&(this.rcNetworkMonitor.reset(),this.rcNetworkMonitor=null),this.mobileCapture&&(this.mobileCapture=null),this.hammer&&(this.hammer=null),this.processor=null,globalCacheObj&&globalCacheObj.clearCache()}},{key:"trackResize",value:function(){var t=this;_.addEventListener(this.processor.getWinObj(),"resize",_.throttle(function(e){return t.getSizes(e)},constants.record.throttler.RESIZE)),_.addEventListener(this.processor.getWinObj(),"orientationchange",function(e){return setTimeout(function(e){return t.getSizes(e)},constants.record.throttler.ORIENTATION_CHANGE)})}},{key:"startEventMonitoring",value:function(){var e=this;this.monitoringStartTime=Date.now(),dom.processKeepInputs(this.processor.getBody()),dom.addMaskAttributeToTags(this.processor.getDocObj()),this.handleFormInputs(this.processor.getBody()),_.addEventListener(this.processor.getWinObj(),"load",function(){config.checkDomOnloadSampling()&&e.processor&&e.processor.generateHTML()}),config.isEnhancedHM()&&setTimeout(function(){e.processor&&!e.processor.parentFrameProc&&e.processor.generateHTML(!0,null,null,!0)},1e4),this.hammer=null,this.pinchEventArr=[],this.mobileCapture=this.initMobileCapture(this.processor.getDocObj()),this.monitorPointingDevice(this.mobileCapture),this.trackResize(),this.trackScroll();var t=config.isTrackConsoleEnabled()&&config.isInJsErrorSamplingPool();this.consoleMonitor=null,this.rcDomChangeMonitor=null,this.scrollToBottomFlag=!1,setTimeout(function(){e.processor&&e.processor.getWinObj()&&(e.rcDomChangeMonitor=new RcDomChangeMonitor(e.processor),t&&(e.consoleMonitor=new RcConsoleMonitor(e.processor)),e.processor.getWinObj().self!==e.processor.getWinObj().top&&!e.processor.isCrossDomainIframe()||RcNetworkMonitor.getInstance(e.processor).trackNavigationTimings(e.processor.getWinObj()),config.isTrackNetworkEnabled()&&config.isInAjaxSamplingPool()&&RcNetworkMonitor.getInstance(e.processor).trackResources(e.processor.getWinObj()))}),this.rcNetworkMonitor=RcNetworkMonitor.getInstance(this.processor)}},{key:"newPage",value:function(){this.consoleMonitor&&this.consoleMonitor.resetState(),this.rcDomChangeMonitor&&this.rcDomChangeMonitor.resetState()}},{key:"addPassiveScrollElem",value:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}var r=this,n=browser$1.isInternetExp();_.addEventListener(this.processor.getDocObj(),"scroll",_.throttle(function(e){var t;!r.processor||(t=dom.getEventTarget(e))&&"#document"!==t.nodeName&&"body"!==t.nodeName&&"number"==typeof t.scrollTop&&r.eventWriter.append(EventType.SclInNodeT(),{x:r.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(t)),ps:{x:t.scrollLeft,y:t.scrollTop},trusted:e&&e.isTrusted},r.processor)},constants.record.throttler.WIN_EVENT_THROTTLE),e?{capture:!0,passive:!0}:n)}},{key:"trackAdoptedStyleSheets",value:function(){var e,t;function r(){e.processor&&getStyledComponentHandler().serializeAdoptedStyleSheets(this,e.processor.getDocObj())}this.adoptedStyleSheetsTracked||(t=(e=this).processor.getWinObj(),dom.overrideObjectProperty(t,t.Document.prototype,"adoptedStyleSheets",{set:r}),t.ShadowRoot&&dom.overrideObjectProperty(t,t.ShadowRoot.prototype,"adoptedStyleSheets",{set:r}))}},{key:"groupStatus",value:function(e){return(""+e).substring(0,1)+"0x"}},{key:"groupLatencyGroup",value:function(e){if(e<500)return"<500ms";if(500<=e&&e<1e3)return"500ms - 1s";if(1e3<=e&&e<3e3)return"1s - 3s";if(e<constants.storage.MAX_LATENCY){var t=Math.floor(e/constants.storage.LATENCY_BUCKET_WIDTH),r=constants.storage.LATENCY_BUCKET_WIDTH/1e3;return t*r+"s - "+(t+1)*r+"s"}return">"+Math.floor(constants.storage.MAX_LATENCY/1e3)+"s"}},{key:"getEventProperties",value:function(){return superProperties.getSuperEventProperties(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT))}},{key:"ajaxProxyHandler",value:function(){config.isAjaxProxyEnabled()&&!config.isAjaxBlacklist()&&setupAjaxProxy(this,this.processor.getWinObj())}},{key:"viewChageHandler",value:function(){var e,n=this,i=this.processor.getDocObj(),a=browser$1.visibilityEventPrefix(),o=_.isObject(history.state)&&history.state&&history.state.title||getDocumentTitle(document),s=globalSessionTracker.getSessionMetadata().viewId;_.addEventListener(i,a+"visibilitychange",function(){var e,t,r;n.processor&&(globalSessionTracker.getSessionMetadata().isOver||(e="hidden"===i[(""===a?"v":a+"V")+"isibilityState"],t=1,r=EventType.ViewChangeT(),e&&(t=2),n.eventWriter.append(r,{k:"vc",v:{sid:s,status:t,url:obfuscateUrl(location.href),title:o}},n.processor)))}),browser$1.canUseVisibilityChange()?_.addEventListener(i,a+"visibilitychange",function(){n.processor&&"hidden"===i[(""===a?"v":a+"V")+"isibilityState"]&&(logger.log("visibility hidden. commit data",!0),n.eventWriter.syncToServerAndPersist(getInstance().isPhoneOrTablet()))}):(e=getInstance().isPhoneOrTablet()?"unload":"beforeunload",_.addEventListener(this.processor.getWinObj(),e,function(){n.processor&&(logger.log("befoerunload fires. commit",!0),n.eventWriter.syncToServerAndPersist(!0))})),browser$1.isSafari()&&getInstance().isPhoneOrTablet()&&_.addEventListener(this.processor.getWinObj(),"pagehide",function(){n.processor&&(logger.log("pagehid fires.commit data",!0),n.eventWriter.syncToServerAndPersist(!1))}),_.addEventListener(this.processor.getWinObj(),"mouseout",function(e){if(n.processor){var t=(e=e||n.eventWriter.getWinObj().event).relatedTarget||e.toElement,r=void 0;try{t&&(r=t.nodeName)}catch(e){}(!t||r&&"HTML"===r)&&n.eventWriter.syncToServerAndPersist(!0)}})}},{key:"initMobileCapture",value:function(e){return this.hammer||(this.hammer=new Hammer(e,{touchAction:"auto"}),this.hammer.get("pan").set({direction:Hammer.DIRECTION_ALL}),this.hammer.get("pinch").set({enable:!0})),this.hammer}},{key:"getSizes",value:function(e){if(this.processor){var t,r,n,i,a=dom.getSize(this.processor.getWinObj()),o=this.processor.doc,s=dom.getDocSize(o),c={w:s.width,h:s.height},l=0;return getInstance().isPhoneOrTablet()&&(t=a,a=c,c=t,270===(l=screen&&screen.orientation?screen.orientation.angle:window.orientation)&&(l=-90),0!==l?(c.w<c.h&&(r=c.w,c.w=c.h,c.h=r),a.w<a.h&&(n=a.w,a.w=a.h,a.h=n)):c.w>c.h&&(i=c.w,c.w=c.h,c.h=i)),0<c.w&&0<c.h&&0<a.w&&0<a.h&&!_.disableEvent(EventType.WindowDimT())&&this.eventWriter.append(EventType.WindowDimT(),{st:l,m:getInstance().isPhoneOrTablet(),sz:a,avs:c,trusted:e&&e.isTrusted},this.processor,constants.record.timeOffset.WIN_SIZE),0<s.height&&0<s.width&&!_.disableEvent(EventType.HTMLDimT())&&this.eventWriter.append(EventType.HTMLDimT(),{sz:{w:s.width,h:s.height},trusted:e&&e.isTrusted},this.processor,constants.record.timeOffset.WIN_SIZE+10),s}}},{key:"getMobileType",value:function(e){switch(e){case"tap":return EventType.TapT();case"press":return EventType.PressT();case"swipe":case"pan":return EventType.SwipeT();case"pinch":return EventType.PinchT();default:return null}}},{key:"captureResize",value:function(e,t){var r,n,i;this.processor&&(r=this.getSizes(),n={cw:window.innerWidth,ch:window.innerHeight,w:r.width,h:r.height},window.visualViewport&&window.visualViewport.scale&&this.lastScale!==window.visualViewport.scale&&(n.cw=r.width/window.visualViewport.scale,n.ch=r.height/window.visualViewport.scale,this.lastScale=window.visualViewport.scale),i={zi:n,ps:browser$1.getScroll(e.getWinObj()),trusted:t&&t.isTrusted},this.eventWriter.append(EventType.ResizeT(),i,e))}},{key:"captureMobileEvent",value:function(e,t){var r=this;if(e){var n,i,a=browser$1.getScroll(e.getWinObj()),o={x:t.center.x,y:t.center.y},s=browser$1.getWinSize(e.getWinObj()),c=dom.getSize(e.getWinObj());"pinchin"===t.type||"pinchout"===t.type?t.type="pinch":"pan"===t.type?0===o.x&&0===o.y?(o.x=dom.getPosition(dom.getEventTarget(t),e.getWinObj()).x,o.y=dom.getPosition(dom.getEventTarget(t),e.getWinObj()).y,o.x<c.w/4&&(o.x=c.w/2)):(o.x+=a.x,o.y+=a.y):(n=c.w/s.w,i=c.h/s.h,o.x+=a.x*n,o.y+=a.y*i);var l=this.getMobileType(t.type);if(!l)return null;if(!o||0!==o.x&&!o.x||0!==o.y&&!o.y)return null;var g="";l===EventType.PinchT()&&(setTimeout(function(){r.captureResize(e,t.srcEvent)},350),g="pinchin"===t.additionalEvent?0:1);var u=-1,d=dom.getEventTarget(t);d&&(u=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(d)));var h=this.eventGenerator.getEvent(t.srcEvent,constants.events.CLICKTRACKER,{},{},e.getWinObj());if(h){var p={ps:o,v:h.v,source:h.source,x:u,payload:h.payload};if(EventType.isInteractionEvent(l)&&(p.trusted=t&&t.isTrusted),l===EventType.SwipeT())return p.d=t.direction,p.ag=t.angle.toFixed(2),p.s=t.distance.toFixed(2),void(_.inArray(p.d,[2,4,8,16])&&this.eventWriter.append(l,p,e));l===EventType.PinchT()&&(p.e=g,p.d=t.direction,p.ag=t.angle.toFixed(2),p.s=t.distance.toFixed(2)),this.eventWriter.append(l,p,e)}}}},{key:"handleMouseEvent",value:function(e,t,r){var n,i,a,o,s,c,l,g,u,d,h,p;t&&(n={},e.delayed||t.getTopMostFrameProc().hasMouse()||(this.eventWriter.append(EventType.MouseLeaveEntryT(),{v:1,trusted:e&&e.isTrusted},t),t.getTopMostFrameProc().mouseEnter()),t.getTopMostFrameProc().hasMouse()&&((r=r||EventType.MouseMoveT())===EventType.MouseClickT()||r===EventType.MouseMoveT()?(i="number"==typeof e.clientX?e.clientX:e.screenX,a="number"==typeof e.clientY?e.clientY:e.screenY,o=browser$1.getScroll(t.getWinObj()),"number"==typeof i?(n.x=i+o.x,n.y=a+o.y,this.prevPos={x:i,y:a}):this.prevPos?(n.x=this.prevPos.x||0+o.x,n.y=this.prevPos.y||0+o.y):(n.x=o.x,n.y=o.y),!t.isCrossDomainIframe()||(s=t.getMyCoordinates())&&(n.x+=s.x,n.y+=s.y),t.parentFrameProc&&(c=t.getWinObj().frameElement,l=dom.getPosInTopFrame(c,dom.getContainingWinObj(c,t.getWinObj())),n.x=i+l.x,n.y=a+l.y,!t.parentFrameProc.isCrossDomainIframe()||(g=t.parentFrameProc.getMyCoordinates())&&(n.x+=g.x,n.y+=g.y)),u=null,r===EventType.MouseClickT()?(u=this.eventGenerator.getEvent(e,constants.events.CLICKTRACKER,{position:n},{},t.getWinObj()),(d=dom.getEventTarget(e))&&u&&(u.x=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(d)),EventType.isInteractionEvent(r)&&(u.trusted=e&&e.isTrusted))):u={ps:n},u&&this.eventWriter.append(r,u,t)):(p=void 0,(h=dom.getEventTarget(e))&&(p=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(h))),this.eventWriter.append(r,{ps:this.eventGenerator.getPosition(e),x:p},t))))}},{key:"sendPinchEvent",value:function(e){var t,r,n;!this.processor||1<(t=this.pinchEventArr.length)&&(r="",r="pinchout"===(n=this.pinchEventArr[t-2]).additionalEvent?"pinchout":"pinchin",(n=this.pinchEventArr[0]).additionalEvent=r,n.center.x+=e.x,n.center.y+=e.y,this.captureMobileEvent(this.processor,n),this.pinchEventArr=[])}},{key:"trackMobileActions",value:function(e){var r=this;e.on("tap",function(e){r.processTap(e.srcEvent)}),_.addEventListener(this.processor.getDocObj(),"mousedown",function(e){r.processTap(e)}),e.on("press",function(e){r.captureMobileEvent(r.processor,e)}),e.on("pan",_.throttle(function(e){r.captureMobileEvent(r.processor,e)},constants.record.throttler.WIN_EVENT_THROTTLE,{leading:!0,trailing:!1})),e.on("pinchstart pinchin pinchout",function(e){var t;r.processor&&("pinchstart"===e.type&&(t=browser$1.getScroll(r.processor.getWinObj()),r.pinchEventArr=[],setTimeout(function(){r.sendPinchEvent(t)},constants.record.throttler.WIN_EVENT_THROTTLE)),r.pinchEventArr.push(e))})}},{key:"trackDesktopActions",value:function(){var t=this;_.addEventListener(this.processor.getWinObj(),"mousemove",_.throttle(function(e){return t.handleMouseEvent(e,t.processor,EventType.MouseMoveT())},constants.record.throttler.WIN_EVENT_THROTTLE)),_.addEventListener(this.processor.getWinObj(),"mousedown",function(e){t.handleMouseEvent(e,t.processor,EventType.MouseClickT())})}},{key:"trackScroll",value:function(){var o=this;_.addEventListener(this.processor.getWinObj(),"scroll",_.throttle(function(e){var t,r,n,i,a;o.processor&&(t=browser$1.getScroll(o.processor.getWinObj()),getInstance().isPhoneOrTablet()?(i={w:(r=dom.getDocSize(o.processor.getDocObj())).width,h:r.height},i=_extends({},i,{cw:window.innerWidth,ch:window.innerHeight}),window.visualViewport&&window.visualViewport.scale&&o.lastScale!==window.visualViewport.scale&&(i.cw=i.w/window.visualViewport.scale,i.ch=i.h/window.visualViewport.scale,o.lastScale=window.visualViewport.scale,n={zi:i,ps:t},o.eventWriter.append(EventType.ResizeT(),n,o.processor))):o.handleMouseEvent(e,o.processor,EventType.MouseMoveT()),o.eventWriter.append(EventType.SclWindowT(),{ps:t,trusted:e&&e.isTrusted},o.processor),o.processor.isTopMostProc()&&(a=browser$1.getWinSize(o.processor.getWinObj()),t.y+a.h>getMaxWinHeight()-100&&(o.scrollToBottomFlag||(o.scrollToBottomFlag=!0,config.checkDomOnloadSampling()&&o.processor.generateHTML(null,null,getMaxWinHeight())))))},constants.record.throttler.WIN_EVENT_THROTTLE))}},{key:"getRelatedTarget",value:function(e,t){return e.relatedTarget?e.relatedTarget:"to"===t?e.toElement||null:"from"===t&&e.fromElement||null}},{key:"trackMouseEnterLeave",value:function(){var n=this;this.processor.mouseEnter(),_.addEventListener(this.processor.getDocObj(),"mouseover",function(e){n.processor&&(n.processor.hasMouse()||n.getRelatedTarget(e||n.processor.getWinObj().event,"from")||(n.eventWriter.append(EventType.MouseLeaveEntryT(),{v:1,trusted:e&&e.isTrusted},n.processor),n.processor.mouseEnter()))}),_.addEventListener(this.processor.getDocObj(),"mouseout",function(e){var t,r;n.processor&&(r=(t=n.getRelatedTarget(e||n.processor.getWinObj().event,"to"))&&"HTML"===t.nodeName,!n.processor.hasMouse()||t&&!r||(n.eventWriter.append(EventType.MouseLeaveEntryT(),{v:0,trusted:e&&e.isTrusted},n.processor),n.processor.mouseOut()))})}},{key:"monitorPointingDevice",value:function(e){getInstance().isPhoneOrTablet()?this.trackMobileActions(e):this.trackDesktopActions(),this.processor.isTopMostProc()&&this.trackMouseEnterLeave()}},{key:"seriaCalBack",value:function(t){setTimeout(function(){for(var e=0;e<t.length;e++)t[e].processCurrElem()},1)}},{key:"handleFormInputs",value:function(e,t){var r=1<arguments.length&&void 0!==t&&t;if(e&&this.processor){var n=dom.querySelectorAll(e,constants.record.form.inputTypes);if(n&&0!==n.length)for(var i=r?Math.min(100,n.length):n.length,a=config.isCheckOffsetParent(),o=0;o<i;o++){var s=n[o],c=!0!==a||null!==s.offsetParent;!dom.isSecret(s)&&c&&(s._arIM?s._arIM&&s._arIM.processCurrElem(s):RcInputMonitor.getNewInstance(this.processor,s))}}}},{key:"handleToggleEvent",value:function(e){switch(e){case constants.api.enable_console:this.consoleMonitor.resume();break;case constants.api.disable_console:this.consoleMonitor.pause();break;case constants.api.enable_network:this.rcNetworkMonitor.resume();break;case constants.api.disable_network:this.rcNetworkMonitor.pause()}}}]),W5a);function W5a(e){var l=this;classCallCheck(this,W5a),this.trackCssDynamicChanges=function(){var n,i,a,o,s,c;l.dynamicCSSTracked||(n=l.processor.getWinObj(),i=n.CSSStyleSheet.prototype.insertRule,a=null,o=new ClearableWeakMap,s=[],l.dynamicCSSTracked=!0,"function"==typeof n.document.getRootNode&&(c=l,n.CSSStyleSheet.prototype.insertRule=function(){if(i.apply(this,arguments),c.processor)try{var e,t,r=this.ownerNode;!r||(e=r.getRootNode({composed:!0}))&&(s.indexOf(e)<0&&s.push(e),(t=o.get(e)||[]).indexOf(r)<0&&(t.push(r),o.set(e,t)));n.clearTimeout(a),a=n.setTimeout(function(){0<s.length&&s.forEach(function(e){var t;o.has(e)&&(t=o.get(e),getStyledComponentHandler().processInsertRuleCSS(e,t)),o.clear(),s=[]})},200)}catch(e){}}))},this.processApiCall=function(e){var t,r,n,i,a,o;!l.processor||(t=e.responseURL||getRequestProp(e,"url"))&&urls.isAjaxProxyEnabled(t)&&(r=_.now()-getRequestProp(e,"time"),n={statusCode:""+e.status,url:t?t.substr(0,constants.storage.AJAX_URL_LIMIT):"",exactLatency:r,latency:l.groupLatencyGroup(r),statusCodeGroup:l.groupStatus(e.status),type:getRequestProp(e,"type")||constants.ajax_proxy.type.xhr},config.isTrackNetworkEnabled()&&config.isInAjaxSamplingPool()&&setTimeout(function(){RcNetworkMonitor.getInstance().addNetworkEvent(e,n)},100),(i=urls.getLocation(t))&&(i.domain&&(n.domain=i.domain.substr(0,constants.storage.AJAX_URL_LIMIT)),i.path&&(n.path=i.path.substr(0,constants.storage.AJAX_URL_LIMIT)),i.query&&(n.query=i.query.substr(0,constants.storage.AJAX_URL_LIMIT)),i.hash&&(n.hash=i.hash.substr(0,constants.storage.AJAX_URL_LIMIT))),config.isInAjaxSamplingPool()&&l.rcNetworkMonitor&&!l.rcNetworkMonitor.isPaused()&&(a=l.getEventProperties(),o=_extends({},n,a),l.eventWriter.append(EventType.CustomEventT(),{k:"api_call",v:JSON.stringify(o),source:locationInfo()})))},this.isSameClick=function(e,t){return Math.abs(e.timeStamp-t.timeStamp)<constants.record.throttler.CLICK_THROTTLE&&e.target===dom.getEventTarget(t)},this.processTap=function(e){l.processor&&(l.isSameClick(l.lastClick,e)||l.captureMobileEvent(l.processor,{srcEvent:e,center:{x:"number"==typeof e.clientX?e.clientX:e.screenX,y:"number"==typeof e.clientY?e.clientY:e.screenY},type:"tap",target:dom.getEventTarget(e)}),l.lastClick={target:dom.getEventTarget(e),timeStamp:e.timeStamp})},this.processor=e,this.eventWriter=EventWriter.getInstance(),this.eventGenerator=EventGenerator.getInstance(),this.startEventMonitoring(),this.addPassiveScrollElem(),this.viewChageHandler(),this.ajaxProxyHandler(),this.trackCssDynamicChanges(),this.trackAdoptedStyleSheets(),gtmDataLayer.tryEnable(),this.adobeExp=new AdobeExp(e.getWinObj()),this.adobeExp.tryEnable(),this.lastClick={target:null,timeStamp:0},this.lastScale=1}function trackBrowserLanguage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator&&(e.navigator.userLanguage||e.navigator.language),r="Undefined";"Undefined"!==(t=t||"Undefined")&&(r=t.substring(0,2)),e.auryc&&e.auryc.addInternalSessionProperties?e.auryc.addInternalSessionProperties({"Browser Language":t,"Primary Browser Language":r}):e.aurycReadyCb&&e.aurycReadyCb.push(function(){e.auryc&&e.auryc.addInternalSessionProperties&&e.auryc.addInternalSessionProperties({"Browser Language":t,"Primary Browser Language":r})})}var ReplayProcessor=(createClass(r9a,[{key:"reset",value:function(){this.childrenProc=[],this.currWindow=null,this.eventWriter=null,this.initialized=!1,this.rcEventMonitor&&this.rcEventMonitor.reset(),this.iframeIndexes.clear()}},{key:"unregister",value:function(){this.notifyPauseResume("unregister"),globalDataCache&&globalDataCache.clearCache(),this.parentFrameProc&&(this.parentFrameProc=null),this.reset()}},{key:"enqueueIframe",value:function(e,t){this.rcFrame&&this.rcFrame.enqueue(e,t)}},{key:"getIframeIndex",value:function(e){return this.iframeIndexes.has(e)?this.iframeIndexes.get(e):(this.iframeIndexes.set(e,++this.maxIframeIndex),this.maxIframeIndex)}},{key:"updateIframeIndex",value:function(e){this.iframeIndexes.set(e,++this.maxIframeIndex)}},{key:"getEventProperties",value:function(){return superProperties.getSuperEventProperties(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT))}},{key:"sendIframeEvent",value:function(e){var t,r=e&&e.location.href;!config.trackIframeLoad()||!r||-1<r.indexOf("javascript:")||-1<r.indexOf("about:blank")||(void 0!==(t=browser$1.locationInfo(e.location,e.document)||{}).name&&void 0===t.title&&(t.title=t.name,delete t.name),window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track?window.auryc.track("Iframe Loaded",t):window.aurycReadyCb&&window.aurycReadyCb.push(function(){window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track&&window.auryc.track("Iframe Loaded",t)}))}},{key:"trackPV",value:function(e,t){var r=void 0,r=t.basicProps?t.basicProps.currentTime:window.aurycLoadedTime?Math.max(_.now(),window.aurycLoadedTime):_.now(),n=browser$1.getScreenResolution();t&&!_.disableEvent(EventType.PVT())&&this.getEventWriter().append(EventType.PVT(),_.extend({},t,{r:"W3C",l:config.getConfig("layout","record")||"",m:e.isPhoneOrTablet(),url:t.content,t:t.name,dtm:r,ofs:(new Date).getTimezoneOffset(),sz:{w:n.w,h:n.h},f:document.referrer.toString()})),config.basicMode()||this.getEventWriter().logVisibilityChange(r),this.initSize()}},{key:"mouseEnter",value:function(){this.mIn=!0}},{key:"mouseOut",value:function(){this.mIn=!1}},{key:"hasMouse",value:function(){return!0===this.mIn}},{key:"addChildProc",value:function(e){this.childrenProc.push(e)}},{key:"initEventHandling",value:function(e){var n=this,r=0<arguments.length&&void 0!==e&&e;AurycPubSub.addListener(constants.events.PAGEVIEWTRIGGER,function(e){var t;r||(t=globalSessionTracker.isSpaSendPV(),n.crossDomainIframe?n.newPage(t,e,t):n.newPage(!0,e,t),config.basicMode()||userProperty.setupCutomDataCollection())}),config.basicMode()||(AurycPubSub.addListener(constants.events.FEEDBACKTRIGGER,function(e){logger.log("addListener replay FEEDBACKTRIGGER",e);var t=n.getEventProperties(),r=_extends({p:e.eventProperties.formid,et:e.eventProperties.et},t);n.getEventWriter().append(EventType.CustomEventT(),{k:"feedback",v:JSON.stringify(r),source:locationInfo()})}),AurycPubSub.addListener(constants.events.TRACKCUSTOMEVENT,function(e){var t=n.getEventProperties(),r=_extends({},t,e.eventProperties);"js_error"===e.eventName&&e.eventProperties?config.isInJsErrorSamplingPool()&&(n.getEventWriter().append(EventType.CustomEventT(),{k:e.eventName,v:JSON.stringify(r),source:locationInfo()}),n.eventWriter.append(EventType.JSExceptionT(),{v:e.eventProperties.error_message+", "+e.eventProperties.relative_error_loc+", "+(e.eventProperties.error_lineNo||0)})):n.getEventWriter().append(EventType.CustomEventT(),{k:e.eventName,v:JSON.stringify(r),source:locationInfo()})}))}},{key:"getEventWriter",value:function(){return this.parentFrameProc?this.parentFrameProc.getEventWriter():this.eventWriter}},{key:"getBody",value:function(){return this.currWindow.document.body}},{key:"getHead",value:function(){return this.currWindow.document.head}},{key:"getBodyHTML",value:function(){return this.getBody().innerHTML}},{key:"getWinObj",value:function(){return this.currWindow}},{key:"logUrlChangeEvent",value:function(e){var t=e.basicProps;_.isDefined(t)&&t.url&&config.isSPAEnabled()&&this.newPage(!0,e)}},{key:"newPage",value:function(e,t,r){var n,i=this;this.getEventWriter()&&(e&&(globalDataCache.clearCache(),this.getEventWriter()&&(this.getEventWriter().resetState(),this.getEventWriter().resetDomPathCache()),this.rcEventMonitor&&this.rcEventMonitor.newPage()),this.trackPV(getInstance(),t),config.basicMode()?this.generateHTML(!0,t):(this.initCapture(),this.generateHTML(!0,t),this.rcFrame&&this.rcFrame.handleIframe(this)),this.getEventWriter().serializeAndUpload(!0),this.rcEventMonitor&&this.rcEventMonitor.newPage(),1===globalSessionTracker.getPV()&&this.addInitSizeToSessionProperties(this.currWindow),r&&(setTimeout(function(){i.generateHTML(!0,t,null,!0)},1e3),config.isEnhancedHM()&&(n=this.currWindow&&this.currWindow.location&&this.currWindow.location.href,setTimeout(function(){var e=i.currWindow&&i.currWindow.location&&i.currWindow.location.href;n===e&&window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track&&(window.auryc.track("HM_SPA",{_auryc_intl_:!0}),i.generateHTML(!0,t,null,!0))},1e4))))}},{key:"initSize",value:function(){var e,t=dom.getSize(this.currWindow),r=0,n=this.getEventWriter(),i=dom.getDocSize(this.getDocObj()),a={w:i.width,h:i.height};this.cachedDocSize=i,getInstance().isPhoneOrTablet()&&(e=t,t=a,a=e,270===(r=screen&&screen.orientation?screen.orientation.angle:window.orientation)&&(r=-90)),n.append(EventType.WindowDimT(),{sz:t,avs:a,v:r,m:getInstance().isPhoneOrTablet()},n.updateNodeDict(this.getProcXPath())),0<i.width&&0<i.height&&!_.disableEvent(EventType.HTMLDimT())&&(n.append(EventType.HTMLDimT(),{sz:{w:i.width,h:i.height}},n.updateNodeDict(this.getProcXPath())),n.updateNodeDict(this.getProcXPath())),n.append(EventType.SclWindowT(),{ps:browser$1.getScroll(this.currWindow)},n.updateNodeDict(this.getProcXPath()))}},{key:"addInitSizeToSessionProperties",value:function(){var e=browser$1.getScreenResolution(this.currWindow),t=browser$1.getWinSize(this.currWindow),r={"Display Size":e.w+" x "+e.h,"Browser Size":t.w+" x "+t.h,"Browser Width":t.w,"Browser Height":t.h};window.auryc&&window.auryc.addInternalSessionProperties?window.auryc.addInternalSessionProperties(r):(window.aurycReadyCb=window.aurycReadyCb||[],window.aurycReadyCb.push(function(){window.auryc.addInternalSessionProperties(r)})),trackBrowserLanguage(this.currWindow)}},{key:"trackDocSizeChange",value:function(){var e=dom.getDocSize(this.getDocObj());if(e)if(this.cachedDocSize){if(this.cachedDocSize.width===e.width&&this.cachedDocSize.height===e.height)return;this.cachedDocSize=e,this.getEventWriter().append(EventType.HTMLDimT(),{sz:{w:e.width,h:e.height}},this)}else this.cachedDocSize=e,this.getEventWriter().append(EventType.HTMLDimT(),{sz:{w:e.width,h:e.height}},this)}},{key:"getProcXPath",value:function(){return this.myFullPath}},{key:"setProcXPath",value:function(e){this.myXPath=e.split(","),this.parentFrameProc?this.myFullPath=this.myXPath.concat(this.parentFrameProc.getProcXPath()):this.myFullPath=this.myXPath}},{key:"getDocObj",value:function(){return this.isActive()?this.currWindow.document:null}},{key:"isActive",value:function(){return this.currWindow}},{key:"setReady",value:function(){this.getEventWriter().setReady()}},{key:"setNotReady",value:function(){this.getEventWriter().setNotReady()}},{key:"getTopMostFrameProc",value:function(){return this.parentFrameProc?this.parentFrameProc.getTopMostFrameProc():this}},{key:"isTopMostProc",value:function(){return this.getTopMostFrameProc()===this}},{key:"isTopMostWindow",value:function(){return this.currWindow===this.currWindow.top}},{key:"getPerfLantecy",value:function(){var e=_.now(),t=Math.min(_.get(window,"performance.timing.responseStart",e),window.aurycLoadedTime),r=Math.max(_.get(window,"performance.timing.responseEnd",e),window.aurycLoadedTime);return Math.min(constants.time.MAX_LOAD_TIME,Math.max(constants.time.MIN_DOMLOAD_TIME,r-t))}},{key:"generateHTML",value:function(e,t,r,n){var i,a,o,s,c,l,g,u,d=this.getEventWriter();d&&this.getBody()&&(globalSessionTracker.isSpaSendPV()&&!n&&this.getEventWriter().resetDomPathCache(),i=globalCacheObj.getNodeXPath(this.getBody()),a=this.isTopMostWindow()&&!e?globalDataCache.getObject(this.getBodyHTML(),i).id:null,o=_.get(t,"basicProps.currentTime",globalSessionTracker.getPVStartTS()),s={},s=config.basicMode()?{id:_.UUID(),v:"<!DOCTYPE html><html><head><title>"+getDocumentTitle(this.currWindow.document)+"</title></head><body>Not Recorded</body></html>"}:DomSerialize.getInstance().serialize(this.currWindow,this.getProcXPath(),d),l=(c=_.get(this,"currWindow.location.href"))?obfuscateUrl(c.toString()):"",_.isUndefined(r)||(l="ScrollToBottom_"+r),logger.liveDebug("generate HTML on "+l,this.myXPath.join(",")),_.isNumber(o)||(o=_.now()),g={"cD:nO:lM":s,comp:1,"hId:cId":a,"sCurr:kTime":o,"tLoc:qHref:k":l,jType:DomSerialize.getInstance().getDocType(),"sTime:cLat":this.getPerfLantecy()},u=d.updateNodeDict(this.getProcXPath()),_.disableEvent(EventType.HTMLTextT())||(d.append(EventType.HTMLTextT(),g,u),this.trackNodeDictionary(),config.supportsDeclarativeShadowDOM()||DomSerialize.getInstance().processShadowDOM(this.currWindow.document,d,u)))}},{key:"notifyDomUpdated",value:function(e){this.domUpdatedEvent&&this.domUpdatedEvent.publishTopic(e)}},{key:"notifyPauseResume",value:function(e){this.pauseResumeEvent&&this.pauseResumeEvent.publishTopic(e)}},{key:"notifyModuleEvent",value:function(e){this.toggleModuleEvent&&this.toggleModuleEvent.publishTopic(e)}},{key:"getMyCoordinates",value:function(){return this.myCoordinates}},{key:"isCrossDomainIframe",value:function(){return this.crossDomainIframe}},{key:"initCapture",value:function(e,t){var r=this;this.rcEventMonitor||(this.domUpdatedEvent=new PubSubTopic,this.rcEventMonitor=new RcEventMonitor(this,getInstance()),this.domUpdatedEvent.addListener(function(e){e=e||r.currWindow.document.body,r.rcFrame&&r.rcFrame.handleIframe(r,e),r.rcEventMonitor.handleFormInputs(e),r.trackDocSizeChange()}),AurycPubSub.addListener(constants.events.ENDSESSION,function(e){r.rcFrame&&r.rcFrame.handleIframeEndSession(r)}),this.pauseResumeEvent=new PubSubTopic,this.pauseResumeEvent.addListener(function(e){r.rcFrame&&r.rcFrame.handleIframePauseResume(r,e)}),this.rcFrame=RcFrame.getInstance(),!0===e&&(logger.liveDebug("call generateHTML for iframe:"+this.currWindow.location.href),this.generateHTML(null,null,null,!t)),this.toggleModuleEvent=new PubSubTopic,this.toggleModuleEvent.addListener(function(e){r.rcEventMonitor.handleToggleEvent(e)}))}},{key:"trackNodeDictionary",value:function(){}},{key:"sendFramePage",value:function(e){this.currWindow&&(this.generateHTML(null,null,null,e),this.isCrossDomainIframe()&&globalSessionTracker.setSessionCrossDomainFrame(!0))}}],[{key:"getInstance",value:function(e,t){var r;return e=e||window,r9a.instance||(t?(r=t.fpath.split(","),r9a.instance=new r9a(e,r,null,!0,t.myCoordinates)):r9a.instance=new r9a(e)),r9a.instance}}]),r9a);function r9a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;if(classCallCheck(this,r9a),logger.liveDebug("In RCProcessor for: "+e.location.href),this.childrenProc=[],this.currWindow=e,this.myXPath=t,this.iframeIndexes=new ClearableWeakMap,this.maxIframeIndex=0,this.crossDomainIframe=n,this.eventWriter=EventWriter.getInstance(),this.initialized=!1,r){logger.liveDebug("parentFrameProc exists: "+e.location.href);try{this.sendIframeEvent(e),logger.liveDebug("to process iframe on: "+e.location.href)}catch(e){}return this.parentFrameProc=r,this.myFullPath=this.myXPath.concat(this.parentFrameProc.getProcXPath()),config.basicMode()||(setupCutomDataCollection(e,config.getConfig("userProperties","behavior")),this.initCapture(!0,n)),void(this.initialized=!0)}if(n){if(this.myFullPath=this.myXPath,!config.basicMode()){this.initCapture(!0,n),userProperty.setupCutomDataCollection(),this.initEventHandling();try{this.sendIframeEvent(e)}catch(e){}}return this.myCoordinates=i,void(this.initialized=!0)}this.myFullPath=this.myXPath,this.parentFrameProc=null,this.initEventHandling(),globalDataCache.clearCache(),this.mIn=!1,this.ccInputCache={},this.initialized=!0}var RcController=(createClass(Hbb,[{key:"init",value:function(e,t){this.rcProcessor=ReplayProcessor.getInstance(this.winobj,t),e&&this.rcProcessor.setReady()}},{key:"setReady",value:function(){this.rcProcessor&&this.rcProcessor.setReady()}},{key:"pause",value:function(){this.rcProcessor=ReplayProcessor.getInstance(this.winobj),this.rcProcessor.notifyPauseResume("pause"),this.rcProcessor.getEventWriter().pause()}},{key:"setDisableTextCapture",value:function(e){this.disableTextCapture=e}},{key:"getDisableTextCapture",value:function(){return this.disableTextCapture}},{key:"unregister",value:function(){this.pause(),this.rcProcessor=ReplayProcessor.getInstance(this.winobj),this.rcProcessor.unregister()}},{key:"resume",value:function(){return this.rcProcessor=ReplayProcessor.getInstance(this.winobj),this.rcProcessor.notifyPauseResume("resume"),this.rcProcessor.getEventWriter().resume()}},{key:"notifyModuleEvent",value:function(e){this.rcProcessor=ReplayProcessor.getInstance(this.winobj),this.rcProcessor.notifyModuleEvent(e)}}],[{key:"getInstance",value:function(e){return Hbb.instance||(Hbb.instance=new Hbb(e)),Hbb.instance}}]),Hbb);function Hbb(e){classCallCheck(this,Hbb),this.winobj=e,this.rcProcessor=null}function styleInject(e,t){void 0===t&&(t={});var r,n,i=t.insertAt;e&&"undefined"!=typeof document&&(r=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).id="auryc_style","top"===i&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}var css$1='@charset "UTF-8";.auryc-feedback .description{font-size:12px!important;font-weight:600!important;color:#292e3f!important}.auryc-feedback #mainLabel{padding-bottom:15px!important}.auryc-feedback .radioOption{text-align:center!important}.auryc-feedback table{margin:16px 0 24px!important;width:100%!important}.auryc-feedback tr:nth-child(odd):not(:first-child){background-color:#f6f7f9!important}.auryc-feedback .questionText{font-size:12px!important;width:60%!important;width:36%!important;padding:12px!important}.auryc-feedback .questionColumn{padding:10px 0!important;width:50%!important}.auryc-feedback *{font-family:Open Sans,sans-serif!important;float:none!important;text-transform:none!important;height:auto}.auryc-feedback{display:block;font-size:10px!important;line-height:1.599!important;padding:2em!important;text-align:left!important;border-radius:5px!important;resize:both!important}.auryc-fbmodal-wrapper,.auryc-feedback{font-family:Open Sans,sans-serif!important;color:#4a4a4a}.auryc-fbmodal-wrapper{display:block;position:fixed!important;z-index:2147483647!important;width:100%!important;height:100%!important;left:0!important;top:0!important;padding:0!important;margin:0!important;display:table}.auryc-fbmodal-bground{opacity:0!important}.auryc-fbmodal-bground,.auryc-fbmodal-bground-enabled{width:100%!important;height:100%!important;left:0!important;top:0!important;padding:0!important;margin:0!important;position:fixed!important;z-index:900!important}.auryc-fbmodal-bground-enabled{opacity:.79!important;-webkit-transition:opacity .4s!important;transition:opacity .4s!important;background:#292d33}.auryc-fbmodal-container{width:100%!important;height:100%!important;left:0!important;top:0!important;position:fixed!important;overflow:scroll!important;padding:0!important;margin:0!important;z-index:2147483647!important}.auryc-fbmodal-content{display:block;font-size:18px!important;margin:0 auto 100px;text-align:left!important;padding:9.5px!important;height:100%!important;width:calc(99vw - 19px)!important;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important;outline:none!important;-webkit-box-sizing:unset!important;box-sizing:unset!important}.auryc-fbmodal-content:focus{border-radius:0!important;outline:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;background-color:none!important;border:0!important}@media (min-width:480px){.auryc-fbmodal-content{max-width:540px!important}}.auryc-fbmodal-body{display:block;opacity:0!important;width:100%!important}.auryc-fbmodal-body-enabled{background:#fff;-webkit-box-shadow:0 0 39px 0 rgba(0,0,0,.3)!important;box-shadow:0 0 39px 0 rgba(0,0,0,.3)!important;display:block;border-radius:4.9px!important;opacity:1!important;-webkit-transition:opacity .4s ease!important;transition:opacity .4s ease!important;width:100%!important;text-align:center!important}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.auryc-fbmodal-body-enabled{-webkit-transition:none!important;transition:none!important}}.auryc-fbmodal-head{opacity:0!important}.auryc-fbmodal-head,.auryc-fbmodal-head-enabled{width:100%!important;display:block;clear:both!important}.auryc-fbmodal-head-enabled{opacity:1!important;-webkit-transition:opacity .4s ease!important;transition:opacity .4s ease!important;z-index:1!important}.auryc-fb-modal-closebtn{position:relative!important;right:10px!important;float:right!important;top:5px!important;background:none!important;outline:none!important;border:none!important;cursor:pointer!important;font-size:20px!important;font-weight:700!important;color:#505673!important;letter-spacing:normal!important;padding:0!important;padding:initial!important;width:auto!important;min-width:0!important}.auryc-fb-modal-closebtn:hover{color:#292e3f!important}.auryc-fb-modal-closebtn:focus{-webkit-box-shadow:0 0 2px #503bff!important;box-shadow:0 0 2px #503bff!important}#auryc-feedback-canvas{margin-top:15px!important;position:relative!important;text-align:right!important;width:100%!important}.auryc-feedback-fbquestiongroup{display:none}.auryc-feedback-fbquestiongroup-shown{display:block}#auryc-feedback-tab.auryc-feedback-tab-loc-br-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:auto!important;right:.59em!important;bottom:.59em;left:auto!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br{left:auto!important;right:0!important;top:auto!important;bottom:.59em;-webkit-transform:rotate(-90deg) translate(100%,2px)!important;transform:rotate(-90deg) translate(100%,2px)!important;-webkit-transform-origin:100% 100%!important;transform-origin:100% 100%!important;overflow:hidden!important;border-radius:6px 6px 0 0!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br:hover{-webkit-transform:rotate(-90deg) translate(100%)!important;transform:rotate(-90deg) translate(100%)!important;-webkit-box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:auto!important;right:auto!important;bottom:1.2em!important;left:.59em!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl{top:auto!important;right:auto!important;bottom:1.2em!important;-webkit-transform:translate(-2px,100%) rotate(-90deg)!important;transform:translate(-2px,100%) rotate(-90deg)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 6px 6px!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl:hover{-webkit-transform:translateY(100%) rotate(-90deg)!important;transform:translateY(100%) rotate(-90deg)!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:.59em!important;right:.59em!important;bottom:auto!important;left:auto!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr{position:fixed!important;top:.59em!important;right:0!important;left:auto!important;-webkit-transform:rotate(-90deg) translateY(-28px)!important;transform:rotate(-90deg) translateY(-28px)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;border-radius:6px 6px 0 0!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr:hover{-webkit-transform:rotate(-90deg) translateY(-30px)!important;transform:rotate(-90deg) translateY(-30px)!important;-webkit-box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;top:.59em!important;right:auto!important;bottom:auto!important;left:.59em!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl{margin:0!important;top:.59em!important;right:auto!important;border-radius:0 0 6px 6px!important;-webkit-transform:rotate(-90deg) translate(-100%,-2px)!important;transform:rotate(-90deg) translate(-100%,-2px)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;-webkit-transition:all .3s ease-in-out!important;transition:all .3s ease-in-out!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl,#auryc-feedback-tab.auryc-feedback-tab-loc-tl:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl:hover{-webkit-transform:rotate(-90deg) translate(-100%)!important;transform:rotate(-90deg) translate(-100%)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;top:50%!important;right:auto!important;bottom:auto!important;left:.59em!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl{right:auto!important;top:50%!important;-webkit-transform:rotate(-90deg) translate(-50%,-2px)!important;transform:rotate(-90deg) translate(-50%,-2px)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 6px 6px!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl:hover{-webkit-transform:rotate(-90deg) translate(-50%)!important;transform:rotate(-90deg) translate(-50%)!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:50%!important;right:.59em!important;bottom:auto!important;left:auto!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr{top:50%!important;right:0!important;bottom:auto!important;left:auto!important;-webkit-transform:rotate(-90deg) translate(50%,-28px)!important;transform:rotate(-90deg) translate(50%,-28px)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;overflow:hidden!important;border-radius:6px 6px 0 0!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr:hover{-webkit-transform:rotate(-90deg) translate(50%,-30px)!important;transform:rotate(-90deg) translate(50%,-30px)!important;-webkit-box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important}.auryc-fb-validation-msg-section{font-family:Open Sans,sans-serif!important;font-size:14px!important;color:#db2d43;border-radius:.49em!important;margin-bottom:.49em!important;margin-top:2em!important;display:none;text-align:left!important}#auryc-feedback-tab{display:block;position:fixed!important;top:0!important;margin:0!important;border:none!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;left:0!important;background:#503bff;opacity:.95!important;font-family:Open Sans,sans-serif!important;line-height:32px!important;cursor:pointer!important;z-index:2147483647!important;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important}.auryc-feedback-tab-label{font-family:inherit!important;color:#fff;font-size:100%!important;z-index:5!important;font-weight:600!important;line-height:inherit!important;letter-spacing:normal!important}.auryc-feedback div,.auryc-feedback fieldset,.auryc-feedback h1,.auryc-feedback h2,.auryc-feedback img,.auryc-feedback label,.auryc-feedback p,.auryc-feedback span{margin:0!important;font:inherit!important;padding:0!important;border:0!important;vertical-align:baseline!important}#auryc-feedback-tab.auryc-feedback-tab-dt-desktop,#auryc-feedback-tab.auryc-feedback-tab-dt-tablet{display:block;height:30px!important;margin:0!important;padding:0 16px!important;border-radius:100px;font-size:14px!important;-webkit-transition:-webkit-box-shadow .1s ease-out!important;transition:-webkit-box-shadow .1s ease-out!important;transition:box-shadow .1s ease-out!important;transition:box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out!important;overflow:hidden!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone{width:40px!important;height:40px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;background:#2f8cff;border-radius:50%!important;cursor:pointer!important;fill:#fff;-webkit-box-shadow:0 1px 5px rgba(0,0,0,.06),0 2px 30px rgba(0,0,0,.12)!important;box-shadow:0 1px 5px rgba(0,0,0,.06),0 2px 30px rgba(0,0,0,.12)!important;bottom:40px;margin-right:10px}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-new{height:28px!important;display:block;border-radius:4px 4px 0 0;-webkit-box-shadow:0 1px 2px 1px rgba(41,46,63,.26)!important;box-shadow:0 1px 2px 1px rgba(41,46,63,.26)!important;padding:0 14px!important;overflow:hidden!important;font-size:12px!important;line-height:28px!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-new.auryc-feedback-tab-loc-bl-horizontal,#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-new.auryc-feedback-tab-loc-br-horizontal{bottom:0!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tr-horizontal{margin-right:.59em!important;position:fixed!important;left:auto!important;right:0!important;top:.59em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-loc-smartphone-tr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tr{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;-webkit-transform:rotate(-90deg) translateY(-78%)!important;transform:rotate(-90deg) translateY(-78%)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;border-radius:5px 5px 0 0!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;left:auto!important;right:0!important;top:.59em!important;margin-right:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tr .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl-horizontal{position:fixed!important;left:0!important;right:auto!important;top:.59em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl{-webkit-transform:rotate(-90deg) translate(-100%,-22%)!important;transform:rotate(-90deg) translate(-100%,-22%)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 5px 5px!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;right:auto!important;margin-left:.29em!important;top:.59em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl-horizontal{position:fixed!important;left:0!important;right:auto!important;top:50%!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl{right:auto!important;margin-left:.29em!important;top:50%!important;-webkit-transform:rotate(-90deg) translate(-50%,-22%)!important;transform:rotate(-90deg) translate(-50%,-22%)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 5px 5px!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-br{-webkit-transform:rotate(-90deg) translate(50%,-78%)!important;transform:rotate(-90deg) translate(50%,-78%)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;height:30px!important;padding:7px 14px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;background:#2f8cff;border-radius:4px 4px 0 0!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-br-horizontal{bottom:0!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-br-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-br .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-cr-horizontal{position:fixed!important;left:auto!important;right:0!important;top:50%!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr{-webkit-transform:rotate(-90deg) translate(50%,-100%)!important;transform:rotate(-90deg) translate(50%,-100%)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;border-radius:5px 5px 0 0!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;left:auto!important;right:0!important;top:50%!important;margin-right:inherit!important;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl-horizontal,#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr{position:fixed!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;display:block}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl-horizontal{margin-right:.59em!important;right:auto!important;margin-left:.59em!important;top:auto!important;bottom:0!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl{right:auto!important;margin-left:.59em!important;top:auto!important;bottom:1.2em!important;-webkit-transform:translate(-8%,100%) rotate(-90deg)!important;transform:translate(-8%,100%) rotate(-90deg)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 5px 5px!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}@media print{#auryc-feedback-tab.auryc-feedback-tab-dt-desktop,#auryc-feedback-tab.auryc-feedback-tab-dt-tablet{display:none!important}}.auryc-feedback-spinner{display:block;top:1!important;left:1!important;position:absolute!important;z-index:2147483647!important}.auryc-fbmodal-body-selection{color:#4a4a4a;text-align:left!important;padding:25px 15px 15px!important}.auryc-fbmodal-body-selection .auryc-fbmodal-body-selection_title{font-size:18px!important;font-weight:600!important;line-height:24px!important}.auryc-fbmodal-body-selection .auryc-feedback-general,.auryc-fbmodal-body-selection .auryc-feedback-screenshot{background-color:#f6f6f6;border:1px solid #cfcfcf;border-radius:3px!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;cursor:default!important;display:table;margin-top:10px!important;padding:5px!important;white-space:nowrap!important;width:100%!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback_option_row,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback_option_row{display:table-row;height:60px!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback_option_column,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback_option_column{display:table-cell;vertical-align:middle!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback-selection__label1,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback-selection__label1{font-size:16px!important;font-weight:600!important;line-height:22px!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback-selection__label2,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback-selection__label2{font-size:14px!important;font-weight:400!important;line-height:19px!important;white-space:normal!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback-selection__labels,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback-selection__labels{padding-left:5px!important;vertical-align:middle!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback_option_image,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback_option_image{width:50px!important}.auryc-fbmodal-body-selection .auryc-feedback-general img,.auryc-fbmodal-body-selection .auryc-feedback-screenshot img{vertical-align:middle!important;padding:0 5px!important}.auryc-fbmodal-body-selection .auryc-feedback-general:hover,.auryc-fbmodal-body-selection .auryc-feedback-screenshot:hover{background-color:#e4ecfc!important}div [dataType=auryc-fbq-wrapper]>p,div [dataType=auryc-fbq]>p{display:block;font-size:14px!important;text-align:center!important;font-weight:400!important;color:#4a4a4a;letter-spacing:0!important}.auryc-fbmodal-body-fbform,.auryc-fbmodal-body-selection{display:none}@media (min-width:1024px){.auryc-feedback{text-align:left!important}.auryc-feedback .auryc-fb-starrating-field{font-size:15px!important}.auryc-feedback .auryc-fb-starrating-field-matrix{font-size:15px!important;text-align:center!important}}.auryc-feedback .auryc-feedback-fbform-headtag{font-family:light,Open Sans,sans-serif!important;margin-bottom:10px!important;line-height:1.2!important;color:#4a4a4a;letter-spacing:-.1px!important;background:transparent none repeat 0 0/auto auto padding-box border-box scroll!important;background:initial!important}.auryc-feedback .auryc-feedback-fbform-headtag-h1{font-size:25px!important;font-family:Open Sans,sans-serif!important;font-weight:400!important;text-align:center!important;width:inherit!important;text-transform:none!important}.auryc-feedback .auryc-feedback-fbform-headtag-h2{font-size:2.4em!important}.auryc-feedback .auryc-feedback-fblabel p{font-weight:600!important;font-size:14px!important;color:#4a4a4a;letter-spacing:0!important}.auryc-feedback p{font-size:1.2em!important;line-height:1.2!important;margin-bottom:.2em!important}.auryc-feedback .auryc-feedback-title-section{font-family:Open Sans,sans-serif!important;text-align:center!important;font-size:14px!important;margin-bottom:20px!important}.auryc-feedback .auryc-feedback-title-section .auryc-feedback-fblogo{height:3.49em!important;margin:0 auto 1.7em!important;display:block;max-height:144px!important;width:auto!important}.auryc-feedback .auryc-fb-starrating-field,.auryc-feedback .auryc-fb-starrating-field-matrix{width:96%!important;color:#cfcfcf!important;display:block;margin:0 auto!important;text-align:center!important;text-indent:0!important;white-space:nowrap!important}.auryc-feedback .auryc-fb-starrating-field-matrix label,.auryc-feedback .auryc-fb-starrating-field label{color:#cfcfcf;float:none!important;height:auto!important;min-width:0!important;max-width:none!important}.auryc-fbmodal-body-fbform-enabled{display:block}.auryc-feedback #post-fb-resp-button{display:inline-block;background:#22c6f3;border:.9px solid #20c8f7;border-radius:2.9px!important;padding:.02em 4.49em!important;color:#555;resize:none!important;width:199px!important;height:35px!important;margin-top:19px!important;font-size:14px!important;letter-spacing:normal!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-fb-invite-body{margin-top:15px!important}.auryc-feedback #invite-fb-yes-button{display:inline-block;background:#22c6f3;border:.9px solid #20c8f7;border-radius:2.9px!important;padding:.02em 2.25em!important;color:#555;resize:none!important;width:199px!important;height:35px!important;margin-top:19px!important;font-size:14px!important;letter-spacing:normal!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback #invite-fb-no-button{background:transparent!important;border:1px solid transparent!important;color:#505673!important;margin-top:8px!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-starrating-section{margin-bottom:.49em!important;font-size:18px!important;display:block;margin-top:10px!important}div[dataType=auryc-fbq-wrapper],div[dataType=auryc-fbq]{display:block;margin-top:10px!important}div[dataType=auryc-fbq-wrapper]{margin-bottom:24px!important}.auryc-feedback-fbquestion,.auryc-feedback-fbquestion-dropdown{display:block}.auryc-feedback .auryc-feedback-fblabel{display:block;text-align:center!important;font-size:12px!important;font-family:Open Sans,sans-serif!important;color:#4a4a4a;font-weight:600!important;margin-bottom:0!important;float:none!important;height:auto!important;border:0!important;position:static!important;letter-spacing:0!important;padding:0!important}.auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-checkbox]>label,.auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-radio]>label{border:1px solid #979797!important;border-radius:3px!important;font-size:12px!important}.auryc-feedback .auryc-feedback-fbemail,.auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-checkbox]>label,.auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-radio]>label{position:relative!important;background:#fff!important;width:100%!important;resize:none!important;padding:.49em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;text-align:left!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important}.auryc-feedback .auryc-feedback-fbemail{outline:none!important;border:1px solid #d0d7e6!important;color:#292e3f!important;border-radius:3px!important;font-size:12px;letter-spacing:normal!important}@media screen and (max-width:786px){.auryc-feedback-email,.auryc-feedback-fbemail,.auryc-feedback-question-textarea,.auryc-feedback textarea{font-size:16px!important}}.auryc-feedback .auryc-feedback-fbemail:focus{border:1px solid #838aa4!important}.auryc-feedback ::-webkit-input-placeholder{color:#505673!important;font-family:inherit!important;text-align:left!important;font-size:inherit!important}.auryc-feedback ::-moz-placeholder{color:#505673!important;font-family:inherit!important;text-align:left!important;font-size:inherit!important}.auryc-feedback ::-ms-input-placeholder{color:#505673!important;font-family:inherit!important;text-align:left!important;font-size:inherit!important}.auryc-feedback .auryc-feedback-question-textarea{position:relative!important;border-radius:3px!important;background:#fff!important;color:#292e3f!important;width:100%!important;font-size:12px;resize:none!important;padding:.49em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;text-align:left!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important;height:54px!important;border:1px solid #d0d7e6!important}.auryc-feedback .auryc-feedback-fbtarea{display:block;position:relative!important;margin:0!important;text-align:right!important}.auryc-feedback .auryc-feedback-fbtarea .auryc-feedback-fbctrl{padding-bottom:1.2em!important;margin:0!important;max-width:100%!important}.auryc-feedback .auryc-feedback-question-dropdown-choose,.auryc-feedback .auryc-feedback-question-select-choose{position:relative!important;border-radius:none!important;background:#fff!important;width:100%!important;font-size:12px!important;resize:none!important;padding:.49em!important;-webkit-box-sizing:border-box!important;text-align:left!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important;border:none!important;outline:none!important;color:#313943!important;box-sizing:border-box!important}a.PoweredByAuryc,a.PoweredByAuryc:hover{text-decoration:none!important;border:none!important}a.PoweredByAuryc:hover span{text-decoration:underline!important}.PoweredByAuryc:focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.auryc-feedback .auryc-feedback-footer-section{display:block;position:relative!important;text-align:center!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;white-space:normal!important}.auryc-feedback .auryc-feedback-footer-section .auryc-fbmodal-footer{background:inherit!important;position:relative!important;left:1px!important;display:table;font-size:10px!important;color:#4a4a4a!important;letter-spacing:-.35px!important;z-index:3!important;width:100%!important}.auryc-fbmodal-footer span{display:inline;color:#292e3f!important;font-size:11px!important;font-weight:400!important}.auryc-feedback .auryc-feedback-footer-section .auryc-fbmodal-footer img{display:inline;position:relative!important;top:-1px!important;left:1px!important;vertical-align:middle!important}.auryc-feedback .auryc-feedback-question-select-choose .auryc-fb-question-selector,.auryc-feedback .auryc-feedback-question-select-choose .auryc-fb-questiongroup-selector{position:absolute!important;left:0!important;top:0!important;width:100%!important;text-transform:none!important;cursor:pointer!important;font-size:12px!important;border:1px solid #d0d7e6!important;border-radius:3px!important;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA3klEQVRIS+3VMU9CMRTF8d8zBL+aizoQFhx0kUk33RzdYMNFXUFnYeGrYYyaJiUxJHDLSxodbNKpfeffc9/pbaPyaCrr+3OA++z4rtT5Pg5GuMnCY9yWQEoBE1xhlUUP8YDrCBIB0vojLvGO0yz4hm4JJAKcYYoPHGOZAUdYoIMBXrc5iQAHeMlzviFygj7O8dkWEJU4XI8chALRhn9AVKHf70VRTHu4wFfbmKZLNKt50dLBnna0imcMd/2I0phWa3Y/D1e1Xa9BCZJG0VuQNpaWKMx72xS1Fl5/WN3BN+AgJhnZQlq4AAAAAElFTkSuQmCC")!important;background-position:calc(100% - .5rem),100% 0!important;background-size:1.5em 1.5em!important;background-repeat:no-repeat!important;background-color:#fff!important;padding:4px 30px 4px 4px!important;font-weight:600!important;color:#292e3f!important;z-index:auto!important;letter-spacing:normal!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important;min-height:36px!important;white-space:normal!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;line-height:1.5!important}.auryc-feedback input[type=checkbox],.auryc-feedback input[type=radio]{-webkit-appearance:auto!important;-moz-appearance:auto!important;-ms-appearance:auto!important;-o-appearance:auto!important;appearance:auto!important}.auryc-feedback .auryc-feedback-question-dropdown-choose .auryc-fb-dropdown-selector{position:absolute!important;left:0!important;top:0!important;width:100%!important;text-transform:none!important;cursor:pointer!important;font-size:14px!important;border:1px solid #d0d7e6!important;border-radius:3px!important;background:#fff!important;padding:4px!important;font-weight:600!important;color:#292e3f!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important}.auryc-fb-question-selector::-ms-expand,.auryc-fb-questiongroup-selector::-ms-expand{display:none}.auryc-fb-questiongroup-selector:focus .auryc-fb-question-selector:focus{-webkit-box-shadow:0 0 1px 1px #23c6f5!important;box-shadow:0 0 1px 1px #23c6f5!important}.auryc-feedback .auryc-close-btn{width:222px!important;height:36px!important;position:relative!important;padding:.29em 1.9em!important;font-family:Open Sans,sans-serif!important;font-size:18px!important;line-height:0!important;text-align:center!important;color:#555!important;font-weight:400!important;display:inline-block;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;border-radius:0!important;background-color:#464c55;border:1px solid #464c55;cursor:pointer!important;margin:0 auto!important}.auryc-feedback .auryc-feedback-select-button{font-family:Open Sans,sans-serif!important;font-size:14px!important;font-weight:400!important;color:transparent!important;text-align:left!important}.auryc-feedback .post-fb-resp-button{padding:.49em .6999em!important;font-size:14px!important;line-height:1.618!important;width:100%!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-feedback-btn,.auryc-feedback .post-fb-resp-button{display:inline-block;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;border-radius:0!important;background-color:#464c55;border:1px solid #464c55;cursor:pointer!important;color:#fff;text-align:center!important;font-weight:400!important;-webkit-transition:all .14s ease!important;transition:all .14s ease!important;margin:0 auto!important}.auryc-feedback .auryc-feedback-btn{padding:.49em .69999em!important;font-size:1.7em!important;line-height:1.599!important;outline:0!important}.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon{font-size:6em!important;cursor:pointer!important;border:0!important}.auryc-feedback .auryc-fb-starrating-field-matrix .auryc-fb-starrating-field-staricon-matrix{font-size:6em!important;cursor:pointer!important;border:0!important;margin:auto!important}.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon:before{font-family:Open Sans,sans-serif!important;content:""}.auryc-feedback .auryc-fb-starrating-field-matrix .auryc-fb-starrating-field-staricon-matrix:before{font-family:Open Sans,sans-serif!important;content:"";margin:auto!important}.auryc-feedback .auryc-fb-starrating-field--disabled,.auryc-feedback .auryc-fb-starrating-field-matrix--disabled{color:#eaebec!important}.auryc-feedback .auryc-fb-starrating-field--disabled .auryc-fb-starrating-field-staricon{cursor:default!important;border:0!important}.auryc-feedback .auryc-fb-starrating-field-matrix--disabled .auryc-fb-starrating-field-staricon-matrix{cursor:default!important;border:0!important;margin:auto!important}.auryc-feedback .auryc-fb-starrating-field-matrix input[type=radio],.auryc-feedback .auryc-fb-starrating-field input[type=radio]{position:absolute!important;left:-10000px!important;display:block}.auryc-feedback input[type=text],.auryc-feedback textarea{font-family:Open Sans,sans-serif!important;height:100%!important;float:none!important;height:auto!important;min-height:auto!important}.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon:before,.auryc-feedback .auryc-fb-starrating-field label:before,.auryc-feedback .auryc-feedback-checkbox:before,.auryc-feedback .auryc-feedback-radio:before{margin:0!important}.auryc-feedback .auryc-fb-starrating-field-matrix .auryc-fb-starrating-field-staricon-matrix:before,.auryc-feedback .auryc-fb-starrating-field-matrix label:before,.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon:before,.auryc-feedback .auryc-fb-starrating-field label:before,.auryc-feedback .auryc-feedback-checkbox:before,.auryc-feedback .auryc-feedback-radio:before{font-family:AurycFontAwesome!important;line-height:1!important;font-style:normal!important;font-weight:400!important;font-stretch:normal!important;-webkit-font-feature-settings:normal!important;font-feature-settings:normal!important;font-variant:normal!important;font-size:inherit!important;text-rendering:auto!important;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important;-webkit-box-sizing:unset!important;box-sizing:unset!important;-webkit-box-shadow:none!important;box-shadow:none!important;border-radius:0!important;position:relative!important;top:0!important;left:0!important;-webkit-transform:unset!important;transform:unset!important;display:inline!important}.auryc-feedback .auryc-fb-starrating-field-matrix .auryc-fb-starrating-field-staricon-matrix:before,.auryc-feedback .auryc-fb-starrating-field-matrix label:before,.auryc-feedback .auryc-feedback-checkbox:before,.auryc-feedback .auryc-feedback-radio:before{margin:auto!important}.auryc-feedback .auryc-fb-starrating-field-matrix input[type=radio]:checked+label:after,.auryc-feedback .auryc-fb-starrating-field-matrix input[type=radio]:not(:checked)+label:after,.auryc-feedback .auryc-fb-starrating-field input[type=radio]:checked+label:after,.auryc-feedback .auryc-fb-starrating-field input[type=radio]:not(:checked)+label:after{background:transparent!important}.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label{margin:0!important}.auryc-feedback .auryc-fb-starrating-field-matrix input.auryc-fb-starrating-field-staricon-matrix+label,.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label{padding:0!important;font-size:2em!important;cursor:pointer!important;display:inline-block;border:0!important;position:static!important}.auryc-feedback .auryc-fb-starrating-field-matrix label:before,.auryc-feedback .auryc-fb-starrating-field label:before{-webkit-transition:color .15s ease!important;transition:color .15s ease!important;content:"☆"!important;background:0 0!important;height:auto!important;width:auto!important;top:0!important;margin:0!important;position:static!important;border:none!important}.auryc-feedback .auryc-fb-starrating-field-matrix input.auryc-fb-starrating-field-staricon-matrix:checked+label:before,.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon:checked+label:before{content:"★"!important;color:#ffaf40;background:0 0!important;position:static!important;border:0!important}.auryc-feedback .auryc-fb-starrating-field-matrix label.auryc-ratings-chosen:before,.auryc-feedback .auryc-fb-starrating-field label.auryc-ratings-chosen:before{color:#ffaf40;content:"★"!important}.auryc-feedback .auryc-nps__container{border:1px solid #f6f7f9!important;border-radius:5px!important;padding:10px 0!important;background-color:transparent!important}@media (max-width:360px) and (orientation:portrait){.auryc-feedback .auryc-nps__container{padding:10px 0 0!important}}.auryc-feedback .auryc-nps__container .nps-rating{padding:10px 10px 0!important;margin:auto auto 10px!important;min-height:35px!important;text-align:justify!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__labels{display:block}.auryc-feedback .auryc-nps__container .nps-rating input[type=radio]:checked+label:after,.auryc-feedback .auryc-nps__container .nps-rating input[type=radio]:not(:checked)+label:after{background:transparent!important}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label,.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{font-size:12px;color:#505673}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label{float:left!important}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{float:right!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges{display:block;text-align:center!important;min-height:30px!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label{padding:0!important;cursor:pointer!important;display:inline;margin:0!important;border:0!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:before{display:none}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:hover{color:#fff;background-color:#23c6f5}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border-radius:50%!important;width:28px!important;padding:2px!important;font-size:12px!important;line-height:1em!important;position:relative!important;background:#f6f7f9;border:1px solid #d0d7e6;display:inline-block;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;bottom:auto!important;top:auto!important;left:auto!important;right:auto!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .aurycNpsRatingChecked,.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges input[type=radio]:checked+label{color:#fff;background-color:#23c6f5}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge .nps-rating__height_fix{margin-top:100%!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge .nps-rating__num{position:absolute!important;left:0!important;top:50%!important;height:100%!important;width:100%!important;text-align:center!important;margin-top:-6px!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .stretch{width:100%!important;display:inline-block;font-size:0!important;line-height:0!important;padding:0!important;margin:0!important;height:0!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges input[type=radio]{position:absolute!important;left:-10000px!important;display:block}@media (max-width:420px) and (orientation:portrait){.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{width:20px!important}}.auryc-feedback .auryc-feedback-checkbox,.auryc-feedback .auryc-feedback-radio{text-align:left!important;display:block;cursor:pointer!important;padding:4px 10px!important;bottom:auto!important;top:auto!important;left:auto!important;right:auto!important}.auryc-feedback .auryc-feedback-checkbox:focus,.auryc-feedback .auryc-feedback-radio:focus{background:#f6f7f9!important}.auryc-feedback .auryc-feedback-checkbox:nth-child(1n+2),.auryc-feedback .auryc-feedback-radio:nth-child(1n+2){margin-top:.49em!important}@media (orientation:landscape),screen and (max-width:720px){.auryc-feedback .auryc-feedback-checkbox input,.auryc-feedback .auryc-feedback-checkbox input:checked,.auryc-feedback .auryc-feedback-radio input,.auryc-feedback .auryc-feedback-radio input:checked{display:inline-block;font-size:14px!important;opacity:1!important;position:static!important}}@media (min-width:720px) and (orientation:portrait){.auryc-feedback .auryc-feedback-checkbox input,.auryc-feedback .auryc-feedback-radio input{display:none}.auryc-feedback .auryc-feedback-checkbox:before{content:"";padding-left:.29em!important;padding-right:.29em!important;color:inherit;opacity:.3}.auryc-feedback .auryc-feedback-checkbox.aurycChecked:before{content:"";opacity:1;color:#23c6f5}.auryc-feedback .auryc-feedback-radio:before{padding-left:.29em!important;padding-right:.29em!important;color:inherit;opacity:.3;content:"\\f10c"}.auryc-feedback .auryc-feedback-radio.aurycChecked:before{content:"\\f111";opacity:1;color:#23c6f5}}.aurycIsRequired{color:#db2d43!important}.fb-desktop:not(.user-is-tabing) button:focus,.fb-desktop:not(.user-is-tabing) input:focus,.fb-desktop:not(.user-is-tabing) select:focus,.fb-desktop:not(.user-is-tabing) textarea:focus{outline:none!important}.fb-desktop .auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label,.fb-desktop .auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label{border:1px solid transparent!important;vertical-align:middle!important;background:transparent!important}.fb-desktop.user-is-tabing .auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label.focus,.fb-desktop.user-is-tabing .auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label.focus,.fb-desktop.user-is-tabing button:focus,.fb-desktop.user-is-tabing input:focus,.fb-desktop.user-is-tabing select:focus,.fb-desktop.user-is-tabing textarea:focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.fb-desktop .auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>input,.fb-desktop .auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>input{position:absolute!important;left:-10000px!important}.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label{border:1px solid hsla(0,0%,100%,.5)!important}.auryc-feedback .auryc-fb-starrating-field-matrix input.auryc-fb-starrating-field-staricon-matrix+label{margin:auto!important}.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field-matrix input.auryc-fb-starrating-field-staricon-matrix+label.focus,.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label.focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field-matrix input.auryc-fb-starrating-field-staricon-matrix+label.focus{margin:auto!important}.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border:1px solid transparent!important}.fb-desktop.user-is-tabing .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge.focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.fb-desktop .auryc-feedback .auryc-starrating-section legend.auryc-feedback-fblabel,.fb-desktop .auryc-feedback .nps-rating legend.auryc-feedback-fblabel{margin-left:-10px!important}.fb-desktop .auryc-feedback legend{display:table!important;max-width:100%!important}.fb-desktop .auryc-feedback label.auryc-feedback-checkbox:focus,.fb-desktop .auryc-feedback label.auryc-feedback-radio:focus{background:#fafaff!important;-webkit-box-shadow:0 1px 1px #b3badb!important;box-shadow:0 1px 1px #b3badb!important;color:#292e3f!important;border:1px solid #6875b8!important}.auryc-feedback .auryc-feedback-title-section .auryc-feedback-fblogo{margin:0 0 20px!important}.fb-desktop .auryc-feedback h1{font-weight:600!important;font-size:20px!important;color:#292e3f!important;text-align:left!important}.fb-desktop .auryc-feedback p{font-size:14px!important;color:#292e3f!important;text-align:left!important}.fb-desktop .auryc-feedback .required-label{color:#505673!important;font-size:12px!important;font-style:italic!important;margin:10px 0!important}.fb-desktop .auryc-feedback .required-label b{color:#db2d43!important}.fb-desktop .auryc-feedback .auryc-feedback-fblabel{text-align:left!important;font-weight:600!important;font-size:12px!important;color:#292e3f!important;position:static!important}.fb-desktop .auryc-feedback .auryc-feedback-fblabel.aurycIsRequired{color:#db2d43!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field{text-align:left!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field-matrix{text-align:center!important}.fb-desktop.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field-matrix.focus,.fb-desktop.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field.focus{outline:solid!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field-matrix label,.fb-desktop .auryc-feedback .auryc-fb-starrating-field label{color:#838aa4!important;width:auto!important}.fb-desktop .auryc-feedback .auryc-nps__container{background:transparent!important;border:transparent!important}.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;text-align:left!important;min-height:30px!important;-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important;-ms-flex-flow:wrap!important;flex-flow:wrap!important}.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border-radius:4px!important}.fb-desktop .auryc-feedback .auryc-feedback-radio:before{content:"\\f1db"!important;font-size:18px!important;opacity:1!important;padding-left:4px!important;padding-right:4px!important;border:none!important}.fb-desktop .auryc-feedback .auryc-feedback-radio.aurycCheckedOverride:before{border:1px solid #000!important;border-radius:12px!important;content:"\\f111"!important;font-size:14px!important;margin:3px!important;padding:1px 2px!important;opacity:1!important;border:0!important}.fb-desktop .auryc-feedback .auryc-feedback-checkbox:before{content:"\\f096";font-size:20px!important;padding-left:4px!important;padding-right:4px!important;opacity:1!important;border:0!important;background:#fff!important}.auryc-feedback .auryc-feedback-checkbox.aurycCheckedOverride:before,.auryc-feedback .auryc-feedback-radio.aurycCheckedOverride:before{background:transparent!important}.auryc-feedback .auryc-feedback-checkbox.aurycCheckedOverride:before{padding-left:3px!important;padding-right:3px!important}.fb-desktop .auryc-feedback .auryc-feedback-checkbox,.fb-desktop .auryc-feedback .auryc-feedback-radio{display:inline!important;outline:none!important;padding:4px 10px!important}.fb-desktop .auryc-feedback-checkbox.full,.fb-desktop .auryc-feedback-radio.full{display:block!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field-matrix.centered,.fb-desktop .auryc-feedback .auryc-fb-starrating-field.centered{text-align:center!important}.auryc-feedback .auryc-feedback-title-section .auryc-feedback-fblogo.centered{margin:0 auto 1.7em!important}.fb-desktop .auryc-feedback-title-section h1.centered,.fb-desktop .auryc-feedback-title-section p.centered,.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges.centered,.fb-desktop .auryc-nps__container .auryc-feedback-fblabel.centered,.fb-desktop .auryc-starrating-section .auryc-feedback-fblabel.centered{text-align:center!important}@media screen and (max-width:786px){.auryc-feedback .matrix td{display:block!important}.auryc-feedback .matrix .inLineRadio{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:distribute!important;justify-content:space-around!important}.auryc-feedback .matrix .inLineRadio,.auryc-feedback .matrix .lineBreakRadio{-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-ms-flex-direction:row!important;flex-direction:row!important;padding-bottom:12px!important}.auryc-feedback .matrix .lineBreakRadio{display:block!important}.auryc-feedback .matrix .lineBreakRadio .radioList{padding:4px 10px!important}.auryc-feedback .matrix .questionText{width:100%!important;padding:8px 0 8px 8px!important;font-weight:600!important}}';styleInject(css$1);var Event=(createClass(acb,[{key:"addListener",value:function(){this.event.addListener.apply(this.event,arguments),0<this.event.listeners.length&&this.listener.start()}},{key:"handleEvent",value:function(){this.event.publishTopic()}}]),acb);function acb(e){classCallCheck(this,acb),this.event=new PubSubTopic,this.listener=new e(this.handleEvent.bind(this))}var NavigationListener=(createClass(ecb,[{key:"start",value:function(){this.started||history.pushState&&window.addEventListener&&(this.originalPushState=history.pushState,history.pushState=function(e,t){this.originalPushState.apply(history,arguments),this.handleEvent()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){this.originalReplaceState.apply(history,arguments),this.handleEvent()}.bind(this),window.addEventListener("popstate",this.handleEvent),this.started=!0)}},{key:"stop",value:function(){this.started&&(history.pushState=this.originalPushState,history.replaceState=this.originalReplaceState,window.removeEventListener("popstate",this.handleEvent),this.originalPushState=null,this.originalReplaceState=null,this.started=!1)}}]),ecb);function ecb(e){classCallCheck(this,ecb),this.handleEvent=e,this.started=!1}var unloadListener=(createClass(mcb,[{key:"start",value:function(){this.started||(addDomEvent(window,"unload",this.handleEvent),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeDomEvent(window,"unload",this.handleEvent),this.started=!1)}}]),mcb);function mcb(e){classCallCheck(this,mcb),this.handleEvent=e,this.started=!1}var navigationEvent=new Event(NavigationListener),unloadEvent=new Event(unloadListener),baseIcon='\n    <svg width="13px" height="14px" viewBox="0 0 10 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g id="Icon" stroke="none" fill-rule="evenodd">\n            <path d="M8.88888889,2.26638076 C8.88888889,1.64053699 8.3914275,1.13319038 7.77777778,1.13319038 L2.22222222,1.13319038 C1.6085725,1.13319038 1.11111111,1.64053699 1.11111111,2.26638076 L1.11111111,6.11922804 C1.11111111,6.7450718 1.6085725,7.25241842 2.22222222,7.25241842 L7.89678531,7.25241842 L8.88888889,8.26423642 L8.88888889,2.26638076 Z M2.22222222,8.3856088 C0.994922778,8.3856088 1.44364238e-13,7.37091557 1.44364238e-13,6.11922804 L0,2.26638076 C0,1.01469323 0.994922778,0 2.22222222,0 L7.77777778,0 C9.00507722,0 10,1.01469323 10,2.26638076 L10,11 L7.43654802,8.3856088 L2.22222222,8.3856088 Z" id="Rectangle-Copy-18"></path>\n        </g>\n    </svg>',FBTab=(createClass(qcb,[{key:"isValid",value:function(){if(!this.fbTabEl)return!1;for(var e=this.fbTabEl.parentElement;null!==e&&"html"!==e.tagName.toLowerCase();)e=e.parentElement;return null!==e&&"html"===e.tagName.toLowerCase()}},{key:"setupInteractions",value:function(e,t,r){addDomEvent(e,"click",function(){r&&r(t)}),addDomEvent(e,"keydown",function(e){e.which===constants.keyCodes.enter&&(e.target.click(),e.stopPropagation(),e.preventDefault(),r(t))})}},{key:"setupTabTemplate",value:function(e){var t=this,r=encoder.decodeBase64(this.cfg.badgeTemplate),n=document.createElement("div");return n.innerHTML=r,(n=n.firstChild).querySelectorAll(".auryc-feedback-tab-label")[0].innerHTML=e.label,this.cfg.chat&&setTimeout(function(){t.handleChat(e,5)},0),n}},{key:"setupRegularTab",value:function(e){var t=getInstance(),r="",n="",i=!e.mobile_new,r=t.isPhone()&&i?(e.fontColor&&_.isValidColor(e.fontColor)&&(n='style="fill:'+e.fontColor+';position:relative;line-height:17px;display:flex"'),"<div "+n+">"+baseIcon+"</div>"):(e.fontColor&&_.isValidColor(e.fontColor)&&(n='style="fill:'+e.fontColor+";color:"+e.fontColor+'"'),'<span class="auryc-feedback-tab-label" aria-hidden="true" '+n+">"+e.label+"</span>"),a=document.createElement("div"),a=toDomNode('<div id="auryc-feedback-tab" tabindex="0" style="" role="button"\n      aria-label="Give Us Feedback">'+r+"</div>");t.isPhone()&&!i?a.addCssCls("auryc-feedback-tab-dt-"+t.getDT().toLowerCase()+"-new"):a.addCssCls("auryc-feedback-tab-dt-"+t.getDT().toLowerCase());var o=this.getLocationCss(t.isPhone()&&e.fblocation_mobile?e.fblocation_mobile:e.fblocation);return t.isPhone()&&i&&(o=this.getLocationCss("bottomright")),t.isPhone()&&i||"horizontal"===e.fbdirection?a.addCssCls("auryc-feedback-tab-loc-"+o+"-horizontal"):a.addCssCls("auryc-feedback-tab-loc-"+o),e.backgroundColor&&_.isValidColor(e.backgroundColor)&&a.css({backgroundColor:e.backgroundColor}),a}},{key:"getLocationCss",value:function(e){switch(e){case"bottomright":return"br";case"bottomleft":return"bl";case"middleleft":return"cl";case"middleright":return"cr";case"topright":return"tr";case"topleft":return"tl"}}},{key:"getFBTabDomNode",value:function(){return this.fbTabEl}},{key:"render",value:function(e){e&&document.body.appendChild(this.getFBTabDomNode()),this.cfg.preview?(this.cfg.badgeTemplate&&this.setChatVisible(!0),this.setVisible(!0)):this.setVisible(!1),this.applyCustomProperties(this.cfg)}},{key:"setClicked",value:function(){this.clicked=!0,this.cfg&&!1===this.cfg.autoHide||this.setFeedbackVisible(!1)}},{key:"setFeedbackVisible",value:function(e){var t,r=e?"block":"none",n=void 0;(n=0<=this.fbTabEl.id.indexOf("auryc-feedback-tab")?[this.fbTabEl]:this.fbTabEl.sel("#auryc-feedback-tab"))&&0<n.length&&((t=toDomNode(n[0])).css({display:r}),(this.fbVisible=e)?this.setVisible(e):(1===this.fbTabEl.children.length&&this.fbTabEl.children[0]===t&&this.setVisible(!1),this.chatVisible||this.setVisible(!1)))}},{key:"setChatVisible",value:function(e){var t,r=e?"":"none",n=this.fbTabEl.sel("__aurycChat");n&&0<n.length&&((t=toDomNode(n[0])).css({display:r}),(this.chatVisible=e)?this.setVisible(e):(1===this.fbTabEl.children.length&&this.fbTabEl.children[0]===t&&this.setVisible(!1),this.fbVisible||this.setVisible(!1)))}},{key:"setVisible",value:function(e){var t;this.cfg.chat?this.fbVisible=e:(t=e?"":"none",this.fbTabEl.css({display:t}))}},{key:"remove",value:function(){this.fbTabEl.parentNode&&this.fbTabEl.parentNode.removeChild(this.fbTabEl)}},{key:"removeModal",value:function(){var e=document.querySelectorAll(".auryc-fb-modal-closebtn");0<e.length&&e[0].click()}},{key:"removeFeedback",value:function(){var e,t=this.fbTabEl.sel(".auryc-feedback-tab-label");t&&0<t.length&&(e=toDomNode(t[0]),1===this.fbTabEl.children.length&&this.fbTabEl.children[0]===e?this.remove():this.fbTabEl.removeChild(e))}},{key:"handleChat",value:function(e,t){if("olark"===e.chat.vendor){void 0===t&&(t=5);var r=this;if("function"!=typeof olark){if(t<=0)return;return void setTimeout(function(){r.handleChat(e,--t)},1e3)}olark("api.box.onShrink",function(){}),olark("api.box.onExpand",function(){})}}},{key:"applyCustomProperties",value:function(e){var r=getInstance();if(e.customProperties&&(e.customProperties.badge||e.customProperties.fbTab))for(var t=e.customProperties.badge||e.customProperties.fbTab,n=0;n<t.length;n++){var i=t[n];if(function(t){if(!t)return 1;var e=[];return!(e="string"==typeof t.deviceType?[t.deviceType]:t.deviceType)||0===e.length||e.some(function(e){return e.toLowerCase()===r.getDT().toLowerCase()||"mobilephone"===t.deviceType.toLowerCase()&&r.isPhone()})}(i.context))try{var a=i.cssSelector;-1<a.toLowerCase().indexOf("._aurycbadge")&&a.toLowerCase().indexOf("#auryc-feedback-tab")<0&&(a+=",#auryc-feedback-tab");for(var o=document.querySelectorAll(a),s=0;s<o.length;s++)!function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n],a=t[i];"style"===i?e.style.cssText+=a:e[i]=a}}(o[s],i.properties)}catch(e){logger.log(e)}}}}]),qcb);function qcb(e,t){classCallCheck(this,qcb),this.fbVisible=!1,this.chatVisible=!1,this.fbTabEl=null,this.clicked=!1,this.cfg=e,this.cfg.badgeTemplate?this.fbTabEl=this.setupTabTemplate(e):this.fbTabEl=this.setupRegularTab(e);var r=e.badgeTemplate&&e.chat?this.fbTabEl.querySelectorAll("#auryc-feedback-tab")[0]:this.fbTabEl;this.setupInteractions(r,e,t)}var FeedbackAPI=(createClass(Mdb,[{key:"setFeedbackEnabled",value:function(e){this.stg.setByKey("enabled",e),this.feedbackEnabled.publishTopic(e)}},{key:"_getFeedbackEnabled",value:function(){return!1!==this.stg.getByKey("enabled")}},{key:"addFBSubmitHandler",value:function(e,t){e&&t&&"function"==typeof t?this.submitCb[e]=t:console.error("Invalid feedback submit callback functions")}},{key:"getFBSubmitHandler",value:function(e){if(e)return this.submitCb[e]}},{key:"addFBShownHandler",value:function(e,t){e&&t&&"function"==typeof t?this.shownCb[e]=t:console.error("Invalid feedback shown callback functions")}},{key:"getFBShownHandler",value:function(e){if(e)return this.shownCb[e]}},{key:"clearFBSubmitHandler",value:function(e){-1===e?this.submitCb={}:delete this.submitCb[e]}},{key:"clearFBCancelHandler",value:function(e){-1===e?this.cancelCb={}:delete this.cancelCb[e]}},{key:"addFBCancelHandler",value:function(e,t){e&&t&&"function"==typeof t?this.cancelCb[e]=t:console.error("Invalid feedback submit callback functions")}},{key:"getFBCancelHandler",value:function(e){if(e)return this.cancelCb[e]}},{key:"addFBCustomData",value:function(e){if(localStorage&&e){for(var t=(t=this.getFBCustomData())||{},r=Object.keys(e),n=0;n<r.length;n++){var i=r[n],a=e[i];void 0!==i&&void 0!==a?"string"==typeof i&&"string"==typeof a?255<i.length?console.warn("feedback custom data key must be 255 characters or less. Will skip. Key: "+i+", Value: "+a):(a=a.substring(0,255),t[i]=a):console.warn("feedback custom data must be string. Will skip. Key: "+i+", Value: "+a):console.warn("feedback custom data cannot be undefined. Will skip. Key: "+i+", Value: "+a)}var o=Object.keys(t);20<o.length&&(console.warn("There will be more than 20 items in feedback custom data. Will only keep first 20"),o=o.slice(0,20));for(var s={},c=0;c<o.length;c++){var l=o[c],g=t[l];s[l]=g}browser$1.setItem("localStorage","ar_fbc",JSON.stringify(s))}}},{key:"getFBCustomData",value:function(){if(!localStorage)return null;try{return JSON.parse(localStorage.getItem("ar_fbc"))}catch(e){return null}}},{key:"clearFBCustomData",value:function(){localStorage&&localStorage.removeItem("ar_fbc")}},{key:"_makePublic",value:function(e,t,r){_.isDefined(e)&&(window.auryc||(window.aurycFeedbackAPI={}),window.aurycFeedbackAPI=e,t&&r&&this._defineExternalLaunch(t,r))}},{key:"_defineExternalLaunch",value:function(c,l){var g=this;window.launchAurycFeedback=function(e,t,r){try{n=e,i=t,a=r,!g._getFeedbackEnabled()||c.instances.length<1||((s=0<(o=c.instances.filter(function(e){return!0!==e.disabled}).filter(function(e){return!n||e.projectId===n})).length?o[0]:null)?l.hasPopup()&&!i||(s.launchedFromTimer=a,l.initialize(s)):console.log("No enabled feedback is found"+(n?" for feedback "+n:"")))}catch(e){}var n,i,a,o,s}}}]),Mdb);function Mdb(){classCallCheck(this,Mdb),this.stg=DataLayer.getInstance(constants.symbols.PERMANENT,"feedback"),this.feedbackEnabled=new PubSubTopic,this.submitCb={},this.cancelCb={},this.shownCb={}}var feedbackAPI=new FeedbackAPI,TTF_TOKEN_DELIMITER=":",stg=DataLayer.getInstance(constants.symbols.PERMANENT,"feedback"),Trigger=(createClass(Seb,[{key:"disable",value:function(){this.enabled=!1,this.fbTab&&(this.fbTab.removeFeedback(),this.fbTab.removeModal())}},{key:"setEnabled",value:function(e){this.enabled=!!e,this.fbTab&&(this.enabled?this.setupFBTab():this.fbTab.setFeedbackVisible(!1))}},{key:"setupFBTab",value:function(){this.enabled&&(this.renderFBTab(),this.setupDelayedPopup(this.config),this.setupExitPopup(this.config))}},{key:"renderFBTab",value:function(){var e=this;this.fbTab=new FBTab(this.config,function(){return e.fbTabClicked.publishTopic()}),this.fbTab.render(!0),this.displayFBTab(!0)}},{key:"displayFBTab",value:function(e){function t(){var e=browser$1.getScroll(window),t=browser$1.getWinSize(window),r=Math.min(t.h/4,(document.body.scrollHeight-t.h)/4);feedbackAPI._getFeedbackEnabled()&&n.setFeedbackVisible(e.y>r)}var r,n=this.fbTab,i=this.config;void 0!==i.projectId&&!1!==i.showBadge&&feedbackAPI._getFeedbackEnabled()||(e=!1),"D"===i.triggerbehavior?(this.delayFBTabTimer&&clearTimeout(this.delayFBTabTimer),e&&(this.delayFBTabTimer=setTimeout(function(){feedbackAPI._getFeedbackEnabled()&&n.setFeedbackVisible(!0)},1e3*i.triggerdelayseconds))):"T"===i.triggerbehavior||"S"===i.triggerbehavior?e?(r=browser$1.getWinSize(window),document.body.scrollHeight<=r.h?n.setFeedbackVisible(!0):browser$1.addDomEvent(window,"scroll",t)):(browser$1.removeDomEvent(window,"scroll",t),n.setFeedbackVisible(!1)):n.setFeedbackVisible(e)}},{key:"isPopupEnabled",value:function(e){return e.disabled?(logger.warn("Feedback is not enabled in config for project "+e.projectId),!1):!!this.criteria.isDelayedPopupActive(e)||(logger.warn("deplayed popup is not active in this session for project "+e.projectId),!1)}},{key:"setupDelayedPopup",value:function(e){if(!this.hasDelayedPopup(e))return!1;this.startTimer(this.siteId,e.projectId);var t=this;return unloadEvent.addListener(function(){t.handlePageUnload()}),!0}},{key:"setupExitPopup",value:function(e){var o=this;if(this.hasExitPopup(e))if(browser$1.getInstance().isPhoneOrTablet()){if(browser$1.isMobileSafariIOS15Plus())return;var s=constants.exit_popup.scrollPercent,t=constants.exit_popup.scrollInterval,c=browser$1.getScroll(window).y,l=dom.getDocSize(document).height,g=!1,u=globalSessionTracker.getSessionMetadata(),d=+(this.config.exitPopupDelay||"10"),h=!1;0<l&&(this.exitPopupMobileHandler=setInterval(function(){try{var e=browser$1.getWinSize(window).h,t=browser$1.getScroll(window).y,r=c-t;r<0&&(r=0,h=h&&!1),l-e-(c=t)<100&&(h=!0);var n,i=parseFloat(r)/parseFloat(l),a=parseFloat(r)>1.2*e;h&&(a||i>parseFloat(s)/100)&&(clearInterval(o.exitPopupMobileHandler),o.exitPopupMobileHandler=null,g||(n=(new Date).getTime()-u.sessionTime,d<=n/1e3&&o.launchFeedback(),g=!0))}catch(e){}},t))}else this.exitPopupHandler=function(e){var t=e.relatedTarget,r=(new Date).getTime(),n=globalSessionTracker.getSessionMetadata();if(n.isOver||!n.sessionTime)return!1;var i=+(o.config.exitPopupDelay||"10"),a=r-n.sessionTime;(!t||t!==document&&!dom.nodeBelongsTo(t,document))&&e.clientY<10&&i<=a/1e3&&o.launchFeedback()},browser$1.addDomEvent(document,"mouseout",this.exitPopupHandler)}},{key:"clearExitPopupHandler",value:function(){clearInterval(this.exitPopupMobileHandler),this.exitPopupHandler=null,this.exitPopupMobileHandler=null}},{key:"launchFeedback",value:function(){var e=this.config;if(this.criteria.isFeedbackShown(e)||!feedbackAPI._getFeedbackEnabled()||!this.criteria.passExtraConditions(e)||!this.criteria.passURLFilter(e))return!1;window.launchAurycFeedback(e.projectId,!1,!0)}},{key:"setup",value:function(e){if(!this.hasDelayedPopup(e))return!1;this.startTimer(this.siteId,e.projectId);var t=this;return unloadEvent.addListener(function(){t.handlePageUnload()}),!0}},{key:"handlePageUnload",value:function(){this.suspendTimer(this.siteId,this.config.projectId)}},{key:"handleTimeout",value:function(){var e=this.config,t=this.siteId;this.criteria.isDelayedPopupActive(e)&&null!==this.getTimeRemain(t,e.projectId)&&(this.setTimeRemain(t,e.projectId,null),this.launchFeedback())}},{key:"handleNavigation",value:function(e){var t=this,r=this.config;this.fbTab&&setTimeout(function(){t.fbTab.isValid()?t.displayFBTab(e):e&&t.setupFBTab()},1e3),this.hasDelayedPopup(r)&&(this.suspendTimer(this.siteId,r.projectId),e&&this.startTimer(this.siteId,r.projectId)),this.hasExitPopup(r)&&(this.clearExitPopupHandler(),e&&this.setupExitPopup(r))}},{key:"hasDelayedPopup",value:function(e){return e.popupDelayEnabled?!!this.isPopupEnabled(e)&&(logger.warn("delayed popup is enabled for project "+e.projectId+", delay: "+e.popupDelaySeconds+" seconds"),!0):(logger.warn("delayed popup is not enabled in config for project "+e.projectId),!1)}},{key:"hasExitPopup",value:function(e){return!(!e.exitPopupEnabled||!this.isPopupEnabled(e)||(logger.warn("exit popup is enabled for project "+e.projectId),0))}},{key:"startTimer",value:function(e,t){var r,n;this.criteria.isFeedbackShown(this.config)||(this.delayedPopupTimer&&clearTimeout(this.delayedPopupTimer),(r=this.getTimeRemain(e,t))||0===r||(r=1e3*this.config.popupDelaySeconds,this.setTimeRemain(e,t,r)),(n=this).startTime=(new Date).getTime(),this.delayedPopupTimer=setTimeout(function(){n.handleTimeout()},r))}},{key:"suspendTimer",value:function(e,t){var r,n=(new Date).getTime()-this.startTime,i=this.getTimeRemain(e,t);null!==i&&(r=n<i?i-n:0,this.setTimeRemain(e,t,r)),this.delayedPopupTimer&&clearTimeout(this.delayedPopupTimer),this.delayedPopupTimer=null}},{key:"getTimeRemain",value:function(e,t){var r=globalSessionTracker.getSessionMetadata();if(r.isOver)return null;var n=stg.getByKey("TTF_"+e+"_"+t);if(!n)return null;var i=n.split(TTF_TOKEN_DELIMITER);return i[0]!==r.sessionId?null:+i[1]}},{key:"setTimeRemain",value:function(e,t,r){var n="TTF_"+e+"_"+t;if(null!==r){var i=globalSessionTracker.getSessionMetadata();if(i.isOver)return null;var a=i.sessionId+TTF_TOKEN_DELIMITER+r;stg.setByKey(n,a)}else stg.removeByKey(n)}}]),Seb);function Seb(e,t){classCallCheck(this,Seb),this.config=e,this.criteria=t,this.fbTab=null,this.enabled=!0,this.delayedPopupTimer=!1,this.siteId=config.getConfig("siteid"),this.fbTabClicked=new PubSubTopic,this.exitPopupHandler=null,this.exitPopupMobileHandler=null,this.setupFBTab()}var RadioInput=(createClass(Hgb,[{key:"init",value:function(){this.setTabIndex(-1),addDomEvent(this.input,"keydown",this.handleKeydown),addDomEvent(this.input,"click",this.handleClick),addDomEvent(this.input,"focus",this.handleFocus),addDomEvent(this.input,"blur",this.handleBlur)}},{key:"setTabIndex",value:function(e){this.input.tabIndex=e}},{key:"uncheck",value:function(){this.input.removeAttribute("checked"),this.setTabIndex(-1),toDomNode(this.label).removeCssCls(this.styles.checked)}},{key:"check",value:function(){this.input.setAttribute("checked","true"),this.input.checked=!0,this.setTabIndex(0),toDomNode(this.label).addCssCls(this.styles.checked)}},{key:"inclusiveCheck",value:function(){toDomNode(this.label).addCssCls(this.styles.checked)}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){toDomNode(this.label).removeCssCls(this.styles.focus)}}]),Hgb);function Hgb(e,t,r,n){var i=this;classCallCheck(this,Hgb),this.handleKeydown=function(e){var t=!1;switch(e.which||e.keyCode){case constants.keyCodes.space:case constants.keyCodes.enter:i.radioGroup.setChecked(i),t=!0;break;case constants.keyCodes.left:case constants.keyCodes.up:i.radioGroup.setCheckedToPreviousItem(i),t=!0;break;case constants.keyCodes.right:case constants.keyCodes.down:i.radioGroup.setCheckedToNextItem(i),t=!0}t&&(e.stopPropagation(),e.preventDefault())},this.handleClick=function(e){i.radioGroup.setChecked(i)},this.handleFocus=function(e){var t=i.radioGroup.getLastFocused();t&&t.blur(),toDomNode(i.label).addCssCls(i.styles.focus),i.radioGroup.setFocus(i)},this.handleBlur=function(e){toDomNode(i.label).removeCssCls(i.styles.focus)},this.input=e,this.label=t,this.radioGroup=r,this.styles=n}var RadioGroup=(createClass(ahb,[{key:"init",value:function(e,t,r){for(var n=this.domNode.querySelectorAll(e),i=this.domNode.querySelectorAll(t),a=0;a<n.length;a++){for(var o=n[a],s=null,c=0;c<i.length;c++){var l=i[c];if(l.htmlFor===o.id){s=l;break}}null===s&&(s=i[a]);var g=new RadioInput(o,s,this,r);g.init(),this.allInputs.push(g),this.firstInput||(this.firstInput=g),this.lastInput=g}this.firstInput.setTabIndex(0)}},{key:"isInclusive",value:function(){return"inclusive"===this.mode}},{key:"setFocus",value:function(e){this.lastFocused=e}},{key:"setChecked",value:function(e){for(var t=0;t<this.allInputs.length;t++)this.allInputs[t].uncheck();if(e.check(),e.focus(),this.lastFocused=e,this.isInclusive())for(var r=0;r<this.allInputs.length;r++){var n=this.allInputs[r];if(n===e)break;n.inclusiveCheck()}}},{key:"getLastFocused",value:function(){return this.lastFocused}},{key:"setCheckedToPreviousItem",value:function(e){var t;e===this.firstInput?this.setChecked(this.lastInput):(t=this.allInputs.indexOf(e),this.setChecked(this.allInputs[t-1]))}},{key:"setCheckedToNextItem",value:function(e){var t;e===this.lastInput?this.setChecked(this.firstInput):(t=this.allInputs.indexOf(e),this.setChecked(this.allInputs[t+1]))}}]),ahb);function ahb(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"exclusive";classCallCheck(this,ahb),this.domNode=e,this.allInputs=[],this.firstInput=null,this.lastInput=null,this.lastFocused=null,this.mode=t}var CheckBox=(createClass(Fhb,[{key:"init",value:function(){this.input.tabIndex=0,addDomEvent(this.input,"keydown",this.handleKeydown),addDomEvent(this.label,"keydown",this.handleKeydown),addDomEvent(this.input,"keyup",this.handleKeyup),addDomEvent(this.label,"click",this.handleClick),addDomEvent(this.input,"click",this.handleClick),addDomEvent(this.label,"touchstart",this.handleClick),addDomEvent(this.input,"focus",this.handleFocus),addDomEvent(this.input,"blur",this.handleBlur)}}]),Fhb);function Fhb(e,t,r){var n=this;classCallCheck(this,Fhb),this.handleKeyup=function(e){e.keyCode!==constants.keyCodes.space&&e.keyCode!==constants.keyCodes.enter||e.preventDefault()},this.toggleCheckbox=function(){n.input.hasAttribute("checked")?(n.input.checked=!1,n.input.removeAttribute("checked"),n.input.setAttribute("aria-checked",!1),n.label.setAttribute("aria-checked",!1),toDomNode(n.label).removeCssCls(n.styles.checked),toDomNode(n.label).removeCssCls(n.styles.focus)):(n.input.setAttribute("checked","true"),n.input.checked=!0,n.input.setAttribute("aria-checked",!0),n.label.setAttribute("aria-checked",!0),toDomNode(n.label).addCssCls(n.styles.checked),toDomNode(n.label).addCssCls(n.styles.focus))},this.handleKeydown=function(e){var t=!1;switch(e.which||e.keyCode){case constants.keyCodes.space:case constants.keyCodes.enter:n.toggleCheckbox(),t=!0}t&&(e.stopPropagation(),e.preventDefault()),n.input.focus()},this.handleClick=function(e){var t=+new Date;t-n.lastInteractionTime<n.throttleInterval||(n.lastInteractionTime=t,n.toggleCheckbox(),n.input.focus(),e.stopPropagation(),e.preventDefault())},this.handleFocus=function(e){toDomNode(n.label).addCssCls(n.styles.focus)},this.handleBlur=function(e){toDomNode(n.label).removeCssCls(n.styles.focus)},this.input=e,this.label=t,this.styles=r,this.lastInteractionTime=0,this.throttleInterval=100}var CheckBoxGroup=(createClass(Thb,[{key:"init",value:function(e,t,r){for(var n=this.domNode.querySelectorAll(e),i=this.domNode.querySelectorAll(t),a=0;a<n.length;a++)new CheckBox(n[a],i[a],r).init()}}]),Thb);function Thb(e){classCallCheck(this,Thb),this.domNode=e}var piiRegexes=[/\+[1-9]{1}[0-9]{3,14}/g,/\b([0O]?[1lI][1lI])?[3E][3E][0O]?[\dOIlZEASB]{9}\b/g,/\b[\d\w]\d{2}[\d\w]{6}\d[\d\w]\b/g,/\b([0O]?[1lI][1lI])?[4A][4A][\dOIlZEASB]{10,11}\b/g,/\b((\+|\b)[1l][\-\. ])?\(?\b[\dOlZSB]{3,5}([\-\. ]|\) ?)[\dOlZSB]{3}[\-\. ][\dOlZSB]{4}\b/g,/\b\d{1,8}\b[\s\S]{10,100}?\b(Alabama|Alaska|Arizona|Arkansas|California|Colorado|Connecticut|Delaware|Florida|Georgia|Hawaii|Idaho|Illinois|Indiana|Iowa|Kansas|Kentucky|Louisiana|Maine|Maryland|Massachusetts|Michigan|Minnesota|Mississippi|Missouri|Montana|Nebraska|Nevada|New\s*Hampshire|New\s*Jersey|New\s*Mexico|New\s*York|North\s*Carolina|North\s*Dakota|Ohio|Oklahoma|Oregon|Pennsylvania|Rhode\s*Island|South\s*Carolina|South\s*Dakota|Tennessee|Texas|Utah|Vermont|Virginia|Washington|West\s*Virginia|Wisconsin|Wyoming|AK|AL|AR|AZ|CA|CO|CT|DC|DE|FL|GA|HI|IA|ID|IL|IN|KS|KY|LA|MA|MD|ME|MI|MN|MO|MS|MT|NC|ND|NE|NH|NJ|NM|NV|NY|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VA|VT|WA|WI|WV|WY)\b,?\s?(\d{5})?\b/gi,/\b[a-z0-9._%\+\-—|]+@[a-z0-9.\-—|]+\.[a-z|]{2,6}\b/gi,/\b(birth|birthdate|birthday|dob|born)\W+(?:\w+\W+){0,5}?\b(\d{4}|\d{1,2})[\/\-]\d{1,2}[\/\-](\d{4}|\d{1,2})\b/gi,/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/g,/\b([\d\w]{4}|0)(\:([\d\w]{4}|0)){7}\b/g,/\b((4\d{3}|5[1-5]\d{2}|2\d{3}|3[47]\d{1,2})[\s\-]?\d{4,6}[\s\-]?\d{4,6}?([\s\-]\d{3,4})?(\d{3})?)\b/g,/\b((0[0-9])|(1[0-2])|(2[1-9])|(3[0-2])|(6[1-9])|(7[0-2])|80)([0-9]{7})\b/g,/\b[A-Z]{6}[A-Z0-9]{2}([A-Z0-9]{3})?\b/g,/(?:(?:IT|SM)\d{2}[\w]\d{22}|CY\d{2}[\w]\d{23}|NL\d{2}[\w]{4}\d{10}|LV\d{2}[\w]{4}\d{13}|(?:BG|BH|GB|IE)\d{2}[\w]{4}\d{14}|GI\d{2}[\w]{4}\d{15}|RO\d{2}[\w]{4}\d{16}|KW\d{2}[\w]{4}\d{22}|MT\d{2}[\w]{4}\d{23}|NO\d{13}|(?:DK|FI|GL|FO)\d{16}|MK\d{17}|(?:AT|EE|KZ|LU|XK)\d{18}|(?:BA|HR|LI|CH|CR)\d{19}|(?:GE|DE|LT|ME|RS)\d{20}|IL\d{21}|(?:AD|CZ|ES|MD|SA)\d{22}|PT\d{23}|(?:BE|IS)\d{24}|(?:FR|MR|MC)\d{25}|(?:AL|DO|LB|PL)\d{26}|(?:AZ|HU)\d{27}|(?:GR|MU)\d{28})/g,/\d{2}\.\d{3}\.\d{3}/g,/\b[\w]{2}[\d]{6}\b/g,/\bHR\d{11}\b/g,/\bCZ\d{8,10}\b/gi,/\b\d{10}|\d{6}[-\s]\d{4}\b/g,/\b\b\d{12}\b\b/g,/\b\d{13}|\d{13}\s\d{2}\b/g,/\b\d{12}\b/g,/\b\d{2}11\d{5}\b/g,/\bl\d{8}\b/g,/\b[cfghjk]\d{3}\w{5}\d\b/g,/\b\d{7}\w{1,2}\b/g,/\b\d{11}\b/g,/\d{9}[\w\d]{2}|\d{8}-\d[\d\w]{2}\d/g,/\b\d{2}\/?\d{8}\/?\d{2}\b/g,/\b\d{8}\b/g,/\b\d{9}\b/g,/\b[\w9]{5}\d{6}[\w9]{2}\d{5}\b/g,/\b\d{3}\s\d{3}\s\d{4}\b/g,/\b[\d]{3} [\d]{2} [\d]{4}|([\d] ?){3}[\—\-_] ?([\d] ?){2}[\—\-_] ?([\d] ?){4}\b/g,/TFN(:|:\s|\s|)((\d{8,9}))/g];function redactFbResponse(e){if("string"!=typeof e)return e;var t=[],r=!0,n=!1,i=void 0;try{for(var a,o=piiRegexes[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,c=e.replace(s,function(e){return"*".repeat(e.length)});t.push(c)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}for(var l="",g=0;g<e.length;g++){var u=e[g];if(" "!==u&&"\n"!==u&&"\t"!==u&&","!==u&&"."!==u&&":"!==u&&"/"!==u)for(var d=0;d<t.length;d++){var h=t[d];if("*"===h[g]){u=h[g];break}}l+=u}return l}var FBModel=(createClass(sib,[{key:"setIsTabbing",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this.isUserTabbing=t}},{key:"getDefaultData",value:function(){return""}},{key:"setupFBDoneHandler",value:function(e){this.fbDoneFn=e}},{key:"hasRequiredQuestions",value:function(e){for(var t=0;t<e.fb.questions.length;t++)if(e.fb.questions[t].required&&!e.fb.questions[t].hidden)return!0;for(var r=0;r<e.topics.length;r++)for(var n=e.topics[r].questions,i=0;i<n.length;i++)if(n[i].required&&!n[i].hidden)return!0;return!1}},{key:"processFeedbackData",value:function(e,t){function r(e,t){return e.questionOrder-t.questionOrder}function n(e,t){return e.displayOrder-t.displayOrder}function i(e){return!e.hidden}e.mainQ=e.fb.questions.filter(i).sort(r).map(function(e){return e.answers=e.answers.sort(n),e}),e.topics=e.fb.topics.sort(function(e,t){return e.topicOrder-t.topicOrder});for(var a=0;a<e.topics.length;a++)e.topics[a].questions=e.topics[a].questions.filter(i).sort(r).map(function(e){return e.answers&&(e.answers=e.answers.sort(n)),e});for(var o={},s=[],c=0;c<e.topics.length;c++)var l=e.topics[c].questions,s=s.concat(l.filter(function(e){return e.questionLabel&&0<e.questionLabel.length}));o=this.groupBy(s,"questionLabel");for(var g=0;g<e.topics.length;g++)e.topics[g].questions.forEach(function(e){var t;o[e.questionLabel]&&(e.matrix=!0,e.group=o[e.questionLabel],t=_.get(e,"group[0].answers",[]),e.answerLength=t.reduce(function(e,t){return _.get(t,"label.length",0)+e},0),delete o[e.questionLabel])});e.hasRequiredQuestions=this.hasRequiredQuestions(e),e.formConfig=JSON.parse(e.fb.formConfig),e.extraInfo=e.meta["ext-info"],e.meta=e.meta.info,e.logoPic=e.meta.logo1graphic,e.feedbackTitle=e.meta.surveytitle,e.prologueText=e.meta.prologuetext,this.feedbackDef=e,t&&t(e)}},{key:"groupBy",value:function(e,r){return e.reduce(function(e,t){return t.matrix=!0,e[t[r]]||(e[t[r]]=[]),e[t[r]].push(t),e},{})}},{key:"getResponseSummary",value:function(){var e=0<=(e=this.npsRatings)&&e<=6?"detractors":6<e&&e<=8?"passives":8<e?"promoters":"unknown";return{starRating:this.starsRatings,npsResponse:e,formType:this.formType,formName:this.fbConfig.label,questionGroup:this.questionGroup}}},{key:"getCallbackSummary",value:function(e){var t=0<=(t=this.npsRatings)&&t<=6?"detractors":6<t&&t<=8?"passives":8<t?"promoters":"unknown";this.starsRatings||(this.starsRatings="unknown");var r={};return e&&((e=JSON.parse(e)).responses=e.responses.filter(function(e){if(e.answerText)return!0}),_.each(e.responses,function(e){delete e.required,delete e.questionId,delete e.answerId}),r=e.responses),{starRating:this.starsRatings,npsResponse:t,formid:this.fbConfig.projectId,formName:this.feedbackDef.fb.name,responses:r}}},{key:"getCBAnswers",value:function(e,t,r,n){for(var i=[],a=toDomNode(e).sel("input"),o=0;o<a.length;o++){var s=a[o].getAttribute(constants.css.FB_QID);a[o].checked&&i.push({questionId:t,questionText:n[t],answerId:s,answerText:n[s],required:r})}return 0===i.length&&i.push({questionId:t,questionText:n[t],required:r}),i}},{key:"handleSingleNonCB",value:function(e,t,r,n){var i,a={},o=toDomNode(e).sel("select"),s=toDomNode(e).sel("input"),c=toDomNode(e).sel("textarea");if(1<=c.length){var l=c[0].value.replace(/\s+/g," ");a.answerText=l.length>=constants.css.TEXT_LIMIT?l.substr(0,constants.css.TEXT_LIMIT-1):l}else if(1<=s.length){var g=s[0],u=g.getAttribute("type");if(u===constants.css.HIDDEN.toLowerCase())a.answerId=g.value;else if(u!==constants.css.RADIO.toLowerCase())a.answerText=g.value;else for(var d=0;d<s.length;d++)s[d].checked&&(a.answerId=s[d].value,toDomNode(e).className.trim()===constants.css.FB_QUESTION&&5===s.length&&(this.starsRatings=d+1),"auryc-nps__container auryc-feedback-fbquestion"===toDomNode(e).className.trim()&&11===s.length&&(this.npsRatings=d))}else 1<=o.length&&1<=(i=o[0]).selectedIndex&&(a.answerId=i.value,this.questionGroup=i.options[i.selectedIndex].value,a.answerId&&1<=a.answerId.length||(a.skip=!0));return a.questionId=t,a.questionText=n[t],a.required=r,a.answerText||(a.answerText=n[a.answerId]),a}},{key:"generateQuestionMap",value:function(e,t){_.each(e,function(e){t[e.id]=e.questionText,_.each(e.answers,function(e){t[e.id]=e.label||e.value})})}},{key:"assembleResponse",value:function(){var t=this,e=this.feedbackDef.questions||[],r={};this.generateQuestionMap(e,r);var n=this.feedbackDef.topics||[];_.each(n,function(e){t.generateQuestionMap(e.questions,r)});var i=this.feedbackDef.mainQ||[];this.generateQuestionMap(i,r),this.starsRatings=!1,this.npsRatings="unknown",this.questionGroup=null;var a=globalSessionTracker.getSessionMetadata();if(!a.isOver){var o={siteKey:config.getSiteid(),mid:this.fbConfig.mid||this.fbConfig.fid,globalId:a.sessionId,sessionId:a.viewId,url:window.location.href},s=config.getCurrentIdentity();s&&0<s.length&&(o.identity=s);var c=feedbackAPI.getFBCustomData()||{};c._ar_display_=getWinScrResString(),this.email&&(c._ar_email_=this.email),o.customData=c,this.fbConfig.version?o.version=this.fbConfig.version:o.version&&delete o.version;var l,g,u=[];1===this.feedbackDef.topics.length&&(l=void 0,g=this.feedbackDef.topics[0].questions,_.each(g,function(e){e.parentAnswerId===t.feedbackDef.topics[0].topicAnswerId&&(l=e.parentQuestionId)}),u.push({questionId:l,questionText:r[l],answerId:this.feedbackDef.topics[0].topicAnswerId,answerText:this.feedbackDef.topics[0].topicText}));for(var d='.auryc-feedback-fbquestiongroup-shown [quesType="auryc-fbq"], .'+constants.css.FB_QUESTION,h=this.htmlElem.sel(d),p=0;p<h.length;p++){var f,I,m=h[p],b=m.getAttribute(constants.css.FB_QID),C=m.getAttribute(constants.css.FB_QTYPE),y=m.hasAttribute(constants.css.REQUIRED);C===constants.css.CHECKBOX?(f=this.getCBAnswers(m,b,y,r))&&0<f.length&&(u=u.concat(f)):!0!==(I=this.handleSingleNonCB(m,b,y,r)).skip&&u.push(I)}this.fbConfig.redactFeedbackResponses&&u.forEach(function(e){"string"==typeof e.answerText&&(e.answerText=redactFbResponse(e.answerText))}),o.responses=u;var A=this.htmlElem.sel("#auryc-feedback-canvas canvas")[0];if(A)try{o.image=A.toDataURL("image/png").replace("image/png","image/octet-stream")}catch(e){logger.log(e)}for(var v=this.feedbackDef.fb.topicQuestionId,w=!0,S=o.responses,k={},T=!1,P=0;P<S.length;P++)!0!==S[P].required||S[P].answerId||S[P].answerText&&S[P].answerText.trim()||(T=k[S[P].questionId]=!0);var E=this.getInvalidQ();if(T||E){for(var x=null,R=0;R<h.length;R++){var N=h[R],W=N.getAttribute(constants.css.FB_QID),D=toDomNode(this.htmlElem.sel("#auryc_lbl"+W)[0]);if(D&&D.removeCssCls("aurycIsRequired"),k[W])D&&D.addCssCls("aurycIsRequired"),x=x||N;else for(var B=N.querySelectorAll(".auryc-fb-validation-msg-section"),F=0;F<B.length;F++)"none"!==toDomNode(B[F]).getStyle("display")&&(x=x||N)}return this.setInvalidQFocus(x),"notValid"}for(var L=0;L<S.length;L++)if(S[L].questionId!==v&&(S[L].answerId||S[L].answerText&&S[L].answerText.trim())){w=!1;break}return w?null:o={str:JSON.stringify(o),obj:o}}}},{key:"submitFeedbackResponse",value:function(){var t=this;if(!this.fbConfig.preview){var e,r=this.assembleResponse(),n=r.str;if("notValid"!==r&&"notValid"!==n){if(!n)return this.submitted=!1,void(this.fbDoneFn&&this.fbDoneFn(this.getCallbackSummary()));this.email&&window.aurycBehaviorAPI.identify(this.email),this.submitting||(this.feedbackReqTimer=setTimeout(function(){t.fbDoneFn()},1e3),e={type:"POST",url:config.getFBSubmitUrl(),data:encoder.encodeBase64(n),onSuccess:function(e){t.submitted=!0,AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Submitted",tagName:"FeedbackSubmitted",eventProperties:_.extend({formid:t.fbConfig.projectId,name:"Feedback Submitted",respid:JSON.parse(e).respondentId,et:"submitted"},t.getResponseSummary())}),t.fbDoneFn&&t.fbDoneFn(t.getCallbackSummary(n))},contentType:"application/json"},config.getConfig("fbReferer","behavior")&&(e.referer=document.referrer),asyncReq(e)),this.submitting=!0}else this.submitted=!1}}},{key:"isSubmitting",value:function(){return this.submitting}},{key:"render",value:function(e,t){var r=this;t=toDomNode(t),this.htmlElem=t,this.modalElem=e,this.setupSelectionMode(t);var n=getInstance(),i=this.createTempStyle(n.isPhoneOrTablet())||"aurycChecked";["TopicSelector","Nps","OpenEnd","Selects","Stars","Emails","MatrixStars"].forEach(function(e){r["handle"+e](t,i)}),this.handleCheckableInputs(t,"checkbox",i),this.handleCheckableInputs(t,"radio",i),this.canShowScreenshot()?(toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-selection")[0]).addCssCls("fb-enabled"),toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-fbform")[0]).removeCssCls("fb-enabled"),this.modalElem.htmlElem.addCssCls("formSelection"),this.modalElem.enableFBFormUI(!0)):this.showFeedback()}},{key:"getInvalidQ",value:function(){var e=this.htmlElem.sel("."+constants.css.FB_TOPIC)[0];if(e)for(var t=e.sel('div[dataType="auryc-fbq"] [quesType="auryc-fbq"]'),r=0;r<t.length;r++)for(var n=t[r],i=n.querySelectorAll(".auryc-fb-validation-msg-section"),a=0;a<i.length;a++)if("none"!==toDomNode(i[a]).getStyle("display"))return n;return null}},{key:"showValidationMessage",value:function(e,t){var r;e&&(r=toDomNode(e.sel(".auryc-fb-validation-msg-section")[0]),t?r.css({display:"block"}):r.css({display:"none"}))}},{key:"handleEmails",value:function(e){e=toDomNode(e);for(var i=this,t=e.sel(".auryc-feedback-email"),a=browser$1.getFbParams(),r=0;r<t.length;r++){var n=toDomNode(t[r]).sel("input")[0];this.fbConfig.fbStandalone&&a.email&&(n.value=a.email),addDomEvent(n,"blur",o)}function o(e){var t=e.target||e.srcElement,r="";t.hasAttribute(constants.css.REQUIRED)&&_.isEmpty(t.value)?r=i.feedbackDef.extraInfo.emailempty||i.feedbackDef.ext.emailempty:_.isEmpty(t.value)||_.isEmail(t.value)||(r=i.feedbackDef.extraInfo.emailvalid||i.feedbackDef.ext.emailvalid),_.isEmpty(t.value)||!_.isEmail(t.value)||a.email||(i.email=t.value);var n=toDomNode(t.parentElement);n.sel(".auryc-fb-validation-msg-section")[0].innerHTML=r,i.showValidationMessage(n,0<r.length)}}},{key:"handleOpenEnd",value:function(e){function t(e){var t,r=e.srcElement||e.target;if(constants.css.TEXT_LIMIT-r.value.replace(/\s+/g," ").length-1<0&&((t=e.keyCode)<37||41<t)&&8!==t&&16!==t)return e.preventDefault(),!1}function r(e){var t=e.srcElement||e.target,r=constants.css.TEXT_LIMIT-t.value.replace(/\s+/g," ").length,n=toDomNode(t.parentNode).sel(".auryc-feedback-text-remaining")[0].innerHTML,i=Math.max(0,r)+"";if(n.split(",").join("")!==i&&(toDomNode(t.parentNode).sel(".auryc-feedback-text-remaining")[0].innerHTML=i),r<0)return t.value=t.value.substr(0,r+t.value.length),!1}function n(e){var t=toDomNode((e.srcElement||e.target).parentNode).sel(".auryc-feedback_countWrapper")[0];t.getAttribute("aria-live")||(t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"))}var i=toDomNode(e).sel("."+constants.css.FB_TEXTAREA);try{for(var a=0;a<i.length;a++){var o=toDomNode(i[a]).sel("textarea")[0];addDomEvent(o,"keydown",t),addDomEvent(o,"keyup",r),addDomEvent(o,"blur",r),addDomEvent(o,"focus",n)}}catch(e){}}},{key:"updateSelects",value:function(e){var t=toDomNode(e).sel("."+constants.css.FB_QB_CHOOSE);[].forEach.call(t,function(e){toDomNode(e).sel(constants.css.SELECT)[0]})}},{key:"handleSelects",value:function(e){var t=this,r=toDomNode(e).sel("."+constants.css.FB_QB_CHOOSE);this.updateUIFn=function(){return t.updateSelects(toDomNode(e))},[].forEach.call(r,function(e){var r,n,t=toDomNode(e),i=t.sel("select")[0],a=t.sel("div.auryc-feedback-select-button")[0];addDomEvent(i,"change",(r=a,n=i,function(e){var t=toDomNode(n).sel("option")[n.selectedIndex];r.innerHTML=t.innerHTML}))})}},{key:"updateFBUI",value:function(){this.updateUIFn&&this.updateUIFn()}},{key:"createTempStyle",value:function(e){var t,r,n,i="aurycCheckedOverride";return this.fbConfig.backgroundColor&&_.isValidColor(this.fbConfig.backgroundColor)?(t=this.fbConfig.backgroundColor,(r=document.createElement("style")).id="auryc_style",n=".auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges ."+i+"{ background-color: "+t+" !important;} .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:hover { background-color: "+t+" !important;} ",e||(n+=".auryc-feedback .auryc-feedback-checkbox."+i+":before { color: "+t+"!important;content: '\\f14a' !important; opacity: 1.0; } .auryc-feedback .auryc-feedback-radio."+i+":before { color: "+t+"!important;content: '\\f111'; opacity: 1.0; }"),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(r)):i=null,i}},{key:"handleCheckableElemsCheckUncheck",value:function(t,r,n){return function(){var e=t.querySelectorAll("label");_.each(e,function(e){(e=toDomNode(e)).querySelectorAll("input[type="+r+"]")[0].checked?e.addCssCls(n):e.removeCssCls(n)})}}},{key:"handleCheckableInputs",value:function(e,t,r){var n=e.querySelectorAll('[dataType="auryc-feedback-'+t+'"]'),i={checked:r,focus:"focus"};"radio"===t?_.each(n,function(e){new RadioGroup(e,t).init("input[type="+t+"]","label",i)}):"checkbox"===t&&_.each(n,function(e){new CheckBoxGroup(e).init("input[type="+t+"]","label",i)})}},{key:"handleNps",value:function(e,t){var r={checked:t,focus:"focus"},n=(e=toDomNode(e)).sel(".nps-rating__badges");_.each(n,function(e){new RadioGroup(e).init("input","label",r)})}},{key:"handleMatrixStars",value:function(e){var t=(e=toDomNode(e)).sel("tr.questionColumn"),r={checked:"auryc-ratings-chosen",focus:"focus"};_.each(t,function(e){e.outerHTML.includes("auryc-fb-starrating-field-matrix")&&new RadioGroup(e,"inclusive").init("input","label",r)})}},{key:"handleStars",value:function(e){var t=(e=toDomNode(e)).sel("fieldset.auryc-fb-starrating-field"),r={checked:"auryc-ratings-chosen",focus:"focus"};_.each(t,function(e){new RadioGroup(e,"inclusive").init("input","label",r)})}},{key:"disableDefault",value:function(e){e&&e.preventDefault&&e.preventDefault()}},{key:"showTopic",value:function(e,t,r){var n=r.value,i=t.sel(".auryc-feedback-fbquestiongroup-shown");[].forEach.call(i,function(e){toDomNode(e).replaceCssCls("auryc-feedback-fbquestiongroup-shown","auryc-feedback-fbquestiongroup")});try{toDomNode(document.getElementById("topk_"+n)).replaceCssCls("auryc-feedback-fbquestiongroup","auryc-feedback-fbquestiongroup-shown"),e.topic=n}catch(e){}this.updateFBUI()}},{key:"handleTopicSelector",value:function(t){var r=this,n=t.sel("."+constants.css.FB_TOPIC_SEL)[0],i=this;n&&addDomEvent(n,"change",function(e){i.showTopic(i,t,n),r.disableDefault(e)}),1===this.feedbackDef.topics.length&&(toDomNode(document.getElementById("topk_"+this.feedbackDef.topics[0].topicAnswerId)).replaceCssCls("auryc-feedback-fbquestiongroup","auryc-feedback-fbquestiongroup-shown"),this.updateSelects(t))}},{key:"resetAriaInvalid",value:function(){var e=this.htmlElem.sel('div[aria-invalid="true"]');_.each(e,function(e){e.removeAttribute("aria-invalid")})}},{key:"setupSelectionMode",value:function(e){var t=this;this.submitted=!1,addDomEvent(e.querySelectorAll(".auryc-feedback-screenshot")[0],"click",function(e){return t.takeScreenshot(),t.disableDefault(e),!1}),addDomEvent(e.querySelectorAll(".auryc-feedback-general")[0],"click",function(e){return t.showFeedback(),t.disableDefault(e),!1}),[].forEach.call(e.querySelectorAll(".auryc-feedback-title-section h1"),function(e){toDomNode(e).addCssCls(constants.css.HEADING_H1)}),addDomEvent(document.getElementById("post-fb-resp-button"),"click",function(e){return t.resetAriaInvalid(),t.submitted||t.submitFeedbackResponse(),t.disableDefault(e),!1})}},{key:"setInvalidQFocus",value:function(e){e.setAttribute("aria-invalid","true"),e.getAttribute("tabindex")||e.setAttribute("tabindex",-1),e.focus()}},{key:"takeScreenshot",value:function(){this.modalElem.htmlElem.removeCssCls("formSelection"),ScreenShot.mark("Click on any part of this page you would like to give feedback about.",this.updateScreenshot.bind(this),this.modalElem),this.modalElem.enableFBFormUI(!1),this.formType="screenshot"}},{key:"canShowScreenshot",value:function(){return!0!==this.fbConfig.specificFormEnable&&window.location.hash.indexOf("screenshot"),!1}},{key:"updateScreenshot",value:function(e){var t=this.htmlElem.sel("#auryc-feedback-canvas")[0];t.innerHTML="",t.appendChild(e.canvas),document.getElementById(e.answerDomId).click(),document.getElementById("post-fb-resp-button").click()}},{key:"showFeedback",value:function(){toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-selection")[0]).removeCssCls("fb-enabled"),toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-fbform")[0]).replaceCssCls("auryc-fbmodal-body-fbform","auryc-fbmodal-body-fbform-enabled"),this.modalElem.getModalContainerDomNode().removeCssCls("formSelection"),this.modalElem.enableFBFormUI(!0),this.formType="feedbackform"}}]),sib);function sib(e){var a=this;classCallCheck(this,sib),this.getFeedbackData=function(n){function i(){a.feedbackReqTimer&&clearTimeout(a.feedbackReqTimer)}function e(e){a.feedbackReqTimer&&clearTimeout(a.feedbackReqTimer);try{a.cachedRes||(a.cachedRes=e);var t,r=encoder.decodeBase64(e);_.isEmpty(r)?(logger.log("empty feedback json"),i()):(t=JSON.parse(r),a.processFeedbackData(t,n))}catch(e){logger.warn("Unable to parse feedback definition: "+e),i()}}var t;a.cachedRes?e(a.cachedRes):(a.feedbackReqTimer=setTimeout(function(){var e=encoder.decodeBase64(a.getDefaultData()),t=JSON.parse(e);a.processFeedbackData(t,n)},5e3),t={fid:a.fbConfig.mid,version:a.fbConfig.version||"1",type:"fb"},asyncReq({type:"GET",url:(a.fbConfig.urlOverride||config.getFBViewUrl())+"?"+buildQuery("",t),onSuccess:e,onFailure:i,contentType:"application/json"}))},this.starsRatings=!1,this.npsRatings="unknown",this.formType=null,this.questionGroup=null,this.fbConfig=e,this.feedbackDef=null,this.htmlElem=null,this.submitting=!1,this.isUserTabbing=!1,this.email=null}var cache={},Templater=(createClass(fob,null,[{key:"tmpl",value:function(e,t){var r=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[e]=cache[e]||fob.tmpl(document.getElementById(e).innerHTML);return t?r(t):r}},{key:"instantiate",value:function(e,t){return fob.tmpl(e,t)}}]),fob);function fob(){classCallCheck(this,fob)}function setBodyFocus(e){e||(document.body.hasAttribute("tabindex")?document.body.focus():(document.body.setAttribute("tabindex","-1"),document.body.focus(),setTimeout(function(){document.body.removeAttribute("tabindex")},2e3)))}var accessibility={setBodyFocus:setBodyFocus},FBView=(createClass(pob,[{key:"fbInviteNoFn",value:function(){this.cfg.preview||(this.handleCloseInvite(),this.trackInviteEvent("InviteDecline"))}},{key:"initSpinner",value:function(){this.spinnerNode=toDomNode('<img src="https://fb-logo.auryc.com/loader.gif" class="auryc-feedback-spinner" id="auryc-feedback-spinner" style="width:40px !important;height:40px !important;">')}},{key:"getModalDomNode",value:function(){return this.modalInnerContent}},{key:"getModalContainerDomNode",value:function(){return this.rootNode}},{key:"handleFBInteractions",value:function(r,t){var n=this;if(this.fbmodel){this.renderFB();var e=window.auryc.getFBShownHandler(this.fbmodel.fb.id);if(this.formName=this.fbmodel.fb.name,e)try{e({formName:this.formName})}catch(e){}}else r.getFeedbackData(function(e){n.fbmodel=e,r.fbConfig.launchedFromTimer&&n.init(),n.renderFB();var t=window.auryc.getFBShownHandler(e.fb.id);if(n.formName=e.fb.name,t)try{t({formName:n.formName})}catch(e){}});r.setupFBDoneHandler(function(e){n.modalInnerContent.replaceCssCls("auryc-fbmodal-body","auryc-fbmodal-body-enabled"),n.isFbSubmitted=!0,n.displayTYPage(),t&&t(e)})}},{key:"adjustSpinnerPos",value:function(){var e=getWinSize(window),t=this.getModalContainerDomNode();t.appendChild(this.spinnerNode);var r=t.offsetWidth-this.spinnerNode.offsetWidth,n={};n[constants.css.TOP]=(e.h-this.spinnerNode.offsetHeight)/2+constants.css.PX,n[constants.css.LEFT]=r/2+constants.css.PX,this.spinnerNode.css(n)}},{key:"removeSpinner",value:function(){this.spinnerNode&&this.spinnerNode.parentNode&&(this.spinnerNode.parentNode.removeChild(this.spinnerNode),this.spinnerNode=null)}},{key:"addSpinner",value:function(){this.removeSpinner(),this.initSpinner(),this.adjustSpinnerPos()}},{key:"hideMyself",value:function(e){this.rootNode.parentNode&&this.rootNode.parentNode.removeChild(this.rootNode),this.enableBodyOverflow(!0,e),accessibility.setBodyFocus(this.browser.isPhoneOrTablet())}},{key:"trackAbandoned",value:function(){AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Abandoned",tagName:"FeedbackAbandoned",eventProperties:{formid:this.cfg.projectId,name:"Feedback Abandoned",et:"abandoned"}})}},{key:"trackInviteEvent",value:function(e){AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:e,tagName:e,eventProperties:{formid:this.cfg.projectId,name:e,et:e}})}},{key:"trackAbandonEvents",value:function(t){var r=this;this.cfg.preview||this.cfg.popupDelayEnabled||this.cfg.exitPopupEnabled||this.cfg.fbStandalone||addDomEvent(t,"mousedown",function(e){e.target===t&&(r.isFbSubmitted||r.model.isSubmitting()||(r.trackAbandoned(r),r.fbCanceledFn&&r.fbCanceledFn({formid:r.cfg.projectId,formName:r.formName})),r.hideMyself())})}},{key:"displayTYPage",value:function(){var e=this,t=this.getModalDomNode();t.innerHTML=Templater.instantiate(this.tyTmpl,this.fbmodel);var r,n=t.querySelectorAll(".auryc-close-btn")[0],i=t.querySelectorAll('div[role="dialog"]')[0];i.setAttribute("tabindex","-1"),i.focus(),this.customizeTYStyles(),this.adjustModalPos(),this.cfg.fbStandalone?(i.blur(),n.parentNode.innerHTML="",this.cfg.redirectUrl&&(r='<span class="au_redirect_url">You are being redirect to '+this.cfg.redirectUrl+". If you are not redirect in 5 seconds, please <a href='"+this.cfg.redirectUrl+"'>click here.</a></span>",i.innerHTML=i.innerHTML+r,setTimeout(function(){location.href=e.cfg.redirectUrl},5e3))):addDomEvent(n,"click",function(){e.hideMyself()}),n&&setTimeout(function(){n.focus()},500)}},{key:"customizeTYStyles",value:function(){this.cfg.customCss&&"center"===this.cfg.customCss.align&&this.addCenterStyle(".auryc-feedback-fblogo")}},{key:"init",value:function(){var t=this,e="Feedback Form Opens",r=document.createElement("div"),n='<button class="auryc-fb-modal-closebtn" tabindex="0" aria-label="Close Feedback Modal">✕</button>';this.cfg.fbStandalone&&(n=""),r.innerHTML='<div class="auryc-fbmodal-wrapper" style="height:'+getMaxWinHeight()+'">\n      <div class="auryc-fbmodal-bground"></div>\n      <div class="auryc-fbmodal-container">\n        <div class="auryc-fbmodal-content" \n          style="background-color:rgba(0,0,0,0) !important; border:0 !important; border-radius:0 !important; box-shadow: none !important;"\n          role="dialog" tabindex="0" aria-modal="true" title="'+e+'" aria-label="'+e+'">\n          <div class="auryc-fbmodal-head">\n            '+n+'\n          </div>\n          <div class="auryc-fbmodal-body"></div>\n        </div>\n        </div>\n    </div>',r=r.firstChild,this.rootNode=addDomMethods(r),this.headElem=addDomMethods(r.querySelectorAll(".auryc-fbmodal-head")[0]),this.modalInnerContent=addDomMethods(r.querySelectorAll(".auryc-fbmodal-body")[0]),document.body.appendChild(r),this.enableBodyOverflow(!1,window),addDomEvent(r.querySelectorAll(".auryc-fb-modal-closebtn")[0],"click",function(){return t.handleClose()}),this.cfg.fbStandalone||addDomEvent(document,"keydown",function(e){e.which===constants.keyCodes.esc&&(t.handleClose(),e.stopPropagation(),e.preventDefault())}),this.cfg.launchedFromTimer||this.addSpinner();var i=r.querySelectorAll(".auryc-fbmodal-bground")[0];-1===i.className.indexOf("enabled")&&(this.cfg.fbStandalone||(i.className="auryc-fbmodal-bground-enabled"),i.focus()),this.trackAbandonEvents(r.querySelectorAll("."+constants.css.FBMODAL_CONTAINER)[0])}},{key:"getTemplateContent",value:function(e,t){t&&"desktop"===t.toLowerCase()&&(e=e===constants.symbols.FEEDBACKINVITE?constants.symbols.FEEDBACKINVITE_DESKTOP:constants.symbols.FEEDBACKCONTENT_DESKTOP);var r=window[e];return encoder.decodeBase64(r)}},{key:"enableBodyOverflow",value:function(e){var t=toDomNode(window.document.body);e?this.bodyOverflowStyle&&(t.css(this.bodyOverflowStyle),this.browser.isPhoneOrTablet()&&(t.scrollTop=this.bodyScrollTop,t.css({position:this.bodyStylePosition,width:this.bodyStyleWidth})),this.bodyOverflowStyle=null,this.bodyScrollTop=0):(this.bodyOverflowStyle||(this.bodyOverflowStyle={overflow:t.style.overflow},this.browser.isPhoneOrTablet()&&(this.bodyScrollTop=t.scrollTop,this.bodyStylePosition=t.style.position,this.bodyStyleWidth=t.style.width)),t.css({overflow:"hidden"}),this.browser.isPhoneOrTablet()&&setTimeout(function(){t.css({position:"fixed",width:"100vw"})},200))}},{key:"validColor",value:function(){this.cfg&&(this.cfg.fontColor&&_.isValidColor(this.cfg.fontColor)&&(this.fbmodel.formConfig.btnFontColor=this.cfg.fontColor),this.cfg.backgroundColor&&_.isValidColor(this.cfg.backgroundColor)&&(this.fbmodel.formConfig.btnBackgroundColor=this.cfg.backgroundColor))}},{key:"renderFB",value:function(){var n=this;this.isFbSubmitted=!1,this.cfg.preview||AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Started",tagName:"FeedbackStarted",eventProperties:{formid:this.cfg.projectId,name:"Feedback Started",et:"started"}}),this.removeSpinner(),this.headElem.replaceCssCls("auryc-fbmodal-head","auryc-fbmodal-head-enabled"),this.validColor();var e=Templater.instantiate(this.fbFormTmpl,this.fbmodel);this.modalInnerContent.innerHTML=e,this.model.render(this,this.modalInnerContent),this.customizeStyles(),"desktop"===this.cfg.deviceType.toLowerCase()&&(addDomEvent(this.rootNode,"keydown",function e(t){var r;t.keyCode===constants.keyCodes.tab&&((r=n.rootNode.querySelectorAll(".fb-desktop")[0])&&(toDomNode(r).addCssCls("user-is-tabing"),n.model.setIsTabbing(!0)),removeDomEvent(n.rootNode,"keydown",e))}),setTimeout(function(){var e=n.rootNode.querySelectorAll(".auryc-fbmodal-content")[0];e&&e.removeAttribute("title")},3e3))}},{key:"addCenterStyle",value:function(e){var t=this.rootNode.querySelectorAll(e);t&&0<t.length&&(t=toDomNode(t[0])).addCssCls("centered")}},{key:"addSpacingStyle",value:function(e){var t=this.rootNode.querySelectorAll(e);if(t&&0<t.length)for(var r=0;r<t.length;r++)toDomNode(t[r]).addCssCls("full")}},{key:"customizeStyles",value:function(){var e=_.get(this.cfg,"customCss.spacing","full");"center"===_.get(this.cfg,"customCss.align","left")&&(this.addCenterStyle(".auryc-feedback-fblogo"),this.addCenterStyle(".fb-desktop .auryc-feedback-title-section p"),this.addCenterStyle(".fb-desktop .auryc-feedback-title-section h1"),this.addCenterStyle(".fb-desktop .auryc-feedback-title-section .required-label"),this.addCenterStyle(".fb-desktop .auryc-starrating-section .auryc-feedback-fblabel"),this.addCenterStyle(".fb-desktop .auryc-starrating-section .auryc-fb-starrating-field"),this.addCenterStyle(".fb-desktop .auryc-nps__container .auryc-feedback-fblabel"),this.addCenterStyle(".fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges")),"compact"!==e&&(this.addSpacingStyle(".fb-desktop .auryc-feedback-checkbox"),this.addSpacingStyle(".fb-desktop .auryc-feedback-radio"))}},{key:"adjustModalPos",value:function(){addDomMethods(this.rootNode.querySelectorAll(".auryc-fbmodal-content")[0]).css({marginTop:Math.max(0,(getWinSize(window).h-this.modalInnerContent.offsetHeight)/2)+"px"});var e=this.rootNode.querySelectorAll(".auryc-fbmodal-container")[0];e&&setTimeout(function(){e.scrollTop=0},100)}},{key:"enableFBFormUI",value:function(e){this.enableBodyOverflow(!e),this.rootNode.style.display=e?"":"none",e&&(this.adjustModalPos(),this.modalInnerContent.replaceCssCls("auryc-fbmodal-body","auryc-fbmodal-body-enabled"),this.model.updateFBUI(),document.querySelectorAll(".auryc-fbmodal-content")[0].focus())}},{key:"handleClose",value:function(){this.cfg.preview||(this.model.isSubmitting()||this.isFbSubmitted||(this.trackAbandoned(this),this.fbCanceledFn&&this.fbCanceledFn({formid:this.cfg.projectId,formName:this.formName})),this.hideMyself())}},{key:"handleCloseInvite",value:function(){this.hideMyself(),this.fbCanceledFn&&this.fbCanceledFn({formid:this.cfg.projectId,formName:this.formName})}}]),pob);function pob(e,t,r){classCallCheck(this,pob),_initialiseProps$1.call(this),this.model=e,this.cfg=e.fbConfig,this.browser=getInstance(),this.bodyOverflowStyle=null,this.bodyScrollTop=0,this.spinnerNode=null,this.inviteEnabled=this.cfg.invite&&this.cfg.invite.enabled,this.isFbSubmitted=!1,this.fbCanceledFn=r,this.fbFormTmpl=this.getTemplateContent(constants.symbols.FEEDBACKCONTENT,this.cfg.deviceType),this.tyTmpl=this.getTemplateContent(constants.symbols.FBTHANKYOU),this.formName="",this.fbDoneFn=t,this.fbCanceledFn=r,this.inviteTmpl=this.getTemplateContent(constants.symbols.FEEDBACKINVITE,this.cfg.deviceType),this.inviteEnabled?this.handleFBInvite(this.cfg.invite,e):(e.fbConfig.launchedFromTimer||this.init(),this.handleFBInteractions(e,t,r))}var _initialiseProps$1=function(){var o=this;this.fbInviteYesFn=function(){o.cfg.preview||(o.handleCloseInvite(),o.init(),o.handleFBInteractions(o.model,o.fbDoneFn,o.fbCanceledFn),o.trackInviteEvent("InviteAccept"))},this.handleFBInvite=function(r,e){e.getFeedbackData(function(e){var t=e.logoPic;o.fbmodel=e,o.initInvitePopup(r,t)})},this.initInvitePopup=function(e,t){var r=document.createElement("div");o.fbmodel||(o.fbmodel={formConfig:{}}),o.fbmodel.formConfig.header=e.header.text,o.fbmodel.formConfig.headerAlign=e.header.alignment,o.fbmodel.formConfig.inviteBody=e.body,o.fbmodel.formConfig.yesText=e.yesText,o.fbmodel.formConfig.noText=e.noText;var n="auryc-fbmodal-bground-enabled",i='<button class="auryc-fb-modal-closebtn" tabindex="0" aria-label="Close Feedback Modal">✕</button>';o.cfg.fbStandalone&&(n="auryc-fbmodal-bground",i=""),r.innerHTML='<div class="auryc-fbmodal-wrapper" style="height:'+getMaxWinHeight()+'">\n        <div class="'+n+'"></div>\n        <div class="auryc-fbmodal-container">\n          <div class="auryc-fbmodal-content" \n            style="background-color:rgba(0,0,0,0) !important; border:0 !important;\n            border-radius:0 !important; box-shadow: none !important;"\n            role="dialog" tabindex="0" aria-modal="true">\n            <div class="auryc-fbmodal-head-enabled">\n              '+i+'\n            </div>\n            <div class="auryc-fbmodal-body-enabled"></div>\n          </div>\n        </div>\n    </div>',r=r.firstChild,o.rootNode=addDomMethods(r),o.validColor();var a=Templater.instantiate(o.inviteTmpl,o.fbmodel);o.modalInnerContent=r.querySelectorAll(".auryc-fbmodal-body-enabled")[0],o.modalInnerContent.innerHTML=a,o.customizeStyles(),document.body.appendChild(r),o.enableBodyOverflow(!1,window),addDomEvent(r.querySelectorAll(".auryc-fb-modal-closebtn")[0],"click",function(){return o.handleCloseInvite()}),addDomEvent(r.querySelectorAll("#invite-fb-yes-button")[0],"click",function(){return o.fbInviteYesFn()}),addDomEvent(r.querySelectorAll("#invite-fb-no-button")[0],"click",function(){return o.fbInviteNoFn()}),o.cfg.fbStandalone||addDomEvent(document,"keydown",function(e){e.which===constants.keyCodes.esc&&(o.handleCloseInvite(),e.stopPropagation(),e.preventDefault())});addDomEvent(o.rootNode,"keydown",function e(t){var r;t.keyCode===constants.keyCodes.tab&&((r=o.rootNode.querySelectorAll(".fb-desktop")[0])&&(toDomNode(r).addCssCls("user-is-tabing"),o.model.setIsTabbing(!0)),removeDomEvent(o.rootNode,"keydown",e))})}},ScreenShot$1=(createClass(qqb,[{key:"mark",value:function(){}}]),qqb);function qqb(){classCallCheck(this,qqb)}var PopupController=function e(){var s=this;classCallCheck(this,e),this.getPopup=function(e){for(var t=s.popups.length,r=0;r<t;r++){var n=s.popups[r];if(n.cfg.projectId===e)return n}return!1},this.removePopup=function(e){for(var t=s.popups.length,r=-1,n=0;n<t;n++){if(s.popups[n].cfg.projectId===e){r=n;break}}-1<r&&(s.popups=s.popups.splice(r,1))},this.setCookie=function(e,t,r){var n,i,a,o={path:"/",domain:getRootDomain(window.location.hostname),encode:constants.cookies.encoding.BASE64};e?(n=new Date,i=t||90,a=r||n.getTime()+24*i*60*60*1e3,n.setTime(a),o.expires=n.toUTCString(),console.log("set cookie",o),s.cookie=new Cookie(o),s.cookie.setVal(e,a)):logger.error("throttle cookie is not defined")},this.hasPopup=function(){return 0<s.popups.length},this.initialize=function(a,e){a.deviceType=a.deviceType||getInstance().features.deviceType;function t(e){var t,r;if((a.launchedFromTimer||a.fbStandalone)&&(t=a.feedbackThrottles&&a.feedbackThrottles.submitted||90,r=a.feedbackThrottles&&a.feedbackThrottles.cookie||"auryc.fbt",a.fbStandalone&&(r+=".st."+a.projectId),s.setCookie(r,t)),e&&e.formid){var n=e&&e.formid,i=window.auryc.getFBSubmitHandler(n);if(i)try{i(e)}catch(e){}}}function r(e){var t,r;if(a.launchedFromTimer&&(console.log("feedback canceled"),t=a.feedbackThrottles&&a.feedbackThrottles.abandoned||7,r=a.feedbackThrottles&&a.feedbackThrottles.cookie||"auryc.fbt",s.setCookie(r,t)),e&&e.formid){var n=e&&e.formid,i=window.auryc.getFBCancelHandler(n);if(i)try{i({formName:e.formName})}catch(e){}}}var n=s.getPopup(a.projectId);n?(n=new PopupUI(a,t,r),s.removePopup(a.projectId)):n=new PopupUI(a,t,r),s.popups.push(n),e&&a.trigger&&a.trigger.fbTab&&a.trigger.fbTab.setClicked()},this.popups=[],this.cookie=null},PopupUI=function e(t,r,n){classCallCheck(this,e),this.cfg=t,this.fbView=new FBView(new FBModel(this.cfg),r,n)},globalPopupController=new PopupController,Preview=(createClass(grb,[{key:"showFeedback",value:function(){var e={urlOverride:this.url,preview:!0,backgroundColor:this.backgroundColor,mid:this.mid,fontColor:this.fontColor,deviceType:this.previewmode,customCss:this.customCss};globalPopupController.initialize(e)}},{key:"showFeedbackInvite",value:function(){var e={urlOverride:this.url,preview:!0,backgroundColor:this.backgroundColor,mid:this.mid,fontColor:this.fontColor,deviceType:this.previewmode,customCss:this.customCss,invite:this.inviteCfg};globalPopupController.initialize(e)}},{key:"initFBTab",value:function(){new FBTab(_extends({},this.config,{preview:!0})).render(!0)}},{key:"displayFBTab",value:function(){var e=this,t=this.config;t.delay&&0<t.delay?setTimeout(function(){return e.initFBTab()},t.delay):this.initFBTab()}}]),grb);function grb(){classCallCheck(this,grb);var e,t=window.location.hash;this.previewmode=!!getHashParam(t,"previewmode")&&getHashParam(t,"previewmode").toLowerCase(),this.previewfbTabmode=getHashParam(t,"previewbadgemode")?getHashParam(t,"previewbadgemode").toLowerCase():!!getHashParam(t,"previewfbtabmode")&&getHashParam(t,"previewfbtabmode"),this.previewinvitemode=!!getHashParam(t,"previewinvitemode")&&getHashParam(t,"previewinvitemode").toLowerCase(),this.previewfbTabmode?(e=getHashParam(t,"cfg"),this.config=e?JSON.parse(e):{}):(this.previewmode||this.previewinvitemode)&&(this.mid=getHashParam(t,"mid"),this.backgroundColor=getHashParam(t,"backgroundColor"),this.fontColor=getHashParam(t,"fontColor"),this.url=getHashParam(t,"datauri"),this.customCss=JSON.parse(getHashParam(t,"customCss")||"{}"),this.inviteCfg=JSON.parse(getHashParam(t,"inviteCfg")||"{}"))}var Criteria=(createClass(srb,[{key:"isConfigInstanceActive",value:function(e,t){var r=getInstance();return!e.disabled&&!!this.passSampling(e)&&!!(r.isPhoneOrTablet()&&e.targetingdevicemobile||!r.isPhoneOrTablet()&&e.targetingdevicedesktop)&&!(r.browser&&r.browser.name&&this.isExcluded(e,r.browser.name))&&this.passURLFilter(e,t)&&this.passExtraConditions(e)}},{key:"isExcluded",value:function(e,t){var r=e.exclude;if(!r)return!1;var n=r.browser;if(!n)return!1;for(var i=0;i<n.length;i++)if(t.toLowerCase()===n[i].toLowerCase())return!0;return!1}},{key:"isDelayedPopupActive",value:function(e){return!this.isFeedbackShown(e)&&this.passURLFilter(e)}},{key:"passSampling",value:function(e){var t=!1,r=e.feedbackThrottles;if(r){var n,i,a=r.sampling;if(void 0===a)return t;0===a?t=!1:(n="auryc.fbt."+(e.projectId||"1"),(i=this.sessionStorage.getByKey(n))?t="t"===i:(t=100*Math.random()<a,this.sessionStorage.setByKey(n,t?"t":"f")))}else t=!0;return t}},{key:"isFeedbackShown",value:function(e){var t=e&&e.feedbackThrottles&&e.feedbackThrottles.cookie||"auryc.fbt";return!!Cookie.Get(t)}},{key:"passURLFilter",value:function(e,t){if(t=t||window.location.href,"A"===e.triggerpagefilter)return!0;var r="string"==typeof e.filterpages?e.filterpages.split(","):e.filterpages||[],n="string"==typeof e.filterpagesInclude?e.filterpagesInclude.split(","):e.filterpagesInclude||[];return"I"===e.triggerpagefilter?containsUrl(t,n):"E"!==e.triggerpagefilter||!containsUrl(t,r)}},{key:"passExtraConditions",value:function(e){var r=this,t=e.extraConditions;if(!t)return!0;var n=t.referrer;if(n){var i=document.referrer;if(!i||!n.some(function(e){return-1<i.indexOf(e)}))return!1}var a=t.url;if(a&&!this.passURLFilter(a))return!1;var o,s=t.variable;if(s&&s.name){_.isArray(s.name)||(s.name=[s.name]);var c=s.name[0],l=s.name[1],g=_.get(window,c,[]);if(_.isArray(g)||(g=[g]),o=g.some(function(e){var t=null,t=l?_.get(e,l,""):e;return r.passSingleVarVal(t,s.value)}),!(!0===s.inverse?!o:o))return!1}return!0}},{key:"passSingleVarVal",value:function(t,e){var r=!1;if("string"!=typeof(t=t||""))try{t=JSON.stringify(t)}catch(e){r=!(t="")}if(r)return!1;var n=new RegExp(e);return null!==t.match(n)}}]),srb);function srb(){classCallCheck(this,srb),this.sessionStorage=DataLayer.getInstance(constants.symbols.SESSION)}function initTemplate(){window[constants.symbols.FEEDBACKCONTENT]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LXNlbGVjdGlvbiI-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LXNlbGVjdGlvbl90aXRsZSI-SG93IHdvdWxkIHlvdSBsaWtlIHRvIGdpdmUgZmVlZGJhY2s_PC9kaXY-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2NyZWVuc2hvdCI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fcm93Ij4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFja19vcHRpb25faW1hZ2UiPgogICAgICAgIDxpbWcgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNVQUFBQWdDQVlBQUFDVlU3R3dBQUFCZkVsRVFWUllSKzJYcTI2RVVCQ0d6NkFRS0ZiMVNWcUJhcXE0R0lJc21GNDA0UVc2ZlFHQzdzV1FTb0xob3BwVmlQWko2bEFJRk5NYzBtMEkzZTZXeTFsSXczRW5oSm52L1A4d1p3QXl3d1V6WkNJTDFGOWRXWlRxckpRc3kwaGZTdE8wVm8vRm51TzQremlPMTRmZ3Z1MWpBYkh2a1B2QTVsdFRiWlVPeWN2NitjNzZZWkcweThHUFp0Ly9nT3B5aXI3V2RzbXgxRlN6YjAzV3B4QVJORTI3UnNRclJEeWxJQUR3RGdEUFVSUTlBVUI5aTdRWE0vdDBYVDhweS9LRkVITCtpeW9ibnVjdnd6RDhPQW9VVlVoUmxGY0t0RnF0MERSTjhEeXZ6bTNiTnZGOUgvTThwNEpza2lTNWFDdkdwRStwcW5wVFZkV0RLSXJvdWk0SWdrQU13NmloZ2lBZ1JWRVF4M0ZxTUk3amJ1TTRmbXlxeFFSS1VaUTNXa05VRlVtUzZueE5LTHJQc294UTlXaU5KVWx5OWdOcXJBbWhidy9iV1ZPcXFxNnJxcm9iT2t1TkNqVldzRzJjVWV3YkcycVdoZDVzQ2ZRTHRDeHIrcFpBbFIvY1BNZTJieHR2MERYRENxb1p0L1Bvc2tCOS9WZE9OcnIwdGU4VFkvZEg2bENVcjNZQUFBQUFTVVZPUks1Q1lJST0iPjwvaW1nPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDEiPlNlbGVjdCBTZWN0aW9uPC9kaXY-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDIiPlNlbGVjdCBhIHNlY3Rpb24gb2YgdGhpcyBwYWdlIG9uIHdoaWNoIHRvIGdpdmUgZmVlZGJhY2suPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgPC9kaXY-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZ2VuZXJhbCI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fcm93Ij4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFja19vcHRpb25faW1hZ2UiPgogICAgICAgIDxpbWcgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNBQUFBQWdDQVlBQUFCemVucjBBQUFBL1VsRVFWUllSKzJYUFE2Q1FCQ0ZaeVJhY0FQMVBGcnNTa25wT2JTeXNOSnpXRkxpVU9oOVBBS0ZCc2RzUVVJSVlSYVdaR095VzdMejg4M2piVEVJbmc5Sy9kTTBYWlJsZVFhQVBUT3ZwSGh6ajRndkFMakZjWHpLc3V6ZGx5TUNhSzB2ekh5d2FkeU9RY1FyRVIyZEFKUlNacG9sSXU2SWlHeEF0TmFhbWU5R0NTSmFEd1pRU25FN3FTZ0tVYTFtam0yTnpxTE5aRVQ4TXZOc2pBSUE4QUdBZVEzV05VUXZnRW1Zd2dQMVFLTUFwbmdGVGdBMnBwTmlBa0JRd0ZtQkpFa2VWVlZ0SkxNMTc2TW9ldVo1dmpYZi9oOWd5T1Jkc2M0S0JJQmd3dUFCN3dvRUUzci9CUUhBbXdLdWpXMldHM0V4bVJMQ2VpK1lzcWxVNndmVGUwQXdVVXZKQkFBQUFBQkpSVTVFcmtKZ2dnPT0iPjwvaW1nPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDEiPkZlZWRiYWNrIEZvcm08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVsMiI-RmlsbCBvdXQgb3VyIGdlbmVyYWwgZmVlZGJhY2sgZm9ybS48L2Rpdj4KICAgICAgPC9kaXY-CiAgICA8L2Rpdj4KICA8L2Rpdj4KPC9kaXY-CjwlCiAgdmFyIHBvd2VyZWRCeSA9ICdQb3dlcmVkIGJ5JzsKICB2YXIgeW91ckFuc3dlciA9ICdZb3VyIGFuc3dlcic7CiAgdmFyIGxlZnRMYWJlbCA9ICc8c3BhbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stdGV4dC1yZW1haW5pbmciPjEsMDAwPC9zcGFuPiBDaGFyYWN0ZXJzIGxlZnQnOwogIGlmIChleHRyYUluZm8ueW91ckFuc3dlcikgewogICAgeW91ckFuc3dlciA9IGV4dHJhSW5mby55b3VyQW5zd2VyOwogICAgcG93ZXJlZEJ5ID0gZXh0cmFJbmZvLnBvd2VyZWRCeTsKICAgIGxlZnRMYWJlbCA9IGV4dHJhSW5mby5sZWZ0LnJlcGxhY2UoL1wkXHtOVU1cfS8sICc8c3BhbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stdGV4dC1yZW1haW5pbmciPjEsMDAwPC9zcGFuPicpOwogIH0KCiAgdmFyIHJlcXVpcmVkRmllbGRzID0gJ1JlcXVpcmVkIGZpZWxkcyc7CiAgaWYgKGV4dHJhSW5mby5yZXF1aXJlZEZpZWxkcykgewogICAgcmVxdWlyZWRGaWVsZHMgPSBleHRyYUluZm8ucmVxdWlyZWRGaWVsZHM7CiAgfQogJT4KPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LWZiZm9ybSI-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2siPgogICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10aXRsZS1zZWN0aW9uIj4KICAgICAgICAgIDwlIAogICAgICAgICAgdmFyIGFsdCA9IGZvcm1Db25maWcubG9nb0FsdCB8fCAnU2l0ZSBMb2dvJzsKICAgICAgICAgICU-CiAgICAgICAgICA8JSBpZiAobG9nb1BpYykgeyAlPgogICAgICAgICAgICAgIDxpbWcgc3JjPSI8JT1sb2dvUGljJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxvZ28iIGFsdD0iPCU9YWx0JT4iLz4KICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIGlmIChmZWVkYmFja1RpdGxlKSB7ICU-CiAgICAgICAgICAgICAgPGgxPjwlPSBmZWVkYmFja1RpdGxlICU-PC9oMT4KICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIGlmIChwcm9sb2d1ZVRleHQpIHsgJT4KICAgICAgICAgICAgICA8JSBpZiAocHJvbG9ndWVUZXh0LmluZGV4T2YoJ2gxJykgPT09IC0xKSB7ICU-CiAgICAgICAgICAgICAgICAgIDxwPjwlPSBwcm9sb2d1ZVRleHQgJT48L3A-CiAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgPCU9IHByb2xvZ3VlVGV4dCAlPgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIGlmIChoYXNSZXF1aXJlZFF1ZXN0aW9ucykgeyAlPgogICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6I2RiMmQ0MzsiPio8JT0gcmVxdWlyZWRGaWVsZHMgJT48L3A-CiAgICAgICAgICA8JSB9ICU-CgogICAgICA8L2Rpdj4KICAgICAgPCUgZm9yICh2YXIgbXFpID0gMDsgbXFpIDwgbWFpblEubGVuZ3RoOyBtcWkrKykgewogICAgICAgICAgdmFyIGN1clEgPSBtYWluUVttcWldOwogICAgICAgICAgdmFyIHJlcUZvbnQgPSBjdXJRLnJlcXVpcmVkID8gJyonIDogJyc7CiAgICAgICAgICBpZiAoY3VyUS5xdWVzdGlvblR5cGUgIT09ICdEUk9QX0RPV04nIHx8IGN1clEuYW5zd2Vycy5sZW5ndGggPiAwKSB7ICU-CiAgICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZicSIgY2xhc3M9IjwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHsgJT5hdXJ5Yy1zdGFycmF0aW5nLXNlY3Rpb248JSB9ICU-IiAgICA8JT0gY3VyUS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiAlPiAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-Ij4KICAgICAgICAgIDwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHsgJT4KICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb24iIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4-CiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT48c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0MzsiPjwlPSByZXFGb250ICU-PC9zcGFuPjwvbGFiZWw-CiAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz0iYXVyeWMtZmItc3RhcnJhdGluZy1maWVsZCIgcXVlc3Rpb25pZD0iPCU9Y3VyUS5pZCU-IiAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4-CiAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYXRpID0gMDsgYXRpIDwgY3VyUS5hbnN3ZXJzLmxlbmd0aDsgYXRpKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IGN1clEuYW5zd2Vyc1thdGldOyAlPgogICAgICAgICAgICAgIDxpbnB1dCBhcmlhLWxhYmVsPSI8JT1hbnMudmFsdWUlPiBzdGFycyIgbmFtZT0ic3JfPCU9Y3VyUS5pZCU-IiBpZD0ic3JfPCU9IGN1clEuaWQgJT5fPCU9YW5zLmlkJT4iIHZhbHVlPSI8JT1hbnMuaWQlPiIKICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25pZD0iPCU9Y3VyUS5pZCU-IiB0eXBlPSJyYWRpbyIKICAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4KICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImF1cnljLWZiLXN0YXJyYXRpbmctZmllbGQtc3Rhcmljb24iCiAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT1hbnMudmFsdWUlPiIvPgogICAgICAgICAgICAgICAgPCUgaWYgKGF0aSA9PT0gMCkgeyAlPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9yPSJzcl88JT1jdXJRLmlkJT5fPCU9YW5zLmlkJT4iIHRhYmluZGV4PSI8JT0gYXRpICU-Ij48c3BhbiBzdHlsZT0iZGlzcGxheTogbm9uZSI-PCU9YW5zLnZhbHVlJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7JT4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgYXJpYS1oaWRkZW49InRydWUiIGZvcj0ic3JfPCU9Y3VyUS5pZCU-XzwlPWFucy5pZCU-Ij48c3BhbiBzdHlsZT0iZGlzcGxheTogbm9uZSI-PCU9YW5zLnZhbHVlJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgIDwvZmllbGRzZXQ-CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ05QUycpIHsgJT4KICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLW5wc19fY29udGFpbmVyIGF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb24iIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiA8JT0gY3VyUS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiAlPj4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IGN1clEuaWQgJT4iPjwlPSBjdXJRLnF1ZXN0aW9uVGV4dCAlPjxzcGFuIHN0eWxlPSJjb2xvcjojZGIyZDQzOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzPSJucHMtcmF0aW5nIiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiIgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlcyI-CiAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhdGkgPSAwOyBhdGkgPCBjdXJRLmFuc3dlcnMubGVuZ3RoOyBhdGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpXTsgJT4KICAgICAgICAgICAgICAgIDxpbnB1dCBhcmlhLWxhYmVsPSJyYXRpbmcgPCU9YXRpJT4iIG5hbWU9Im5wc188JT0gY3VyUS5pZCAlPiIgaWQ9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-IgogICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiB0eXBlPSJyYWRpbyIKICAgICAgICAgICAgICAgICAgICAgICA8JT0gY3VyUS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiAlPgogICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICA8JSBpZiAoYXRpID09PSAwKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0ibnBzLXJhdGluZ19fYmFkZ2UiIGZvcj0ibnBzXzwlPSBjdXJRLmlkICU-XzwlPSBhbnMuaWQgJT4iIHRhYmluZGV4PSI8JT0gYXRpICU-Ij4KICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7JT4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZSIgZm9yPSJucHNfPCU9IGN1clEuaWQgJT5fPCU9IGFucy5pZCAlPiI-CiAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX2hlaWdodF9maXgiPjwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHMtcmF0aW5nX19udW0iPjwlPWF0aSU-PC9kaXY-CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0cmV0Y2giLz4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHMtcmF0aW5nX19sYWJlbHMiPgogICAgICAgICAgICAgICAgPCUKICAgICAgICAgICAgICAgICAgdmFyIG5wc1plcm8gPSBjdXJRLmFuc3dlcnNbMF0ubGJsOwogICAgICAgICAgICAgICAgICB2YXIgbnBzVGVuID0gY3VyUS5hbnN3ZXJzW2N1clEuYW5zd2Vycy5sZW5ndGgtMV0ubGJsOwogICAgICAgICAgICAgICAgICBpZiAoZXh0cmFJbmZvLm5wc1plcm8pIHsKICAgICAgICAgICAgICAgICAgICBucHNaZXJvID0gZXh0cmFJbmZvLm5wc1plcm87CiAgICAgICAgICAgICAgICAgICAgbnBzVGVuID0gZXh0cmFJbmZvLm5wc1RlbjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICU-CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHNfcmF0aW5nX2xlZnRfbGFiZWwiPjwlPSBucHNaZXJvICU-PC9kaXY-CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHNfcmF0aW5nX3JpZ2h0X2xhYmVsIj48JT0gbnBzVGVuICU-PC9kaXY-CiAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgIDwvZmllbGRzZXQ-CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ0RST1BfRE9XTicgKSB7ICU-CiAgICAgICAgICAgIDwlIGlmIChjdXJRLmFuc3dlcnMubGVuZ3RoID4gMSkgeyAlPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb24iIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxNnB4ICFpbXBvcnRhbnQiIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4-CiAgICAgICAgICAgICAgICA8bGFiZWwgIHN0eWxlPSJwYWRkaW5nLWJvdHRvbTogNXB4ICFpbXBvcnRhbnQiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IGN1clEuaWQgJT4iPjwlPSBjdXJRLnF1ZXN0aW9uVGV4dCAlPjxzcGFuIHN0eWxlPSJjb2xvcjojZGIyZDQzOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXF1ZXN0aW9uLXNlbGVjdC1jaG9vc2UiIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4-CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChjdXJRLmFuc3dlcnMubGVuZ3RoID4gMSkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JT0gZXh0cmFJbmZvLmNob29zZSAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JT0gY3VyUS5hbnN3ZXJzWzBdLmxhYmVsICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJzXzwlPSBjdXJRLmlkICU-IiBjbGFzcz0iYXVyeWMtZmItcXVlc3Rpb25ncm91cC1zZWxlY3RvciIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDEpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj48JT0gZXh0cmFJbmZvLmNob29zZSAlPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aXEgPSAwOyBhdGlxIDwgY3VyUS5hbnN3ZXJzLmxlbmd0aDsgYXRpcSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gY3VyUS5hbnN3ZXJzW2F0aXFdOyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI8JT0gYW5zLmlkICU-Ij48JT0gYW5zLmxhYmVsICU-PC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgIDwlIGZvciAodmFyIHRwaSA9IDA7IHRwaSA8IHRvcGljcy5sZW5ndGg7IHRwaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgdG9wayA9IHRvcGljc1t0cGldOyAlPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnF1ZXN0aW9uZ3JvdXAiIGlkPSJ0b3BrXzwlPSB0b3BrLnRvcGljQW5zd2VySWQgJT4iPgogICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgcWkgPSAwOyBxaSA8IHRvcGsucXVlc3Rpb25zLmxlbmd0aDsgcWkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBxID0gdG9way5xdWVzdGlvbnNbcWldOwogICAgICAgICAgICAgICAgICAgIHZhciByZXFGb250ID0gcS5yZXF1aXJlZCA_ICcqJyA6ICcnOyAlPgogICAgICAgICAgICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZicS13cmFwcGVyIiBjbGFzcz0iPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnU0NBTEVEJykgeyU-YXVyeWMtc3RhcnJhdGluZy1zZWN0aW9uPCUgfSU-IiBpZD0iYXVyeWNxXzwlPSBxLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAoIChxLnF1ZXN0aW9uVHlwZSAhPT0gJ0NIRUNLQk9YJykgJiYgKHEucXVlc3Rpb25UeXBlICE9PSAnUkFESU9fQlVUVE9OJykgKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGlkPSJhdXJ5Y19sYmw8JT0gcS5pZCAlPiIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTo1cHggIWltcG9ydGFudDsiIGZvcj0iYXVyeWNfb2JqPCU9IHEuaWQgJT4iIGRhdGEtcXVlc3Rpb250eXBlPSJfPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPCU9IHEucXVlc3Rpb25UZXh0ICU-PHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdDSEVDS0JPWCcgJiYgIXEubWF0cml4KSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGlkPSJhdXJ5Y19sYmw8JT0gcS5pZCAlPiIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTo1cHggIWltcG9ydGFudDsiIGZvcj0iYXVyeWNfb2JqPCU9IHEuaWQgJT4iIGRhdGEtcXVlc3Rpb250eXBlPSJfPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPCU9IHEucXVlc3Rpb25UZXh0ICU-PHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZlZWRiYWNrLWNoZWNrYm94IiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGFuc2kgPSAwOyBhbnNpIDwgcS5hbnN3ZXJzLmxlbmd0aDsgYW5zaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImNiXzwlPSBhbnMuaWQgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1jaGVja2JveCIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7IiB0YWJpbmRleD0iMCI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iPCU9IGFucy52YWx1ZSAlPiIgcXVlc3Rpb25pZD0iPCU9IGFucy5pZCAlPiIgaWQ9Il88JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PSAnUkFESU9fQlVUVE9OJyAmJiAhcS5tYXRyaXgpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBxLmlkICU-IiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdCAhaW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjVweCAhaW1wb3J0YW50OyIgZm9yPSJhdXJ5Y19vYmo8JT0gcS5pZCAlPiIgZGF0YS1xdWVzdGlvbnR5cGU9Il88JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICA8JT0gcS5xdWVzdGlvblRleHQgJT48c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0MzsiPjwlPSByZXFGb250ICU-PC9zcGFuPjwvbGFiZWw-CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mZWVkYmFjay1yYWRpbyIgIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYW5zaSA9IDA7IGFuc2kgPCBxLmFuc3dlcnMubGVuZ3RoOyBhbnNpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IHEuYW5zd2Vyc1thbnNpXTsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icmJfPCU9IGFucy5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXJhZGlvIiB0YWJpbmRleD0iMCI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBxLmlkICU-IiB2YWx1ZT0iPCU9IGFucy5pZCAlPiIgbGFiZWw9IjwlPSBlbmNvZGVVUklDb21wb25lbnQoYW5zLmxhYmVsKSAlPiIgaWQ9Il88JT0gYW5zLmlkICU-IiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIvPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBhbnMubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5tYXRyaXggJiYgcS5ncm91cCAmJiBxLmdyb3VwLmxlbmd0aCA-IDApIHsgJT4KICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0ibWF0cml4IiBib3JkZXI9MD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJkZXNjcmlwdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHRkIGNvbHNwYW49IjQiPjwlPSBxLnF1ZXN0aW9uTGFiZWwgJT48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBxLmdyb3VwLmxlbmd0aDsgaWR4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdxID0gcS5ncm91cFtpZHhdLCBhbnN3ZXJMZW5ndGggPSBxLmFuc3dlckxlbmd0aDsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJxdWVzdGlvbkNvbHVtbiIgcXVlc1R5cGU9ImF1cnljLWZicSIgcXVlc3Rpb25pZD0iPCU9IGdxLmlkICU-IiA8JT0gZ3EucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IGdxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJxdWVzdGlvblRleHQiPjwlPSBncS5xdWVzdGlvblRleHQgJT48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ICJvcHRpb25TZWN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmICgocS5udW1lcmljICE9IHRydWUpICYmIChhbnN3ZXJMZW5ndGggPiAyNykpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJsaW5lQnJlYWtSYWRpbyBvcHRpb25TZWN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iaW5MaW5lUmFkaW8gb3B0aW9uU2VjdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IGdxLmFuc3dlcnMubGVuZ3RoOyBhbnNpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IGdxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJhZGlvTGlzdCI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLm51bWVyaWMgPT0gdHJ1ZSkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZiLXN0YXJyYXRpbmctZmllbGQtbWF0cml4Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBncS5pZCAlPiIgdmFsdWU9IjwlPSBhbnMuaWQgJT4iIGlkPSJhdXJ5Y19vYmpfPCU9IGN1clEuaWQgJT5fPCU9YW5zLmlkJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBncS5pZCAlPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImF1cnljLWZiLXN0YXJyYXRpbmctZmllbGQtc3Rhcmljb24tbWF0cml4Ii8-CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHgiIGZvcj0iYXVyeWNfb2JqXzwlPSBjdXJRLmlkICU-XzwlPWFucy5pZCU-Ij4gPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImF1cnljcmRfPCU9IGdxLmlkICU-IiB2YWx1ZT0iPCU9IGFucy5pZCAlPiIgaWQ9InJiXzwlPSBhbnMuaWQgJT4iIHF1ZXN0aW9uaWQ9IjwlPSBncS5pZCAlPiIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiIGZvcj0icmJfPCU9IGFucy5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4gIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ-CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdPUEVORU5EJykgeyAlPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZidGFyZWEiICBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iYXVyeWNfb2JqPCU9IHEuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYXVyeWMtZmVlZGJhY2stcXVlc3Rpb24tdGV4dGFyZWEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSI8JT0geW91ckFuc3dlciAlPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXJ5Y21heGxlbmd0aD0iMTAwMCIgdGFiaW5kZXg9IjAiPjwvdGV4dGFyZWE-CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19jb3VudFdyYXBwZXIiPiA8JT0gbGVmdExhYmVsICU-PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdDT05UQUNUX0lORk8nKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPCEtLSBUZXh0IGlucHV0IC0tPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRleHQgYXVyeWMtZmVlZGJhY2stZW1haWwiICBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTZweCAhaW1wb3J0YW50IiAgcXVlc1R5cGU9ImF1cnljLWZicSIgcXVlc3Rpb25pZD0iPCU9IHEuaWQgJT4iIDwlPSBxLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4gZGF0YS1xdWVzdGlvbi10eXBlPSI8JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNyXzwlPSBxLmlkICU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJlbWFpbCIgdGFiaW5kZXg9IjAiIHR5cGU9ImVtYWlsIiAgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4vPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYi12YWxpZGF0aW9uLW1zZy1zZWN0aW9uIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnRFJPUF9ET1dOJyApIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJxdWVzdGlvbi1kcm9wZG93biIgc3R5bGU9InBhZGRpbmctYm90dG9tOiA1cHggIWltcG9ydGFudCIgIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXF1ZXN0aW9uLXNlbGVjdC1jaG9vc2UiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiAgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBleHRyYUluZm8uY2hvb3NlICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ic188JT0gcS5pZCAlPiIgY2xhc3M9ImF1cnljLWZiLXF1ZXN0aW9uLXNlbGVjdG9yIiB0YWJpbmRleD0iMCI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24-PCU9IGV4dHJhSW5mby5jaG9vc2UgJT48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYXRpcSA9IDA7IGF0aXEgPCBxLmFuc3dlcnMubGVuZ3RoOyBhdGlxKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmFuc3dlcnNbYXRpcV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjwlPSBhbnMuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgPCUgfSAlPgogICAgICA8L2Rpdj4KICAgICAgPCUgfSAlPgogICAgICA8JSB9ICU-CgogICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mb290ZXItc2VjdGlvbiI-CiAgICAgICAgPCUgdmFyIGJ0blRleHQgPSAiIjsgJT4KICAgICAgICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuRm9udENvbG9yKSB7ICU-CiAgICAgICAgICAgICAgICA8JSBidG5UZXh0ID0gIjxzcGFuIHN0eWxlPVwiY29sb3I6IiArIGZvcm1Db25maWcuYnRuRm9udENvbG9yICsgIlwiPiIgKyBleHRyYUluZm8uc3VibWl0ICsgIjwvc3Bhbj4iOyAlPgogICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgPCUgYnRuVGV4dCA9IGV4dHJhSW5mby5zdWJtaXQ7ICU-CiAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IpIHsgJT4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiA8JT1mb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvciU-OyBib3JkZXI6IDFweCBzb2xpZCA8JT1mb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvciU-IgogICAgICAgICAgICAgICAgICAgICAgICBpZD0icG9zdC1mYi1yZXNwLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iIGlkPSJwb3N0LWZiLXJlc3AtYnV0dG9uIiB0YWJpbmRleD0iMCI-CiAgICAgICAgICAgICAgICAgICAgPCU9IGJ0blRleHQgJT4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgIDxkaXYgaWQ9ImF1cnljLWZlZWRiYWNrLWNhbnZhcyI-CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1mb290ZXIiPgogICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cuYXVyeWMuY29tLyIgY2xhc3M9IlBvd2VyZWRCeUF1cnljIiB0aXRsZT0iPCU9IHBvd2VyZWRCeSAlPiBBdXJ5YyIgYXJpYS1sYWJlbD0iPCU9IHBvd2VyZWRCeSAlPiBBdXJ5YyIgdGFyZ2V0PSJfYmxhbmsiIHRhYmluZGV4PSIwIj4KICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49InRydWUiPjwlPSBwb3dlcmVkQnkgJT48L3NwYW4-CiAgICAgICAgICAgICAgICAgIDxpbWcgYXJpYS1oaWRkZW49InRydWUiIHNyYz0iaHR0cHM6Ly9mYi1sb2dvLmF1cnljLmNvbS9kYXJrLWxvZ28uc3ZnIiBhbHQ9IkF1cnljIiBzdHlsZT0id2lkdGg6NjBweCAhaW1wb3J0YW50O2hlaWdodDoyMHB4ICFpbXBvcnRhbnQ7Ij4KICAgICAgICAgICAgICAgIDwvYT4gICAgICAgICAgICAgIAogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY-CiAgPC9kaXY-CjwvZGl2Pgo=PGRpd",window[constants.symbols.FEEDBACKCONTENT_DESKTOP]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LXNlbGVjdGlvbiI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYm1vZGFsLWJvZHktc2VsZWN0aW9uX3RpdGxlIj5Ib3cgd291bGQgeW91IGxpa2UgdG8gZ2l2ZSBmZWVkYmFjaz88L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXNjcmVlbnNob3QiPgogICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fcm93Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fY29sdW1uIGF1cnljLWZlZWRiYWNrX29wdGlvbl9pbWFnZSI-CiAgICAgICAgICA8aW1nIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDVUFBQUFnQ0FZQUFBQ1ZVN0d3QUFBQmZFbEVRVlJZUisyWHEyNkVVQkNHejZBUUtGYjFTVnFCYXFxNEdJSXNtRjQwNFFXNmZRR0M3c1dRU29MaG9wcFZpUFpKNmxBSUZOTWMwbTBJM2U2V3kxbEl3M0VuaEpudi9QOHdad0F5d3dVelpDSUwxRjlkV1pUcXJKUXN5MGhmU3RPMFZvL0ZudU80K3ppTzE0Zmd2dTFqQWJIdmtQdkE1bHRUYlpVT3ljdjYrYzc2WVpHMHk4R1BadC8vZ09weWlyN1dkc214MUZTemIwM1dweEFSTkUyN1JzUXJSRHlsSUFEd0RnRFBVUlE5QVVCOWk3UVhNL3QwWFQ4cHkvS0ZFSEwraXlvYm51Y3Z3ekQ4T0FvVVZVaFJsRmNLdEZxdDBEUk44RHl2em0zYk52RjlIL004cDRKc2tpUzVhQ3ZHcEUrcHFucFRWZFdES0lyb3VpNElna0FNdzZpaGdpQWdSVkVReDNGcU1JN2pidU00Zm15cXhRUktVWlEzV2tOVUZVbVM2bnhOS0xyUHNveFE5V2lOSlVseTlnTnFyQW1oYncvYldWT3FxcTZycXJvYk9rdU5DalZXc0cyY1Vld2JHMnFXaGQ1c0NmUUx0Q3hyK3BaQWxSL2NQTWUyYnh0djBEWERDcW9adC9Qb3NrQjkvVmRPTnJyMHRlOFRZL2RINmxDVXIzWUFBQUFBU1VWT1JLNUNZSUk9Ij48L2ltZz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fY29sdW1uIGF1cnljLWZlZWRiYWNrLXNlbGVjdGlvbl9fbGFiZWxzIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXNlbGVjdGlvbl9fbGFiZWwxIj5TZWxlY3QgU2VjdGlvbjwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDIiPlNlbGVjdCBhIHNlY3Rpb24gb2YgdGhpcyBwYWdlIG9uIHdoaWNoIHRvIGdpdmUgZmVlZGJhY2suPC9kaXY-CiAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1nZW5lcmFsIj4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX3JvdyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFja19vcHRpb25faW1hZ2UiPgogICAgICAgICAgPGltZyBzcmM9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUEvVWxFUVZSWVIrMlhQUTZDUUJDRlp5UmFjQVAxUEZyc1NrbnBPYlN5c05KeldGTGlVT2g5UEFLRkJzZHNRVUlJWVJhV1pHT3lXN0x6ODgzamJURUluZzlLL2RNMFhaUmxlUWFBUFRPdnBIaHpqNGd2QUxqRmNYektzdXpkbHlNQ2FLMHZ6SHl3YWR5T1FjUXJFUjJkQUpSU1pwb2xJdTZJaUd4QXROYWFtZTlHQ1NKYUR3WlFTbkU3cVNnS1VhMW1qbTJOenFMTlpFVDhNdk5zakFJQThBR0FlUTNXTlVRdmdFbVl3Z1AxUUtNQXBuZ0ZUZ0EycHBOaUFrQlF3Rm1CSkVrZVZWVnRKTE0xNzZNb2V1WjV2alhmL2g5Z3lPUmRzYzRLQklCZ3d1QUI3d29FRTNyL0JRSEFtd0t1alcyV0czRXhtUkxDZWkrWXNxbFU2d2ZUZTBBd1VVdkpCQUFBQUFCSlJVNUVya0pnZ2c9PSI-PC9pbWc-CiAgICAgICAgPC9kaXY-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVsMSI-RmVlZGJhY2sgRm9ybTwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDIiPkZpbGwgb3V0IG91ciBnZW5lcmFsIGZlZWRiYWNrIGZvcm0uPC9kaXY-CiAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgPC9kaXY-CiAgPCUKICAgIHZhciBwb3dlcmVkQnkgPSAnUG93ZXJlZCBieSc7CiAgICB2YXIgeW91ckFuc3dlciA9ICdZb3VyIGFuc3dlcic7CiAgICB2YXIgbGVmdExhYmVsID0gJzxzcGFuIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10ZXh0LXJlbWFpbmluZyI-MSwwMDA8L3NwYW4-IENoYXJhY3RlcnMgbGVmdCc7CiAgICBpZiAoZXh0cmFJbmZvLnlvdXJBbnN3ZXIpIHsKICAgICAgeW91ckFuc3dlciA9IGV4dHJhSW5mby55b3VyQW5zd2VyOwogICAgICBwb3dlcmVkQnkgPSBleHRyYUluZm8ucG93ZXJlZEJ5OwogICAgICBsZWZ0TGFiZWwgPSBleHRyYUluZm8ubGVmdC5yZXBsYWNlKC9cJFx7TlVNXH0vLCAnPHNwYW4gY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRleHQtcmVtYWluaW5nIj4xLDAwMDwvc3Bhbj4nKTsKICAgIH0KCiAgICB2YXIgcmVxdWlyZWRGaWVsZHMgPSAnUmVxdWlyZWQgZmllbGRzJzsKICAgIGlmIChleHRyYUluZm8ucmVxdWlyZWRGaWVsZHMpIHsKICAgICAgcmVxdWlyZWRGaWVsZHMgPSBleHRyYUluZm8ucmVxdWlyZWRGaWVsZHM7CiAgICB9CiAgICU-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LWZiZm9ybSBmYi1kZXNrdG9wIj4KICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrIj4KICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10aXRsZS1zZWN0aW9uIj4KICAgICAgICAgICAgPCUgaWYgKGxvZ29QaWMpIHsgJT4KICAgICAgICAgICAgICAgIDwlCiAgICAgICAgICAgICAgICAgIHZhciBhbHQgPSBmb3JtQ29uZmlnLmxvZ29BbHQgfHwgJ1NpdGUgTG9nbyc7CiAgICAgICAgICAgICAgICAlPgogICAgICAgICAgICAgICAgPGltZyBzcmM9IjwlPWxvZ29QaWMlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibG9nbyIgYWx0PSI8JT1hbHQlPiIvPgogICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgIDwlIGlmIChmZWVkYmFja1RpdGxlKSB7ICU-CiAgICAgICAgICAgICAgICA8aDE-PCU9IGZlZWRiYWNrVGl0bGUgJT48L2gxPgogICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgIDwlIGlmIChwcm9sb2d1ZVRleHQpIHsgJT4KICAgICAgICAgICAgICAgIDwlIGlmIChwcm9sb2d1ZVRleHQuaW5kZXhPZignaDEnKSA9PT0gLTEpIHsgJT4KICAgICAgICAgICAgICAgICAgICA8cD48JT0gcHJvbG9ndWVUZXh0ICU-PC9wPgogICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgICA8JT0gcHJvbG9ndWVUZXh0ICU-CiAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgaWYgKGhhc1JlcXVpcmVkUXVlc3Rpb25zKSB7ICU-CiAgICAgICAgICAgICAgPHAgY2xhc3M9InJlcXVpcmVkLWxhYmVsIiBhcmlhLWhpZGRlbj0idHJ1ZSI-PGI-KiA8L2I-PCU9IHJlcXVpcmVkRmllbGRzJT48L3A-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8JSBmb3IgKHZhciBtcWkgPSAwOyBtcWkgPCBtYWluUS5sZW5ndGg7IG1xaSsrKSB7CiAgICAgICAgICAgIHZhciBjdXJRID0gbWFpblFbbXFpXTsKICAgICAgICAgICAgdmFyIHJlcUZvbnQgPSBjdXJRLnJlcXVpcmVkID8gJyonIDogJyc7CiAgICAgICAgICAgIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSAhPT0gJ0RST1BfRE9XTicgfHwgY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDApIHsgJT4KICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSI8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdTQ0FMRUQnKSB7ICU-YXVyeWMtc3RhcnJhdGluZy1zZWN0aW9uPCUgfSAlPiIgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiI-CiAgICAgICAgICAgIDwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHsgJT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJxdWVzdGlvbiIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4-CiAgICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzPSJhdXJ5Yy1mYi1zdGFycmF0aW5nLWZpZWxkIiBxdWVzdGlvbmlkPSI8JT1jdXJRLmlkJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4gPgogICAgICAgICAgICAgICAgPGxlZ2VuZCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sZWdlbmQ-CiAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhdGkgPSAwOyBhdGkgPCBjdXJRLmFuc3dlcnMubGVuZ3RoOyBhdGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpXTsgJT4KICAgICAgICAgICAgICAgICAgICA8JSB2YXIgdGkgPSAtMTsgaWYgKGF0aSA9PT0gMCkgeyB0aSA9IDA7IH0gJT4KICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0iYXVyeWNfb2JqXzwlPWN1clEuaWQlPiIgaWQ9ImF1cnljX29ial88JT0gY3VyUS5pZCAlPl88JT1hbnMuaWQlPiIgdmFsdWU9IjwlPWFucy5pZCU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPWN1clEuaWQlPiIgdHlwZT0icmFkaW8iCiAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhdXJ5Yy1mYi1zdGFycmF0aW5nLWZpZWxkLXN0YXJpY29uIgogICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT1hbnMudmFsdWUlPiIKICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSI8JT1hbnMudmFsdWUlPiBzdGFycyIvPgoKICAgICAgICAgICAgICAgICAgICA8bGFiZWwgYXJpYS1sYWJlbD0iPCU9IGF0aSsxICU-IHN0YXIiIGZvcj0iYXVyeWNfb2JqXzwlPWN1clEuaWQlPl88JT1hbnMuaWQlPiI-CiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6LTEwMDAwcHgiPjwlPWFucy52YWx1ZSU-IHN0YXI8L3NwYW4-CiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdOUFMnKSB7ICU-CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLW5wc19fY29udGFpbmVyIGF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb24iIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiA8JT0gY3VyUS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-PgogICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz0ibnBzLXJhdGluZyIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4-CiAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IGN1clEuaWQgJT4iPjwlPSBjdXJRLnF1ZXN0aW9uVGV4dCAlPiA8c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0Mztwb3NpdGlvbjpzdGF0aWM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xlZ2VuZD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlcyI-CiAgICAgICAgICAgICAgICAgIDwlCiAgICAgICAgICAgICAgICAgICAgdmFyIG5wc1plcm8gPSBjdXJRLmFuc3dlcnNbMF0ubGJsOwogICAgICAgICAgICAgICAgICAgIHZhciBucHNUZW4gPSBjdXJRLmFuc3dlcnNbY3VyUS5hbnN3ZXJzLmxlbmd0aC0xXS5sYmw7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhSW5mby5ucHNaZXJvKSB7CiAgICAgICAgICAgICAgICAgICAgICBucHNaZXJvID0gZXh0cmFJbmZvLm5wc1plcm87CiAgICAgICAgICAgICAgICAgICAgICBucHNUZW4gPSBleHRyYUluZm8ubnBzVGVuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICU-CiAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aSA9IDA7IGF0aSA8IGN1clEuYW5zd2Vycy5sZW5ndGg7IGF0aSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gY3VyUS5hbnN3ZXJzW2F0aV07ICU-CiAgICAgICAgICAgICAgICAgIDwlIHZhciB0aSA9IC0xOyBpZiAoYXRpID09PSAwKSB7IHRpID0gMDsgfSAlPgogICAgICAgICAgICAgICAgICA8JSBpZiAoYXRpID09PSAwKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9Im5wc188JT0gY3VyUS5pZCAlPiIgaWQ9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiB0eXBlPSJyYWRpbyIgCiAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlIiBmb3I9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBsZWZ0Oi0xMDAwMHB4Ij48JT0gbnBzWmVybyAlPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIGlmIChhdGkgPT09IDEwKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9Im5wc188JT0gY3VyUS5pZCAlPiIgaWQ9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiAgdHlwZT0icmFkaW8iIAogICAgICAgICAgICAgICAgICAgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4KICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iPCU9IGFucy5pZCAlPiIvPgogICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZSIgZm9yPSJucHNfPCU9IGN1clEuaWQgJT5fPCU9IGFucy5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6LTEwMDAwcHgiPjwlPSBucHNUZW4gJT48L3NwYW4-CiAgICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7JT4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ibnBzXzwlPSBjdXJRLmlkICU-IiBpZD0ibnBzXzwlPSBjdXJRLmlkICU-XzwlPSBhbnMuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iICB0eXBlPSJyYWRpbyIgCiAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZSIgZm9yPSJucHNfPCU9IGN1clEuaWQgJT5fPCU9IGFucy5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6LTEwMDAwcHgiPjwlPSBhdGkgJT48L3NwYW4-CgogICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19faGVpZ2h0X2ZpeCI-PC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19fbnVtIj48JT1hdGklPjwvZGl2PgogICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdHJldGNoIi8-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX2xhYmVscyI-CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wc19yYXRpbmdfbGVmdF9sYWJlbCIgYXJpYS1oaWRkZW49InRydWUiPjwlPSBucHNaZXJvICU-PC9kaXY-CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wc19yYXRpbmdfcmlnaHRfbGFiZWwiIGFyaWEtaGlkZGVuPSJ0cnVlIj48JT0gbnBzVGVuICU-PC9kaXY-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdEUk9QX0RPV04nICkgeyAlPgogICAgICAgICAgICAgIDwlIGlmIChjdXJRLmFuc3dlcnMubGVuZ3RoID4gMSkgeyAlPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJxdWVzdGlvbiIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDE2cHggIWltcG9ydGFudCIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGZvcj0ic188JT0gY3VyUS5pZCAlPiIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stcXVlc3Rpb24tc2VsZWN0LWNob29zZSIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGN1clEuYW5zd2Vycy5sZW5ndGggPiAxKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGV4dHJhSW5mby5jaG9vc2UgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBjdXJRLmFuc3dlcnNbMF0ubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgYXJpYS1sYWJlbD0iPCU9IGN1clEucXVlc3Rpb25UZXh0ICU-IiBpZD0ic188JT0gY3VyUS5pZCAlPiIgY2xhc3M9ImF1cnljLWZiLXF1ZXN0aW9uZ3JvdXAtc2VsZWN0b3IiIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-ID4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDEpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPjwlPSBleHRyYUluZm8uY2hvb3NlICU-PC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aXEgPSAwOyBhdGlxIDwgY3VyUS5hbnN3ZXJzLmxlbmd0aDsgYXRpcSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpcV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iPCU9IGFucy5pZCAlPiI-PCU9IGFucy5sYWJlbCAlPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8JSBmb3IgKHZhciB0cGkgPSAwOyB0cGkgPCB0b3BpY3MubGVuZ3RoOyB0cGkrKykgewogICAgICAgICAgICAgICAgICB2YXIgdG9wayA9IHRvcGljc1t0cGldOyAlPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb25ncm91cCIgaWQ9InRvcGtfPCU9IHRvcGsudG9waWNBbnN3ZXJJZCAlPiI-CiAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIHFpID0gMDsgcWkgPCB0b3BrLnF1ZXN0aW9ucy5sZW5ndGg7IHFpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBxID0gdG9way5xdWVzdGlvbnNbcWldOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcUZvbnQgPSBxLnJlcXVpcmVkID8gJyonIDogJyc7ICU-CiAgICAgICAgICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEtd3JhcHBlciIgY2xhc3M9IjwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHslPmF1cnljLXN0YXJyYXRpbmctc2VjdGlvbjwlIH0lPiIgaWQ9ImF1cnljcV88JT0gcS5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoIChxLnF1ZXN0aW9uVHlwZSAhPT0gJ0NIRUNLQk9YJykgJiYgKHEucXVlc3Rpb25UeXBlICE9PSAnUkFESU9fQlVUVE9OJykgKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBxLmlkICU-IiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdCAhaW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjVweCAhaW1wb3J0YW50OyIgZm9yPSJhdXJ5Y19vYmpfPCU9IHEuaWQgJT4iIGRhdGEtcXVlc3Rpb250eXBlPSJfPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gcS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4gICAgICAKCiAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdDSEVDS0JPWCcgJiYgIXEubWF0cml4KSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJvbGU9ImFwcGxpY2F0aW9uIiBkYXRhVHlwZT0iYXVyeWMtZmVlZGJhY2stY2hlY2tib3giIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGRzZXQgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGlkPSJhdXJ5Y19sYmw8JT0gcS5pZCAlPiIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTo1cHggIWltcG9ydGFudDsiIGZvcj0iYXVyeWNfb2JqXzwlPSBxLmlkICU-IiBkYXRhLXF1ZXN0aW9udHlwZT0iXzwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gcS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sZWdlbmQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYW5zaSA9IDA7IGFuc2kgPCBxLmFuc3dlcnMubGVuZ3RoOyBhbnNpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2Fuc2ldOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgdmFsdWU9IjwlPSBhbnMudmFsdWUgJT4iIHF1ZXN0aW9uaWQ9IjwlPSBhbnMuaWQgJT4iIGlkPSJjYl88JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iY2JfPCU9IGFucy5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWNoZWNrYm94IiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw-CiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPiAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ-ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09ICdSQURJT19CVVRUT04nICYmICFxLm1hdHJpeCkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBkYXRhVHlwZT0iYXVyeWMtZmVlZGJhY2stcmFkaW8iIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGRzZXQgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206NXB4ICFpbXBvcnRhbnQ7IiBmb3I9ImF1cnljX29ial88JT0gcS5pZCAlPiIgZGF0YS1xdWVzdGlvbnR5cGU9Il88JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBxLnF1ZXN0aW9uVGV4dCAlPiA8c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0Mztwb3NpdGlvbjpzdGF0aWM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xlZ2VuZD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IHEuYW5zd2Vycy5sZW5ndGg7IGFuc2krKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBxLmlkICU-IiB2YWx1ZT0iPCU9IGFucy5pZCAlPiIgaWQ9InJiXzwlPSBhbnMuaWQgJT4iIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icmJfPCU9IGFucy5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXJhZGlvIiA-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBhbnMubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ-CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLm1hdHJpeCAmJiBxLmdyb3VwICYmIHEuZ3JvdXAubGVuZ3RoID4gMCkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiByb2xlPSJhcHBsaWNhdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJGbG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgYm9yZGVyPTA-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJkZXNjcmlwdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIDx0ZCBjb2xzcGFuPSI1IiBpZD0ibWFpbkxhYmVsIj48JT0gcS5xdWVzdGlvbkxhYmVsICU-PC90ZD4gLS0-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206NXB4ICFpbXBvcnRhbnQ7IiBmb3I9ImF1cnljX29ial88JT0gcS5pZCAlPiIgZGF0YS1xdWVzdGlvbnR5cGU9Il88JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gcS5xdWVzdGlvbkxhYmVsICU-IDxzcGFuIHN0eWxlPSJjb2xvcjojZGIyZDQzO3Bvc2l0aW9uOnN0YXRpYzsiPjwlPSByZXFGb250ICU-PC9zcGFuPjwvbGVnZW5kPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IHEuZ3JvdXBbMF0uYW5zd2Vycy5sZW5ndGg7IGFuc2krKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmdyb3VwWzBdLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJkZXNjcmlwdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ-PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGFuc2kgPSAwOyBhbnNpIDwgcS5ncm91cFswXS5hbnN3ZXJzLmxlbmd0aDsgYW5zaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IHEuZ3JvdXBbMF0uYW5zd2Vyc1thbnNpXTsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icmFkaW9PcHRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBhbnMubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBxLmdyb3VwLmxlbmd0aDsgaWR4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdxID0gcS5ncm91cFtpZHhdOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJxdWVzdGlvbkNvbHVtbiIgcXVlc1R5cGU9ImF1cnljLWZicSIgcXVlc3Rpb25pZD0iPCU9IGdxLmlkICU-IiA8JT0gZ3EucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBncS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InF1ZXN0aW9uVGV4dCI-PCU9IGdxLnF1ZXN0aW9uVGV4dCAlPjwvdGQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGFuc2kgPSAwOyBhbnNpIDwgZ3EuYW5zd2Vycy5sZW5ndGg7IGFuc2krKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gZ3EuYW5zd2Vyc1thbnNpXTsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJyYWRpb09wdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEubnVtZXJpYyA9PSB0cnVlKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYi1zdGFycmF0aW5nLWZpZWxkLW1hdHJpeCI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBncS5pZCAlPiIgdmFsdWU9IjwlPWFucy5pZCU-IiBpZD0iYXVyeWNfb2JqXzwlPSBjdXJRLmlkICU-XzwlPWFucy5pZCU-IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbmlkPSI8JT0gZ3EuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImF1cnljLWZiLXN0YXJyYXRpbmctZmllbGQtc3Rhcmljb24tbWF0cml4Ii8-CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBhcmlhLWxhYmVsPSI8JT0gYXRpKzEgJT4gc3RhciIgZm9yPSJhdXJ5Y19vYmpfPCU9Y3VyUS5pZCU-XzwlPWFucy5pZCU-Ij4gPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBncS5pZCAlPiIgdmFsdWU9IjwlPSBhbnMuaWQgJT4iIGlkPSJyYl88JT0gYW5zLmlkICU-IiBxdWVzdGlvbmlkPSI8JT0gZ3EuaWQgJT4iIC8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPiAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU-ICAKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ09QRU5FTkQnKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnRhcmVhIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJhdXJ5Y19vYmpfPCU9IHEuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWxsZWRieT0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1cnljbWF4bGVuZ3RoPSIxMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYXVyeWMtZmVlZGJhY2stcXVlc3Rpb24tdGV4dGFyZWEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSI8JT0geW91ckFuc3dlciAlPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvdGV4dGFyZWE-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImF1cnljLWZlZWRiYWNrX2NvdW50V3JhcHBlciIgYXJpYS1saXZlPSJwb2xpdGUiIGFyaWEtYXRvbWljPSJ0cnVlIj4gPCU9IGxlZnRMYWJlbCAlPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnQ09OVEFDVF9JTkZPJykgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPCEtLSBUZXh0IGlucHV0IC0tPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiAgIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxNnB4ICFpbXBvcnRhbnQiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10ZXh0IGF1cnljLWZlZWRiYWNrLWVtYWlsIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHBsYWNlaG9sZGVyPSJFbWFpbCIgYXV0b2NvbXBsZXRlPSJvZmYiIGlkPSJhdXJ5Y19vYmpfPCU9IHEuaWQgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmVtYWlsIiB0eXBlPSJlbWFpbCIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4vPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Il88JT0gcS5pZCAlPl9lcnJvciIgY2xhc3M9ImF1cnljLWZiLXZhbGlkYXRpb24tbXNnLXNlY3Rpb24iIHJvbGU9ImFsZXJ0Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnRFJPUF9ET1dOJyApIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnF1ZXN0aW9uLWRyb3Bkb3duIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBzdHlsZT0icGFkZGluZy1ib3R0b206IDVweCAhaW1wb3J0YW50IiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXF1ZXN0aW9uLXNlbGVjdC1jaG9vc2UiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGV4dHJhSW5mby5jaG9vc2UgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVyeWNfb2JqXzwlPSBxLmlkICU-IiBjbGFzcz0iYXVyeWMtZmItcXVlc3Rpb24tc2VsZWN0b3IiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24-PCU9IGV4dHJhSW5mby5jaG9vc2UgJT48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhdGlxID0gMDsgYXRpcSA8IHEuYW5zd2Vycy5sZW5ndGg7IGF0aXErKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2F0aXFdOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjwlPSBhbnMuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gYW5zLmxhYmVsICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgIDwvZGl2PgogICAgICAgIDwlIH0gJT4KICAgICAgICA8JSB9ICU-CgogICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZvb3Rlci1zZWN0aW9uIj4KICAgICAgICAgIDwlIHZhciBidG5UZXh0ID0gIiI7ICU-CiAgICAgICAgICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuRm9udENvbG9yKSB7ICU-CiAgICAgICAgICAgICAgICAgIDwlIGJ0blRleHQgPSAiPHNwYW4gc3R5bGU9XCJjb2xvcjoiICsgZm9ybUNvbmZpZy5idG5Gb250Q29sb3IgKyAiXCI-IiArIGV4dHJhSW5mby5zdWJtaXQgKyAiPC9zcGFuPiI7ICU-CiAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgPCUgYnRuVGV4dCA9IGV4dHJhSW5mby5zdWJtaXQ7ICU-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yKSB7ICU-CiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT47IGJvcmRlcjogMXB4IHNvbGlkIDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9InBvc3QtZmItcmVzcC1idXR0b24iPgogICAgICAgICAgICAgICAgICAgICAgPCU9IGJ0blRleHQgJT4KICAgICAgICAgICAgICAgICAgPC9idXR0b24-CiAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9zdC1mYi1yZXNwLWJ1dHRvbiIgaWQ9InBvc3QtZmItcmVzcC1idXR0b24iID4KICAgICAgICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8ZGl2IGlkPSJhdXJ5Yy1mZWVkYmFjay1jYW52YXMiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1mb290ZXIiPgogICAgICAgICAgICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy5hdXJ5Yy5jb20vIiBjbGFzcz0iUG93ZXJlZEJ5QXVyeWMiIHRpdGxlPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiBhcmlhLWxhYmVsPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiB0YXJnZXQ9Il9ibGFuayIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj48JT0gcG93ZXJlZEJ5ICU-PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbWcgYXJpYS1oaWRkZW49InRydWUiIHNyYz0iaHR0cHM6Ly9mYi1sb2dvLmF1cnljLmNvbS9kYXJrLWxvZ28uc3ZnIiBhbHQ9IkF1cnljIiBzdHlsZT0id2lkdGg6NjBweCAhaW1wb3J0YW50O2hlaWdodDoyMHB4ICFpbXBvcnRhbnQ7Ij4KICAgICAgICAgICAgICAgICAgPC9hPiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo=PGRpd",window[constants.symbols.FEEDBACKINVITE]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LWZiZm9ybS1lbmFibGVkIj4KICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjayI-CiAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10aXRsZS1zZWN0aW9uIiB0YWJpbmRleD0iMCI-CiAgICAgIDwlIGlmIChsb2dvUGljKSB7ICU-CiAgICAgICAgPCUKICAgICAgICAgIHZhciBhbHQgPSBmb3JtQ29uZmlnLmxvZ29BbHQgfHwgJ1NpdGUgTG9nbyc7CiAgICAgICAgJT4KICAgICAgICA8aW1nIHNyYz0iPCU9bG9nb1BpYyU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsb2dvIiBhbHQ9IjwlPWFsdCU-Ii8-CiAgICA8JSB9ICU-CiAgICAgIDxoMSBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJmb3JtLWhlYWR0YWcgYXVyeWMtZmVlZGJhY2stZmJmb3JtLWhlYWR0YWctaDEiIHN0eWxlPSJ0ZXh0LWFsaWduOjwlPWZvcm1Db25maWcuaGVhZGVyQWxpZ24lPiFpbXBvcnRhbnQ7Ij48JT0gZm9ybUNvbmZpZy5oZWFkZXIgJT48L2gxPgogICAgICA8cCBjbGFzcz0iYXVyeWMtZmItaW52aXRlLWJvZHkiPjwlPSBmb3JtQ29uZmlnLmludml0ZUJvZHkgJT48L3A-CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZvb3Rlci1zZWN0aW9uIj4KICAgICAgPCUgdmFyIHllc1RleHQgPSAiIjsgdmFyIG5vVGV4dCA9ICIiOyU-CiAgICAgIDwlIG5vVGV4dCA9IGZvcm1Db25maWcubm9UZXh0OyAlPgogICAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5Gb250Q29sb3IpIHsgJT4KICAgICAgPCUgeWVzVGV4dCA9ICI8c3BhbiBzdHlsZT1cImNvbG9yOiIgKyBmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvciArICJcIj4iICsgZm9ybUNvbmZpZy55ZXNUZXh0ICsgIjwvc3Bhbj4iOyAlPgogICAgICA8JSB9IGVsc2UgeyAlPgogICAgICA8JSB5ZXNUZXh0ID0gZm9ybUNvbmZpZy55ZXNUZXh0OyAlPgogICAgICA8JSB9ICU-CiAgICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvcikgeyAlPgogICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIgogICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiA8JT1mb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvciU-OyBib3JkZXI6IDFweCBzb2xpZCA8JT1mb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvciU-IgogICAgICAgIGlkPSJpbnZpdGUtZmIteWVzLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgIDwlPSB5ZXNUZXh0ICU-CiAgICAgIDwvYnV0dG9uPgogICAgICA8JSB9IGVsc2UgeyAlPgogICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIiBpZD0iaW52aXRlLWZiLXllcy1idXR0b24iIHRhYmluZGV4PSIwIj4KICAgICAgICA8JT0geWVzVGV4dCAlPgogICAgICA8L2J1dHRvbj4KICAgICAgPCUgfSAlPgogICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIiBpZD0iaW52aXRlLWZiLW5vLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgIDwlPSBub1RleHQgJT4KICAgICAgPC9idXR0b24-CiAgICAgIDwlCiAgICAgICAgdmFyIHBvd2VyZWRCeSA9ICdQb3dlcmVkIGJ5JzsKICAgICAgICBpZiAoZXh0cmFJbmZvLnBvd2VyZWRCeSkgewogICAgICAgICAgcG93ZXJlZEJ5ID0gZXh0cmFJbmZvLnBvd2VyZWRCeTsKICAgICAgICB9CiAgICAgICU-CiAgICAgIDxkaXYgaWQ9ImF1cnljLWZlZWRiYWNrLWNhbnZhcyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1mb290ZXIiPgogICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cuYXVyeWMuY29tLyIgY2xhc3M9IlBvd2VyZWRCeUF1cnljIiB0aXRsZT0iPCU9IHBvd2VyZWRCeSAlPiBBdXJ5YyIgYXJpYS1sYWJlbD0iPCU9IHBvd2VyZWRCeSAlPiBBdXJ5YyIgdGFyZ2V0PSJfYmxhbmsiIHRhYmluZGV4PSIwIj4KICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49InRydWUiPjwlPSBwb3dlcmVkQnkgJT48L3NwYW4-CiAgICAgICAgICAgIDxpbWcgYXJpYS1oaWRkZW49InRydWUiIHNyYz0iaHR0cHM6Ly9mYi1sb2dvLmF1cnljLmNvbS9kYXJrLWxvZ28uc3ZnIiBhbHQ9IkF1cnljIiBzdHlsZT0id2lkdGg6NjBweCAhaW1wb3J0YW50O2hlaWdodDoyMHB4ICFpbXBvcnRhbnQ7Ij4KICAgICAgICAgIDwvYT4gICAgICAgICAgICAgIAogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4=PGRpd",window[constants.symbols.FEEDBACKINVITE_DESKTOP]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LWZiZm9ybS1lbmFibGVkIGZiLWRlc2t0b3AiPgogIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrIj4KICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZicSIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRpdGxlLXNlY3Rpb24iIHRhYmluZGV4PSIwIj4KICAgICAgPCUgaWYgKGxvZ29QaWMpIHsgJT4KICAgICAgICA8JQogICAgICAgICAgdmFyIGFsdCA9IGZvcm1Db25maWcubG9nb0FsdCB8fCAnU2l0ZSBMb2dvJzsKICAgICAgICAlPgogICAgICAgIDxpbWcgc3JjPSI8JT1sb2dvUGljJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxvZ28iIGFsdD0iPCU9YWx0JT4iLz4KICAgIDwlIH0gJT4KICAgICAgPGgxIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmZvcm0taGVhZHRhZyBhdXJ5Yy1mZWVkYmFjay1mYmZvcm0taGVhZHRhZy1oMSIgc3R5bGU9InRleHQtYWxpZ246PCU9Zm9ybUNvbmZpZy5oZWFkZXJBbGlnbiU-IWltcG9ydGFudDsiPjwlPSBmb3JtQ29uZmlnLmhlYWRlciAlPjwvaDE-CiAgICAgIDxwIGNsYXNzPSJhdXJ5Yy1mYi1pbnZpdGUtYm9keSI-PCU9IGZvcm1Db25maWcuaW52aXRlQm9keSAlPjwvcD4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZm9vdGVyLXNlY3Rpb24iPgogICAgICA8JSB2YXIgeWVzVGV4dCA9ICIiOyB2YXIgbm9UZXh0ID0gIiI7JT4KICAgICAgPCUgbm9UZXh0ID0gZm9ybUNvbmZpZy5ub1RleHQ7ICU-CiAgICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvcikgeyAlPgogICAgICA8JSB5ZXNUZXh0ID0gIjxzcGFuIHN0eWxlPVwiY29sb3I6IiArIGZvcm1Db25maWcuYnRuRm9udENvbG9yICsgIlwiPiIgKyBmb3JtQ29uZmlnLnllc1RleHQgKyAiPC9zcGFuPiI7ICU-CiAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgIDwlIHllc1RleHQgPSBmb3JtQ29uZmlnLnllc1RleHQ7ICU-CiAgICAgIDwlIH0gJT4KICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yKSB7ICU-CiAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iCiAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT47IGJvcmRlcjogMXB4IHNvbGlkIDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT4iCiAgICAgICAgaWQ9Imludml0ZS1mYi15ZXMtYnV0dG9uIiB0YWJpbmRleD0iMCI-CiAgICAgICAgPCU9IHllc1RleHQgJT4KICAgICAgPC9idXR0b24-CiAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iIGlkPSJpbnZpdGUtZmIteWVzLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgIDwlPSB5ZXNUZXh0ICU-CiAgICAgIDwvYnV0dG9uPgogICAgICA8JSB9ICU-CiAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iIGlkPSJpbnZpdGUtZmItbm8tYnV0dG9uIiB0YWJpbmRleD0iMCI-CiAgICAgICAgPCU9IG5vVGV4dCAlPgogICAgICA8L2J1dHRvbj4KICAgICAgPCUKICAgICAgICB2YXIgcG93ZXJlZEJ5ID0gJ1Bvd2VyZWQgYnknOwogICAgICAgIGlmIChleHRyYUluZm8ucG93ZXJlZEJ5KSB7CiAgICAgICAgICBwb3dlcmVkQnkgPSBleHRyYUluZm8ucG93ZXJlZEJ5OwogICAgICAgIH0KICAgICAgJT4KICAgICAgPGRpdiBpZD0iYXVyeWMtZmVlZGJhY2stY2FudmFzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYm1vZGFsLWZvb3RlciI-CiAgICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy5hdXJ5Yy5jb20vIiBjbGFzcz0iUG93ZXJlZEJ5QXVyeWMiIHRpdGxlPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiBhcmlhLWxhYmVsPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiB0YXJnZXQ9Il9ibGFuayIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI-PCU9IHBvd2VyZWRCeSAlPjwvc3Bhbj4KICAgICAgICAgICAgPGltZyBhcmlhLWhpZGRlbj0idHJ1ZSIgc3JjPSJodHRwczovL2ZiLWxvZ28uYXVyeWMuY29tL2RhcmstbG9nby5zdmciIGFsdD0iQXVyeWMiIHN0eWxlPSJ3aWR0aDo2MHB4ICFpbXBvcnRhbnQ7aGVpZ2h0OjIwcHggIWltcG9ydGFudDsiPgogICAgICAgICAgPC9hPiAgICAgICAgICAgICAgCiAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgPC9kaXY-CjwvZGl2Pgo=PGRpd",window[constants.symbols.FBTHANKYOU]="iByb2xlPSJkaWFsb2ciCiAgICBhcmlhLW1vZGFsPSJ0cnVlIiB0aXRsZT0iVGhhbmsgWW91IEZvciBTdWJtaXR0aW5nIHRoZSBGZWVkYmFjayIgYXJpYS1sYWJlbD0iVGhhbmsgWW91IEZvciBTdWJtaXR0aW5nIHRoZSBGZWVkYmFjayIKY2xhc3M9ImF1cnljLWZlZWRiYWNrIGF1cnljLXRoYW5reW91LWNvbnRhaW5lciI-CiAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10aXRsZS1zZWN0aW9uIj4KICAgICAgICA8JSBpZiAobWV0YS5sb2dvMWdyYXBoaWMpIHsgJT4KICAgICAgICA8aW1nIHNyYz0iPCU9IG1ldGEubG9nbzFncmFwaGljICU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsb2dvIiBhbHQ9IlNpdGUgTG9nbyIvPgogICAgICAgIDwlIH0gJT4KICAgIDwvZGl2PgogICAgPGRpdiBkYXRhVHlwZT0iYXVyeWMtZmJxIiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stdGl0bGUtc2VjdGlvbiI-CiAgICAgICAgPCUgaWYgKG1ldGEuZXBpbG9ndWV0ZXh0ICYmIG1ldGEuZXBpbG9ndWV0ZXh0Lmxlbmd0aCA-IDEpIHslPgogICAgICAgICAgICA8JSBpZiAobWV0YS5lcGlsb2d1ZXRleHQuaW5kZXhPZignaDEnKSA9PT0gLTEpIHslPgogICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmZvcm0taGVhZHRhZyBhdXJ5Yy1mZWVkYmFjay1mYmZvcm0taGVhZHRhZy1oMSI-PCU9IG1ldGEuZXBpbG9ndWV0ZXh0ICU-PC9oMT4KICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgIDwlPSBtZXRhLmVwaWxvZ3VldGV4dCAlPgogICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgPCUgfSBlbHNlIHslPgogICAgICAgICAgICA8aDEgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZiZm9ybS1oZWFkdGFnIGF1cnljLWZlZWRiYWNrLWZiZm9ybS1oZWFkdGFnLWgxIj5Zb3VyIEZlZWRiYWNrIEhhcyBCZWVuIFN1Ym1pdHRlZDwvaDE-CiAgICAgICAgPCUgfSAlPgogICAgPC9kaXY-CiAgICA8JSBpZiAoZm9ybUNvbmZpZy5oaWRlVFlCdXR0b24gIT0gdHJ1ZSkgeyAlPgogICAgICAgIDwlIHZhciBidG5UZXh0ID0gIiI7ICU-CiAgICAgICAgPCUgaWYgKGZvcm1Db25maWcudHlCdXR0b25MYWJlbCkgeyAlPgogICAgICAgICAgICA8JSBidG5UZXh0ID0gZm9ybUNvbmZpZy50eUJ1dHRvbkxhYmVsOyAlPgogICAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgICAgIDwlIGJ0blRleHQgPSBleHRyYUluZm8ub2s7ICU-CiAgICAgICAgPCUgfSAlPiAgICAgICAgICAKICAgICAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5Gb250Q29sb3IpIHsgJT4KICAgICAgICAgICAgPCUgYnRuVGV4dCA9ICI8c3BhbiBzdHlsZT1cImNvbG9yOiIgKyBmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvciArICJcIj4iICsgYnRuVGV4dCArICI8L3NwYW4-IjsgJT4KICAgICAgICA8JSB9ICU-ICAgICAgICAgIAogICAgICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvcikgeyAlPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYXVyeWMtY2xvc2UtYnRuIgogICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD0iMCIgYXV0b2ZvY3VzPSJhdXRvZm9jdXMiCiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9IkV4aXQgRmVlZGJhY2sgRm9ybSIKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT47IGJvcmRlcjogMXB4IHNvbGlkIDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT4iPgogICAgICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYXVyeWMtY2xvc2UtYnRuIgogICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD0iMCIgYXV0b2ZvY3VzPSJhdXRvZm9jdXMiCiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9IkV4aXQgRmVlZGJhY2sgRm9ybSIKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IzIzQzZmNTsgYm9yZGVyOiAxcHggc29saWQgIzIzQzZmNSI-CiAgICAgICAgICAgICAgICAgICAgPCU9IGJ0blRleHQgJT4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxkaXY-CiAgICAgICAgPCUgfSAlPgogICAgPCUgfSAlPiAgICAgICAgCjwvZGl2Pgo=PGRpd"}var FbModule=(createClass(ssb,[{key:"setupFeedback",value:function(e){var t=this;this.setupProjects(e),navigationEvent.addListener(function(){t.setupProjects(e)})}},{key:"refreshCookie",value:function(e){var t;(e.popupDelayEnabled||e.exitPopupEnabled)&&(t=e.feedbackThrottles&&e.feedbackThrottles.cookie||"auryc.fbt",Cookie.Get(t)&&globalPopupController.setCookie(t,null,+Cookie.Get(t)+1))}},{key:"setupProjects",value:function(n){var i,a=this;globalSessionTracker.isCanceled()||(i=function(e){return function(){return globalPopupController.initialize(e,!0)}},this.feedbackCfg.instances.forEach(function(e){if(a.feedbackCfg.fbStandalone){var t=e.feedbackThrottles&&e.feedbackThrottles.cookie||"auryc.fbt";return t+=".st."+e.projectId,Cookie.Get(t)?void a.showMessage(!0):void i(e)()}var r;config.checkFeedbackScheduled(e)?n.isConfigInstanceActive(e,window.location.href)?(a.refreshCookie(e),e.trigger?e.trigger.handleNavigation(!0):(r=new Trigger(e,n),(e.trigger=r).fbTabClicked.addListener(i(e)))):e.trigger&&e.trigger.handleNavigation(!1):logger.warn("fb: badge is disabled, not in Scheduled")}))}},{key:"showMessage",value:function(e){e?(document.querySelectorAll("div[class=submited]").forEach(function(e){e.style.display="flex"}),document.querySelectorAll("div[class=deactivated]").forEach(function(e){e.style.display="none"})):(document.querySelectorAll("div[class=submited]").forEach(function(e){e.style.display="none"}),document.querySelectorAll("div[class=deactivated]").forEach(function(e){e.style.display="flex"}))}},{key:"isPreviewMode",value:function(){var e=window.location.hash,t=!!getHashParam(e,"previewmode"),r=!!getHashParam(e,"previewbadgemode")||!!getHashParam(e,"previewfbtabmode"),n=!!getHashParam(e,"previewinvitemode");return t||r||n}},{key:"readyFn",value:function(){var e=this,t=window.location.hash,r=!!getHashParam(t,"previewmode"),n=!!getHashParam(t,"previewbadgemode")||!!getHashParam(t,"previewfbtabmode"),i=!!getHashParam(t,"previewinvitemode"),a=new Criteria;if(r||n||i){if(r)return void(new Preview).showFeedback();if(n)return void(new Preview).displayFBTab();if(i)return void(new Preview).showFeedbackInvite()}else feedbackAPI._makePublic(feedbackAPI,this.feedbackCfg,globalPopupController),feedbackAPI.feedbackEnabled.addListener(function(){return e.setupFeedback(a)}),this.setupFeedback(a)}},{key:"addFBFont",value:function(){document.querySelectorAll("style[id=auryc_style]").forEach(function(e){-1===e.innerHTML.indexOf("fonts.auryc.com")&&(e.innerHTML="@font-face { font-family: AurycFontAwesome; font-weight: 400; font-style: normal; src: url(https://fonts.auryc.com/fonts/font-awesome/4.7.0/fonts/fontawesome-webfont.eot); src: url(https://fonts.auryc.com/fonts/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?#iefix) format(\"embedded-opentype\"), url(https://fonts.auryc.com/fonts/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf) format(\"truetype\"), url(https://fonts.auryc.com/fonts/font-awesome/4.7.0/fonts/fontawesome-webfont.woff) format(\"woff\"), url(https://fonts.auryc.com/fonts/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2) format(\"woff2\"), url(https://fonts.auryc.com/fonts/font-awesome/4.7.0/fonts/fontawesome-webfont.svg#fontawesomeregular) format(\"svg\"); } /* cyrillic-ext */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWJ0bf8pkAp6a.woff2) format('woff2'); unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F; } /* cyrillic */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFUZ0bf8pkAp6a.woff2) format('woff2'); unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116; } /* greek-ext */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWZ0bf8pkAp6a.woff2) format('woff2'); unicode-range: U+1F00-1FFF; } /* greek */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVp0bf8pkAp6a.woff2) format('woff2'); unicode-range: U+0370-03FF; } /* vietnamese */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWp0bf8pkAp6a.woff2) format('woff2'); unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB; } /* latin-ext */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFW50bf8pkAp6a.woff2) format('woff2'); unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF; } /* latin */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 400; src: local('Open Sans Regular'), local('OpenSans-Regular'), url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2) format('woff2'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; } /* cyrillic-ext */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOX-hpKKSTj5PW.woff2) format('woff2'); unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F; } /* cyrillic */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOVuhpKKSTj5PW.woff2) format('woff2'); unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116; } /* greek-ext */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOXuhpKKSTj5PW.woff2) format('woff2'); unicode-range: U+1F00-1FFF; } /* greek */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOUehpKKSTj5PW.woff2) format('woff2'); unicode-range: U+0370-03FF; } /* vietnamese */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOXehpKKSTj5PW.woff2) format('woff2'); unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB; } /* latin-ext */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOXOhpKKSTj5PW.woff2) format('woff2'); unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF; } /* latin */ @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: 600; src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOUuhpKKSTjw.woff2) format('woff2'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }"+e.innerHTML)})}},{key:"init",value:function(){var t,e,r=config.getProductConfig("feedback");this.isPreviewMode()||config.isProductEnabled("feedback")&&config.isFeedbackEnabled()&&config.isUserSampled()&&this.hasInstances(r)?config.isVisualEditorMode()?logger.warn("fb: product disabled"):(this.addFBFont(),t=browser$1.getFbParams(),initTemplate(),t&&t.fbId&&(r.instances=r.instances.filter(function(e){return e.showBadge=!1,e.popupDelayEnabled=!1,e.fbStandalone=!0,e.projectId===parseInt(t.fbId)}),0===r.instances.length?this.showMessage():r.instances[0].disabled&&(r.instances=[],this.showMessage()),r.fbStandalone=!0,t.email&&window.aurycBehaviorAPI.identify(t.email)),this.feedbackCfg=r,this.readyFn()):(browser$1.removeFBStyle(),e={isFBProductEnabled:function(){return!1}},feedbackAPI._makePublic(e))}},{key:"hasInstances",value:function(e){return e&&e.instances&&0<e.instances.length}},{key:"pause",value:function(){(this.isPreviewMode()||config.isProductEnabled("feedback")&&config.isFeedbackEnabled()&&config.isUserSampled())&&(this.feedbackCfg&&this.feedbackCfg.instances&&this.feedbackCfg.instances.forEach(function(e){var t=e.trigger;t&&(t.disable(),t.delayFBTabTimer&&clearTimeout(t.delayFBTabTimer),t.delayedPopupTimer&&clearTimeout(t.delayedPopupTimer)),e.trigger=null}),browser$1.removeFBStyle(window,!0))}},{key:"resume",value:function(){var t;(this.isPreviewMode()||config.isProductEnabled("feedback")&&config.isFeedbackEnabled()&&config.isUserSampled())&&(browser$1.restoreFBStyles(window),t=!1,this.feedbackCfg&&this.feedbackCfg.instances&&this.feedbackCfg.instances.forEach(function(e){e.trigger||(t=!0)}),t&&this.init())}}],[{key:"getInstance",value:function(){return ssb.instance||(ssb.instance=new ssb),ssb.instance}}]),ssb);function ssb(){classCallCheck(this,ssb)}var ControllerApi=(createClass(stb,[{key:"pause",value:function(){try{if(globalSessionTracker.isCanceled())return;this.rcController=RcController.getInstance(window),this.rcController.pause(),FbModule.getInstance().pause(),this.rcController.notifyModuleEvent(constants.api.disable_console),this.rcController.notifyModuleEvent(constants.api.disable_network)}catch(e){}}},{key:"unregister",value:function(){try{if(globalSessionTracker.isUnregistered())return void console.log("Auryc is already unregistered");console.log("unregister called"),this.pause(),globalSessionTracker.setUnregister(!0),this.rcController=RcController.getInstance(window),this.rcController.unregister()}catch(e){}}},{key:"resume",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.resume(),FbModule.getInstance().resume(),this.rcController.notifyModuleEvent(constants.api.enable_console),this.rcController.notifyModuleEvent(constants.api.enable_network)}catch(e){}}},{key:"resumeConsole",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.notifyModuleEvent(constants.api.enable_console)}catch(e){}}},{key:"pauseConsole",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.notifyModuleEvent(constants.api.disable_console)}catch(e){console.log(e)}}},{key:"pauseNetwork",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.notifyModuleEvent(constants.api.disable_network)}catch(e){}}},{key:"resumeNetwork",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.notifyModuleEvent(constants.api.enable_network)}catch(e){}}}],[{key:"getInstance",value:function(){return stb.instance||(stb.instance=new stb),stb.instance}}]),stb);function stb(){classCallCheck(this,stb)}var attempts$1=20;function checkAndSet(){window.aurycBehaviorAPI&&window.aurycFeedbackAPI&&window.aurycRecordAPI?(window.auryc=new AurycPublicApi(window.aurycBehaviorAPI,window.aurycFeedbackAPI,window.aurycRecordAPI,new LinkidAPI,ControllerApi.getInstance()),config.runReadyCb(window.aurycReadyCb,window.auryc,"api"),window.auryc.__aurycInit__=!0,!window.auryc._replay_url&&window.auryc.getSessionMetadata&&"function"==typeof window.auryc.getSessionMetadata&&(window.auryc._replay_url=window.auryc.getSessionMetadata().replayUrl),afterInit()):0<attempts$1&&(setTimeout(checkAndSet,1e3),attempts$1--)}function init$1(){checkAndSet()}function afterInit(){var e,t=config.getCurrentIdentity();t&&0<t.length&&((e={})[constants.symbols.IDENTITY_IN_SESSION]=t,window.auryc.addSessionProperties(e))}var api$1={init:init$1};function isPlatformSupported(e,t,r){var n,i,a,o;isInitialized()?r&&r():(n=config.getConfig("browser_cutoff","base"),i=config.getConfig("platform_cutoff","base"),(a=n[e.browser.name])&&e.browser.version<a||(o=i[e.os.name])&&e.os.version<o?r&&r():t&&location$1.initGeoIP(initGeoCb(t)))}function initGeoCb(e){return function(){location$1.initGeoInfo(e)}}function isInitialized(){return!(!window.auryc||!window.auryc.__aurycInit__)}function isSupported(e,t){var r=getInstance();r.isAvail?isPlatformSupported(r,e,t):r.brAvailEvent.addListener(function(){isPlatformSupported(r,e,t)})}function isURLEnabled(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;if(!config.isUrlFilterEnabled(e))return 1;if(config.isUrlBlackListEnabled(e)){var t=!1,r=config.getExcludedUrls(e)||[],n=config.getExcludedUrlExceptions(e)||[];return r&&0<r.length&&(t=config.matchUrl(r,n,e)),!t}var i=!1,a=config.getIncludedUrls(e)||[],o=config.getIncludedUrlExceptions(e)||[];return a&&0<a.length&&(i=config.matchUrl(a,o,e)),i}function init$2(e,t){config.init(function(){isSupported(e,t)})}var utils={init:init$2},IdentifyAPI=(createClass(eub,[{key:"_makePublic",value:function(e){if(_.isDefined(e))return window.auryc||(window.aurycBehaviorAPI={}),window.aurycBehaviorAPI=e}},{key:"_loadEventGroups",value:function(e){var t,r=this.sessStg.getByKey(this._getDefinedEventsStorKey());r?e(r):(t=this._getUbaApi()+"/eventgroup/?projectId="+config.getSiteid(),this._postRequest({uri:t,type:"EVENTGROUP",callback:e}))}},{key:"_getUbaApi",value:function(){return"https://"+config.getConfig("uba_api_uri","base")}},{key:"_getDefinedEventsStorKey",value:function(){return"DE_"+config.getSiteid()}},{key:"_tokenCallBack",value:function(e,t,r){var n;t&&(n={"Content-Type":"application/json","X-Authorized-Identity":config.getSiteid(),"X-Authorized-Token":t},this._sendRequest(r,n,"GET",e))}},{key:"_postRequest",value:function(e,t){var r=config.getSiteToken();r&&this._tokenCallBack(t,r,e)}},{key:"_validateArrayType",value:function(e){if(!e||!_.isArray(e)||0===e.length)return!1;var t=_typeof(e[0]).toLowerCase();if("string"!==t&&"number"!==t&&"boolean"!==t)return!1;for(var r=0;r<e.length;r++)if(null===e[r]||_typeof(e[r])!==t||1024<t.length)return!1;return!0}},{key:"_validateKey",value:function(e){return!!e&&"undefined"!==e&&e.length<=1024}},{key:"_validateValue",value:function(e){return null!=e&&"nan"!==e&&"n/a"!==e&&"undefined"!==e&&"null"!==e&&"others"!==e&&"nil"!==e}},{key:"_transformProps",value:function(e){var t={},r={};for(var n in e)try{r[(n+"").substr(0,63)]=e[n]}catch(e){}for(var i in r)if(_.isArray(r[i])){r[i].length>constants.storage.MAX_PROPERTIES&&(r[i]=r[i].slice(0,constants.storage.MAX_PROPERTIES)),t[i]=[];for(var a=0;a<r[i].length;a++){var o=r[i][a];this._validateValue(o)&&("string"===(void 0===o?"undefined":_typeof(o)).toLowerCase()?t[i].push(o.toLowerCase().substr(0,1024)):"boolean"!=typeof o&&"number"!=typeof o||t[i].push(o))}0<t[i].length?t[i]=JSON.stringify(t[i]):delete t[i]}else this._validateValue(r[i])&&("string"==typeof r[i]?t[i]=r[i].substr(0,1024):"number"!=typeof r[i]&&"boolean"!=typeof r[i]||(t[i]=r[i]));return t}},{key:"_sendRequest",value:function(r,e,t,n){try{var i=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):null;i.open(t,r.uri,!0);var a=this;for(var o in i.onreadystatechange=function(){var e,t;4===this.readyState&&200===this.status&&("TOKEN"===r.type?i.responseText&&1<i.responseText.length&&(e={siteToken:JSON.parse(i.responseText).siteToken},a.sessStg.setSessionByKey(constants.symbols.APITOKEN+"_"+config.getSiteid(),JSON.stringify(e),constants.storage.SCOPE.SESSION.BROWSER),r.callback&&"function"==typeof r.callback&&r.callback.call(a,i.responseText)):"EVENTGROUP"===r.type&&i.responseText&&1<i.responseText.length&&(t=(t=JSON.parse(i.responseText)).data.map(function(e,t){return{id:e.id,eventName:e.name,eventType:e.eventType,snapshotProperties:e.snapshotProperties,jsCriteria:e.jsCriteria}}),a.sessStg.setTabByKey(a._getDefinedEventsStorKey(),t),logger.log(a._getDefinedEventsStorKey(),t),r.callback&&"function"==typeof r.callback&&r.callback.call(a,t))),"USERIDENTIFY"===r.type&&(4===this.readyState&&200===this.status?i.responseText&&1<i.responseText.length&&r.callback&&"function"==typeof r.callback&&r.callback.call(a,i.responseText):4===this.readyState&&226===this.status&&r.callback&&"function"==typeof r.callback&&r.callback.call(a,226))},e)i.setRequestHeader(o,e[o]);n?i.send(JSON.stringify(n)):i.send()}catch(e){logger.log(e)}}},{key:"_isBehaviorTrackingEnabled",value:function(){return!0}},{key:"getSessionMetadata",value:function(e){var t=0<arguments.length&&void 0!==e&&e,r=globalSessionTracker.getSessionMetadata(t),n=r.siteId,i=r.sessionId;return r.replayUrl||(r.replayUrl=config.getConfig("replay_url")+n+":"+i),r}},{key:"endSession",value:function(){return globalSessionTracker.endSession(!0)}},{key:"clearUserCookie",value:function(e){var t=!0;e&&!this.persStg.getByKey(constants.events.IDENTITYVALUE)&&(logger.log("called clear user cookie but identity is null. skip"),t=!1),t&&(logger.log("clear user cookie"),globalSessionTracker.removeUser(),config.resetUserSamplingFlag(),globalSessionTracker.renewSession(),globalSessionTracker.initSessionOrPV())}}]),eub);function eub(e,t,r){var l=this;classCallCheck(this,eub),this.addEventProperties=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};try{var r=l._transformProps(e);superProperties.addEventProperties(r,t,l.sessStg,l.persStg)}catch(e){}},this.getEventProperties=function(){try{return superProperties.getSuperEventProperties(l.sessStg,l.persStg)}catch(e){return{}}},this.removeEventProperty=function(e){try{superProperties.removeOneEventProperty(e,l.sessStg,l.persStg)}catch(e){}return l.getEventProperties()},this.removeAllEventProperties=function(){try{superProperties.removeAllEventProperties(l.sessStg,l.persStg)}catch(e){}return l.getEventProperties()},this.identify=function(e){var t;_.isDefined(e)&&(e+=""),e&&0<e.length&&e.length<256&&"nan"!==e&&"n/a"!==e&&"undefined"!==e&&"null"!==e&&"others"!==e&&"nil"!==e&&(l.persStg&&l.persStg.resetUserProp(),l.persStg&&l.persStg.setByKey(constants.events.IDENTITYVALUE,e),browser$1.setItem("localStorage",constants.storage.IDENTITY_KEY,e),config.resetUserSamplingFlag(),AurycPubSub.publish(constants.events.USERIDENTIFY,{identity:e}),(t={})[constants.symbols.IDENTITY_IN_SESSION]=e,t[constants.symbols.IDENTITY_INIT]=e,l.addSessionProperties(t))},this.addSessionProperties=function(e){l.errorMsg&&l.errorMsg.badProp;_.isObject(e)&&!_.isArray(e)&&(e=l._transformProps(e))&&!_.isEmptyObject(e)&&AurycPubSub.publish(constants.events.USERIDENTIFY,{sessionProperties:e})},this.addInternalSessionProperties=function(e){l.errorMsg&&l.errorMsg.badProp;_.isObject(e)&&!_.isArray(e)&&(e=l._transformProps(e))&&!_.isEmptyObject(e)&&AurycPubSub.publish(constants.events.USERIDENTIFY,{internalSessionProperties:e})},this.addUserProperties=function(e){l.errorMsg&&l.errorMsg.badProp;var t=l.persStg.getByKey(constants.events.USERID);if(_.isObject(e)&&!_.isArray(e)&&t){e=l._transformProps(e);var r=null,n={};try{r=(n=JSON.parse(l.persStg.getUserProp(constants.events.USERPROP)))[t]}catch(e){}if(n[t]=e,r&&JSON.stringify(e)===JSON.stringify(r))return void logger.log("user properties already set and identical to the new one. skip");logger.log("user properties not identical to the new one. call API");var i=l.persStg.getStorageSize(),a=JSON.stringify(n),o=JSON.stringify(e);if(i+a.length<3072)l.persStg.setUserProp(constants.events.USERPROP,a);else if(o.length<1024){for(var s=Object.keys(n),c=0;c<s.length;c++)s[c]!==t&&delete n[s[c]];a=JSON.stringify(n),l.persStg.setUserProp(constants.events.USERPROP,a)}AurycPubSub.publish(constants.events.USERIDENTIFY,{userProperties:e})}},this.track=function(e,t){var r=!0;_.isObject(t)&&!_.isArray(t)||(t={}),e&&_.isString(e)&&!(1024<e.length)||(r=!1,console.error(e));r&&(t=l._transformProps(t),AurycPubSub.publish(constants.events.TRACKCUSTOMEVENT,{eventType:constants.events.CUSTOM_EVENT,eventName:e,eventProperties:t||{},currentTime:_.now()}))},this.product=e||"auryc",this.sessStg=t,this.persStg=r,this.errorMsg={badProp:"The property key or values are invalid",dupName:"The name has already been used. Please choose a different name",badIdentity:"The identity value is invalid"}}function setup(){trackAdobeTT()}function getAdobeTTVar(){var e=config.getConfig("ABTest","behavior");if(e)return e.adobeTT}function getAdobeCNames(){var e=[],t=[],r=window.ttMETA;if(r&&_.isArray(r))for(var n=0;n<r.length;n++){var i=r[n];i.campaign&&""!==i.campaign&&(e.push(i.campaign),i.experience&&""!==i.experience&&t.push(i.campaign+"="+i.experience))}return{cNames:e,ceNames:t}}function instrument(e){var t=getAdobeCNames(),r={};e.campaign_var&&0<t.cNames.length&&(r[e.campaign_var]=t.cNames),e.campaign_exp_var&&0<t.ceNames.length&&(r[e.campaign_exp_var]=t.ceNames),_.isEmptyObject(r)||window.aurycBehaviorAPI.addUserProperties(r)}function trackAdobeTT(){var e=getAdobeTTVar();e&&!0===e.enabled&&(window.aurycBehaviorAPI&&window.aurycBehaviorAPI.addUserProperties?instrument(e):window.aurycReadyCb.push(function(){instrument(e)}))}var abtests={setup:setup,getAdobeTTVar:getAdobeTTVar,getAdobeCNames:getAdobeCNames,instrument:instrument,trackAdobeTT:trackAdobeTT};function setup$1(){var e=config.getConfig("sessionProperties","behavior");if(e&&_.isArray(e)){for(var t={},r=0;r<e.length;r++){var n,i=e[r];i.source&&"cookie"===i.source&&i.key&&i.prop&&(null!==(n=Cookie.Get(i.key))&&(i.type&&("number"===i.type.toLowerCase()?n=+n:"boolean"===i.type.toLowerCase()&&(n=!!n)),t[i.prop]=n))}addSessionProps(t)}}function addSessionProps(e){_.isEmptyObject(e)||(window.aurycBehaviorAPI&&window.aurycBehaviorAPI.addSessionProperties?window.aurycBehaviorAPI.addSessionProperties(e):window.aurycReadyCb.push(function(){window.aurycBehaviorAPI.addSessionProperties(e)}))}var sessionPropsAutoCapture={setup:setup$1,addSessionProps:addSessionProps};function setup$2(){var e=config.getConfig("integrations","behavior");_.isDefined(e)&&!0===e.rulai&&initRulai()}var attempts$2=5;function _trackRulaiSession(e){e?(_safeAddSessionProp({rulaiSessionId:[e]}),_safeAddUserProp({rulaiSessionIdForUser:[e]})):0<attempts$2--&&setTimeout(function(){_trackRulaiSession(e)},1e3)}function initRulai(){window.addEventListener("message",function(e){if(e.origin&&-1<e.origin.indexOf("console.rul.ai")&&e.data)try{var t=JSON.parse(e.data);"emitRulaiSession"===t.type?(t.sessionId?_safeTrackEvent("Rulai Chat Started",{sessionid:t.sessionid}):_safeTrackEvent("Rulai Chat Started"),_trackRulaiSession(t.sessionId)):"liveAgentConnected"===t.type&&_safeTrackEvent("Rulai Agent Connected")}catch(e){}},!1)}function _safeTrackEvent(e,t){window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track?t?window.auryc.track(e,t):window.auryc.track(e):window.aurycReadyCb.push(function(){window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track&&(t?window.auryc.track(e,t):window.auryc.track(e))})}function _safeAddSessionProp(e){window.auryc&&window.auryc.addSessionProperties?window.auryc.addSessionProperties(e):window.aurycReadyCb.push(function(){window.auryc.addSessionProperties(e)})}function _safeAddUserProp(e){window.auryc&&window.auryc.addUserProperties?window.auryc.addUserProperties(e):window.aurycReadyCb.push(function(){window.auryc.addUserProperties(e)})}var extIntegration={setup:setup$2},UrlChangeTracker=(createClass(qwb,[{key:"init",value:function(){history.pushState&&window.addEventListener&&(this.path=this.getPath(),this.updateTrackerData=this.updateTrackerData.bind(this),this.originalPushState=history.pushState,history.pushState=function(e,t){this.title=t,this.originalPushState.apply(history,arguments),this.updateTrackerData()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){this.title=t,this.originalReplaceState.apply(history,arguments),this.updateTrackerData()}.bind(this),window.addEventListener("popstate",this.updateTrackerData))}},{key:"updateTrackerData",value:function(n){this.spaFlagNotified||(this.spaFlagNotified=!0,window.auryc.addInternalSessionProperties({isSpa:!0})),n=!1!==n,setTimeout(function(){var e=this.path,t=this.getPath();if(isURLEnabled()){if(globalSessionTracker.isCanceled()&&window.auryc.resume(),e!=t&&this.shouldTrackUrlChange.call(this,t,e)){this.path=t;var r=this.title||getDocumentTitle(document);if(config.isLimitedUrlTracking())return void AurycPubSub.publish(constants.events.TRACKCUSTOMEVENT,{eventType:constants.events.CUSTOM_EVENT,eventName:"__AR_SPA_ROUTE_CHANGE",eventProperties:{url:t,title:r},currentTime:_.now()});n&&(globalSessionTracker.incPV(),globalSessionTracker.setSpaSendPV(!0),this.handler({path:this.path,title:r,url:this.path})())}}else window.auryc.pause()}.bind(this),0)}},{key:"shouldTrackUrlChange",value:function(e,t){return e&&t&&!0!==window._auryc_is_inner_frame_detected_}},{key:"remove",value:function(){window.removeEventListener("popstate",this.updateTrackerData),history.replaceState=this.originalReplaceState,history.pushState=this.originalPushState,this.path=null,this.updateTrackerData=null,this.originalReplaceState=null,this.originalPushState=null}},{key:"getPath",value:function(){return obfuscateUrl(location.href)}},{key:"isObject",value:function(e){return"object"==(void 0===e?"undefined":_typeof(e))}}]),qwb);function qwb(e){classCallCheck(this,qwb),this.handler=e,this.spaFlagNotified=!1}var EventProcessorFactory=(createClass(Jwb,[{key:"getProcessor",value:function(e){return this.eventProcessors[e]}},{key:"setupEventProcessors",value:function(){this.eventProcessors[constants.events.CLICKTRACKER]=this.getClickEventProcessor(),this.eventProcessors[constants.events.PAGEVIEWTRACKER]=this.getPageViewProcessor(),this.eventProcessors[constants.events.FEEDBACKTRACKER]=this.getFeedbackEventProcessor(),this.eventProcessors[constants.events.USERIDENTIFY]=this.getIdentifyUserProcessor(),this.eventProcessors[constants.events.PINGTRIGGER]=this.getPingEventProcessor()}},{key:"getClickEventProcessor",value:function(){return function(e,t,r,n,i){var a;e=Object.assign(e,i),AurycPubSub.findTopic(constants.events.CLICKTRIGGER)?AurycPubSub.publish(constants.events.CLICKTRIGGER,e):a=setInterval(function(){AurycPubSub.publish(constants.events.CLICKTRIGGER,e)&&clearInterval(a)},100)}}},{key:"getPageViewProcessor",value:function(){var s=this;return function(e,t,r,n,i){var a,o=s.eventGenerator.getEvent(e,t,n,i);o&&(AurycPubSub.findTopic(constants.events.PAGEVIEWTRIGGER)?AurycPubSub.publish(constants.events.PAGEVIEWTRIGGER,o):a=setInterval(function(){AurycPubSub.publish(constants.events.PAGEVIEWTRIGGER,o)&&clearInterval(a)},100))}}},{key:"getIdentifyUserProcessor",value:function(){var o=this.eventWriter;return function(e,t,r,n){var i,a;globalSessionTracker.getSessionMetadata().isOver||(i=EventType.IdentifyUserT(),a=globalSessionTracker.getSessionMetadata().userId,n.userProperties?(i=EventType.UserProfileT(),o.append(i,{userId:a,payload:n.userProperties})):n.sessionProperties?(i=EventType.SessionPropT(),o.append(i,{payload:n.sessionProperties})):n.internalSessionProperties?(i=EventType.InternalSessionPropT(),o.append(i,{payload:n.internalSessionProperties})):n.sessionMerge?(i=EventType.MergeSessionT(),o.append(i,{u:n.sessionMerge})):o.append(i,_.extend({userId:a},n)))}}},{key:"getPingEventProcessor",value:function(){var t=this.eventWriter;return function(e){t.ping()}}},{key:"getEventProperties",value:function(){return superProperties.getSuperEventProperties(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT))}},{key:"getFeedbackEventProcessor",value:function(){var s=this,c=this.eventWriter;return function(e,t,r,n){var i=n.eventName;"Feedback Submitted"===i&&s.eventWriter.updateToCoBrowsing();var a=EventType.CustomEventT(),o=_extends({name:n.eventProperties.name,formId:n.eventProperties.formid,p:n.eventProperties.formid,et:n.eventProperties.et},s.getEventProperties());n.eventProperties.respid&&(o.respid=n.eventProperties.respid),c.append(a,{k:i,v:JSON.stringify(o),source:locationInfo()})}}}]),Jwb);function Jwb(e){classCallCheck(this,Jwb),this.storKey=config.getSiteid()+"_rec",this.browser=getInstance(),this.stg=e,this.eventWriter=EventWriter.getInstance(this.stg,this.storKey),this.eventWriter.setReady(),this.eventProcessors={},this.eventGenerator=EventGenerator.getInstance(),this.setupEventProcessors()}var EventManager=(createClass(Axb,[{key:"getHandler",value:function(r,n,e,i){return function(t){e&&e.forEach(function(e){e(t,r,n,i)})}}},{key:"addEventProcessor",value:function(e,t){this.eventProcessorMap[e]||(this.eventProcessorMap[e]=[]),this.eventProcessorMap[e].push(t)}},{key:"setupEventHandler",value:function(t,r){var n=this;AurycPubSub.addListener(t,function(e){n.getHandler(t,r,n.eventProcessorMap[t],e).call(n,t,r,n.eventProcessorMap[t],e)})}},{key:"setupPageviewHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}},{key:"setupURLChangeHandler",value:function(t,r){var n=this;new UrlChangeTracker(function(e){return function(){n.getHandler(r,t,n.eventProcessorMap[r],e).call(n,r,t,n.eventProcessorMap[r],e)}}).init()}},{key:"setupFeedbackHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}},{key:"setupCustomerHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}}],[{key:"setup",value:function(e){return this.instance||(this.instance=new Axb(e)),this.instance}}]),Axb);function Axb(e){classCallCheck(this,Axb),this.stg=e,this.eventProcessorMap={},this.eventProcessorFactory=new EventProcessorFactory(e),this.setupPageviewHandler(e,constants.events.PAGEVIEWTRACKER),this.setupFeedbackHandler(e,constants.events.FEEDBACKTRACKER),config.isSPAEnabled()&&this.setupURLChangeHandler(e,constants.events.PAGEVIEWTRACKER),this.setupCustomerHandler(e,constants.events.PINGTRIGGER),this.setupCustomerHandler(e,constants.events.USERIDENTIFY)}function init$3(e){if(config.isVisualEditorMode())return logger.warn("at: product disabled"),window.auryc=new LinkidAPI,void config.addShimAPIs();globalSessionTracker.initSession(e);var t=DataLayer.getInstance(constants.symbols.SESSION),r=setupIdentifyAPI(t,DataLayer.getInstance(constants.symbols.PERMANENT));r&&(config.runReadyCb(window.aurycEventPropertiesCb,r,"behavior"),setupEventManager(t,e),abtests.setup(),extIntegration.setup(),sessionPropsAutoCapture.setup())}function setupIdentifyAPI(e,t){var r=new IdentifyAPI("",e,t);if(!config.isProductEnabled("behavior")||isFeedbackPreview()||config.isVisualEditorMode()){var n={_isBehaviorTrackingEnabled:function(){return!1}};return r._makePublic(n),logger.warn("ubt: product disabled"),!1}return logger.log("ubt: product enabled"),logger.log("ubt: domReady"),config.isSnapshotEnabled()&&r._loadEventGroups(function(e){AurycSP.setEventGroups(e)}),r._makePublic(r)}function isFeedbackPreview(){var e=window.location.hash,t=!!getHashParam(e,"previewmode"),r=!!getHashParam(e,"previewbadgemode")||!!getHashParam(e,"previewfbtabmode");return t||r}function setupEventManager(e,t){EventManager.setup(e,document),t||globalSessionTracker.initPV();var r=setInterval(function(){AurycPubSub.publish(constants.events.UBTINIT)&&clearInterval(r)},200)}var behavior={init:init$3},RecordAPI=(createClass(Byb,[{key:"_isReplayProductEnabled",value:function(){return this.enabled}},{key:"getReplayUrl",value:function(e,t){try{var r,n,i=globalSessionTracker.getSessionMetadata().siteId,a=globalSessionTracker.getSessionMetadata().sessionId;e&&"function"==typeof e&&(r="utm_source=integration"+(t?"&utm_medium="+t.substr(0,256):""),n=config.getConfig("replay_url")+i+":"+a+"&"+r,logger.log("playback url:"+n),e(n))}catch(e){logger.warn("Exception in get replay url: ",e)}}},{key:"replayUrl",value:function(){try{var e=globalSessionTracker.getSessionMetadata().siteId,t=globalSessionTracker.getSessionMetadata().sessionId;return config.getConfig("replay_url")+e+":"+t}catch(e){return"Not available"}}},{key:"getReplayUrlGA",value:function(e){this.getReplayUrl(e,"ga")}},{key:"getReplayUrlNR",value:function(e){this.getReplayUrl(e,"nr")}},{key:"getReplayUrlAdobe",value:function(e){this.getReplayUrl(e,"adobe")}},{key:"getReplayUrlIntercom",value:function(e){this.getReplayUrl(e,"intercom")}},{key:"setDisableTextCapture",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e;RcController.getInstance().setDisableTextCapture(t)}}]),Byb);function Byb(e){classCallCheck(this,Byb),this.enabled=e}function init$4(e){if(!config.isProductEnabled("record"))return logger.warn("record product disabled"),void(window.aurycRecordAPI=new RecordAPI(!1));logger.log("record product enabled");var t=RcController.getInstance(window);config.isVisualEditorMode()?window.aurycRecordAPI=new RecordAPI(!1):(t.init(!0,e),window.aurycRecordAPI=new RecordAPI(!0))}var record$1={init:init$4};function getHashParam$2(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null}function loadScript(e,t){var r=document.createElement("script");r.type="text/javascript",r.charset="UTF-8",r.src=e,t&&(r.onload=t);var n=document.getElementsByTagName("script");0<n.length?n[0].parentNode.insertBefore(r,n[0]):document.head.appendChild(r)}function loadCss(e,t){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.charset="UTF-8",r.href=e,t&&(r.onload=t),document.head.appendChild(r)}function loadEventEditor(e){var t;window.aurycLoadEditor||(loadScript((t=config.getConfig("editor_uri","base"))+"/preload.js"),loadCss(t+"/editor.css"),loadScript(t+"/editor.js",function(){window.aurycLoadEditor(e)}),getLinkIdHandler().process())}function initEventEditor(e){var t;Boolean.toString().indexOf("[native code]")<0&&(t=document.createElement("iframe"),document.documentElement.appendChild(t),window.Boolean=t.contentWindow.Boolean,document.documentElement.removeChild(t)),loadEventEditor({exitEditorMode:exitEditorMode,siteId:config.getConfig("siteid"),siteToken:config.getSiteToken(),oauthToken:e.getByKey(constants.event_marker_keys.OAuthToken),storage:e,timeZone:e.getByKey("_aurycTimeZone"),utils:{eventElements:{normalize:normalize,attrCode:attrCode}}})}function isMatchingSite(e,t){if(e&&t){var r=config.getConfig("siteid"),n=config.getSiteToken();if(e===r&&t===n)return 1}}function updateQuery(e){if(!e)return{};var t=e.indexOf("?");return t<0?{query:"",hash:e}:{query:window.location.query?"&"+e.substring(t+1):"?"+e.substring(t+1),hash:e.substring(0,t)}}function pruneHash(e){if(e){var t=e.split("#");return"#"+t[0]+t[1]}return e}function init$5(e){try{var t,r={};(e=e||window.location.hash||"")&&"editor"===getHashParam$2(e,"mode")||window.name&&0===window.name.indexOf("auryc_eventmarker:#mode=editor")&&(e=window.name.split(":")[1]||"");var n=updateQuery(e=pruneHash(e));e=n.hash;var i=n.query||"";if(e&&"editor"===getHashParam$2(e,"mode")){var a=window.location.href,o=a.indexOf("mode=editor"),s=a.charAt(o-1);"#"!==s&&"&"!==s||o--,"#"===s&&"?"===a.charAt(o-2)&&o--;var c,l,g,u,d=window.history.length;history.replaceState("",document.title,a.substring(0,o)+i);var h=getHashParam$2(e,"t"),p=encoder.decodeBase64(h||"");if(!p)return;if(l=getHashParam$2(p,"siteId").trim(),g=getHashParam$2(p,"siteToken").trim(),c=getHashParam$2(p,"timeZone").trim(),!(u=getHashParam$2(p,"oauthToken").trim()))return void console.log("Oauth token is missing");if(r[constants.event_marker_keys.OAuthToken]=u,!isMatchingSite(l,g))return void console.log("siteId or siteToken does not match");c&&(r[constants.event_marker_keys.AurycTimeZone]=c);var f=getHashParam$2(e,"mode");r[constants.event_marker_keys.AurycHashKey]=f,r[constants.event_marker_keys.TimeTraveling]=d,r[constants.event_marker_keys.AurycMode]="edit",r[constants.linkid.editorHash]=h,r[constants.event_marker_keys.OriginalHash]=e,initEventEditor(t=globalSessionTracker.setSessionValues(r)),handleIframe(e)}else"editor"===(t=globalSessionTracker.getSession(constants.event_marker_keys)).getByKey(constants.event_marker_keys.AurycHashKey)&&(initEventEditor(t),handleIframe())}catch(e){}}function getWinObject(e){var t=void 0;return e&&e.contentWindow?t=e.contentWindow:e&&e.contentDocument&&e.contentDocument.defaultView&&(t=e.contentDocument.defaultView),t&&t!==t.top?t:null}function launchInIframe(){for(var a=document.querySelectorAll("iframe"),e=0;e<a.length;e++){var t=function(e){var t=getWinObject(a[e]);if(!t)return{v:void 0};try{if(!t.launchAurycEventMarker){var r=t.document.createElement("script"),n=t.document.head||t.document.body,i='window["_auryc_is_event_marker_override_"]=true';try{r.type="text/javascript",r.charset="UTF-8",r.appendChild(t.document.createTextNode(i)),n.appendChild(r)}catch(e){r.text=i,document.body.appendChild(r)}(r=t.document.createElement("script")).type="text/javascript",r.charset="UTF-8",r.src=config.getConfig("script_uri")+"/"+config.getSiteid()+"/container.js",n.appendChild(r)}}catch(e){}setTimeout(function(){launchEMInIframe(t)},1e3)}(e);if("object"===(void 0===t?"undefined":_typeof(t)))return t.v}}function launchEMInIframe(e){var t=globalSessionTracker.getSession(constants.event_marker_keys).getByKey(constants.event_marker_keys.OriginalHash),r={source:"_ar_",content:{cmd:{command:constants.event_marker_keys.LAUNCH_EVENT_MARER,hash:t}}};try{e.postMessage(r,"*")}catch(e){}}function handleIframe(e){setTimeout(function(){launchInIframe(e)},1e3)}function exitEditorMode(){var e;window.name&&0===window.name.indexOf("auryc_eventmarker:#mode=editor")&&((e=window.name.split(":")).splice(1,2),window.name=e.join(":")),globalSessionTracker.setSessionValues(defineProperty$2({},constants.event_marker_keys.AurycHashKey,""))}function launchEditor(e){init$5(e)}window.launchAurycEventMarker=launchEditor;var visualeditor={init:init$5},e,t$1,n,i$1,r=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},a$1=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var r=new PerformanceObserver(function(e){return e.getEntries().map(t)});return r.observe({type:e,buffered:!0}),r}}catch(e){}},o=function(t,r){function n(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),r&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},u=function(t){addEventListener("pageshow",function(e){e.persisted&&t(e)},!0)},c=function(t,r,n){var i;return function(e){0<=r.value&&(e||n)&&(r.delta=r.value-(i||0),!r.delta&&void 0!==i||(i=r.value,t(r)))}},f=-1,s=function(){return"hidden"===document.visibilityState?0:1/0},m=function(){o(function(e){var t=e.timeStamp;f=t},!0)},v=function(){return f<0&&(f=s(),m(),u(function(){setTimeout(function(){f=s(),m()},0)})),{get firstHiddenTime(){return f}}},d=function(t,n){function e(e){"first-contentful-paint"===e.name&&(l&&l.disconnect(),e.startTime<a.firstHiddenTime&&(o.value=e.startTime,o.entries.push(e),i(!0)))}var i,a=v(),o=r("FCP"),s=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],l=s?null:a$1("paint",e);(s||l)&&(i=c(t,o,n),s&&e(s),u(function(e){o=r("FCP"),i=c(t,o,n),requestAnimationFrame(function(){requestAnimationFrame(function(){o.value=performance.now()-e.timeStamp,i(!0)})})}))},p=!1,l=-1,h$1=function(t,e){p||(d(function(e){l=e.value}),p=!0);function n(e){-1<l&&t(e)}function i(e){var t,r;e.hadRecentInput||(t=h[0],r=h[h.length-1],g&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(g+=e.value,h.push(e)):(g=e.value,h=[e]),g>s.value&&(s.value=g,s.entries=h,a()))}var a,s=r("CLS",0),g=0,h=[],f=a$1("layout-shift",i);f&&(a=c(n,s,e),o(function(){f.takeRecords().map(i),a(!0)}),u(function(){l=-1,s=r("CLS",g=0),a=c(n,s,e)}))},T={passive:!0,capture:!0},y=new Date,g=function(t,r){e||(e=r,t$1=t,n=new Date,w(removeEventListener),E())},E=function(){var t;0<=t$1&&t$1<n-y&&(t={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t$1},i$1.forEach(function(e){e(t)}),i$1=[])},S=function(e){var t,r,n,i;function a(){g(r,n),i()}function o(){i()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(r=t,n=e,i=function(){removeEventListener("pointerup",a,T),removeEventListener("pointercancel",o,T)},addEventListener("pointerup",a,T),addEventListener("pointercancel",o,T)):g(t,e))},w=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,S,T)})},L=function(t,n){function i(e){e.startTime<a.firstHiddenTime&&(s.value=e.processingStart-e.startTime,s.entries.push(e),g(!0))}var a=v(),s=r("FID"),l=a$1("first-input",i),g=c(t,s,n);l&&o(function(){l.takeRecords().map(i),l.disconnect()},!0),l&&u(function(){s=r("FID"),g=c(t,s,n),i$1=[],t$1=-1,e=null,w(addEventListener),i$1.push(i),E()})},b={},F=function(t,n){function e(e){var t=e.startTime;t<s.firstHiddenTime&&(l.value=t,l.entries.push(e),i())}var i,a,s=v(),l=r("LCP"),g=a$1("largest-contentful-paint",e);g&&(i=c(t,l,n),a=function(){b[l.id]||(g.takeRecords().map(e),g.disconnect(),b[l.id]=!0,i(!0))},["keydown","click"].forEach(function(e){addEventListener(e,a,{once:!0,capture:!0})}),o(a,!0),u(function(e){l=r("LCP"),i=c(t,l,n),requestAnimationFrame(function(){requestAnimationFrame(function(){l.value=performance.now()-e.timeStamp,b[l.id]=!0,i(!0)})})}))},P=function(t){var n=r("TTFB"),e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var r in e)"navigationStart"!==r&&"toJSON"!==r&&(t[r]=Math.max(e[r]-e.navigationStart,0));return t}();if(n.value=n.delta=e.responseStart,n.value<0||n.value>performance.now())return;n.entries=[e],t(n)}catch(e){}};"complete"===document.readyState?setTimeout(e,0):addEventListener("load",function(){return setTimeout(e,0)})},webvitals={},wvtimeoutid=null;function trackCoreWebVitals(){function e(e){var t,r=e.name,n=e.value,i=r&&r.toLowerCase();"cls"===i&&(n*=1e3),webvitals[r]=n,config.isEnhancedHM()&&("lcp"!==i||(t=ReplayProcessor.getInstance(window))&&(window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track&&window.auryc.track("HM_LCP",{_auryc_intl_:!0}),t.generateHTML(!0,null,null,!0))),wvtimeoutid&&window.clearTimeout(wvtimeoutid),wvtimeoutid=setTimeout(function(){webvitals._auryc_intl_=!0,window.auryc&&window.auryc.track&&"function"==typeof window.auryc.track&&window.auryc.track("WebVitals",webvitals),webvitals={}},3e3)}h$1(e),d(e),L(e),F(e),P(e)}function trackNetworkInfo(){var t,r,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:navigator,i=n.connection||n.mozConnection||n.webkitConnection;i&&(t={downlink:"Mbps",downlinkMax:"Mbps",effectiveType:"",rtt:"ms",setData:"",type:""},r={},_.each(Object.keys(t),function(e){i[e]&&(r["netinfo-"+e]=i[e]+t[e])}),_.isEmpty(r)||e.auryc.addSessionProperties(r))}var MAX_MEMORY_LIMIT=1048576*(config.getMemoryCheckLimit()||100),MAX_PERCENT_THRESHOLD=config.getMemoryCheckThreshold()||10,CHECK_INTERVAL=config.getMemoryCheckInterval()||2e3;function trackMemoryUsage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;e.performance&&e.performance.memory&&e.performance.now&&config.getMemoryMonitorEnabled()&&(e.auryc?monitorMemory(e):setTimeout(trackMemoryUsage,CHECK_INTERVAL))}function unregister(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;e.auryc.addInternalSessionProperties({"Auryc Unregistered":!0,"Used Memory Size":e.performance.memory.usedJSHeapSize,"Memory Limit":e.performance.memory.jsHeapSizeLimit,"Memory Overage Time":performance.now()}),e.auryc.unregister(),e.bloatMemoryTest&&e.clearInterval(e.bloatMemoryTest)}function monitorMemory(t){var r=!1,n=t.performance.memory.usedJSHeapSize;setTimeout(function e(){t.performance.memory.usedJSHeapSize-n>MAX_MEMORY_LIMIT&&(r=!0,unregister(t)),t.performance.memory.usedJSHeapSize>MAX_PERCENT_THRESHOLD/100*t.performance.memory.jsHeapSizeLimit&&(r=!0,unregister(t)),r||setTimeout(e,CHECK_INTERVAL)},CHECK_INTERVAL)}var isInitAuRecord=!1;function initModules(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];isInitAuRecord||(t=config.isVisualEditorMode(),r||EventType.init(),behavior.init(e,r),visualeditor.init(),isURLEnabled()||browser$1.removeFBStyle(window,config.isFeedbackEnabled()),isURLEnabled()&&!t&&(record$1.init(e,r),config.basicMode()||r||FbModule.getInstance().init()),api$1.init(),globalOverride(),isInitAuRecord=!0)}function initTracking(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;isURLEnabled()&&(trackMemoryUsage(e),config.isWebVitalsEnabled()&&config.isInWebVitalsSamplingPool()&&trackCoreWebVitals(),config.isNetworkInfoEnabled()&&trackNetworkInfo())}function initProducts(){if(globalSessionTracker.isUnregistered())return console.log("Auryc is unregistered"),window.auryc=window.auryc||{},void _.each(["track","identify","addFBCustomData","addUserProperties","addSessionProperties","addInternalSessionProperties","getReplayUrl","setFeedbackEnabled","clearUserCookie","addFBSubmitHandler","addFBCancelHandler","addEventProperties","removeEventProperty","removeAllEventProperties","pause","resume"],function(e){void 0===window.auryc[e]&&(window.auryc[e]=function(){})});var e;!0===window._auryc_is_inner_frame_||config.isVisualEditorMode()||!urls.isCrossDomainIframe()&&!urls.isDuplicateSameDomainIframe()?(initModules(),initTracking(),window.addEventListener("message",function(e){try{var t,r,n,i,a,o,s=e.data;s&&s.source&&s.content&&"_ar_"===s.source&&(n=void 0===(r=(t=s.content).siteId)?config.getSiteid():r,(i=t.cmd)&&config.getSiteid()===n&&("pause"===i.command?window.auryc.pause():"resume"===i.command?window.auryc.resume():"unregister"===i.command?window.auryc.unregister():"extendSession"===i.command?globalSessionTracker&&globalSessionTracker.resetTimer():i.command===constants.LAUNCH_EVENT_MARER?(a=i.hash,logger.liveDebug("received event marker command on "+window.location.href),initEventMarker(a)):"initInnerFrame"===i.command&&(o=getSessionData(getFrameByEvent(e)),ReplayProcessor.getInstance(window,t).enqueueIframe(e,o))))}catch(e){}})):urls.isCrossDomainIframe()?(window._auryc_is_inner_frame_detected_=!0,window.addEventListener("message",function(e){try{var t=e.data;if(t&&t.source&&"_ar_"===t.source){var r=t.content||{},n=r.isOver,i=r.sessionId,a=r.viewId,o=r.cmd;if(r.siteId!==config.getSiteid())return;if(n)return void(globalSessionTracker&&globalSessionTracker.endIframeSession(!0));if(o?"pause"===o.command?window.auryc.pause():"resume"===o.command?window.auryc.resume():o.command===constants.event_marker_keys.LAUNCH_EVENT_MARER&&initEventMarker(o.hash):t.command===constants.event_marker_keys.EM_EDITOR_MODE&&(config.isVisualEditorMode()||initEventMarker(t.hash)),i&&a)if(config.enableProduct(!0),r.parentWin=e.source,isInitAuRecord)try{var s=ReplayProcessor.getInstance(window,r);s.setProcXPath(r.fpath),globalSessionTracker.syncPVInFrame(r.pv),globalSessionTracker.setSpaSendPV(r.spaSendPV),s.sendFramePage()}catch(e){}else initModules(r)}}catch(e){}}),isInitAuRecord||"interactive"!==document.readyState&&"complete"!==document.readyState||(e={source:"_ar_",content:{siteId:config.getSiteid(),cmd:{command:"initInnerFrame"}}},window.parent.postMessage(e,"*"))):logger.liveDebug("Not initializaing Auryc lib on:"+window.location.href)}function initEventMarker(e){visualeditor.init(e)}function getSessionData(e){var t=globalSessionTracker.getSessionMetadata(),r=globalCacheObj.getNodeXPath(e).join(","),n=globalSessionTracker.getPVFromSessStorage(),i={source:"_ar_",content:_extends({fpath:r,pv:n},t)},a=dom.getPosInTopFrame(e,dom.getContainingWinObj(e)),o=globalSessionTracker.isSpaSendPV();return i.content.myCoordinates=a,i.content.frameIdx=ReplayProcessor.getInstance().getIframeIndex(e),i.content.spaSendPV=o,i}function getFrameByEvent(t){return Array.from(document.getElementsByTagName("iframe")).filter(function(e){return e.contentWindow===t.source})[0]}function fail(){logger.error("Auryc SDK is not initizlied")}function polyFillIE(){function e(e){if(null==this)throw TypeError();var t=String(this),r=t.length,n=e?Number(e):0;if(n!=n&&(n=0),!(n<0||r<=n)){var i,a=t.charCodeAt(n);return 55296<=a&&a<=56319&&n+1<r&&56320<=(i=t.charCodeAt(n+1))&&i<=57343?1024*(a-55296)+i-56320+65536:a}}var t;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0}),String.prototype.codePointAt||((t=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}())?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e)}function polyfill$1(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,i=arguments[1],a=0;a<n;a++)if(t=r[a],e.call(i,t,a,r))return t},writable:!0,configurable:!0}),Array.prototype.some||Object.defineProperty(Array.prototype,"some",{value:function(e,t){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var r=Object(this),n=r.length>>>0,i=0;i<n;i++)if(i in r&&e.call(t,r[i],i,r))return!0;return!1},writable:!0,configurable:!0}),polyFillIE()}function globalOverride(){var o;!0===config.getConfig("crossdomain","behavior")&&(window.open=(o=window.open,function(e,t,r){var n,i=window.auryc&&window.auryc.getAurycLinkId(),a=config.getArLinkid();return e.indexOf(a)<0&&i&&(n=(e.indexOf("?")+1?"&":"?")+a+"="+i,e=e.indexOf("#")+1?e.replace("#",n+"#"):e+n),o.call?o.call(window,e,t,r):o(e,t,r)}))}try{polyfill$1(),utils.init(initProducts,fail)}catch(e){}}()}catch(e){"undefined"!=typeof window&&window&&window.localStorage&&"true"===window.localStorage.getItem("ardebug")&&console.log("exception in lib:",e)}
